{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\src\\components\\jeecg\\JVxeTable\\utils\\vxeUtils.js","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JVxeTable\\utils\\vxeUtils.js","mtime":1615948814805},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDpcXHZ1ZVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWUvcmVnZW5lcmF0b3IiOwoKZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gInN5bWJvbCIpIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9OyB9IGVsc2UgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/ICJzeW1ib2wiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9CgpmdW5jdGlvbiBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csIGtleSwgYXJnKSB7IHRyeSB7IHZhciBpbmZvID0gZ2VuW2tleV0oYXJnKTsgdmFyIHZhbHVlID0gaW5mby52YWx1ZTsgfSBjYXRjaCAoZXJyb3IpIHsgcmVqZWN0KGVycm9yKTsgcmV0dXJuOyB9IGlmIChpbmZvLmRvbmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0gZWxzZSB7IFByb21pc2UucmVzb2x2ZSh2YWx1ZSkudGhlbihfbmV4dCwgX3Rocm93KTsgfSB9CgpmdW5jdGlvbiBfYXN5bmNUb0dlbmVyYXRvcihmbikgeyByZXR1cm4gZnVuY3Rpb24gKCkgeyB2YXIgc2VsZiA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHM7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHZhciBnZW4gPSBmbi5hcHBseShzZWxmLCBhcmdzKTsgZnVuY3Rpb24gX25leHQodmFsdWUpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAibmV4dCIsIHZhbHVlKTsgfSBmdW5jdGlvbiBfdGhyb3coZXJyKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgInRocm93IiwgZXJyKTsgfSBfbmV4dCh1bmRlZmluZWQpOyB9KTsgfTsgfQoKaW1wb3J0IHsgZ2V0Vm1QYXJlbnRCeU5hbWUgfSBmcm9tICdAL3V0aWxzL3V0aWwnOwppbXBvcnQgeyBKVlhFVHlwZXMgfSBmcm9tICdAY29tcC9qZWVjZy9KVnhlVGFibGUvaW5kZXgnOwpleHBvcnQgdmFyIFZBTElEQVRFX0ZBSUxFRCA9IFN5bWJvbCgpOwovKioNCiAqIOiOt+WPluaMh+WumueahCAkcmVmcyDlr7nosaENCiAqIOacieaXtuWAmeWPr+iDveS8mumBh+WIsOe7hOS7tuacquaMgui9veWIsOmhtemdouS4reeahOaDheWGte+8jOWvvOiHtOaXoOazleiOt+WPliAkcmVmcyDkuK3nmoTmn5DkuKrlr7nosaENCiAqIOi/meS4quaWueazleWPr+S7peetieW+heaMgui9veWujOaIkOS5i+WQjuWGjei/lOWbniAkcmVmcyDnmoTlr7nosaHvvIzpgb/lhY3miqXplJkNCiAqIEBhdXRob3Igc3VuamlhbmxlaQ0KICoqLwoKZXhwb3J0IGZ1bmN0aW9uIGdldFJlZlByb21pc2Uodm0sIG5hbWUpIHsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIChmdW5jdGlvbiBuZXh0KCkgewogICAgICB2YXIgcmVmID0gdm0uJHJlZnNbbmFtZV07CgogICAgICBpZiAocmVmKSB7CiAgICAgICAgcmVzb2x2ZShyZWYpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgbmV4dCgpOwogICAgICAgIH0sIDEwKTsKICAgICAgfQogICAgfSkoKTsKICB9KTsKfQovKiog6I635Y+W5p+Q5LiA5pWw5a2X6L6T5YWl5qGG5YiX5Lit55qE5pyA5aSn55qE5YC8ICovCgpleHBvcnQgZnVuY3Rpb24gZ2V0SW5wdXROdW1iZXJNYXhWYWx1ZShjb2wsIHJvd3NWYWx1ZXMpIHsKICB2YXIgbWF4TnVtID0gMDsKICBPYmplY3QudmFsdWVzKHJvd3NWYWx1ZXMpLmZvckVhY2goZnVuY3Rpb24gKHJvd1ZhbHVlLCBpbmRleCkgewogICAgdmFyIHZhbCA9IHJvd1ZhbHVlW2NvbC5rZXldLAogICAgICAgIG51bTsKCiAgICB0cnkgewogICAgICBudW0gPSBOdW1iZXIucGFyc2VGbG9hdCh2YWwpOwogICAgfSBjYXRjaCAoX3VudXNlZCkgewogICAgICBudW0gPSAwOwogICAgfSAvLyDmiorpppbmrKHlvqrnjq/nmoTnu5PmnpzlvZPmiJDmnIDlpKflgLwKCgogICAgaWYgKGluZGV4ID09PSAwKSB7CiAgICAgIG1heE51bSA9IG51bTsKICAgIH0gZWxzZSB7CiAgICAgIG1heE51bSA9IG51bSA+IG1heE51bSA/IG51bSA6IG1heE51bTsKICAgIH0KICB9KTsKICByZXR1cm4gbWF4TnVtOwp9Ci8qKg0KICoNCiAqIOagueaNriB0YWdOYW1lIOiOt+WPlueItue6p+iKgueCuQ0KICoNCiAqIEBwYXJhbSBkb20g5LiA57qnZG9t6IqC54K5DQogKiBAcGFyYW0gdGFnTmFtZSDmoIfnrb7lkI3vvIzkuI3ljLrliIblpKflsI/lhpkNCiAqIEByZXR1cm4ge0hUTUxFbGVtZW50IHwgTlVMTH0NCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGdldFBhcmVudE5vZGVCeVRhZ05hbWUoZG9tKSB7CiAgdmFyIHRhZ05hbWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdib2R5JzsKCiAgaWYgKHRhZ05hbWUgPT09ICdib2R5JykgewogICAgcmV0dXJuIGRvY3VtZW50LmJvZHk7CiAgfQoKICBpZiAoZG9tLnBhcmVudE5vZGUpIHsKICAgIGlmIChkb20ucGFyZW50Tm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09IHRhZ05hbWUudHJpbSgpLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgcmV0dXJuIGRvbS5wYXJlbnROb2RlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGdldFBhcmVudE5vZGVCeVRhZ05hbWUoZG9tLnBhcmVudE5vZGUsIHRhZ05hbWUpOwogICAgfQogIH0gZWxzZSB7CiAgICByZXR1cm4gbnVsbDsKICB9Cn0KLyoqDQogKiB2eGUgY29sdW1ucyDlsIHoo4XmiJDpq5jnuqfmn6Xor6Llj6/or4bliKvnmoTpgInpobkNCiAqIEBwYXJhbSBjb2x1bW5zDQogKiBAcGFyYW0gaGFuZGxlciDljZXni6zlpITnkIbmlrnms5UNCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIHZ4ZVBhY2thZ2VUb1N1cGVyUXVlcnkoY29sdW1ucywgaGFuZGxlcikgewogIGlmIChBcnJheS5pc0FycmF5KGNvbHVtbnMpKSB7CiAgICAvLyDpq5jnuqfmn6Xor6LmiYDpnIDopoHnmoTlj4LmlbAKICAgIHZhciBmaWVsZExpc3QgPSBbXTsgLy8g6YGN5Y6G5YiXCgogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb2x1bW5zLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBjb2wgPSBjb2x1bW5zW2ldOwoKICAgICAgaWYgKGNvbC50eXBlID09PSBKVlhFVHlwZXMucm93Q2hlY2tib3ggfHwgY29sLnR5cGUgPT09IEpWWEVUeXBlcy5yb3dSYWRpbyB8fCBjb2wudHlwZSA9PT0gSlZYRVR5cGVzLnJvd0V4cGFuZCB8fCBjb2wudHlwZSA9PT0gSlZYRVR5cGVzLnJvd051bWJlcikgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICB2YXIgZmllbGQgPSB7CiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgdmFsdWU6IGNvbC5rZXksCiAgICAgICAgdGV4dDogY29sLnRpdGxlLAogICAgICAgIGRpY3RDb2RlOiBjb2wuZGljdENvZGUgfHwgY29sLmRpY3QKICAgICAgfTsKCiAgICAgIGlmIChjb2wudHlwZSA9PT0gSlZYRVR5cGVzLmRhdGUgfHwgY29sLnR5cGUgPT09IEpWWEVUeXBlcy5kYXRldGltZSkgewogICAgICAgIGZpZWxkLnR5cGUgPSBjb2wudHlwZTsKICAgICAgICBmaWVsZC5mb3JtYXQgPSBjb2wuZm9ybWF0OwogICAgICB9CgogICAgICBpZiAoY29sLnR5cGUgPT09IEpWWEVUeXBlcy5pbnB1dE51bWJlcikgewogICAgICAgIGZpZWxkLnR5cGUgPSAnaW50JzsKICAgICAgfQoKICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sLm9wdGlvbnMpKSB7CiAgICAgICAgZmllbGQub3B0aW9ucyA9IGNvbC5vcHRpb25zOwogICAgICB9CgogICAgICBpZiAodHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICBPYmplY3QuYXNzaWduKGZpZWxkLCBoYW5kbGVyKGNvbCwgaWR4KSk7CiAgICAgIH0KCiAgICAgIGZpZWxkTGlzdC5wdXNoKGZpZWxkKTsKICAgIH0KCiAgICByZXR1cm4gZmllbGRMaXN0OwogIH0gZWxzZSB7CiAgICBjb25zb2xlLmVycm9yKCdjb2x1bW5z5b+F6aG75piv5LiA5Liq5pWw57uEJyk7CiAgfQoKICByZXR1cm4gbnVsbDsKfQovKioNCiAqIOS4gOasoeaAp+mqjOivgeS4u+ihqOWNleWSjOaJgOacieeahOasoeihqOWNlQ0KICogQHBhcmFtIGZvcm0g5Li76KGo5Y2VIGZvcm0g5a+56LGhDQogKiBAcGFyYW0gY2FzZXMg5o6l5pS25LiA5Liq5pWw57uE77yM5q+P6aG56YO95piv5LiA5LiqSlZ4ZVRhYmxl5a6e5L6LDQogKiBAcGFyYW0gYXV0b0p1bXBUYWINCiAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59DQogKiBAYXV0aG9yIHN1bmppYW5sZWkNCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRm9ybUFuZFRhYmxlcyhfeCwgX3gyLCBfeDMpIHsKICByZXR1cm4gX3ZhbGlkYXRlRm9ybUFuZFRhYmxlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9Ci8qKg0KICog6aqM6K+B5bm26I635Y+W5LiA5Liq5oiW5aSa5Liq6KGo5qC855qE5omA5pyJ5YC8DQogKg0KICogQHBhcmFtIGNhc2VzIOaOpeaUtuS4gOS4quaVsOe7hO+8jOavj+mhuemDveaYr+S4gOS4qkpWeGVUYWJsZeWunuS+iw0KICogQHBhcmFtIGF1dG9KdW1wVGFiIOagoemqjOWksei0peWQju+8jOaYr+WQpuiHquWKqOi3s+i9rHRhYumAiemhuQ0KICovCgpmdW5jdGlvbiBfdmFsaWRhdGVGb3JtQW5kVGFibGVzKCkgewogIF92YWxpZGF0ZUZvcm1BbmRUYWJsZXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGZvcm0sIGNhc2VzLCBhdXRvSnVtcFRhYikgewogICAgdmFyIGRhdGFNYXAsIHZhbHVlcywgc3ViRGF0YTsKICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHsKICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChmb3JtICYmIHR5cGVvZiBmb3JtLnZhbGlkYXRlRmllbGRzID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRocm93ICJmb3JtIFx1NTNDMlx1NjU3MFx1OTcwMFx1ODk4MVx1NzY4NFx1NjYyRlx1NEUwMFx1NEUyQWZvcm1cdTVCRjlcdThDNjFcdUZGMENcdTgwMENcdTRGMjBcdTUxNjVcdTc2ODRcdTUzNzRcdTY2MkYiLmNvbmNhdChfdHlwZW9mKGZvcm0pKTsKCiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGRhdGFNYXAgPSB7fTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgICAgICAgLy8g6aqM6K+B5Li76KGo6KGo5Y2VCiAgICAgICAgICAgICAgZm9ybS52YWxpZGF0ZUZpZWxkcyhmdW5jdGlvbiAoZXJyLCB2YWx1ZXMpIHsKICAgICAgICAgICAgICAgIGVyciA/IHJlamVjdCh7CiAgICAgICAgICAgICAgICAgIGVycm9yOiBWQUxJREFURV9GQUlMRUQsCiAgICAgICAgICAgICAgICAgIG9yaWdpbkVycm9yOiBlcnIKICAgICAgICAgICAgICAgIH0pIDogcmVzb2x2ZSh2YWx1ZXMpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHZhbHVlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YU1hcCwgewogICAgICAgICAgICAgIGZvcm1WYWx1ZTogdmFsdWVzCiAgICAgICAgICAgIH0pOyAvLyDpqozor4HmiYDmnInlrZDooajnmoTooajljZUKCiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVUYWJsZXMoY2FzZXMsIGF1dG9KdW1wVGFiKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIHN1YkRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAvLyDlkIjlubbmnIDnu4jmlbDmja4KICAgICAgICAgICAgZGF0YU1hcCA9IE9iamVjdC5hc3NpZ24oZGF0YU1hcCwgewogICAgICAgICAgICAgIHRhYmxlc1ZhbHVlOiBzdWJEYXRhCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkYXRhTWFwKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKTsKICByZXR1cm4gX3ZhbGlkYXRlRm9ybUFuZFRhYmxlcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CgpleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUYWJsZXMoY2FzZXMpIHsKICB2YXIgYXV0b0p1bXBUYWIgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CgogIGlmICghQXJyYXkuaXNBcnJheShjYXNlcykpIHsKICAgIHRocm93ICIndmFsaWRhdGVUYWJsZXMnXHU1MUZEXHU2NTcwXHU3Njg0J2Nhc2VzJ1x1NTNDMlx1NjU3MFx1OTcwMFx1ODk4MVx1NzY4NFx1NjYyRlx1NEUwMFx1NEUyQVx1NjU3MFx1N0VDNFx1RkYwQ1x1ODAwQ1x1NEYyMFx1NTE2NVx1NzY4NFx1NTM3NFx1NjYyRiIuY29uY2F0KF90eXBlb2YoY2FzZXMpKTsKICB9CgogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgdGFibGVzRGF0YSA9IFtdOwogICAgdmFyIGluZGV4ID0gMDsKCiAgICBpZiAoIWNhc2VzIHx8IGNhc2VzLmxlbmd0aCA9PT0gMCkgewogICAgICByZXNvbHZlKCk7CiAgICB9CgogICAgKGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciB2bSA9IGNhc2VzW2luZGV4XTsKICAgICAgdm0udmFsaWRhdGVUYWJsZSgpLnRoZW4oZnVuY3Rpb24gKGVyck1hcCkgewogICAgICAgIC8vIOagoemqjOmAmui/hwogICAgICAgIGlmICghZXJyTWFwKSB7CiAgICAgICAgICB0YWJsZXNEYXRhW2luZGV4XSA9IHZtLmdldEFsbCgpOyAvLyDliKTmlq3moKHpqozmmK/lkKblhajpg6jlrozmiJDvvIzlrozmiJDov5Tlm57miJDlip/vvIzlkKbliJnnu6fnu63ov5vooYzkuIvkuIDmraXmoKHpqowKCiAgICAgICAgICBpZiAoKytpbmRleCA9PT0gY2FzZXMubGVuZ3RoKSB7CiAgICAgICAgICAgIHJlc29sdmUodGFibGVzRGF0YSk7CiAgICAgICAgICB9IGVsc2UgbmV4dCgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyDlsJ3or5Xojrflj5Z0YWJLZXnvvIzlpoLmnpzlnKhBVGFi57uE5Lu25YaF5Y2z5Y+v6I635Y+WCiAgICAgICAgICB2YXIgcGFuZUtleTsKICAgICAgICAgIHZhciB0YWJQYW5lID0gZ2V0Vm1QYXJlbnRCeU5hbWUodm0sICdBVGFiUGFuZScpOwoKICAgICAgICAgIGlmICh0YWJQYW5lKSB7CiAgICAgICAgICAgIHBhbmVLZXkgPSB0YWJQYW5lLiR2bm9kZS5rZXk7IC8vIOiHquWKqOi3s+i9rOWIsOivpeihqOagvAoKICAgICAgICAgICAgaWYgKGF1dG9KdW1wVGFiKSB7CiAgICAgICAgICAgICAgdmFyIHRhYnMgPSBnZXRWbVBhcmVudEJ5TmFtZSh0YWJQYW5lLCAnVGFicycpOwogICAgICAgICAgICAgIHRhYnMgJiYgdGFicy5zZXRBY3RpdmVLZXkgJiYgdGFicy5zZXRBY3RpdmVLZXkocGFuZUtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gLy8g5Ye6546w5pyq6aqM6K+B6YCa6L+H55qE6KGo5Y2V77yM5LiN5YaN6L+b6KGM5LiL5LiA5q2l5qCh6aqM77yM55u05o6l6L+U5Zue5aSx6LSlCgoKICAgICAgICAgIHJlamVjdCh7CiAgICAgICAgICAgIGVycm9yOiBWQUxJREFURV9GQUlMRUQsCiAgICAgICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICAgICAgcGFuZUtleTogcGFuZUtleSwKICAgICAgICAgICAgZXJyTWFwOiBlcnJNYXAKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KSgpOwogIH0pOwp9"},{"version":3,"sources":["D:/vue/src/components/jeecg/JVxeTable/utils/vxeUtils.js"],"names":["getVmParentByName","JVXETypes","VALIDATE_FAILED","Symbol","getRefPromise","vm","name","Promise","resolve","next","ref","$refs","setTimeout","getInputNumberMaxValue","col","rowsValues","maxNum","Object","values","forEach","rowValue","index","val","key","num","Number","parseFloat","getParentNodeByTagName","dom","tagName","document","body","parentNode","toLowerCase","trim","vxePackageToSuperQuery","columns","handler","Array","isArray","fieldList","i","length","type","rowCheckbox","rowRadio","rowExpand","rowNumber","field","value","text","title","dictCode","dict","date","datetime","format","inputNumber","options","assign","idx","push","console","error","validateFormAndTables","form","cases","autoJumpTab","validateFields","dataMap","reject","err","originError","formValue","validateTables","subData","tablesValue","tablesData","validateTable","then","errMap","getAll","paneKey","tabPane","$vnode","tabs","setActiveKey"],"mappings":"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","sourcesContent":["import { getVmParentByName } from '@/utils/util'\r\nimport { JVXETypes } from '@comp/jeecg/JVxeTable/index'\r\n\r\nexport const VALIDATE_FAILED = Symbol()\r\n\r\n/**\r\n * 获取指定的 $refs 对象\r\n * 有时候可能会遇到组件未挂载到页面中的情况，导致无法获取 $refs 中的某个对象\r\n * 这个方法可以等待挂载完成之后再返回 $refs 的对象，避免报错\r\n * @author sunjianlei\r\n **/\r\nexport function getRefPromise(vm, name) {\r\n  return new Promise((resolve) => {\r\n    (function next() {\r\n      let ref = vm.$refs[name]\r\n      if (ref) {\r\n        resolve(ref)\r\n      } else {\r\n        setTimeout(() => {\r\n          next()\r\n        }, 10)\r\n      }\r\n    })()\r\n  })\r\n}\r\n\r\n/** 获取某一数字输入框列中的最大的值 */\r\nexport function getInputNumberMaxValue(col, rowsValues) {\r\n  let maxNum = 0\r\n  Object.values(rowsValues).forEach((rowValue, index) => {\r\n    let val = rowValue[col.key], num\r\n    try {\r\n      num = Number.parseFloat(val)\r\n    } catch {\r\n      num = 0\r\n    }\r\n    // 把首次循环的结果当成最大值\r\n    if (index === 0) {\r\n      maxNum = num\r\n    } else {\r\n      maxNum = (num > maxNum) ? num : maxNum\r\n    }\r\n  })\r\n  return maxNum\r\n}\r\n\r\n/**\r\n *\r\n * 根据 tagName 获取父级节点\r\n *\r\n * @param dom 一级dom节点\r\n * @param tagName 标签名，不区分大小写\r\n * @return {HTMLElement | NULL}\r\n */\r\nexport function getParentNodeByTagName(dom, tagName = 'body') {\r\n  if (tagName === 'body') {\r\n    return document.body\r\n  }\r\n  if (dom.parentNode) {\r\n    if (dom.parentNode.tagName.toLowerCase() === tagName.trim().toLowerCase()) {\r\n      return dom.parentNode\r\n    } else {\r\n      return getParentNodeByTagName(dom.parentNode, tagName)\r\n    }\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * vxe columns 封装成高级查询可识别的选项\r\n * @param columns\r\n * @param handler 单独处理方法\r\n */\r\nexport function vxePackageToSuperQuery(columns, handler) {\r\n  if (Array.isArray(columns)) {\r\n    // 高级查询所需要的参数\r\n    let fieldList = []\r\n    // 遍历列\r\n    for (let i = 0; i < columns.length; i++) {\r\n      let col = columns[i]\r\n      if (col.type === JVXETypes.rowCheckbox ||\r\n        col.type === JVXETypes.rowRadio ||\r\n        col.type === JVXETypes.rowExpand ||\r\n        col.type === JVXETypes.rowNumber\r\n      ) {\r\n        continue\r\n      }\r\n      let field = {\r\n        type: 'string',\r\n        value: col.key,\r\n        text: col.title,\r\n        dictCode: col.dictCode || col.dict,\r\n      }\r\n      if (col.type === JVXETypes.date || col.type === JVXETypes.datetime) {\r\n        field.type = col.type\r\n        field.format = col.format\r\n      }\r\n      if (col.type === JVXETypes.inputNumber) {\r\n        field.type = 'int'\r\n      }\r\n      if (Array.isArray(col.options)) {\r\n        field.options = col.options\r\n      }\r\n      if (typeof handler === 'function') {\r\n        Object.assign(field, handler(col, idx))\r\n      }\r\n      fieldList.push(field)\r\n    }\r\n    return fieldList\r\n  } else {\r\n    console.error('columns必须是一个数组')\r\n  }\r\n  return null\r\n}\r\n\r\n/**\r\n * 一次性验证主表单和所有的次表单\r\n * @param form 主表单 form 对象\r\n * @param cases 接收一个数组，每项都是一个JVxeTable实例\r\n * @param autoJumpTab\r\n * @returns {Promise<any>}\r\n * @author sunjianlei\r\n */\r\nexport async function validateFormAndTables(form, cases, autoJumpTab) {\r\n  if (!(form && typeof form.validateFields === 'function')) {\r\n    throw `form 参数需要的是一个form对象，而传入的却是${typeof form}`\r\n  }\r\n  let dataMap = {}\r\n  let values = await new Promise((resolve, reject) => {\r\n    // 验证主表表单\r\n    form.validateFields((err, values) => {\r\n      err ? reject({error: VALIDATE_FAILED, originError: err}) : resolve(values)\r\n    })\r\n  })\r\n  Object.assign(dataMap, {formValue: values})\r\n  // 验证所有子表的表单\r\n  let subData = await validateTables(cases, autoJumpTab)\r\n  // 合并最终数据\r\n  dataMap = Object.assign(dataMap, {tablesValue: subData})\r\n  return dataMap\r\n}\r\n\r\n/**\r\n * 验证并获取一个或多个表格的所有值\r\n *\r\n * @param cases 接收一个数组，每项都是一个JVxeTable实例\r\n * @param autoJumpTab 校验失败后，是否自动跳转tab选项\r\n */\r\nexport function validateTables(cases, autoJumpTab = true) {\r\n  if (!Array.isArray(cases)) {\r\n    throw `'validateTables'函数的'cases'参数需要的是一个数组，而传入的却是${typeof cases}`\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    let tablesData = []\r\n    let index = 0\r\n    if (!cases || cases.length === 0) {\r\n      resolve()\r\n    }\r\n    (function next() {\r\n      let vm = cases[index]\r\n      vm.validateTable().then(errMap => {\r\n        // 校验通过\r\n        if (!errMap) {\r\n          tablesData[index] = vm.getAll()\r\n          // 判断校验是否全部完成，完成返回成功，否则继续进行下一步校验\r\n          if (++index === cases.length) {\r\n            resolve(tablesData)\r\n          } else (\r\n            next()\r\n          )\r\n        } else {\r\n          // 尝试获取tabKey，如果在ATab组件内即可获取\r\n          let paneKey\r\n          let tabPane = getVmParentByName(vm, 'ATabPane')\r\n          if (tabPane) {\r\n            paneKey = tabPane.$vnode.key\r\n            // 自动跳转到该表格\r\n            if (autoJumpTab) {\r\n              let tabs = getVmParentByName(tabPane, 'Tabs')\r\n              tabs && tabs.setActiveKey && tabs.setActiveKey(paneKey)\r\n            }\r\n          }\r\n          // 出现未验证通过的表单，不再进行下一步校验，直接返回失败\r\n          reject({error: VALIDATE_FAILED, index, paneKey, errMap})\r\n        }\r\n      })\r\n    })()\r\n  })\r\n}"]}]}