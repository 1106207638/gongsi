{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\user\\alteration\\Step1.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\user\\alteration\\Step1.vue","mtime":1615948822131},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QWN0aW9uLCBwb3N0QWN0aW9uIH0gZnJvbSAnQC9hcGkvbWFuYWdlJzsKaW1wb3J0IHsgY2hlY2tPbmx5VXNlciB9IGZyb20gJ0AvYXBpL2FwaSc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3RlcDEiLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcyksCiAgICAgIGlucHV0Q29kZUNvbnRlbnQ6ICIiLAogICAgICBpbnB1dENvZGVOdWxsOiB0cnVlLAogICAgICB2ZXJpZmllZENvZGU6ICIiLAogICAgICB2YWxpZGF0b3JSdWxlczogewogICAgICAgIHVzZXJuYW1lOiB7CiAgICAgICAgICBydWxlczogW3sKICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHZhbGlkYXRvcjogdGhpcy52YWxpZGF0ZUlucHV0VXNlcm5hbWUKICAgICAgICAgIH1dCiAgICAgICAgfSwKICAgICAgICBpbnB1dENvZGU6IHsKICAgICAgICAgIHJ1bGVzOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemqjOivgeeggSEnCiAgICAgICAgICB9XQogICAgICAgIH0KICAgICAgfSwKICAgICAgcmFuZENvZGVJbWFnZTogJycsCiAgICAgIHJlcXVlc3RDb2RlU3VjY2VzczogdHJ1ZSwKICAgICAgY3VycmRhdGV0aW1lOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmhhbmRsZUNoYW5nZUNoZWNrQ29kZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlQ2hhbmdlQ2hlY2tDb2RlOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VDaGVja0NvZGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmN1cnJkYXRldGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICBnZXRBY3Rpb24oIi9zeXMvcmFuZG9tSW1hZ2UvIi5jb25jYXQodGhpcy5jdXJyZGF0ZXRpbWUpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIF90aGlzLnJhbmRDb2RlSW1hZ2UgPSByZXMucmVzdWx0OwogICAgICAgICAgX3RoaXMucmVxdWVzdENvZGVTdWNjZXNzID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwoKICAgICAgICAgIF90aGlzLnJlcXVlc3RDb2RlU3VjY2VzcyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLnJlcXVlc3RDb2RlU3VjY2VzcyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBuZXh0U3RlcDogZnVuY3Rpb24gbmV4dFN0ZXAoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKGZ1bmN0aW9uIChlcnIsIHZhbHVlcykgewogICAgICAgIGlmICghZXJyKSB7CiAgICAgICAgICB2YXIgaXNQaG9uZSA9IGZhbHNlOwogICAgICAgICAgdmFyIHBhcmFtcyA9IHt9OwogICAgICAgICAgdmFyIHJlZyA9IC9eWzEtOV1cZCokfF4wJC87CiAgICAgICAgICB2YXIgdXNlcm5hbWUgPSB2YWx1ZXMudXNlcm5hbWU7CgogICAgICAgICAgaWYgKHJlZy50ZXN0KHVzZXJuYW1lKSA9PSB0cnVlKSB7CiAgICAgICAgICAgIHBhcmFtcy5waG9uZSA9IHVzZXJuYW1lOwogICAgICAgICAgICBpc1Bob25lID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcmFtcy51c2VybmFtZSA9IHVzZXJuYW1lOwogICAgICAgICAgfQoKICAgICAgICAgIHRoYXQudmFsaWRhdGVJbnB1dENvZGUoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgZ2V0QWN0aW9uKCIvc3lzL3VzZXIvcXVlcnlTeXNVc2VyIiwgcGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHZhciB1c2VyTGlzdCA9IHsKICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHJlcy5yZXN1bHQudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIHBob25lOiByZXMucmVzdWx0LnBob25lLAogICAgICAgICAgICAgICAgICBpc1Bob25lOiBpc1Bob25lCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIHRoYXQuJGVtaXQoJ25leHRTdGVwJywgdXNlckxpc3QpOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgdmFsaWRhdGVJbnB1dENvZGU6IGZ1bmN0aW9uIHZhbGlkYXRlSW5wdXRDb2RlKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgcG9zdEFjdGlvbigiL3N5cy9jaGVja0NhcHRjaGEiLCB7CiAgICAgICAgICBjYXB0Y2hhOiBfdGhpczIuaW5wdXRDb2RlQ29udGVudCwKICAgICAgICAgIGNoZWNrS2V5OiBfdGhpczIuY3VycmRhdGV0aW1lCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKCiAgICAgICAgICAgIHJlamVjdCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBpbnB1dENvZGVDaGFuZ2U6IGZ1bmN0aW9uIGlucHV0Q29kZUNoYW5nZShlKSB7CiAgICAgIHRoaXMuaW5wdXRDb2RlQ29udGVudCA9IGUudGFyZ2V0LnZhbHVlOwogICAgICBjb25zb2xlLmxvZyh0aGlzLmlucHV0Q29kZUNvbnRlbnQpOwoKICAgICAgaWYgKCFlLnRhcmdldC52YWx1ZSB8fCAwID09IGUudGFyZ2V0LnZhbHVlKSB7CiAgICAgICAgdGhpcy5pbnB1dENvZGVOdWxsID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlucHV0Q29kZUNvbnRlbnQgPSB0aGlzLmlucHV0Q29kZUNvbnRlbnQudG9Mb3dlckNhc2UoKTsKICAgICAgICB0aGlzLmlucHV0Q29kZU51bGwgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGdlbmVyYXRlQ29kZTogZnVuY3Rpb24gZ2VuZXJhdGVDb2RlKHZhbHVlKSB7CiAgICAgIHRoaXMudmVyaWZpZWRDb2RlID0gdmFsdWUudG9Mb3dlckNhc2UoKTsKICAgICAgY29uc29sZS5sb2codGhpcy52ZXJpZmllZENvZGUpOwogICAgfSwKICAgIHZhbGlkYXRlSW5wdXRVc2VybmFtZTogZnVuY3Rpb24gdmFsaWRhdGVJbnB1dFVzZXJuYW1lKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBjb25zb2xlLmxvZyh2YWx1ZSk7CiAgICAgIHZhciByZWcgPSAvXlswLTldKy4/WzAtOV0qLzsKCiAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICBjYWxsYmFjaygi6K+36L6T5YWl55So5oi35ZCN5ZKM5omL5py65Y+377yBIik7CiAgICAgIH0gLy/liKTmlq3nlKjmiLfovpPlhaXotKblj7fov5jmmK/miYvmnLrlj7fnoIEKCgogICAgICBpZiAocmVnLnRlc3QodmFsdWUpKSB7CiAgICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICAgIHBob25lOiB2YWx1ZQogICAgICAgIH07CiAgICAgICAgY2hlY2tPbmx5VXNlcihwYXJhbXMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAgIGNhbGxiYWNrKCLnlKjmiLflkI3kuI3lrZjlnKghIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBwYXJhbXMgPSB7CiAgICAgICAgICB1c2VybmFtZTogdmFsdWUKICAgICAgICB9OwogICAgICAgIGNoZWNrT25seVVzZXIocGFyYW1zKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBjYWxsYmFjaygi55So5oi35ZCN5LiN5a2Y5ZyoISIpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["Step1.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n\r\n    <a-form style=\"max-width: 500px; margin: 40px auto 0;\" :form=\"form\" @keyup.enter.native=\"nextStep\">\r\n      <a-form-item>\r\n        <a-input\r\n          v-decorator=\"['username',validatorRules.username]\"\r\n          size=\"large\"\r\n          type=\"text\"\r\n          autocomplete=\"false\"\r\n          placeholder=\"请输入用户账号或手机号\">\r\n          <a-icon slot=\"prefix\" type=\"lock\" :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\r\n        </a-input>\r\n      </a-form-item>\r\n      <a-row :gutter=\"0\">\r\n        <a-col :span=\"14\">\r\n          <a-form-item>\r\n            <a-input\r\n              v-decorator=\"['inputCode',validatorRules.inputCode]\"\r\n              size=\"large\"\r\n              type=\"text\"\r\n              @change=\"inputCodeChange\"\r\n              placeholder=\"请输入验证码\">\r\n              <a-icon slot=\"prefix\" v-if=\" inputCodeContent==verifiedCode \" type=\"smile\"\r\n                      :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\r\n              <a-icon slot=\"prefix\" v-else type=\"frown\" :style=\"{ color: 'rgba(0,0,0,.25)' }\"/>\r\n            </a-input>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"10\" style=\"text-align: right\">\r\n          <img v-if=\"requestCodeSuccess\" style=\"margin-top: 2px;\" :src=\"randCodeImage\" @click=\"handleChangeCheckCode\"/>\r\n          <img v-else style=\"margin-top: 2px;\" src=\"../../../assets/checkcode.png\" @click=\"handleChangeCheckCode\"/>\r\n        </a-col>\r\n      </a-row>\r\n      <a-form-item :wrapperCol=\"{span: 19, offset: 5}\">\r\n        <router-link style=\"float: left;line-height: 40px;\" :to=\"{ name: 'login' }\">使用已有账户登录</router-link>\r\n        <a-button type=\"primary\" @click=\"nextStep\">下一步</a-button>\r\n      </a-form-item>\r\n    </a-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { getAction,postAction } from '@/api/manage'\r\n  import { checkOnlyUser } from '@/api/api'\r\n\r\n  export default {\r\n    name: \"Step1\",\r\n    data() {\r\n      return {\r\n        form: this.$form.createForm(this),\r\n        inputCodeContent: \"\",\r\n        inputCodeNull: true,\r\n        verifiedCode: \"\",\r\n        validatorRules: {\r\n          username: {rules: [{required: false}, {validator: this.validateInputUsername}]},\r\n          inputCode: {rules: [{required: true, message: '请输入验证码!'}]},\r\n        },\r\n        randCodeImage:'',\r\n        requestCodeSuccess:true,\r\n        currdatetime:''\r\n\r\n      }\r\n    },\r\n    created(){\r\n      this.handleChangeCheckCode();\r\n    },\r\n    methods: {\r\n      handleChangeCheckCode(){\r\n        this.currdatetime = new Date().getTime();\r\n        getAction(`/sys/randomImage/${this.currdatetime}`).then(res=>{\r\n          if(res.success){\r\n            this.randCodeImage = res.result\r\n            this.requestCodeSuccess=true\r\n          }else{\r\n            this.$message.error(res.message)\r\n            this.requestCodeSuccess=false\r\n          }\r\n        }).catch(()=>{\r\n          this.requestCodeSuccess=false\r\n        })\r\n      },\r\n      nextStep() {\r\n        let that = this\r\n        this.form.validateFields((err, values) => {\r\n          if (!err) {\r\n            let isPhone = false;\r\n            var params = {}\r\n            var reg = /^[1-9]\\d*$|^0$/;\r\n            var username = values.username;\r\n            if (reg.test(username) == true) {\r\n              params.phone = username;\r\n              isPhone = true\r\n            } else {\r\n              params.username = username;\r\n            }\r\n            that.validateInputCode().then(()=>{\r\n              getAction(\"/sys/user/querySysUser\", params).then((res) => {\r\n                if (res.success) {\r\n                  var userList = {\r\n                    username: res.result.username,\r\n                    phone: res.result.phone,\r\n                    isPhone: isPhone\r\n                  };\r\n                  setTimeout(function () {\r\n                    that.$emit('nextStep', userList)\r\n                  })\r\n                }\r\n              });\r\n            })\r\n          }\r\n        })\r\n\r\n      },\r\n      validateInputCode() {\r\n        return new Promise((resolve,reject)=>{\r\n          postAction(\"/sys/checkCaptcha\",{\r\n            captcha:this.inputCodeContent,\r\n            checkKey:this.currdatetime\r\n          }).then(res=>{\r\n            if(res.success){\r\n              resolve();\r\n            }else{\r\n              this.$message.error(res.message)\r\n              reject();\r\n            }\r\n          });\r\n        })\r\n      },\r\n      inputCodeChange(e) {\r\n        this.inputCodeContent = e.target.value;\r\n        console.log(this.inputCodeContent)\r\n        if (!e.target.value || 0 == e.target.value) {\r\n          this.inputCodeNull = true\r\n        } else {\r\n          this.inputCodeContent = this.inputCodeContent.toLowerCase()\r\n          this.inputCodeNull = false\r\n        }\r\n      },\r\n      generateCode(value) {\r\n        this.verifiedCode = value.toLowerCase();\r\n        console.log(this.verifiedCode);\r\n      },\r\n      validateInputUsername(rule, value, callback) {\r\n        console.log(value);\r\n        var reg = /^[0-9]+.?[0-9]*/;\r\n        if (!value) {\r\n          callback(\"请输入用户名和手机号！\");\r\n        }\r\n\r\n        //判断用户输入账号还是手机号码\r\n        if (reg.test(value)) {\r\n          var params = {\r\n            phone: value,\r\n          };\r\n          checkOnlyUser(params).then((res) => {\r\n            if (res.success) {\r\n              callback(\"用户名不存在!\")\r\n            } else {\r\n              callback()\r\n            }\r\n          })\r\n        } else {\r\n          var params = {\r\n            username: value,\r\n          };\r\n          checkOnlyUser(params).then((res) => {\r\n            if (res.success) {\r\n              callback(\"用户名不存在!\")\r\n            } else {\r\n              callback()\r\n            }\r\n          })\r\n        }\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/views/user/alteration"}]}