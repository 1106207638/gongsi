{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\JVxeTable.js","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\JVxeTable.js","mtime":1615948814766},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQ7IGlmICh0eXBlb2YgU3ltYm9sID09PSAidW5kZWZpbmVkIiB8fCBvW1N5bWJvbC5pdGVyYXRvcl0gPT0gbnVsbCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gb1tTeW1ib2wuaXRlcmF0b3JdKCk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQoKZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgeyBhcnIyW2ldID0gYXJyW2ldOyB9IHJldHVybiBhcnIyOyB9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsgaWYgKGVudW1lcmFibGVPbmx5KSBzeW1ib2xzID0gc3ltYm9scy5maWx0ZXIoZnVuY3Rpb24gKHN5bSkgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHN5bSkuZW51bWVyYWJsZTsgfSk7IGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsgfSByZXR1cm4ga2V5czsgfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307IGlmIChpICUgMikgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpLCB0cnVlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7IH0pOyB9IGVsc2UgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoc291cmNlKSk7IH0gZWxzZSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBrZXkpKTsgfSk7IH0gfSByZXR1cm4gdGFyZ2V0OyB9CgpmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfQoKZnVuY3Rpb24gYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCBrZXksIGFyZykgeyB0cnkgeyB2YXIgaW5mbyA9IGdlbltrZXldKGFyZyk7IHZhciB2YWx1ZSA9IGluZm8udmFsdWU7IH0gY2F0Y2ggKGVycm9yKSB7IHJlamVjdChlcnJvcik7IHJldHVybjsgfSBpZiAoaW5mby5kb25lKSB7IHJlc29sdmUodmFsdWUpOyB9IGVsc2UgeyBQcm9taXNlLnJlc29sdmUodmFsdWUpLnRoZW4oX25leHQsIF90aHJvdyk7IH0gfQoKZnVuY3Rpb24gX2FzeW5jVG9HZW5lcmF0b3IoZm4pIHsgcmV0dXJuIGZ1bmN0aW9uICgpIHsgdmFyIHNlbGYgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzOyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2YXIgZ2VuID0gZm4uYXBwbHkoc2VsZiwgYXJncyk7IGZ1bmN0aW9uIF9uZXh0KHZhbHVlKSB7IGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywgIm5leHQiLCB2YWx1ZSk7IH0gZnVuY3Rpb24gX3Rocm93KGVycikgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJ0aHJvdyIsIGVycik7IH0gX25leHQodW5kZWZpbmVkKTsgfSk7IH07IH0KCmltcG9ydCBYRVV0aWxzIGZyb20gJ3hlLXV0aWxzJzsKaW1wb3J0IFByb3BUeXBlcyBmcm9tICdhbnQtZGVzaWduLXZ1ZS9lcy9fdXRpbC92dWUtdHlwZXMnOwppbXBvcnQgeyBKVlhFVHlwZXMgfSBmcm9tICdAL2NvbXBvbmVudHMvamVlY2cvSlZ4ZVRhYmxlL2luZGV4JzsKaW1wb3J0IFZ4ZVdlYlNvY2tldE1peGlucyBmcm9tICcuLi9taXhpbnMvdnhlLndlYi5zb2NrZXQubWl4aW5zJzsKaW1wb3J0IHsgaW5pdERpY3RPcHRpb25zIH0gZnJvbSAnQC9jb21wb25lbnRzL2RpY3QvSkRpY3RTZWxlY3RVdGlsJzsKaW1wb3J0IHsgZ2V0UmVmUHJvbWlzZSB9IGZyb20gJy4uL3V0aWxzL3Z4ZVV0aWxzJzsKaW1wb3J0IHsgZ2V0RW5oYW5jZWRNaXhpbnMsIHJlcGxhY2VQcm9wcyB9IGZyb20gJy4uL3V0aWxzL2NlbGxVdGlscyc7CmltcG9ydCBKVnhlVG9vbGJhciBmcm9tICcuL0pWeGVUb29sYmFyJzsKaW1wb3J0IEpWeGVTdWJQb3BvdmVyIGZyb20gJy4vSlZ4ZVN1YlBvcG92ZXInOwppbXBvcnQgSlZ4ZURldGFpbHNNb2RhbCBmcm9tICcuL0pWeGVEZXRhaWxzTW9kYWwnOwppbXBvcnQgSlZ4ZVBhZ2luYXRpb24gZnJvbSAnLi9KVnhlUGFnaW5hdGlvbic7CmltcG9ydCB7IGNsb25lT2JqZWN0LCBnZXRWbVBhcmVudEJ5TmFtZSwgcHVzaElmTm90RXhpc3QsIHJhbmRvbVN0cmluZywgc2ltcGxlRGVib3VuY2UgfSBmcm9tICdAL3V0aWxzL3V0aWwnOwppbXBvcnQgeyBVdGlsVG9vbHMgfSBmcm9tICd2eGUtdGFibGUvcGFja2FnZXMvdG9vbHMvc3JjL3V0aWxzJzsKaW1wb3J0IHsgZ2V0Tm9BdXRoQ29scyB9IGZyb20gIkAvdXRpbHMvYXV0aEZpbHRlciI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSlZ4ZVRhYmxlJywKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICByZXR1cm4gewogICAgICBzdXBlclRyaWdnZXI6IGZ1bmN0aW9uIHN1cGVyVHJpZ2dlcihuYW1lLCBldmVudCkgewogICAgICAgIHJldHVybiBfdGhpcy50cmlnZ2VyKG5hbWUsIGV2ZW50KTsKICAgICAgfQogICAgfTsKICB9LAogIG1peGluczogW1Z4ZVdlYlNvY2tldE1peGluc10sCiAgY29tcG9uZW50czogewogICAgSlZ4ZVRvb2xiYXI6IEpWeGVUb29sYmFyLAogICAgSlZ4ZVN1YlBvcG92ZXI6IEpWeGVTdWJQb3BvdmVyLAogICAgSlZ4ZURldGFpbHNNb2RhbDogSlZ4ZURldGFpbHNNb2RhbCwKICAgIEpWeGVQYWdpbmF0aW9uOiBKVnhlUGFnaW5hdGlvbgogIH0sCiAgcHJvcHM6IHsKICAgIHJvd0tleTogUHJvcFR5cGVzLnN0cmluZy5kZWYoJ2lkJyksCiAgICAvLyDliJfkv6Hmga8KICAgIGNvbHVtbnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgLy8g5pWw5o2u5rqQCiAgICBkYXRhU291cmNlOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGF1dGhQcmU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgaXNvbmxpbmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vIOaYr+WQpuaYvuekuuW3peWFt+agjwogICAgdG9vbGJhcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBpbXBvcnRCdG46IEJvb2xlYW4sCiAgICAvLyDlt6XlhbfmoI/phY3nva4KICAgIHRvb2xiYXJDb25maWc6IFByb3BUeXBlcy5vYmplY3QuZGVmKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICAvLyBwcmVmaXgg5YmN57yA77ybc3VmZml4IOWQjue8gO+8mwogICAgICAgIHNsb3RzOiBbJ3ByZWZpeCcsICdzdWZmaXgnXSwKICAgICAgICAvLyBhZGQg5paw5aKe5oyJ6ZKu77ybcmVtb3ZlIOWIoOmZpOaMiemSru+8m2NsZWFyU2VsZWN0aW9uIOa4heepuumAieaLqeaMiemSru+8m2NvbGxhcHNlIOWxleW8gOaUtui1twogICAgICAgIGJ0bnM6IFsnYWRkJywgJ3JlbW92ZScsICdjbGVhclNlbGVjdGlvbiddCiAgICAgIH07CiAgICB9KSwKICAgIC8vIOaYr+WQpuaYvuekuuihjOWPtwogICAgcm93TnVtYmVyOiBQcm9wVHlwZXMuYm9vbC5kZWYoZmFsc2UpLAogICAgLy8g5piv5ZCm5Y+v6YCJ5oup6KGMCiAgICByb3dTZWxlY3Rpb246IFByb3BUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICAvLyDpgInmi6nooYznsbvlnosKICAgIHJvd1NlbGVjdGlvblR5cGU6IFByb3BUeXBlcy5vbmVPZihbJ2NoZWNrYm94JywgJ3JhZGlvJ10pLmRlZignY2hlY2tib3gnKSwKICAgIC8vIOaYr+WQpuWPr+WxleW8gOihjAogICAgcm93RXhwYW5kOiBQcm9wVHlwZXMuYm9vbC5kZWYoZmFsc2UpLAogICAgLy8g5bGV5byA6KGM6YWN572uCiAgICBleHBhbmRDb25maWc6IFByb3BUeXBlcy5vYmplY3QuZGVmKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfSksCiAgICAvLyDpobXpnaLmmK/lkKblnKjliqDovb3kuK0KICAgIGxvYWRpbmc6IFByb3BUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICBoZWlnaHQ6IFByb3BUeXBlcy5pbnN0YW5jZU9mKFtOdW1iZXIsIFN0cmluZ10pLmRlZignYXV0bycpLAogICAgLy8g5pyA5aSn6auY5bqmCiAgICBtYXhIZWlnaHQ6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfSwKICAgIC8vIOimgeemgeeUqOeahOihjCBUT0RPIOacquWunueOsAogICAgZGlzYWJsZWRSb3dzOiBQcm9wVHlwZXMub2JqZWN0LmRlZihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0pLAogICAgLy8g5piv5ZCm56aB55So5YWo6YOo57uE5Lu2CiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wuZGVmKGZhbHNlKSwKICAgIC8vIOaYr+WQpuWPr+aLluaLveaOkuW6jyBUT0RPIOS7heWunueOsOS4iuS4i+aOkuW6j++8jOacquWunueOsOaLluaLveaOkuW6j++8iOWPr+iDveaXoOazleWunueOsOaIlui+g+S4uuWbsOmavu+8iQogICAgZHJhZ1NvcnQ6IFByb3BUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICAvLyDmjpLluo/lrZfmrrXkv53lrZjnmoRLZXkKICAgIGRyYWdTb3J0S2V5OiBQcm9wVHlwZXMuc3RyaW5nLmRlZignb3JkZXJOdW0nKSwKICAgIC8vIOWkp+Wwj++8jOWPr+mAieWAvOacie+8mm1lZGl1be+8iOS4re+8ieOAgXNtYWxs77yI5bCP77yJ44CBbWluae+8iOW+ru+8ieOAgXRpbnnvvIjpnZ7luLjlsI/vvIkKICAgIHNpemU6IFByb3BUeXBlcy5vbmVPZihbJ21lZGl1bScsICdzbWFsbCcsICdtaW5pJywgJ3RpbnknXSkuZGVmKCdtZWRpdW0nKSwKICAgIC8vIOaYr+WQpuaYvuekuui+ueahhue6vwogICAgYm9yZGVyZWQ6IFByb3BUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICAvLyDliIbpobXlmajlj4LmlbDvvIzorr7nva7kuobljbPlj6/mmL7npLrliIbpobXlmagKICAgIHBhZ2luYXRpb246IFByb3BUeXBlcy5vYmplY3QuZGVmKGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHt9OwogICAgfSksCiAgICAvLyDngrnlh7vooYzml7bmmK/lkKbmmL7npLrlrZDooajljZUKICAgIGNsaWNrUm93U2hvd1N1YkZvcm06IFByb3BUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICAvLyDngrnlh7vooYzml7bmmK/lkKbmmL7npLrkuLvooajljZUKICAgIGNsaWNrUm93U2hvd01haW5Gb3JtOiBQcm9wVHlwZXMuYm9vbC5kZWYoZmFsc2UpLAogICAgLy8g5piv5ZCm54K55Ye76YCJ5Lit6KGM77yM5LyY5YWI57qn5pyA5L2OCiAgICBjbGlja1NlbGVjdFJvdzogUHJvcFR5cGVzLmJvb2wuZGVmKGZhbHNlKSwKICAgIC8vIOaYr+WQpuW8gOWQryByZWxvYWQg5pWw5o2u5pWI5p6cCiAgICByZWxvYWRFZmZlY3Q6IFByb3BUeXBlcy5ib29sLmRlZihmYWxzZSksCiAgICAvLyDmoKHpqozop4TliJkKICAgIFJ1bGVzOiBQcm9wVHlwZXMub2JqZWN0LmRlZihmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB7fTsKICAgIH0pLAogICAgLy8g5piv5ZCm5byC5q2l5Yig6Zmk6KGM77yM5aaC5p6c5L2g6KaB5a6e546w5byC5q2l5Yig6Zmk77yM6YKj5LmI6ZyA6KaB5oqK6L+Z5Liq6YCJ6aG55byA5ZCv77yMCiAgICAvLyDlnKhyZW1vdmXkuovku7bph4zosIPnlKhjb25maXJtUmVtb3Zl5pa55rOV5omN5Lya55yf5q2j5Yig6Zmk77yI6Zmk6Z2e5Yig6Zmk55qE5YWo5piv5paw5aKe55qE6KGM77yJCiAgICBhc3luY1JlbW92ZTogUHJvcFR5cGVzLmJvb2wuZGVmKGZhbHNlKQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzSlZYRVRhYmxlOiB0cnVlLAogICAgICAvLyBjYXNlSWTvvIzooajmoLzllK/kuIDmoIfor4YKICAgICAgY2FzZUlkOiAiX2otdnhlLSIuY29uY2F0KHJhbmRvbVN0cmluZyg4KSwgIl8iKSwKICAgICAgLy8g5YaF572uY29sdW1ucwogICAgICBfaW5uZXJDb2x1bW5zOiBbXSwKICAgICAgLy8g5YaF572uIEVkaXRSdWxlcwogICAgICBfaW5uZXJFZGl0UnVsZXM6IFtdLAogICAgICAvLyDorrDlvZXmu5rliqjmnaHkvY3nva4KICAgICAgc2Nyb2xsOiB7CiAgICAgICAgdG9wOiAwLAogICAgICAgIGxlZnQ6IDAKICAgICAgfSwKICAgICAgLy8g5b2T5YmN5piv5ZCm5q2j5Zyo5rua5YqoCiAgICAgIHNjcm9sbGluZzogZmFsc2UsCiAgICAgIC8vIHZ4ZSDpu5jorqTphY3nva4KICAgICAgZGVmYXVsdFZ4ZVByb3BzOiB7CiAgICAgICAgJ3Jvdy1pZCc6IHRoaXMucm93S2V5LAogICAgICAgIC8vIOmrmOS6rmhvdmVy55qE6KGMCiAgICAgICAgJ2hpZ2hsaWdodC1ob3Zlci1yb3cnOiB0cnVlLAogICAgICAgIC8vIOa6ouWHuumakOiXj+W5tuaYvuekunRvb2x0aXAKICAgICAgICAnc2hvdy1vdmVyZmxvdyc6IHRydWUsCiAgICAgICAgLy8g6KGo5aS05rqi5Ye66ZqQ6JeP5bm25pi+56S6dG9vbHRpcAogICAgICAgICdzaG93LWhlYWRlci1vdmVyZmxvdyc6IHRydWUsCiAgICAgICAgJ3Nob3ctZm9vdGVyLW92ZXJmbG93JzogdHJ1ZSwKICAgICAgICAvLyDlj6/nvJbovpHphY3nva4KICAgICAgICAnZWRpdC1jb25maWcnOiB7CiAgICAgICAgICB0cmlnZ2VyOiAnY2xpY2snLAogICAgICAgICAgbW9kZTogJ2NlbGwnLAogICAgICAgICAgc2hvd0ljb246IGZhbHNlCiAgICAgICAgfSwKICAgICAgICAnZXhwYW5kLWNvbmZpZyc6IHsKICAgICAgICAgIGljb25DbG9zZTogJ2FudC10YWJsZS1yb3ctZXhwYW5kLWljb24gYW50LXRhYmxlLXJvdy1jb2xsYXBzZWQnLAogICAgICAgICAgaWNvbk9wZW46ICdhbnQtdGFibGUtcm93LWV4cGFuZC1pY29uIGFudC10YWJsZS1yb3ctZXhwYW5kZWQnCiAgICAgICAgfSwKICAgICAgICAvLyDomZrmi5/mu5rliqjphY3nva7vvIx56L205aSn5LqOMzDmnaHmlbDmja7ml7blkK/nlKjomZrmi5/mu5rliqgKICAgICAgICAvLyAnc2Nyb2xsLXknOiB7CiAgICAgICAgLy8gICBndDogMzAKICAgICAgICAvLyB9LAogICAgICAgIC8vICdzY3JvbGwteCc6IHsKICAgICAgICAvLyAgIGd0OiAxNQogICAgICAgIC8vIH0sCiAgICAgICAgJ3JhZGlvLWNvbmZpZyc6IHsKICAgICAgICAgIGhpZ2hsaWdodDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgJ2NoZWNrYm94LWNvbmZpZyc6IHsKICAgICAgICAgIGhpZ2hsaWdodDogdHJ1ZQogICAgICAgIH0KICAgICAgfSwKICAgICAgLy8g57uR5a6a5bem5L6n6YCJ5oup5qGGCiAgICAgIHNlbGVjdGVkUm93czogW10sCiAgICAgIC8vIOe7keWumuW3puS+p+mAieaLqeahhuW3sumAieaLqeeahGlkCiAgICAgIHNlbGVjdGVkUm93SWRzOiBbXSwKICAgICAgLy8g57uf6K6h5YiX6YWN572uCiAgICAgIHN0YXRpc3RpY3M6IHsKICAgICAgICBoYXM6IGZhbHNlLAogICAgICAgIHN1bTogW10sCiAgICAgICAgYXZlcmFnZTogW10KICAgICAgfSwKICAgICAgLy8g5YWB6K645omn6KGM5Yi35paw54m55pWI55qE6KGMSUQKICAgICAgcmVsb2FkRWZmZWN0Um93S2V5c01hcDoge30sCiAgICAgIC8v6YWN572u5LqG5L2G5piv5rKh5pyJ5o6I5p2D55qE5oyJ6ZKu5ZKM5YiXIOmbhuWQiAogICAgICBleGNsdWRlQ29kZTogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLy8gdnhlIOacgOe7iCBjb2x1bW5zCiAgICB2eGVDb2x1bW5zOiBmdW5jdGlvbiB2eGVDb2x1bW5zKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuX2lubmVyQ29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHsKICAgICAgICB2YXIgcmVuZGVyT3B0aW9ucyA9IHsKICAgICAgICAgIGNhc2VJZDogX3RoaXMyLmNhc2VJZCwKICAgICAgICAgIGJvcmRlcmVkOiBfdGhpczIuYm9yZGVyZWQsCiAgICAgICAgICBkaXNhYmxlZDogX3RoaXMyLmRpc2FibGVkLAogICAgICAgICAgc2Nyb2xsaW5nOiBfdGhpczIuc2Nyb2xsaW5nLAogICAgICAgICAgcmVsb2FkRWZmZWN0OiBfdGhpczIucmVsb2FkRWZmZWN0LAogICAgICAgICAgcmVsb2FkRWZmZWN0Um93S2V5c01hcDogX3RoaXMyLnJlbG9hZEVmZmVjdFJvd0tleXNNYXAsCiAgICAgICAgICBsaXN0ZW5lcnM6IF90aGlzMi5jZWxsTGlzdGVuZXJzCiAgICAgICAgfTsKCiAgICAgICAgaWYgKGNvbHVtbi4kdHlwZSA9PT0gSlZYRVR5cGVzLnJvd0RyYWdTb3J0KSB7CiAgICAgICAgICByZW5kZXJPcHRpb25zLmRyYWdTb3J0S2V5ID0gX3RoaXMyLmRyYWdTb3J0S2V5OwogICAgICAgIH0gLy8gc2xvdCDnu4Tku7bnibnmrorlpITnkIYKCgogICAgICAgIGlmIChjb2x1bW4uJHR5cGUgPT09IEpWWEVUeXBlcy5zbG90KSB7CiAgICAgICAgICBpZiAoX3RoaXMyLiRzY29wZWRTbG90cy5oYXNPd25Qcm9wZXJ0eShjb2x1bW4uc2xvdE5hbWUpKSB7CiAgICAgICAgICAgIHJlbmRlck9wdGlvbnMuc2xvdCA9IF90aGlzMi4kc2NvcGVkU2xvdHNbY29sdW1uLnNsb3ROYW1lXTsKICAgICAgICAgICAgcmVuZGVyT3B0aW9ucy50YXJnZXQgPSBfdGhpczI7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpZiAoY29sdW1uLmVkaXRSZW5kZXIpIHsKICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29sdW1uLmVkaXRSZW5kZXIsIHJlbmRlck9wdGlvbnMpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGNvbHVtbi5jZWxsUmVuZGVyKSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGNvbHVtbi5jZWxsUmVuZGVyLCByZW5kZXJPcHRpb25zKTsKICAgICAgICB9IC8vIHVwZGF0ZS0tYmVnaW4tLWF1dG9yOmx2ZGFuZGFuLS0tLS1kYXRlOjIwMjAxMDE5LS0tLS0tZm9yOkxPV0NPRC04ODIg44CQ5paw6KGM57yW6L6R44CR5YiX6KGo5LiK5bim5oyJ6ZKu55qE6YGu5oyh6Zeu6aKYCgoKICAgICAgICBpZiAoY29sdW1uLiR0eXBlID09PSBKVlhFVHlwZXMuZmlsZSB8fCBjb2x1bW4uJHR5cGUgPT09IEpWWEVUeXBlcy5pbWFnZSkgewogICAgICAgICAgaWYgKGNvbHVtbi53aWR0aCAmJiBjb2x1bW4ud2lkdGguZW5kc1dpdGgoJ3B4JykpIHsKICAgICAgICAgICAgY29sdW1uLndpZHRoID0gTnVtYmVyLnBhcnNlSW50KGNvbHVtbi53aWR0aC5zdWJzdHIoMCwgY29sdW1uLndpZHRoLmxlbmd0aCAtIDIpKSArIE51bWJlci5wYXJzZUludCgxKSArICdweCc7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyB1cGRhdGUtLWJlZ2luLS1hdXRvcjpsdmRhbmRhbi0tLS0tZGF0ZToyMDIwMTAxOS0tLS0tLWZvcjpMT1dDT0QtODgyIOOAkOaWsOihjOe8lui+keOAkeWIl+ihqOS4iuW4puaMiemSrueahOmBruaMoemXrumimAoKICAgICAgfSk7CgogICAgICByZXR1cm4gdGhpcy5faW5uZXJDb2x1bW5zOwogICAgfSwKICAgIC8vIHZ4ZSDmnIDnu4ggZWRpdFJ1bGVzCiAgICB2eGVFZGl0UnVsZXM6IGZ1bmN0aW9uIHZ4ZUVkaXRSdWxlcygpIHsKICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHRoaXMuZWRpdFJ1bGVzLCB0aGlzLl9pbm5lckVkaXRSdWxlcyk7CiAgICB9LAogICAgLy8gdnhlIOacgOe7iCBwcm9wcwogICAgdnhlUHJvcHM6IGZ1bmN0aW9uIHZ4ZVByb3BzKCkgewogICAgICB2YXIgZXhwYW5kQ29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0VnhlUHJvcHNbJ2V4cGFuZC1jb25maWcnXSwgdGhpcy5leHBhbmRDb25maWcpOwogICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0VnhlUHJvcHMsIHsKICAgICAgICBzaG93Rm9vdGVyOiB0aGlzLnN0YXRpc3RpY3MuaGFzCiAgICAgIH0sIHRoaXMuJGF0dHJzLCB7CiAgICAgICAgbG9hZGluZzogdGhpcy5sb2FkaW5nLAogICAgICAgIGNvbHVtbnM6IHRoaXMudnhlQ29sdW1ucywKICAgICAgICBlZGl0UnVsZXM6IHRoaXMudnhlRWRpdFJ1bGVzLAogICAgICAgIC8vIGRhdGE6IHRoaXMuZGF0YVNvdXJjZSwKICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0ID09PSAnYXV0bycgPyBudWxsIDogdGhpcy5oZWlnaHQsCiAgICAgICAgbWF4SGVpZ2h0OiB0aGlzLm1heEhlaWdodCwKICAgICAgICBib3JkZXI6IHRoaXMuYm9yZGVyZWQsCiAgICAgICAgZXhwYW5kQ29uZmlnOiBleHBhbmRDb25maWcsCiAgICAgICAgZm9vdGVyTWV0aG9kOiB0aGlzLmhhbmRsZUZvb3Rlck1ldGhvZCAvLyBmb290ZXJTcGFuTWV0aG9kOiB0aGlzLmhhbmRsZUZvb3RlclNwYW5NZXRob2QsCgogICAgICB9KTsKICAgIH0sCiAgICAvLyB2eGUg5pyA57uIIGV2ZW50cwogICAgdnhlRXZlbnRzOiBmdW5jdGlvbiB2eGVFdmVudHMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgLy8g5YaF572u5LqL5Lu2CiAgICAgIHZhciBldmVudHMgPSB7CiAgICAgICAgJ3Njcm9sbCc6IHRoaXMuaGFuZGxlVnhlU2Nyb2xsLAogICAgICAgICdjZWxsLWNsaWNrJzogdGhpcy5oYW5kbGVDZWxsQ2xpY2ssCiAgICAgICAgJ2VkaXQtY2xvc2VkJzogdGhpcy5oYW5kbGVFZGl0Q2xvc2VkLAogICAgICAgICdlZGl0LWFjdGl2ZWQnOiB0aGlzLmhhbmRsZUVkaXRBY3RpdmVkLAogICAgICAgICdyYWRpby1jaGFuZ2UnOiB0aGlzLmhhbmRsZVZ4ZVJhZGlvQ2hhbmdlLAogICAgICAgICdjaGVja2JveC1hbGwnOiB0aGlzLmhhbmRsZVZ4ZUNoZWNrYm94QWxsLAogICAgICAgICdjaGVja2JveC1jaGFuZ2UnOiB0aGlzLmhhbmRsZVZ4ZUNoZWNrYm94Q2hhbmdlCiAgICAgIH07IC8vIOeUqOaIt+S8oOmAkueahOS6i+S7tu+8jOi/m+ihjOWQiOW5tuaTjeS9nAoKICAgICAgT2JqZWN0LmtleXModGhpcy4kbGlzdGVuZXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YXIgbGlzdGVuID0gX3RoaXMzLiRsaXN0ZW5lcnNba2V5XTsKCiAgICAgICAgaWYgKGV2ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7CiAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShsaXN0ZW4pKSB7CiAgICAgICAgICAgIGxpc3Rlbi5wdXNoKGV2ZW50c1trZXldKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGxpc3RlbiA9IFtldmVudHNba2V5XSwgbGlzdGVuXTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGV2ZW50c1trZXldID0gbGlzdGVuOwogICAgICB9KTsKICAgICAgcmV0dXJuIGV2ZW50czsKICAgIH0sCiAgICAvLyDnu4Tku7bnm5HlkKzkuovku7YKICAgIGNlbGxMaXN0ZW5lcnM6IGZ1bmN0aW9uIGNlbGxMaXN0ZW5lcnMoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgcmV0dXJuIHsKICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbiB0cmlnZ2VyKG5hbWUsIGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LnRyaWdnZXIobmFtZSwgZXZlbnQpOwogICAgICAgIH0sCiAgICAgICAgdmFsdWVDaGFuZ2U6IGZ1bmN0aW9uIHZhbHVlQ2hhbmdlKGV2ZW50KSB7CiAgICAgICAgICByZXR1cm4gX3RoaXM0LnRyaWdnZXIoJ3ZhbHVlQ2hhbmdlJywgZXZlbnQpOwogICAgICAgIH0sCgogICAgICAgIC8qKiDlvZPliY3ooYzlkJHkuIrnp7vkuIDkvY0gKi8KICAgICAgICByb3dNb3ZlVXA6IGZ1bmN0aW9uIHJvd01vdmVVcChyb3dJbmRleCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5yb3dSZXNvcnQocm93SW5kZXgsIHJvd0luZGV4IC0gMSk7CiAgICAgICAgfSwKCiAgICAgICAgLyoqIOW9k+WJjeihjOWQkeS4i+enu+S4gOS9jSAqLwogICAgICAgIHJvd01vdmVEb3duOiBmdW5jdGlvbiByb3dNb3ZlRG93bihyb3dJbmRleCkgewogICAgICAgICAgcmV0dXJuIF90aGlzNC5yb3dSZXNvcnQocm93SW5kZXgsIHJvd0luZGV4ICsgMSk7CiAgICAgICAgfSwKCiAgICAgICAgLyoqIOWcqOW9k+WJjeihjOS4i+mdouaPkuWFpeS4gOihjCAqLwogICAgICAgIHJvd0luc2VydERvd246IGZ1bmN0aW9uIHJvd0luc2VydERvd24ocm93SW5kZXgpIHsKICAgICAgICAgIHJldHVybiBfdGhpczQuaW5zZXJ0Um93cyh7fSwgcm93SW5kZXggKyAxKTsKICAgICAgICB9CiAgICAgIH07CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZGF0YVNvdXJjZTogewogICAgICAvLyAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfaGFuZGxlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgX3RoaXM1ID0gdGhpczsKCiAgICAgICAgICB2YXIgdnhlOwogICAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRSZWZQcm9taXNlKHRoaXMsICd2eGUnKTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHZ4ZSA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgICAvLyDpmLvmlq12dWXnm5HlkKzlpKfmlbDmja7vvIzmj5Dpq5jmgKfog70KICAgICAgICAgICAgICAgICAgLy8g5byA5ZCv5LqG5o6S5bqP5bCx6Ieq5Yqo6K6h566X5o6S5bqP5YC8CiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdTb3J0KSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLmZvckVhY2goZnVuY3Rpb24gKGRhdGEsIGlkeCkgewogICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LiRzZXQoZGF0YSwgX3RoaXM1LmRyYWdTb3J0S2V5LCBpZHggKyAxKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgdnhlLmxvYWREYXRhKHRoaXMuZGF0YVNvdXJjZSk7IC8vIFRPRE8g6Kej5p6QZGlzYWJsZWRSb3dzCiAgICAgICAgICAgICAgICAgIC8vIGxldCBkaXNhYmxlZCA9IGZhbHNlCiAgICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAgIC8vIGxldCBkaXNhYmxlZFJvd0lkcyA9ICh0aGlzLmRpc2FibGVkUm93SWRzIHx8IFtdKQogICAgICAgICAgICAgICAgICAvLyAvLyDop6PmnpBkaXNhYmxlZFJvd3MKICAgICAgICAgICAgICAgICAgLy8gT2JqZWN0LmtleXModGhpcy5kaXNhYmxlZFJvd3MpLmZvckVhY2goZGlzYWJsZWRDb2xLZXkgPT4gewogICAgICAgICAgICAgICAgICAvLyAgIC8vIOWIpOaWreaYr+WQpuacieivpeWxnuaApwogICAgICAgICAgICAgICAgICAvLyAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGRpc2FibGVkQ29sS2V5KSkgewogICAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGRpc2FibGVkICE9PSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIC8vICAgICAgIGxldCB0ZW1wID0gdGhpcy5kaXNhYmxlZFJvd3NbZGlzYWJsZWRDb2xLZXldCiAgICAgICAgICAgICAgICAgIC8vICAgICAgIC8vIOemgeeUqOinhOWImeWPr+S7peaYr+S4gOS4quaVsOe7hAogICAgICAgICAgICAgICAgICAvLyAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0ZW1wKSkgewogICAgICAgICAgICAgICAgICAvLyAgICAgICAgIGRpc2FibGVkID0gdGVtcC5pbmNsdWRlcyhkYXRhW2Rpc2FibGVkQ29sS2V5XSkKICAgICAgICAgICAgICAgICAgLy8gICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkaXNhYmxlZCA9ICh0ZW1wID09PSBkYXRhW2Rpc2FibGVkQ29sS2V5XSkKICAgICAgICAgICAgICAgICAgLy8gICAgICAgfQogICAgICAgICAgICAgICAgICAvLyAgICAgICBpZiAoZGlzYWJsZWQpIHsKICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBkaXNhYmxlZFJvd0lkcy5wdXNoKHJvdy5pZCkKICAgICAgICAgICAgICAgICAgLy8gICAgICAgfQogICAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgICAvLyAgIH0KICAgICAgICAgICAgICAgICAgLy8gfSkKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgICAgfSkpOwoKICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgICAgcmV0dXJuIF9oYW5kbGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaGFuZGxlcjsKICAgICAgfSgpCiAgICB9LAogICAgY29sdW1uczogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIoY29sdW1ucykgewogICAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgICAvL+iOt+WPluS4jemcgOimgeaYvuekuuWIlwogICAgICAgIHRoaXMubG9hZEV4Y2x1ZGVDb2RlKCk7CiAgICAgICAgdmFyIF9pbm5lckNvbHVtbnMgPSBbXTsKICAgICAgICB2YXIgX2lubmVyRWRpdFJ1bGVzID0ge307CiAgICAgICAgdmFyIHJvd051bWJlciA9IHRoaXMucm93TnVtYmVyLAogICAgICAgICAgICByb3dTZWxlY3Rpb24gPSB0aGlzLnJvd1NlbGVjdGlvbiwKICAgICAgICAgICAgcm93RXhwYW5kID0gdGhpcy5yb3dFeHBhbmQsCiAgICAgICAgICAgIGRyYWdTb3J0ID0gdGhpcy5kcmFnU29ydDsKICAgICAgICB2YXIgZXhwYW5kQ29sdW1uLCBzZXFDb2x1bW4sIGNoZWNrYm94Q29sdW1uLCByYWRpb0NvbHVtbiwgZHJhZ1NvcnRDb2x1bW47CgogICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbHVtbnMpKSB7CiAgICAgICAgICB0aGlzLnN0YXRpc3RpY3MuaGFzID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnN0YXRpc3RpY3Muc3VtID0gW107CiAgICAgICAgICB0aGlzLnN0YXRpc3RpY3MuYXZlcmFnZSA9IFtdOyAvLyDlpITnkIbmiJB2eGXlj6/or4bliKvnmoRjb2x1bW5zCgogICAgICAgICAgY29sdW1ucy5mb3JFYWNoKGZ1bmN0aW9uIChjb2x1bW4pIHsKICAgICAgICAgICAgaWYgKF90aGlzNi5leGNsdWRlQ29kZS5pbmRleE9mKGNvbHVtbi5rZXkpID49IDApIHsKICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHZhciBjb2wgPSBfb2JqZWN0U3ByZWFkKHt9LCBjb2x1bW4pOwoKICAgICAgICAgICAgdmFyIHR5cGUgPSBjb2wudHlwZTsKICAgICAgICAgICAgdmFyIGVuaGFuY2VkID0gZ2V0RW5oYW5jZWRNaXhpbnModHlwZSk7CgogICAgICAgICAgICBpZiAodHlwZSA9PT0gSlZYRVR5cGVzLnJvd051bWJlcikgewogICAgICAgICAgICAgIHNlcUNvbHVtbiA9IGNvbDsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBKVlhFVHlwZXMucm93Q2hlY2tib3gpIHsKICAgICAgICAgICAgICBjaGVja2JveENvbHVtbiA9IGNvbDsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBKVlhFVHlwZXMucm93UmFkaW8pIHsKICAgICAgICAgICAgICByYWRpb0NvbHVtbiA9IGNvbDsKICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBKVlhFVHlwZXMucm93RXhwYW5kKSB7CiAgICAgICAgICAgICAgZXhwYW5kQ29sdW1uID0gY29sOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IEpWWEVUeXBlcy5yb3dEcmFnU29ydCkgewogICAgICAgICAgICAgIGRyYWdTb3J0Q29sdW1uID0gY29sOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbC5maWVsZCA9IGNvbC5rZXk7IC8vIOmYsuatouWSjHZ4ZVRhYmxl6Ieq5bim55qEdHlwZei1t+WGsueqgQoKICAgICAgICAgICAgICBjb2wuJHR5cGUgPSBjb2wudHlwZTsKICAgICAgICAgICAgICBkZWxldGUgY29sLnR5cGU7CiAgICAgICAgICAgICAgdmFyIHJlbmRlck5hbWUgPSAnY2VsbFJlbmRlcicsCiAgICAgICAgICAgICAgICAgIHJlbmRlck9wdGlvbnMgPSB7CiAgICAgICAgICAgICAgICBuYW1lOiBKVlhFVHlwZXMuX3ByZWZpeCArIHR5cGUKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBpZiAodHlwZSkgewogICAgICAgICAgICAgICAgLy8gaGlkZGVuIOaYr+eJueauiueahOe7hOS7tgogICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09IEpWWEVUeXBlcy5oaWRkZW4pIHsKICAgICAgICAgICAgICAgICAgY29sLnZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZW5oYW5jZWQuc3dpdGNoZXMuZWRpdFJlbmRlcikgewogICAgICAgICAgICAgICAgICByZW5kZXJOYW1lID0gJ2VkaXRSZW5kZXInOwogICAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zLnR5cGUgPSBlbmhhbmNlZC5zd2l0Y2hlcy52aXNpYmxlID8gJ3Zpc2libGUnIDogJ2RlZmF1bHQnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZW5kZXJPcHRpb25zLm5hbWUgPSBKVlhFVHlwZXMuX3ByZWZpeCArIEpWWEVUeXBlcy5ub3JtYWw7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjb2xbcmVuZGVyTmFtZV0gPSByZW5kZXJPcHRpb25zOyAvLyDlpITnkIblrZflhbgKCiAgICAgICAgICAgICAgaWYgKGNvbC5kaWN0Q29kZSkgewogICAgICAgICAgICAgICAgX3RoaXM2Ll9sb2FkRGljdENvbmNhdFRvT3B0aW9ucyhjb2wpOwogICAgICAgICAgICAgIH0gLy8g5aSE55CG5qCh6aqMCgoKICAgICAgICAgICAgICBpZiAoY29sLnZhbGlkYXRlUnVsZXMpIHsKICAgICAgICAgICAgICAgIHZhciBydWxlcyA9IFtdOwoKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNvbC52YWxpZGF0ZVJ1bGVzKSkgewogICAgICAgICAgICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoY29sLnZhbGlkYXRlUnVsZXMpLAogICAgICAgICAgICAgICAgICAgICAgX3N0ZXA7CgogICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgcnVsZSA9IF9zdGVwLnZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGxhY2UgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcGxhY2VQcm9wcyhjb2wsIHJ1bGUubWVzc2FnZSkKICAgICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUudW5pcXVlIHx8IHJ1bGUucGF0dGVybiA9PT0gJ29ubHknKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWUr+S4gOagoemqjOWZqAogICAgICAgICAgICAgICAgICAgICAgICBydWxlLnZhbGlkYXRvciA9IHVuaXF1ZVZhbGlkYXRvci5iaW5kKF90aGlzNik7CiAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJ1bGUucGF0dGVybikgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDpnZ7nqboKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJ1bGUucGF0dGVybiA9PT0gZm9vUGF0dGVybnNbMF0udmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBydWxlLnJlcXVpcmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgcnVsZS5wYXR0ZXJuOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWFvOWuuU9ubGluZeihqOWNleeahOeJueauiuinhOWImQogICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZm9vUGF0dGVybnMpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3RlcDI7CgogICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjIucygpOyAhKF9zdGVwMiA9IF9pdGVyYXRvcjIubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZm9vID0gX3N0ZXAyLnZhbHVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZvby52YWx1ZSA9PT0gcnVsZS5wYXR0ZXJuKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS5wYXR0ZXJuID0gZm9vLnBhdHRlcm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvcjIuZShlcnIpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJ1bGUuaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICAvLyDoh6rlrprkuYnlh73mlbDmoKHpqowKICAgICAgICAgICAgICAgICAgICAgICAgcnVsZS52YWxpZGF0b3IgPSBoYW5kbGVyQ29udmVydFRvVmFsaWRhdG9yLmJpbmQoX3RoaXM2KTsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBydWxlcy5wdXNoKE9iamVjdC5hc3NpZ24oe30sIHJ1bGUsIHJlcGxhY2UpKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9pbm5lckVkaXRSdWxlc1tjb2wua2V5XSA9IHJ1bGVzOwogICAgICAgICAgICAgIH0gLy8g5aSE55CG57uf6K6h5YiXCiAgICAgICAgICAgICAgLy8gc3VtID0g5rGC5ZKM44CBYXZlcmFnZSA9IOW5s+Wdh+WAvAoKCiAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoY29sLnN0YXRpc3RpY3MpKSB7CiAgICAgICAgICAgICAgICBfdGhpczYuc3RhdGlzdGljcy5oYXMgPSB0cnVlOwogICAgICAgICAgICAgICAgY29sLnN0YXRpc3RpY3MuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICB2YXIgYXJyID0gX3RoaXM2LnN0YXRpc3RpY3NbaXRlbS50b0xvd2VyQ2FzZSgpXTsKCiAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGFycikpIHsKICAgICAgICAgICAgICAgICAgICBwdXNoSWZOb3RFeGlzdChhcnIsIGNvbC5rZXkpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF9pbm5lckNvbHVtbnMucHVzaChjb2wpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9IC8vIOWIpOaWreaYr+WQpuW8gOWQr+S6huW6j+WPtwoKCiAgICAgICAgaWYgKHJvd051bWJlcikgewogICAgICAgICAgdmFyIGNvbCA9IHsKICAgICAgICAgICAgdHlwZTogJ3NlcScsCiAgICAgICAgICAgIHRpdGxlOiAnIycsCiAgICAgICAgICAgIHdpZHRoOiA2MCwKICAgICAgICAgICAgZml4ZWQ6ICdsZWZ0JywKICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChzZXFDb2x1bW4pIHsKICAgICAgICAgICAgY29sID0gT2JqZWN0LmFzc2lnbihjb2wsIHNlcUNvbHVtbiwgewogICAgICAgICAgICAgIHR5cGU6ICdzZXEnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF9pbm5lckNvbHVtbnMudW5zaGlmdChjb2wpOwogICAgICAgIH0gLy8g5Yik5pat5piv5ZCm5byA5ZCv5LqG5Y+v6YCJ5oup6KGMCgoKICAgICAgICBpZiAocm93U2VsZWN0aW9uKSB7CiAgICAgICAgICB2YXIgd2lkdGggPSA0MDsKCiAgICAgICAgICBpZiAodGhpcy5zdGF0aXN0aWNzLmhhcyAmJiAhcm93RXhwYW5kICYmICFkcmFnU29ydCkgewogICAgICAgICAgICB3aWR0aCA9IDYwOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBfY29sID0gewogICAgICAgICAgICB0eXBlOiB0aGlzLnJvd1NlbGVjdGlvblR5cGUsCiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCwKICAgICAgICAgICAgZml4ZWQ6ICdsZWZ0JywKICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInCiAgICAgICAgICB9OyAvLyByYWRpbwoKICAgICAgICAgIGlmICh0aGlzLnJvd1NlbGVjdGlvblR5cGUgPT09ICdyYWRpbycgJiYgcmFkaW9Db2x1bW4pIHsKICAgICAgICAgICAgX2NvbCA9IE9iamVjdC5hc3NpZ24oX2NvbCwgcmFkaW9Db2x1bW4sIHsKICAgICAgICAgICAgICB0eXBlOiAncmFkaW8nCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSAvLyBjaGVja2JveAoKCiAgICAgICAgICBpZiAodGhpcy5yb3dTZWxlY3Rpb25UeXBlID09PSAnY2hlY2tib3gnICYmIGNoZWNrYm94Q29sdW1uKSB7CiAgICAgICAgICAgIF9jb2wgPSBPYmplY3QuYXNzaWduKF9jb2wsIGNoZWNrYm94Q29sdW1uLCB7CiAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfaW5uZXJDb2x1bW5zLnVuc2hpZnQoX2NvbCk7CiAgICAgICAgfSAvLyDmmK/lkKblj6/lsZXlvIDooYwKCgogICAgICAgIGlmIChyb3dFeHBhbmQpIHsKICAgICAgICAgIHZhciBfd2lkdGggPSA0MDsKCiAgICAgICAgICBpZiAodGhpcy5zdGF0aXN0aWNzLmhhcyAmJiAhZHJhZ1NvcnQpIHsKICAgICAgICAgICAgX3dpZHRoID0gNjA7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF9jb2wyID0gewogICAgICAgICAgICB0eXBlOiAnZXhwYW5kJywKICAgICAgICAgICAgdGl0bGU6ICcnLAogICAgICAgICAgICB3aWR0aDogX3dpZHRoLAogICAgICAgICAgICBmaXhlZDogJ2xlZnQnLAogICAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICAgIHNsb3RzOiB7CiAgICAgICAgICAgICAgY29udGVudDogJ2V4cGFuZENvbnRlbnQnCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgaWYgKGV4cGFuZENvbHVtbikgewogICAgICAgICAgICBfY29sMiA9IE9iamVjdC5hc3NpZ24oX2NvbDIsIGV4cGFuZENvbHVtbiwgewogICAgICAgICAgICAgIHR5cGU6ICdleHBhbmQnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF9pbm5lckNvbHVtbnMudW5zaGlmdChfY29sMik7CiAgICAgICAgfSAvLyDmmK/lkKblj6/mi5bliqjmjpLluo8KCgogICAgICAgIGlmIChkcmFnU29ydCkgewogICAgICAgICAgdmFyIF93aWR0aDIgPSA0MDsKCiAgICAgICAgICBpZiAodGhpcy5zdGF0aXN0aWNzLmhhcykgewogICAgICAgICAgICBfd2lkdGgyID0gNjA7CiAgICAgICAgICB9CgogICAgICAgICAgdmFyIF9jb2wzID0gewogICAgICAgICAgICB0eXBlOiBKVlhFVHlwZXMucm93RHJhZ1NvcnQsCiAgICAgICAgICAgIHRpdGxlOiAnJywKICAgICAgICAgICAgd2lkdGg6IF93aWR0aDIsCiAgICAgICAgICAgIGZpeGVkOiAnbGVmdCcsCiAgICAgICAgICAgIGFsaWduOiAnY2VudGVyJywKICAgICAgICAgICAgY2VsbFJlbmRlcjogewogICAgICAgICAgICAgIG5hbWU6IEpWWEVUeXBlcy5fcHJlZml4ICsgSlZYRVR5cGVzLnJvd0RyYWdTb3J0CiAgICAgICAgICAgIH0KICAgICAgICAgIH07CgogICAgICAgICAgaWYgKGRyYWdTb3J0Q29sdW1uKSB7CiAgICAgICAgICAgIF9jb2wzID0gT2JqZWN0LmFzc2lnbihfY29sMywgZHJhZ1NvcnRDb2x1bW4sIHsKICAgICAgICAgICAgICB0eXBlOiBKVlhFVHlwZXMucm93RHJhZ1NvcnQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgX2lubmVyQ29sdW1ucy51bnNoaWZ0KF9jb2wzKTsKICAgICAgICB9CgogICAgICAgIHRoaXMuX2lubmVyQ29sdW1ucyA9IF9pbm5lckNvbHVtbnM7CiAgICAgICAgdGhpcy5faW5uZXJFZGl0UnVsZXMgPSBfaW5uZXJFZGl0UnVsZXM7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5oYW5kbGVUYWJzQ2hhbmdlKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioNCiAgICAgKiDoh6rliqjliKTmlq3niLbnuqfmmK/lkKbmmK8gPGEtdGFicy8+IOe7hOS7tu+8jOeEtuWQjua3u+WKoOS6i+S7tuebkeWQrO+8jOiHquWKqOmHjee9ruihqOagvA0KICAgICAqLwogICAgaGFuZGxlVGFic0NoYW5nZTogZnVuY3Rpb24gaGFuZGxlVGFic0NoYW5nZSgpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICAvLyDojrflj5bniLbnuqcKICAgICAgdmFyIHRhYnMgPSBnZXRWbVBhcmVudEJ5TmFtZSh0aGlzLCAnQVRhYnMnKTsKICAgICAgdmFyIHRhYlBhbmUgPSBnZXRWbVBhcmVudEJ5TmFtZSh0aGlzLCAnQVRhYlBhbmUnKTsKCiAgICAgIGlmICh0YWJzICYmIHRhYlBhbmUpIHsKICAgICAgICAvLyDnlKjmiLfoh6rlrprkuYnnmoQga2V5CiAgICAgICAgdmFyIGN1cnJlbnRLZXkgPSB0YWJQYW5lLiR2bm9kZS5rZXk7IC8vIOa3u+WKoCBhY3RpdmVLZXkg55uR5ZCsCgogICAgICAgIHZhciB1bndhdGNoID0gdGFicy4kY2hpbGRyZW5bMF0uJHdhdGNoKCckZGF0YS5fYWN0aXZlS2V5JywgLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoa2V5KSB7CiAgICAgICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIGlmICghKGN1cnJlbnRLZXkgPT09IGtleSkpIHsKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcuJG5leHRUaWNrKCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczcucmVmcmVzaFNjcm9sbCgpOwoKICAgICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LnJlY2FsY3VsYXRlKCk7CgogICAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgICAgICB9KSk7CgogICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgICAgfTsKICAgICAgICB9KCkpOyAvLyDlvZPliY3lrp7kvovplIDmr4Hml7blj5bmtojnm5HlkKwKCiAgICAgICAgdGhpcy4kb24oJ2JlZm9yZURlc3Ryb3knLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICByZXR1cm4gdW53YXRjaCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlVnhlU2Nyb2xsOiBmdW5jdGlvbiBoYW5kbGVWeGVTY3JvbGwoZXZlbnQpIHsKICAgICAgdmFyICRyZWZzID0gdGhpcy4kcmVmcywKICAgICAgICAgIHNjcm9sbCA9IHRoaXMuc2Nyb2xsOyAvLyDorrDlvZXmu5rliqjmnaHnmoTkvY3nva4KCiAgICAgIHNjcm9sbC50b3AgPSBldmVudC5zY3JvbGxUb3A7CiAgICAgIHNjcm9sbC5sZWZ0ID0gZXZlbnQuc2Nyb2xsTGVmdDsKICAgICAgJHJlZnMuc3ViUG9wb3ZlciA/ICRyZWZzLnN1YlBvcG92ZXIuY2xvc2UoKSA6IG51bGw7CiAgICAgIHRoaXMuc2Nyb2xsaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5jbG9zZVNjcm9sbGluZygpOwogICAgfSwKICAgIC8vIOW9k+aJi+WKqOWLvumAieWNlemAieaXtuinpuWPkeeahOS6i+S7tgogICAgaGFuZGxlVnhlUmFkaW9DaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVZ4ZVJhZGlvQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciByb3cgPSBldmVudC4kdGFibGUuZ2V0UmFkaW9SZWNvcmQoKTsKICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSByb3cgPyBbcm93XSA6IFtdOwogICAgICB0aGlzLmhhbmRsZVNlbGVjdENoYW5nZSgncmFkaW8nLCB0aGlzLnNlbGVjdGVkUm93cywgZXZlbnQpOwogICAgfSwKICAgIC8vIOW9k+aJi+WKqOWLvumAieWFqOmAieaXtuinpuWPkeeahOS6i+S7tgogICAgaGFuZGxlVnhlQ2hlY2tib3hBbGw6IGZ1bmN0aW9uIGhhbmRsZVZ4ZUNoZWNrYm94QWxsKGV2ZW50KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gZXZlbnQuJHRhYmxlLmdldENoZWNrYm94UmVjb3JkcygpOwogICAgICB0aGlzLmhhbmRsZVNlbGVjdENoYW5nZSgnY2hlY2tib3gtYWxsJywgdGhpcy5zZWxlY3RlZFJvd3MsIGV2ZW50KTsKICAgIH0sCiAgICAvLyDlvZPmiYvliqjli77pgInlubbkuJTlgLzlj5HnlJ/mlLnlj5jml7bop6blj5HnmoTkuovku7YKICAgIGhhbmRsZVZ4ZUNoZWNrYm94Q2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVWeGVDaGVja2JveENoYW5nZShldmVudCkgewogICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IGV2ZW50LiR0YWJsZS5nZXRDaGVja2JveFJlY29yZHMoKTsKICAgICAgdGhpcy5oYW5kbGVTZWxlY3RDaGFuZ2UoJ2NoZWNrYm94JywgdGhpcy5zZWxlY3RlZFJvd3MsIGV2ZW50KTsKICAgIH0sCiAgICAvLyDooYzpgInmi6ljaGFuZ2Xkuovku7YKICAgIGhhbmRsZVNlbGVjdENoYW5nZTogZnVuY3Rpb24gaGFuZGxlU2VsZWN0Q2hhbmdlKHR5cGUsIHNlbGVjdGVkUm93cywgJGV2ZW50KSB7CiAgICAgIHZhciBhY3Rpb247CgogICAgICBpZiAodHlwZSA9PT0gJ3JhZGlvJykgewogICAgICAgIGFjdGlvbiA9ICdzZWxlY3RlZCc7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NoZWNrYm94JykgewogICAgICAgIGFjdGlvbiA9IHNlbGVjdGVkUm93cy5pbmNsdWRlcygkZXZlbnQucm93KSA/ICdzZWxlY3RlZCcgOiAndW5zZWxlY3RlZCc7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0aW9uID0gJ3NlbGVjdGVkLWFsbCc7CiAgICAgIH0KCiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dJZHMgPSBzZWxlY3RlZFJvd3MubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgICByZXR1cm4gcm93LmlkOwogICAgICB9KTsKICAgICAgdGhpcy50cmlnZ2VyKCdzZWxlY3RSb3dDaGFuZ2UnLCB7CiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICBhY3Rpb246IGFjdGlvbiwKICAgICAgICAkZXZlbnQ6ICRldmVudCwKICAgICAgICByb3c6ICRldmVudC5yb3csCiAgICAgICAgc2VsZWN0ZWRSb3dzOiB0aGlzLnNlbGVjdGVkUm93cywKICAgICAgICBzZWxlY3RlZFJvd0lkczogdGhpcy5zZWxlY3RlZFJvd0lkcwogICAgICB9KTsKICAgIH0sCiAgICAvLyDngrnlh7vljZXlhYPmoLzml7bop6blj5HnmoTkuovku7YKICAgIGhhbmRsZUNlbGxDbGljazogZnVuY3Rpb24gaGFuZGxlQ2VsbENsaWNrKGV2ZW50KSB7CiAgICAgIHZhciByb3cgPSBldmVudC5yb3csCiAgICAgICAgICBjb2x1bW4gPSBldmVudC5jb2x1bW4sCiAgICAgICAgICAkZXZlbnQgPSBldmVudC4kZXZlbnQsCiAgICAgICAgICAkdGFibGUgPSBldmVudC4kdGFibGU7CiAgICAgIHZhciAkcmVmcyA9IHRoaXMuJHJlZnM7IC8vIOeCueWHu+S6huWPr+e8lui+keeahAoKICAgICAgaWYgKGNvbHVtbi5lZGl0UmVuZGVyKSB7CiAgICAgICAgJHJlZnMuc3ViUG9wb3ZlciA/ICRyZWZzLnN1YlBvcG92ZXIuY2xvc2UoKSA6IG51bGw7CiAgICAgICAgcmV0dXJuOwogICAgICB9IC8vIOaYvuekuuivpue7huS/oeaBrwoKCiAgICAgIGlmIChjb2x1bW4ub3duLnNob3dEZXRhaWxzKSB7CiAgICAgICAgLy8g5Lik5Liq5aaC5p6c5ZCM5pe25a2Y5Zyo55qE6K+d5Lya5Ye6546w5q275b6q546vCiAgICAgICAgJHJlZnMuc3ViUG9wb3ZlciA/ICRyZWZzLnN1YlBvcG92ZXIuY2xvc2UoKSA6IG51bGw7CiAgICAgICAgJHJlZnMuZGV0YWlsc01vZGFsID8gJHJlZnMuZGV0YWlsc01vZGFsLm9wZW4oZXZlbnQpIDogbnVsbDsKICAgICAgfSBlbHNlIGlmICgkcmVmcy5zdWJQb3BvdmVyKSB7CiAgICAgICAgJHJlZnMuc3ViUG9wb3Zlci50b2dnbGUoZXZlbnQpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuY2xpY2tTZWxlY3RSb3cpIHsKICAgICAgICB2YXIgY2xhc3NOYW1lID0gJGV2ZW50LnRhcmdldC5jbGFzc05hbWUgfHwgJyc7CiAgICAgICAgY2xhc3NOYW1lID0gdHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3N0cmluZycgPyBjbGFzc05hbWUgOiBjbGFzc05hbWUudG9TdHJpbmcoKTsgLy8g54K55Ye755qE5pivZXhwYW5k77yM5LiN5YGa5aSE55CGCgogICAgICAgIGlmIChjbGFzc05hbWUuaW5jbHVkZXMoJ3Z4ZS10YWJsZS0tZXhwYW5kLWJ0bicpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfSAvLyDngrnlh7vnmoTmmK9jaGVja2JveO+8jOS4jeWBmuWkhOeQhgoKCiAgICAgICAgaWYgKGNsYXNzTmFtZS5pbmNsdWRlcygndnhlLWNoZWNrYm94LS1pY29uJykgfHwgY2xhc3NOYW1lLmluY2x1ZGVzKCd2eGUtY2VsbC0tY2hlY2tib3gnKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0gLy8g54K55Ye755qE5pivcmFkaW/vvIzkuI3lgZrlpITnkIYKCgogICAgICAgIGlmIChjbGFzc05hbWUuaW5jbHVkZXMoJ3Z4ZS1yYWRpby0taWNvbicpIHx8IGNsYXNzTmFtZS5pbmNsdWRlcygndnhlLWNlbGwtLXJhZGlvJykpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICh0aGlzLnJvd1NlbGVjdGlvblR5cGUgPT09ICdyYWRpbycpIHsKICAgICAgICAgICR0YWJsZS5zZXRSYWRpb1Jvdyhyb3cpOwogICAgICAgICAgdGhpcy5oYW5kbGVWeGVSYWRpb0NoYW5nZShldmVudCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICR0YWJsZS50b2dnbGVDaGVja2JveFJvdyhyb3cpOwogICAgICAgICAgdGhpcy5oYW5kbGVWeGVDaGVja2JveENoYW5nZShldmVudCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgLy8g5Y2V5YWD5qC857yW6L6R54q25oCB5LiL6KKr5YWz6Zet5pe25Lya6Kem5Y+R6K+l5LqL5Lu2CiAgICBoYW5kbGVFZGl0Q2xvc2VkOiBmdW5jdGlvbiBoYW5kbGVFZGl0Q2xvc2VkKF9yZWYyKSB7CiAgICAgIHZhciBjb2x1bW4gPSBfcmVmMi5jb2x1bW47CiAgICAgIC8vIOaJp+ihjOWinuW8ugogICAgICBnZXRFbmhhbmNlZE1peGlucyhjb2x1bW4ub3duLiR0eXBlLCAnYW9wRXZlbnRzJykuZWRpdENsb3NlZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgfSwKICAgIC8vIOWNleWFg+agvOiiq+a/gOa0u+e8lui+keaXtuS8muinpuWPkeivpeS6i+S7tgogICAgaGFuZGxlRWRpdEFjdGl2ZWQ6IGZ1bmN0aW9uIGhhbmRsZUVkaXRBY3RpdmVkKF9yZWYzKSB7CiAgICAgIHZhciBjb2x1bW4gPSBfcmVmMy5jb2x1bW47CiAgICAgIC8vIOaJp+ihjOWinuW8ugogICAgICBnZXRFbmhhbmNlZE1peGlucyhjb2x1bW4ub3duLiR0eXBlLCAnYW9wRXZlbnRzJykuZWRpdEFjdGl2ZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0sCgogICAgLyoqIOihqOWwvuaVsOaNruWkhOeQhuaWueazle+8jOeUqOS6juaYvuekuue7n+iuoeS/oeaBryAqLwogICAgaGFuZGxlRm9vdGVyTWV0aG9kOiBmdW5jdGlvbiBoYW5kbGVGb290ZXJNZXRob2QoX3JlZjQpIHsKICAgICAgdmFyIGNvbHVtbnMgPSBfcmVmNC5jb2x1bW5zLAogICAgICAgICAgZGF0YSA9IF9yZWY0LmRhdGE7CiAgICAgIHZhciBzdGF0aXN0aWNzID0gdGhpcy5zdGF0aXN0aWNzOwogICAgICB2YXIgZm9vdGVycyA9IFtdOwoKICAgICAgaWYgKHN0YXRpc3RpY3MuaGFzKSB7CiAgICAgICAgaWYgKHN0YXRpc3RpY3Muc3VtLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvb3RlcnMucHVzaCh0aGlzLmdldEZvb3RlclN0YXRpc3RpY3NNYXAoewogICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICAgICAgICB0aXRsZTogJ+WQiOiuoScsCiAgICAgICAgICAgIGNoZWNrczogc3RhdGlzdGljcy5zdW0sCiAgICAgICAgICAgIG1ldGhvZDogZnVuY3Rpb24gbWV0aG9kKGNvbHVtbikgewogICAgICAgICAgICAgIHJldHVybiBYRVV0aWxzLnN1bShkYXRhLCBjb2x1bW4ucHJvcGVydHkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KSk7CiAgICAgICAgfQoKICAgICAgICBpZiAoc3RhdGlzdGljcy5hdmVyYWdlLmxlbmd0aCA+IDApIHsKICAgICAgICAgIGZvb3RlcnMucHVzaCh0aGlzLmdldEZvb3RlclN0YXRpc3RpY3NNYXAoewogICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLAogICAgICAgICAgICB0aXRsZTogJ+W5s+WdhycsCiAgICAgICAgICAgIGNoZWNrczogc3RhdGlzdGljcy5hdmVyYWdlLAogICAgICAgICAgICBtZXRob2Q6IGZ1bmN0aW9uIG1ldGhvZChjb2x1bW4pIHsKICAgICAgICAgICAgICByZXR1cm4gWEVVdGlscy5tZWFuKGRhdGEsIGNvbHVtbi5wcm9wZXJ0eSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmb290ZXJzOwogICAgfSwKICAgIGdldEZvb3RlclN0YXRpc3RpY3NNYXA6IGZ1bmN0aW9uIGdldEZvb3RlclN0YXRpc3RpY3NNYXAoX3JlZjUpIHsKICAgICAgdmFyIGNvbHVtbnMgPSBfcmVmNS5jb2x1bW5zLAogICAgICAgICAgdGl0bGUgPSBfcmVmNS50aXRsZSwKICAgICAgICAgIGNoZWNrcyA9IF9yZWY1LmNoZWNrcywKICAgICAgICAgIG1ldGhvZCA9IF9yZWY1Lm1ldGhvZDsKICAgICAgcmV0dXJuIGNvbHVtbnMubWFwKGZ1bmN0aW9uIChjb2x1bW4sIGNvbHVtbkluZGV4KSB7CiAgICAgICAgaWYgKGNvbHVtbkluZGV4ID09PSAwKSB7CiAgICAgICAgICByZXR1cm4gdGl0bGU7CiAgICAgICAgfQoKICAgICAgICBpZiAoY2hlY2tzLmluY2x1ZGVzKGNvbHVtbi5wcm9wZXJ0eSkpIHsKICAgICAgICAgIHJldHVybiBtZXRob2QoY29sdW1uLCBjb2x1bW5JbmRleCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfSk7CiAgICB9LAoKICAgIC8qKiDooajlsL7ljZXlhYPmoLzlkIjlubbmlrnms5UgKi8KICAgIGhhbmRsZUZvb3RlclNwYW5NZXRob2Q6IGZ1bmN0aW9uIGhhbmRsZUZvb3RlclNwYW5NZXRob2QoZXZlbnQpIHsKICAgICAgaWYgKGV2ZW50LmNvbHVtbkluZGV4ID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGNvbHNwYW46IDIKICAgICAgICB9OwogICAgICB9CiAgICB9LAoKICAgIC8qLS0tIOWklumDqOWPr+iwg+eUqOaOpeWPo+aWueazlSAtLS0qLwoKICAgIC8qKg0KICAgICAqIOmHjee9rua7muWKqOadoVRvcOS9jee9rg0KICAgICAqIEBwYXJhbSB0b3Ag5pawdG9w5L2N572u77yM55WZ56m65YiZ5rua5Yqo5Yiw5LiK5qyh6K6w5b2V55qE5L2N572u77yM55So5LqO6Kej5Yaz5YiH5o2idGFi6YCJ6aG55Y2h5pe25a+86Ie055m95bGP5Lul5Y+K6Ieq5Yqo5bCG5rua5Yqo5p2h5rua5Yqo5Yiw6aG26YOo55qE6Zeu6aKYDQogICAgICovCiAgICByZXNldFNjcm9sbFRvcDogZnVuY3Rpb24gcmVzZXRTY3JvbGxUb3AodG9wKSB7CiAgICAgIHRoaXMuc2Nyb2xsVG8obnVsbCwgdG9wID09IG51bGwgfHwgdG9wID09PSAnJyA/IHRoaXMuc2Nyb2xsLnRvcCA6IHRvcCk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOWKoOi9veaWsOaVsOaNru+8jOWSjCBsb2FkRGF0YSDkuI3lkIznmoTmmK/vvIznlKjor6Xmlrnms5XliqDovb3nmoTmlbDmja7pg73mmK/nm7jlvZPkuo7ngrnmlrDlop7mjInpkq7mlrDlop7nmoTmlbDmja7jgIINCiAgICAgKiDpgILnlKjkuo7kuI3mmK/mlbDmja7lupPph4zmn6Xlh7rmnaXnmoTmsqHmnIlpZOeahOS4tOaXtuaVsOaNrg0KICAgICAqIEBwYXJhbSBkYXRhU291cmNlDQogICAgICovCiAgICBsb2FkTmV3RGF0YTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2xvYWROZXdEYXRhID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoZGF0YVNvdXJjZSkgewogICAgICAgIHZhciB4VGFibGU7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGF0YVNvdXJjZSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB4VGFibGUgPSB0aGlzLiRyZWZzLnZ4ZS4kcmVmcy54VGFibGU7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4geFRhYmxlLmxvYWREYXRhKGRhdGFTb3VyY2UpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQzLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgW10pOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2FkTmV3RGF0YShfeDIpIHsKICAgICAgICByZXR1cm4gX2xvYWROZXdEYXRhLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2FkTmV3RGF0YTsKICAgIH0oKSwKICAgIC8vIOagoemqjHRhYmxl77yM5aSx6LSl6L+U5ZueZXJyTWFw77yM5oiQ5Yqf6L+U5ZuebnVsbAogICAgdmFsaWRhdGVUYWJsZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3ZhbGlkYXRlVGFibGUgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgZXJyTWFwOwogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsaWRhdGUoKS5jYXRjaChmdW5jdGlvbiAoZXJyTWFwKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJNYXA7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgZXJyTWFwID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZXJyTWFwID8gZXJyTWFwIDogbnVsbCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHZhbGlkYXRlVGFibGUoKSB7CiAgICAgICAgcmV0dXJuIF92YWxpZGF0ZVRhYmxlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWxpZGF0ZVRhYmxlOwogICAgfSgpLAogICAgLy8g5a6M5pW05qCh6aqMCiAgICBmdWxsVmFsaWRhdGVUYWJsZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2Z1bGxWYWxpZGF0ZVRhYmxlID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIGVyck1hcDsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZ1bGxWYWxpZGF0ZSgpLmNhdGNoKGZ1bmN0aW9uIChlcnJNYXApIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGVyck1hcDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBlcnJNYXAgPSBfY29udGV4dDUuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBlcnJNYXAgPyBlcnJNYXAgOiBudWxsKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZnVsbFZhbGlkYXRlVGFibGUoKSB7CiAgICAgICAgcmV0dXJuIF9mdWxsVmFsaWRhdGVUYWJsZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZnVsbFZhbGlkYXRlVGFibGU7CiAgICB9KCksCgogICAgLyoqIOiuvue9ruafkOihjOafkOWIl+eahOWAvCAqLwogICAgc2V0VmFsdWVzOiBmdW5jdGlvbiBzZXRWYWx1ZXModmFsdWVzKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlcykpIHsKICAgICAgICBjb25zb2xlLndhcm4oIkpWeGVUYWJsZS5zZXRWYWx1ZXNcdUZGMUFcdTVGQzVcdTk4N0JcdTRGMjBcdTkwMTJcdTY1NzBcdTdFQzQiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtLCBpZHgpIHsKICAgICAgICB2YXIgcm93S2V5ID0gaXRlbS5yb3dLZXksCiAgICAgICAgICAgIHJlY29yZCA9IGl0ZW0udmFsdWVzOwoKICAgICAgICB2YXIgX3RoaXM4JGdldElmUm93QnlJZCA9IF90aGlzOC5nZXRJZlJvd0J5SWQocm93S2V5KSwKICAgICAgICAgICAgcm93ID0gX3RoaXM4JGdldElmUm93QnlJZC5yb3c7CgogICAgICAgIGlmICghcm93KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBPYmplY3Qua2V5cyhyZWNvcmQpLmZvckVhY2goZnVuY3Rpb24gKGNvbEtleSkgewogICAgICAgICAgdmFyIGNvbHVtbiA9IF90aGlzOC5nZXRDb2x1bW5CeUtleShjb2xLZXkpOwoKICAgICAgICAgIGlmIChjb2x1bW4pIHsKICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gcm93W2NvbEtleV07CiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IHJlY29yZFtjb2xLZXldOwoKICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkgewogICAgICAgICAgICAgIF90aGlzOC4kc2V0KHJvdywgY29sS2V5LCBuZXdWYWx1ZSk7IC8vIOinpuWPkSB2YWx1ZUNoYW5nZSDkuovku7YKCgogICAgICAgICAgICAgIF90aGlzOC50cmlnZ2VyKCd2YWx1ZUNoYW5nZScsIHsKICAgICAgICAgICAgICAgIHR5cGU6IGNvbHVtbi5vd24uJHR5cGUsCiAgICAgICAgICAgICAgICB2YWx1ZTogbmV3VmFsdWUsCiAgICAgICAgICAgICAgICBvbGRWYWx1ZTogb2xkVmFsdWUsCiAgICAgICAgICAgICAgICBjb2w6IGNvbHVtbi5vd24sCiAgICAgICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgICAgIGlzU2V0VmFsdWVzOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUud2FybigiSlZ4ZVRhYmxlLnNldFZhbHVlc1x1RkYxQVx1NkNBMVx1NjcwOVx1NjI3RVx1NTIzMGtleVx1NEUzQVwiIi5jb25jYXQoY29sS2V5LCAiXCJcdTc2ODRcdTUyMTciKSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKiog6I635Y+W5omA5pyJ55qE5pWw5o2u77yM5YyF5ousdmFsdWVz44CBZGVsZXRlSWRzICovCiAgICBnZXRBbGw6IGZ1bmN0aW9uIGdldEFsbCgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB0YWJsZURhdGE6IHRoaXMuZ2V0VGFibGVEYXRhKCksCiAgICAgICAgZGVsZXRlRGF0YTogdGhpcy5nZXREZWxldGVEYXRhKCkKICAgICAgfTsKICAgIH0sCgogICAgLyoqIOiOt+WPluihqOagvOaVsOaNriAqLwogICAgZ2V0VGFibGVEYXRhOiBmdW5jdGlvbiBnZXRUYWJsZURhdGEoKSB7CiAgICAgIHZhciBfdGhpczkgPSB0aGlzOwoKICAgICAgdmFyIG9wdGlvbnMgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICB2YXIgcm93SWRzID0gb3B0aW9ucy5yb3dJZHM7CiAgICAgIHZhciB0YWJsZURhdGE7IC8vIOS7heafpeivouaMh+Wummlk55qE6KGMCgogICAgICBpZiAoQXJyYXkuaXNBcnJheShyb3dJZHMpICYmIHJvd0lkcy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGFibGVEYXRhID0gW107CiAgICAgICAgcm93SWRzLmZvckVhY2goZnVuY3Rpb24gKHJvd0lkKSB7CiAgICAgICAgICB2YXIgX3RoaXM5JGdldElmUm93QnlJZCA9IF90aGlzOS5nZXRJZlJvd0J5SWQocm93SWQpLAogICAgICAgICAgICAgIHJvdyA9IF90aGlzOSRnZXRJZlJvd0J5SWQucm93OwoKICAgICAgICAgIGlmIChyb3cpIHsKICAgICAgICAgICAgdGFibGVEYXRhLnB1c2gocm93KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDmn6Xor6LmiYDmnInooYwKICAgICAgICB0YWJsZURhdGEgPSB0aGlzLiRyZWZzLnZ4ZS5nZXRUYWJsZURhdGEoKS5mdWxsRGF0YTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyTmV3Um93cyh0YWJsZURhdGEsIGZhbHNlKTsKICAgIH0sCgogICAgLyoqIOS7heiOt+WPluaWsOWinueahOaVsOaNriAqLwogICAgZ2V0TmV3RGF0YTogZnVuY3Rpb24gZ2V0TmV3RGF0YSgpIHsKICAgICAgdmFyIG5ld0RhdGEgPSBjbG9uZU9iamVjdCh0aGlzLiRyZWZzLnZ4ZS5nZXRJbnNlcnRSZWNvcmRzKCkpOwogICAgICBuZXdEYXRhLmZvckVhY2goZnVuY3Rpb24gKHJvdykgewogICAgICAgIHJldHVybiBkZWxldGUgcm93LmlkOwogICAgICB9KTsKICAgICAgcmV0dXJuIG5ld0RhdGE7CiAgICB9LAoKICAgIC8qKiDku4Xojrflj5bmlrDlop7nmoTmlbDmja4s5bim5pyJaWQgKi8KICAgIGdldE5ld0RhdGFXaXRoSWQ6IGZ1bmN0aW9uIGdldE5ld0RhdGFXaXRoSWQoKSB7CiAgICAgIHZhciBuZXdEYXRhID0gY2xvbmVPYmplY3QodGhpcy4kcmVmcy52eGUuZ2V0SW5zZXJ0UmVjb3JkcygpKTsKICAgICAgcmV0dXJuIG5ld0RhdGE7CiAgICB9LAoKICAgIC8qKiDmoLnmja5JROiOt+WPluihjO+8jOaWsOWinueahOihjOS5n+iDveafpeWHuuadpSAqLwogICAgZ2V0SWZSb3dCeUlkOiBmdW5jdGlvbiBnZXRJZlJvd0J5SWQoaWQpIHsKICAgICAgdmFyIHJvdyA9IHRoaXMuZ2V0Um93QnlJZChpZCksCiAgICAgICAgICBpc05ldyA9IGZhbHNlOwoKICAgICAgaWYgKCFyb3cpIHsKICAgICAgICByb3cgPSB0aGlzLmdldE5ld1Jvd0J5SWQoaWQpOwoKICAgICAgICBpZiAoIXJvdykgewogICAgICAgICAgY29uc29sZS53YXJuKCJKVnhlVGFibGUuZ2V0SWZSb3dCeUlkXHVGRjFBXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwaWRcdTRFM0FcIiIuY29uY2F0KGlkLCAiXCJcdTc2ODRcdTg4NEMiKSk7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICByb3c6IG51bGwKICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICBpc05ldyA9IHRydWU7CiAgICAgIH0KCiAgICAgIHJldHVybiB7CiAgICAgICAgcm93OiByb3csCiAgICAgICAgaXNOZXc6IGlzTmV3CiAgICAgIH07CiAgICB9LAoKICAgIC8qKiDpgJrov4fkuLTml7ZJROiOt+WPluaWsOWinueahOihjCAqLwogICAgZ2V0TmV3Um93QnlJZDogZnVuY3Rpb24gZ2V0TmV3Um93QnlJZChpZCkgewogICAgICB2YXIgcmVjb3JkcyA9IHRoaXMuZ2V0SW5zZXJ0UmVjb3JkcygpOwoKICAgICAgdmFyIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZWNvcmRzKSwKICAgICAgICAgIF9zdGVwMzsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IzLnMoKTsgIShfc3RlcDMgPSBfaXRlcmF0b3IzLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciByZWNvcmQgPSBfc3RlcDMudmFsdWU7CgogICAgICAgICAgaWYgKHJlY29yZC5pZCA9PT0gaWQpIHsKICAgICAgICAgICAgcmV0dXJuIHJlY29yZDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvcjMuZShlcnIpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCgogICAgLyoqIOS7heiOt+WPluiiq+WIoOmZpOeahOaVsOaNru+8iOaWsOWinuWPiOiiq+WIoOmZpOeahOaVsOaNruS4jeS8muiiq+iOt+WPluWIsO+8iSAqLwogICAgZ2V0RGVsZXRlRGF0YTogZnVuY3Rpb24gZ2V0RGVsZXRlRGF0YSgpIHsKICAgICAgcmV0dXJuIGNsb25lT2JqZWN0KHRoaXMuJHJlZnMudnhlLmdldFJlbW92ZVJlY29yZHMoKSk7CiAgICB9LAoKICAgIC8qKg0KICAgICAqIOa3u+WKoOS4gOihjOaIluWkmuihjA0KICAgICAqDQogICAgICogQHBhcmFtIHJvd3MNCiAgICAgKiBAcmV0dXJuDQogICAgICovCiAgICBhZGRSb3dzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWRkUm93cyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU2KCkgewogICAgICAgIHZhciByb3dzLAogICAgICAgICAgICBpc09ubEpzLAogICAgICAgICAgICBfYXJnczYgPSBhcmd1bWVudHM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ni5wcmV2ID0gX2NvbnRleHQ2Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByb3dzID0gX2FyZ3M2Lmxlbmd0aCA+IDAgJiYgX2FyZ3M2WzBdICE9PSB1bmRlZmluZWQgPyBfYXJnczZbMF0gOiB7fTsKICAgICAgICAgICAgICAgIGlzT25sSnMgPSBfYXJnczYubGVuZ3RoID4gMSA/IF9hcmdzNlsxXSA6IHVuZGVmaW5lZDsKCiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuaXNvbmxpbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByb3dzID0gewogICAgICAgICAgICAgICAgICBjb252ZXJ0ZXI6ICIiLAogICAgICAgICAgICAgICAgICBkYkRlZmF1bHRWYWw6ICIiLAogICAgICAgICAgICAgICAgICBkYkZpZWxkTmFtZTogIiIsCiAgICAgICAgICAgICAgICAgIGRiRmllbGRUeHQ6ICIiLAogICAgICAgICAgICAgICAgICBkYklzS2V5OiAiMSIsCiAgICAgICAgICAgICAgICAgIGRiSXNOdWxsOiAiMCIsCiAgICAgICAgICAgICAgICAgIGRiTGVuZ3RoOiAiMzYiLAogICAgICAgICAgICAgICAgICBkYlBvaW50TGVuZ3RoOiAiMCIsCiAgICAgICAgICAgICAgICAgIGRiVHlwZTogInN0cmluZyIsCiAgICAgICAgICAgICAgICAgIGRpY3RGaWVsZDogIiIsCiAgICAgICAgICAgICAgICAgIGRpY3RUYWJsZTogIiIsCiAgICAgICAgICAgICAgICAgIGRpY3RUZXh0OiAiIiwKICAgICAgICAgICAgICAgICAgZmllbGREZWZhdWx0VmFsdWU6ICIiLAogICAgICAgICAgICAgICAgICBmaWVsZEV4dGVuZEpzb246ICIiLAogICAgICAgICAgICAgICAgICBmaWVsZEhyZWY6ICIiLAogICAgICAgICAgICAgICAgICBmaWVsZExlbmd0aDogIjEyMCIsCiAgICAgICAgICAgICAgICAgIGZpZWxkTXVzdElucHV0OiAiMCIsCiAgICAgICAgICAgICAgICAgIGZpZWxkU2hvd1R5cGU6ICJ0ZXh0IiwKICAgICAgICAgICAgICAgICAgaXNRdWVyeTogIjAiLAogICAgICAgICAgICAgICAgICBpc1JlYWRPbmx5OiAiMSIsCiAgICAgICAgICAgICAgICAgIGlzU2hvd0Zvcm06ICIwIiwKICAgICAgICAgICAgICAgICAgaXNTaG93TGlzdDogIjAiLAogICAgICAgICAgICAgICAgICBtYWluRmllbGQ6ICIiLAogICAgICAgICAgICAgICAgICBtYWluVGFibGU6ICIiLAogICAgICAgICAgICAgICAgICBvcmRlck51bTogMSwKICAgICAgICAgICAgICAgICAgb3JkZXJfbnVtOiAwLAogICAgICAgICAgICAgICAgICBxdWVyeUNvbmZpZ0ZsYWc6ICIwIiwKICAgICAgICAgICAgICAgICAgcXVlcnlEZWZWYWw6ICIiLAogICAgICAgICAgICAgICAgICBxdWVyeURpY3RGaWVsZDogIiIsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5RGljdFRhYmxlOiAiIiwKICAgICAgICAgICAgICAgICAgcXVlcnlEaWN0VGV4dDogIiIsCiAgICAgICAgICAgICAgICAgIHF1ZXJ5TW9kZTogInNpbmdsZSIsCiAgICAgICAgICAgICAgICAgIHNvcnRGbGFnOiAiMCIKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzZWxmQWRkJyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIHRoaXMuX2FkZE9ySW5zZXJ0KHJvd3MsIC0xLCAnYWRkZWQnLCBpc09ubEpzKSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGFkZFJvd3MoKSB7CiAgICAgICAgcmV0dXJuIF9hZGRSb3dzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBhZGRSb3dzOwogICAgfSgpLAoKICAgIC8qKg0KICAgICAqIOa3u+WKoOS4gOihjOaIluWkmuihjA0KICAgICAqDQogICAgICogQHBhcmFtIHJvd3MNCiAgICAgKiBAcGFyYW0gaW5kZXgg5re75Yqg5LiL5qCH77yM5pWw5a2X77yM5b+F5aGrDQogICAgICogQHJldHVybg0KICAgICAqLwogICAgaW5zZXJ0Um93czogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2luc2VydFJvd3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNyhyb3dzLCBpbmRleCkgewogICAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCEodHlwZW9mIGluZGV4ICE9PSAnbnVtYmVyJyB8fCBpbmRleCA8IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCJcdTMwMTBKVlhFVGFibGVcdTMwMTFpbnNlcnRSb3dzXHVGRjFBaW5kZXhcdTVGQzVcdTk4N0JcdTRGMjBcdTkwMTJcdTY1NzBcdTVCNTdcdUZGMENcdTRFMTRcdTU5MjdcdTRFOEUtMSIpOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LmFicnVwdCgicmV0dXJuIiwgdGhpcy5fYWRkT3JJbnNlcnQocm93cywgaW5kZXgsICdpbnNlcnRlZCcpKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gaW5zZXJ0Um93cyhfeDMsIF94NCkgewogICAgICAgIHJldHVybiBfaW5zZXJ0Um93cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gaW5zZXJ0Um93czsKICAgIH0oKSwKCiAgICAvKioNCiAgICAgKiDmt7vliqDkuIDooYzmiJblpJrooYzkuLTml7bmlbDmja7vvIzkuI3kvJrloavlhYXpu5jorqTlgLzvvIzkvKDku4DkuYjlsLHmt7vliqDov5vljrvku4DkuYgNCiAgICAgKiBAcGFyYW0gcm93cw0KICAgICAqIEBwYXJhbSBvcHRpb25zIOmAiemhuQ0KICAgICAqIEBwYXJhbSBvcHRpb25zLnNldEFjdGl2ZSDmmK/lkKbmv4DmtLvmnIDlkI7kuIDooYznmoTnvJbovpHmqKHlvI8NCiAgICAgKi8KICAgIHB1c2hSb3dzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcHVzaFJvd3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCgpIHsKICAgICAgICB2YXIgcm93cywKICAgICAgICAgICAgb3B0aW9ucywKICAgICAgICAgICAgeFRhYmxlLAogICAgICAgICAgICBzZXRBY3RpdmUsCiAgICAgICAgICAgIGluZGV4LAogICAgICAgICAgICByZXN1bHQsCiAgICAgICAgICAgIF9hcmdzOCA9IGFyZ3VtZW50czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJvd3MgPSBfYXJnczgubGVuZ3RoID4gMCAmJiBfYXJnczhbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzOFswXSA6IHt9OwogICAgICAgICAgICAgICAgb3B0aW9ucyA9IF9hcmdzOC5sZW5ndGggPiAxICYmIF9hcmdzOFsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3M4WzFdIDoge307CiAgICAgICAgICAgICAgICB4VGFibGUgPSB0aGlzLiRyZWZzLnZ4ZS4kcmVmcy54VGFibGU7CiAgICAgICAgICAgICAgICBzZXRBY3RpdmUgPSBvcHRpb25zLnNldEFjdGl2ZSwgaW5kZXggPSBvcHRpb25zLmluZGV4OwogICAgICAgICAgICAgICAgc2V0QWN0aXZlID0gc2V0QWN0aXZlID09IG51bGwgPyBmYWxzZSA6ICEhc2V0QWN0aXZlOwogICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCA9PSBudWxsID8gLTEgOiBpbmRleDsKICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggPT09IC0xID8gaW5kZXggOiB4VGFibGUudGFibGVGdWxsRGF0YVtpbmRleF07IC8vIOaPkuWFpeihjAoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiB4VGFibGUuaW5zZXJ0QXQocm93cywgaW5kZXgpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dDguc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoc2V0QWN0aXZlKSB7CiAgICAgICAgICAgICAgICAgIC8vIOa/gOa0u+acgOWQjuS4gOihjOeahOe8lui+keaooeW8jwogICAgICAgICAgICAgICAgICB4VGFibGUuc2V0QWN0aXZlUm93KHJlc3VsdC5yb3dzW3Jlc3VsdC5yb3dzLmxlbmd0aCAtIDFdKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY2FsY1NvcnROdW1iZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguYWJydXB0KCJyZXR1cm4iLCByZXN1bHQpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU4LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcHVzaFJvd3MoKSB7CiAgICAgICAgcmV0dXJuIF9wdXNoUm93cy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcHVzaFJvd3M7CiAgICB9KCksCgogICAgLyoqIOa4heepuumAieaLqeihjCAqLwogICAgY2xlYXJTZWxlY3Rpb246IGZ1bmN0aW9uIGNsZWFyU2VsZWN0aW9uKCkgewogICAgICB2YXIgZXZlbnQgPSB7CiAgICAgICAgJHRhYmxlOiB0aGlzLiRyZWZzLnZ4ZSwKICAgICAgICB0YXJnZXQ6IHRoaXMKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLnJvd1NlbGVjdGlvblR5cGUgPT09IEpWWEVUeXBlcy5yb3dSYWRpbykgewogICAgICAgIHRoaXMuJHJlZnMudnhlLmNsZWFyUmFkaW9Sb3coKTsKICAgICAgICB0aGlzLmhhbmRsZVZ4ZVJhZGlvQ2hhbmdlKGV2ZW50KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLnZ4ZS5jbGVhckNoZWNrYm94Um93KCk7CiAgICAgICAgdGhpcy5oYW5kbGVWeGVDaGVja2JveENoYW5nZShldmVudCk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqIOWIoOmZpOS4gOihjOaIluWkmuihjOaVsOaNriAqLwogICAgcmVtb3ZlUm93czogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlbW92ZVJvd3MgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL19yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShyb3dzKSB7CiAgICAgICAgdmFyIHJlczsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU5JChfY29udGV4dDkpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ5LnByZXYgPSBfY29udGV4dDkubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW1vdmUocm93cyk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0OS5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY2FsY1NvcnROdW1iZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoInJldHVybiIsIHJlcyk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlbW92ZVJvd3MoX3g1KSB7CiAgICAgICAgcmV0dXJuIF9yZW1vdmVSb3dzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZW1vdmVSb3dzOwogICAgfSgpLAoKICAgIC8qKiDmoLnmja5pZOWIoOmZpOS4gOihjOaIluWkmuihjCAqLwogICAgcmVtb3ZlUm93c0J5SWQ6IGZ1bmN0aW9uIHJlbW92ZVJvd3NCeUlkKHJvd0lkKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKCiAgICAgIHZhciByb3dJZHM7CgogICAgICBpZiAoQXJyYXkuaXNBcnJheShyb3dJZCkpIHsKICAgICAgICByb3dJZHMgPSByb3dJZDsKICAgICAgfSBlbHNlIHsKICAgICAgICByb3dJZHMgPSBbcm93SWRdOwogICAgICB9CgogICAgICB2YXIgcm93cyA9IHJvd0lkcy5tYXAoZnVuY3Rpb24gKGlkKSB7CiAgICAgICAgdmFyIF90aGlzMTAkZ2V0SWZSb3dCeUlkID0gX3RoaXMxMC5nZXRJZlJvd0J5SWQoaWQpLAogICAgICAgICAgICByb3cgPSBfdGhpczEwJGdldElmUm93QnlJZC5yb3c7CgogICAgICAgIGlmICghcm93KSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAocm93KSB7CiAgICAgICAgICByZXR1cm4gcm93OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oIlx1MzAxMEpWWEVUYWJsZVx1MzAxMXJlbW92ZVJvd3NCeUlkXHVGRjFBIi5jb25jYXQoaWQsICJcdTRFMERcdTVCNThcdTU3MjgiKSk7CiAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICAgIH0pLmZpbHRlcihmdW5jdGlvbiAocm93KSB7CiAgICAgICAgcmV0dXJuIHJvdyAhPSBudWxsOwogICAgICB9KTsKICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlUm93cyhyb3dzKTsKICAgIH0sCiAgICBnZXRDb2x1bW5CeUtleTogZnVuY3Rpb24gZ2V0Q29sdW1uQnlLZXkoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLnZ4ZS5nZXRDb2x1bW5CeUZpZWxkLmFwcGx5KHRoaXMuJHJlZnMudnhlLCBhcmd1bWVudHMpOwogICAgfSwKCiAgICAvKiAtLS0g6L6F5Yqp5pa55rOVIC0tLSovCiAgICAvLyDop6blj5Hkuovku7YKICAgIHRyaWdnZXI6IGZ1bmN0aW9uIHRyaWdnZXIobmFtZSkgewogICAgICB2YXIgZXZlbnQgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgICBldmVudC4kdGFyZ2V0ID0gdGhpczsKICAgICAgZXZlbnQuJHRhYmxlID0gdGhpcy4kcmVmcy52eGU7IC8vb25saW5l5aKe5by65Y+C5pWw5YW85a65CgogICAgICBldmVudC50YXJnZXQgPSB0aGlzOwogICAgICB0aGlzLiRlbWl0KG5hbWUsIGV2ZW50KTsKICAgIH0sCgogICAgLyoqIOWKoOi9veaVsOaNruWtl+WFuOW5tuWQiOW5tuWIsCBvcHRpb25zICovCiAgICBfbG9hZERpY3RDb25jYXRUb09wdGlvbnM6IGZ1bmN0aW9uIF9sb2FkRGljdENvbmNhdFRvT3B0aW9ucyhjb2x1bW4pIHsKICAgICAgdmFyIF90aGlzMTEgPSB0aGlzOwoKICAgICAgaW5pdERpY3RPcHRpb25zKGNvbHVtbi5kaWN0Q29kZSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB2YXIgbmV3T3B0aW9ucyA9IGNvbHVtbi5vcHRpb25zIHx8IFtdOyAvLyAuY29uY2F0KHJlcy5yZXN1bHQpCgogICAgICAgICAgcmVzLnJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgICAgIC8vIOi/h+a7pOmHjeWkjeaVsOaNrgogICAgICAgICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG5ld09wdGlvbnMpLAogICAgICAgICAgICAgICAgX3N0ZXA0OwoKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBmb3IgKF9pdGVyYXRvcjQucygpOyAhKF9zdGVwNCA9IF9pdGVyYXRvcjQubigpKS5kb25lOykgewogICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IF9zdGVwNC52YWx1ZTsKICAgICAgICAgICAgICAgIGlmIChvcHRpb24udmFsdWUgPT09IGl0ZW0udmFsdWUpIHJldHVybjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgIF9pdGVyYXRvcjQuZShlcnIpOwogICAgICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgICAgIF9pdGVyYXRvcjQuZigpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBuZXdPcHRpb25zLnB1c2goaXRlbSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczExLiRzZXQoY29sdW1uLCAnb3B0aW9ucycsIG5ld09wdGlvbnMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmdyb3VwKCJKVnhlVGFibGUgXHU2N0U1XHU4QkUyXHU1QjU3XHU1MTc4KCIuY29uY2F0KGNvbHVtbi5kaWN0Q29kZSwgIilcdTUzRDFcdTc1MUZcdTVGMDJcdTVFMzgiKSk7CiAgICAgICAgICBjb25zb2xlLndhcm4ocmVzLm1lc3NhZ2UpOwogICAgICAgICAgY29uc29sZS5ncm91cEVuZCgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6K6+572uIHRoaXMuc2Nyb2xsaW5nIOmYsuaKluaooeW8jwogICAgY2xvc2VTY3JvbGxpbmc6IHNpbXBsZURlYm91bmNlKGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zY3JvbGxpbmcgPSBmYWxzZTsKICAgIH0sIDEwMCksCgogICAgLyoqDQogICAgICog6L+H5ruk5re75Yqg55qE6KGMDQogICAgICogQHBhcmFtIHJvd3Mg6KaB562b6YCJ55qE6KGM5pWw5o2uDQogICAgICogQHBhcmFtIHJlbW92ZSB0cnVlID0g5Yig6Zmk5paw5aKe77yMZmFsc2U95Y+q5Yig6ZmkaWQNCiAgICAgKiBAcGFyYW0gaGFuZGxlciBmdW5jdGlvbg0KICAgICAqLwogICAgZmlsdGVyTmV3Um93czogZnVuY3Rpb24gZmlsdGVyTmV3Um93cyhyb3dzKSB7CiAgICAgIHZhciByZW1vdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICAgIHZhciBoYW5kbGVyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgIHZhciBpbnNlcnRSZWNvcmRzID0gdGhpcy4kcmVmcy52eGUuZ2V0SW5zZXJ0UmVjb3JkcygpOwogICAgICB2YXIgcmVjb3JkcyA9IFtdOwoKICAgICAgdmFyIF9pdGVyYXRvcjUgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyb3dzKSwKICAgICAgICAgIF9zdGVwNTsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3I1LnMoKTsgIShfc3RlcDUgPSBfaXRlcmF0b3I1Lm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciByb3cgPSBfc3RlcDUudmFsdWU7CiAgICAgICAgICB2YXIgaXRlbSA9IGNsb25lT2JqZWN0KHJvdyk7CgogICAgICAgICAgaWYgKGluc2VydFJlY29yZHMuaW5jbHVkZXMocm93KSkgewogICAgICAgICAgICBoYW5kbGVyID8gaGFuZGxlcih7CiAgICAgICAgICAgICAgaXRlbTogaXRlbSwKICAgICAgICAgICAgICByb3c6IHJvdywKICAgICAgICAgICAgICBpbnNlcnRSZWNvcmRzOiBpbnNlcnRSZWNvcmRzCiAgICAgICAgICAgIH0pIDogbnVsbDsKCiAgICAgICAgICAgIGlmIChyZW1vdmUpIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZGVsZXRlIGl0ZW0uaWQ7CiAgICAgICAgICB9CgogICAgICAgICAgcmVjb3Jkcy5wdXNoKGl0ZW0pOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNS5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNS5mKCk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWNvcmRzOwogICAgfSwKICAgIC8vIOWIoOmZpOmAieS4reeahOaVsOaNrgogICAgcmVtb3ZlU2VsZWN0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVtb3ZlU2VsZWN0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEwKCkgewogICAgICAgIHZhciByZXM7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTAkKF9jb250ZXh0MTApIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMC5wcmV2ID0gX2NvbnRleHQxMC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZW1vdmUodGhpcy5zZWxlY3RlZFJvd3MpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDEwLnNlbnQ7CiAgICAgICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JlY2FsY1NvcnROdW1iZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTAuYWJydXB0KCJyZXR1cm4iLCByZXMpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlbW92ZVNlbGVjdGlvbigpIHsKICAgICAgICByZXR1cm4gX3JlbW92ZVNlbGVjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVtb3ZlU2VsZWN0aW9uOwogICAgfSgpLAoKICAgIC8qKg0KICAgICAqIOOAkOWIoOmZpOaMh+WumuihjOaVsOaNruOAke+8iOmHjeWGmXZ4ZVRhYmxl55qE5YaF6YOo5pa55rOV77yM5re75Yqg5LqG5LuOa2VlcFNvdXJjZeS4reWIoOmZpO+8iQ0KICAgICAqIOWmguaenOS8oCByb3cg5YiZ5Yig6Zmk5LiA6KGMDQogICAgICog5aaC5p6c5LygIHJvd3Mg5YiZ5Yig6Zmk5aSa6KGMDQogICAgICog5aaC5p6c5Li656m65YiZ5Yig6Zmk5omA5pyJDQogICAgICovCiAgICBfcmVtb3ZlOiBmdW5jdGlvbiBfcmVtb3ZlKHJvd3MpIHsKICAgICAgdmFyIHhUYWJsZSA9IHRoaXMuJHJlZnMudnhlLiRyZWZzLnhUYWJsZTsKICAgICAgdmFyIGFmdGVyRnVsbERhdGEgPSB4VGFibGUuYWZ0ZXJGdWxsRGF0YSwKICAgICAgICAgIHRhYmxlRnVsbERhdGEgPSB4VGFibGUudGFibGVGdWxsRGF0YSwKICAgICAgICAgIHRhYmxlU291cmNlRGF0YSA9IHhUYWJsZS50YWJsZVNvdXJjZURhdGEsCiAgICAgICAgICBlZGl0U3RvcmUgPSB4VGFibGUuZWRpdFN0b3JlLAogICAgICAgICAgdHJlZUNvbmZpZyA9IHhUYWJsZS50cmVlQ29uZmlnLAogICAgICAgICAgY2hlY2tib3hPcHRzID0geFRhYmxlLmNoZWNrYm94T3B0cywKICAgICAgICAgIHNlbGVjdGlvbiA9IHhUYWJsZS5zZWxlY3Rpb24sCiAgICAgICAgICBpc0luc2VydEJ5Um93ID0geFRhYmxlLmlzSW5zZXJ0QnlSb3csCiAgICAgICAgICBzY3JvbGxZTG9hZCA9IHhUYWJsZS5zY3JvbGxZTG9hZDsKICAgICAgdmFyIGFjdGl2ZWQgPSBlZGl0U3RvcmUuYWN0aXZlZCwKICAgICAgICAgIHJlbW92ZUxpc3QgPSBlZGl0U3RvcmUucmVtb3ZlTGlzdCwKICAgICAgICAgIGluc2VydExpc3QgPSBlZGl0U3RvcmUuaW5zZXJ0TGlzdDsKICAgICAgdmFyIHByb3BlcnR5ID0gY2hlY2tib3hPcHRzLmNoZWNrRmllbGQ7CiAgICAgIHZhciByZXN0ID0gW107CiAgICAgIHZhciBub3dEYXRhID0gYWZ0ZXJGdWxsRGF0YTsKCiAgICAgIGlmICh0cmVlQ29uZmlnKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFV0aWxUb29scy5nZXRMb2coJ3Z4ZS5lcnJvci5ub1RyZWUnLCBbJ3JlbW92ZSddKSk7CiAgICAgIH0KCiAgICAgIGlmICghcm93cykgewogICAgICAgIHJvd3MgPSB0YWJsZUZ1bGxEYXRhOwogICAgICB9IGVsc2UgaWYgKCFYRVV0aWxzLmlzQXJyYXkocm93cykpIHsKICAgICAgICByb3dzID0gW3Jvd3NdOwogICAgICB9IC8vIOWmguaenOaYr+aWsOWinu+8jOWImeS/neWtmOiusOW9lQoKCiAgICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgaWYgKCFpc0luc2VydEJ5Um93KHJvdykpIHsKICAgICAgICAgIHJlbW92ZUxpc3QucHVzaChyb3cpOwogICAgICAgIH0KICAgICAgfSk7IC8vIOWmguaenOe7keWumuS6huWkmumAieWxnuaAp++8jOWImeabtOaWsOeKtuaAgQoKICAgICAgaWYgKCFwcm9wZXJ0eSkgewogICAgICAgIFhFVXRpbHMucmVtb3ZlKHNlbGVjdGlvbiwgZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgcmV0dXJuIHJvd3MuaW5kZXhPZihyb3cpID4gLTE7CiAgICAgICAgfSk7CiAgICAgIH0gLy8g5LuO5pWw5o2u5rqQ5Lit56e76ZmkCgoKICAgICAgaWYgKHRhYmxlRnVsbERhdGEgPT09IHJvd3MpIHsKICAgICAgICByb3dzID0gcmVzdCA9IHRhYmxlRnVsbERhdGEuc2xpY2UoMCk7CiAgICAgICAgdGFibGVGdWxsRGF0YS5sZW5ndGggPSAwOwogICAgICAgIG5vd0RhdGEubGVuZ3RoID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXN0ID0gWEVVdGlscy5yZW1vdmUodGFibGVGdWxsRGF0YSwgZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgcmV0dXJuIHJvd3MuaW5kZXhPZihyb3cpID4gLTE7CiAgICAgICAgfSk7CiAgICAgICAgWEVVdGlscy5yZW1vdmUobm93RGF0YSwgZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgcmV0dXJuIHJvd3MuaW5kZXhPZihyb3cpID4gLTE7CiAgICAgICAgfSk7CiAgICAgIH0gLy8g44CQ5LuOa2VlcFNvdXJjZeS4reWIoOmZpOOAkQoKCiAgICAgIGlmICh4VGFibGUua2VlcFNvdXJjZSkgewogICAgICAgIHZhciByb3dJZFNldCA9IG5ldyBTZXQocm93cy5tYXAoZnVuY3Rpb24gKHJvdykgewogICAgICAgICAgcmV0dXJuIHJvdy5pZDsKICAgICAgICB9KSk7CiAgICAgICAgWEVVdGlscy5yZW1vdmUodGFibGVTb3VyY2VEYXRhLCBmdW5jdGlvbiAocm93KSB7CiAgICAgICAgICByZXR1cm4gcm93SWRTZXQuaGFzKHJvdy5pZCk7CiAgICAgICAgfSk7CiAgICAgIH0gLy8g5aaC5p6c5b2T5YmN6KGM6KKr5r+A5rS757yW6L6R77yM5YiZ5riF6Zmk5r+A5rS754q25oCBCgoKICAgICAgaWYgKGFjdGl2ZWQucm93ICYmIHJvd3MuaW5kZXhPZihhY3RpdmVkLnJvdykgPiAtMSkgewogICAgICAgIHhUYWJsZS5jbGVhckFjdGl2ZWQoKTsKICAgICAgfSAvLyDku47mlrDlop7kuK3np7vpmaTlt7LliKDpmaTnmoTmlbDmja4KCgogICAgICBYRVV0aWxzLnJlbW92ZShpbnNlcnRMaXN0LCBmdW5jdGlvbiAocm93KSB7CiAgICAgICAgcmV0dXJuIHJvd3MuaW5kZXhPZihyb3cpID4gLTE7CiAgICAgIH0pOwogICAgICB4VGFibGUuaGFuZGxlVGFibGVEYXRhKCk7CiAgICAgIHhUYWJsZS51cGRhdGVGb290ZXIoKTsKICAgICAgeFRhYmxlLnVwZGF0ZUNhY2hlKCk7CiAgICAgIHhUYWJsZS5jaGVja1NlbGVjdGlvblN0YXR1cygpOwoKICAgICAgaWYgKHNjcm9sbFlMb2FkKSB7CiAgICAgICAgeFRhYmxlLnVwZGF0ZVNjcm9sbFlTcGFjZSgpOwogICAgICB9CgogICAgICByZXR1cm4geFRhYmxlLiRuZXh0VGljaygpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHhUYWJsZS5yZWNhbGN1bGF0ZSgpOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICByb3c6IHJlc3QubGVuZ3RoID8gcmVzdFtyZXN0Lmxlbmd0aCAtIDFdIDogbnVsbCwKICAgICAgICAgIHJvd3M6IHJlc3QKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCgogICAgLyoqIOihjOmHjeaWsOaOkuW6jyAqLwogICAgcm93UmVzb3J0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcm93UmVzb3J0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTExKG9sZEluZGV4LCBuZXdJbmRleCkgewogICAgICAgIHZhciB4VGFibGUsIHNvcnQ7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTEkKF9jb250ZXh0MTEpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMS5wcmV2ID0gX2NvbnRleHQxMS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgeFRhYmxlID0gdGhpcy4kcmVmcy52eGUuJHJlZnMueFRhYmxlOwogICAgICAgICAgICAgICAgd2luZG93LnhUYWJsZSA9IHhUYWJsZTsKCiAgICAgICAgICAgICAgICBzb3J0ID0gZnVuY3Rpb24gc29ydChhcnJheSkgewogICAgICAgICAgICAgICAgICAvLyDlrZjlgqjml6fmlbDmja7vvIzlubbliKDpmaTml6fpobnnm64KICAgICAgICAgICAgICAgICAgdmFyIHJvdyA9IGFycmF5LnNwbGljZShvbGRJbmRleCwgMSlbMF07IC8vIOWQkeaWsOmhueebrumHjOa3u+WKoOaXp+aVsOaNrgoKICAgICAgICAgICAgICAgICAgYXJyYXkuc3BsaWNlKG5ld0luZGV4LCAwLCByb3cpOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBzb3J0KHhUYWJsZS50YWJsZUZ1bGxEYXRhKTsKCiAgICAgICAgICAgICAgICBpZiAoeFRhYmxlLmtlZXBTb3VyY2UpIHsKICAgICAgICAgICAgICAgICAgc29ydCh4VGFibGUudGFibGVTb3VyY2VEYXRhKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG5leHRUaWNrKCk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDk7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmVjYWxjU29ydE51bWJlcigpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJvd1Jlc29ydChfeDYsIF94NykgewogICAgICAgIHJldHVybiBfcm93UmVzb3J0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByb3dSZXNvcnQ7CiAgICB9KCksCgogICAgLyoqIOmHjeaWsOiuoeeul+aOkuW6j+Wtl+auteeahOaVsOWAvCAqLwogICAgX3JlY2FsY1NvcnROdW1iZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWNhbGNTb3J0TnVtYmVyMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMigpIHsKICAgICAgICB2YXIgX3RoaXMxMiA9IHRoaXM7CgogICAgICAgIHZhciB4VGFibGU7CiAgICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMTIkKF9jb250ZXh0MTIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQxMi5wcmV2ID0gX2NvbnRleHQxMi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgeFRhYmxlID0gdGhpcy4kcmVmcy52eGUuJHJlZnMueFRhYmxlOwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmRyYWdTb3J0KSB7CiAgICAgICAgICAgICAgICAgIHhUYWJsZS50YWJsZUZ1bGxEYXRhLmZvckVhY2goZnVuY3Rpb24gKGRhdGEsIGlkeCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhW190aGlzMTIuZHJhZ1NvcnRLZXldID0gaWR4ICsgMTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMi5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB4VGFibGUudXBkYXRlQ2FjaGUodHJ1ZSk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTIubmV4dCA9IDY7CiAgICAgICAgICAgICAgICByZXR1cm4geFRhYmxlLnVwZGF0ZURhdGEoKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTIuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dDEyLnNlbnQpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMiwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIF9yZWNhbGNTb3J0TnVtYmVyKCkgewogICAgICAgIHJldHVybiBfcmVjYWxjU29ydE51bWJlcjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIF9yZWNhbGNTb3J0TnVtYmVyOwogICAgfSgpLAogICAgX2FkZE9ySW5zZXJ0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYWRkT3JJbnNlcnQyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTEzKCkgewogICAgICAgIHZhciBfdGhpczEzID0gdGhpczsKCiAgICAgICAgdmFyIHJvd3MsCiAgICAgICAgICAgIGluZGV4LAogICAgICAgICAgICB0cmlnZ2VyTmFtZSwKICAgICAgICAgICAgaXNPbmxKcywKICAgICAgICAgICAgeFRhYmxlLAogICAgICAgICAgICByZWNvcmRzLAogICAgICAgICAgICByZXN1bHQsCiAgICAgICAgICAgIGksCiAgICAgICAgICAgIHJvdywKICAgICAgICAgICAgX2FyZ3MxMyA9IGFyZ3VtZW50czsKICAgICAgICByZXR1cm4gX3JlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMyQoX2NvbnRleHQxMykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEzLnByZXYgPSBfY29udGV4dDEzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICByb3dzID0gX2FyZ3MxMy5sZW5ndGggPiAwICYmIF9hcmdzMTNbMF0gIT09IHVuZGVmaW5lZCA/IF9hcmdzMTNbMF0gOiB7fTsKICAgICAgICAgICAgICAgIGluZGV4ID0gX2FyZ3MxMy5sZW5ndGggPiAxID8gX2FyZ3MxM1sxXSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIHRyaWdnZXJOYW1lID0gX2FyZ3MxMy5sZW5ndGggPiAyID8gX2FyZ3MxM1syXSA6IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIGlzT25sSnMgPSBfYXJnczEzLmxlbmd0aCA+IDMgPyBfYXJnczEzWzNdIDogdW5kZWZpbmVkOwogICAgICAgICAgICAgICAgeFRhYmxlID0gdGhpcy4kcmVmcy52eGUuJHJlZnMueFRhYmxlOwoKICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJvd3MpKSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZSByb3dzLnVuZGVmaW5lZDsKICAgICAgICAgICAgICAgICAgcmVjb3JkcyA9IHJvd3M7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBkZWxldGUgcm93cy51bmRlZmluZWQ7CiAgICAgICAgICAgICAgICAgIHJlY29yZHMgPSBbcm93c107CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVjb3Jkcyk7IC8vIOmBjeWOhua3u+WKoOm7mOiupOWAvAoKICAgICAgICAgICAgICAgIHJlY29yZHMuZm9yRWFjaChmdW5jdGlvbiAocmVjb3JkKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczEzLl9jcmVhdGVSb3cocmVjb3JkKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVjb3Jkcyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDEzLm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnB1c2hSb3dzKHJlY29yZHMsIHsKICAgICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICAgICAgICBzZXRBY3RpdmU6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQxMy5zZW50OwoKICAgICAgICAgICAgICAgIC8vIOmBjeWOhuaPkuWFpeeahOihjAogICAgICAgICAgICAgICAgLy8gdXBkYXRlLS1iZWdpbi0tYXV0b3I6bHZkYW5kYW4tLS0tLWRhdGU6MjAyMDExMTctLS0tLS1mb3I6TE9XQ09ELTk4NyDjgJDmlrDooYznvJbovpHjgJFqc+WinuW8uumZhOihqOWGhee9ruaWueazleiwg+eUqOmXrumimCAjMTgxOQogICAgICAgICAgICAgICAgLy8gb25saW5lIGpz5aKe5by65pe25Lul5Lyg6L+H5p2l5YC85Li65YeG77yM5LiN5YaN6LWL6buY6K6k5YC8CiAgICAgICAgICAgICAgICBpZiAoaXNPbmxKcyAhPSB0cnVlKSB7CiAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCByZXN1bHQucm93cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHJvdyA9IHJlc3VsdC5yb3dzW2ldOwogICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcih0cmlnZ2VyTmFtZSwgewogICAgICAgICAgICAgICAgICAgICAgcm93OiByb3csCiAgICAgICAgICAgICAgICAgICAgICAkdGFibGU6IHhUYWJsZSwKICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogdGhpcwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IC8vIHVwZGF0ZS0tZW5kLS1hdXRvcjpsdmRhbmRhbi0tLS0tZGF0ZToyMDIwMTExNy0tLS0tLWZvcjpMT1dDT0QtOTg3IOOAkOaWsOihjOe8lui+keOAkWpz5aKe5by66ZmE6KGo5YaF572u5pa55rOV6LCD55So6Zeu6aKYICMxODE5CgoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEzLmFicnVwdCgicmV0dXJuIiwgcmVzdWx0KTsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0MTMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTEzLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gX2FkZE9ySW5zZXJ0KCkgewogICAgICAgIHJldHVybiBfYWRkT3JJbnNlcnQyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBfYWRkT3JJbnNlcnQ7CiAgICB9KCksCiAgICAvLyDliJvlu7rmlrDooYzvvIzoh6rliqjmt7vliqDpu5jorqTlgLwKICAgIF9jcmVhdGVSb3c6IGZ1bmN0aW9uIF9jcmVhdGVSb3coKSB7CiAgICAgIHZhciByZWNvcmQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9OwogICAgICB2YXIgeFRhYmxlID0gdGhpcy4kcmVmcy52eGUuJHJlZnMueFRhYmxlOyAvLyDmt7vliqDpu5jorqTlgLwKCiAgICAgIHhUYWJsZS50YWJsZUZ1bGxDb2x1bW4uZm9yRWFjaChmdW5jdGlvbiAoY29sdW1uKSB7CiAgICAgICAgdmFyIGNvbCA9IGNvbHVtbi5vd247CgogICAgICAgIGlmIChyZWNvcmRbY29sLmtleV0gPT0gbnVsbCB8fCByZWNvcmRbY29sLmtleV0gPT09ICcnKSB7CiAgICAgICAgICAvLyDorr7nva7pu5jorqTlgLwKICAgICAgICAgIHZhciBjcmVhdGVWYWx1ZSA9IGdldEVuaGFuY2VkTWl4aW5zKGNvbC4kdHlwZSB8fCBjb2wudHlwZSwgJ2NyZWF0ZVZhbHVlJyk7CiAgICAgICAgICByZWNvcmRbY29sLmtleV0gPSBjcmVhdGVWYWx1ZSh7CiAgICAgICAgICAgIHJvdzogcmVjb3JkLAogICAgICAgICAgICBjb2x1bW46IGNvbHVtbiwKICAgICAgICAgICAgJHRhYmxlOiB4VGFibGUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGRlbGV0ZSByZWNvcmQudW5kZWZpbmVkOwogICAgICByZXR1cm4gcmVjb3JkOwogICAgfSwKCiAgICAvKi0tLSDmuLLmn5Plh73mlbAgLS0tKi8KICAgIC8vIOa4suafkyB2eGUKICAgIHJlbmRlclZ4ZUdyaWQ6IGZ1bmN0aW9uIHJlbmRlclZ4ZUdyaWQoaCkgewogICAgICByZXR1cm4gaCgndnhlLWdyaWQnLCB7CiAgICAgICAgcmVmOiAndnhlJywKICAgICAgICBjbGFzczogWydqLXZ4ZS10YWJsZSddLAogICAgICAgIHByb3BzOiB0aGlzLnZ4ZVByb3BzLAogICAgICAgIG9uOiB0aGlzLnZ4ZUV2ZW50cywKICAgICAgICAvLyDkvZznlKjln5/mj5Lmp73nmoTmoLzlvI/kuLoKICAgICAgICBzY29wZWRTbG90czogdGhpcy4kc2NvcGVkU2xvdHMKICAgICAgfSk7CiAgICB9LAogICAgLy8g5riy5p+T5bel5YW35qCPCiAgICByZW5kZXJUb29sYmFyOiBmdW5jdGlvbiByZW5kZXJUb29sYmFyKGgpIHsKICAgICAgdmFyIF90aGlzMTQgPSB0aGlzOwoKICAgICAgdmFyIHRoYXQgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudG9vbGJhcikgewogICAgICAgIHJldHVybiBoKCdqLXZ4ZS10b29sYmFyJywgewogICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgdG9vbGJhckNvbmZpZzogdGhpcy50b29sYmFyQ29uZmlnLAogICAgICAgICAgICBpbXBvcnRCdG46IHRoaXMuaW1wb3J0QnRuLAogICAgICAgICAgICBleGNsdWRlQ29kZTogdGhpcy5leGNsdWRlQ29kZSwKICAgICAgICAgICAgc2l6ZTogdGhpcy5zaXplLAogICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCwKICAgICAgICAgICAgZGlzYWJsZWRSb3dzOiB0aGlzLmRpc2FibGVkUm93cywKICAgICAgICAgICAgc2VsZWN0ZWRSb3dJZHM6IHRoaXMuc2VsZWN0ZWRSb3dJZHMKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICAvLyDmlrDlop7kuovku7YKICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTQuYWRkUm93cygpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAvLyDkv53lrZjkuovku7YKICAgICAgICAgICAgc2F2ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxNC50cmlnZ2VyKCdzYXZlJywgewogICAgICAgICAgICAgICAgJHRhYmxlOiBfdGhpczE0LiRyZWZzLnZ4ZSwKICAgICAgICAgICAgICAgIHRhcmdldDogX3RoaXMxNAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbXBvcnQ6IGZ1bmN0aW9uIF9pbXBvcnQoKSB7CiAgICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Zvcm1EYXRhJykpOwogICAgICAgICAgICAgIHZhciByZXMgPSBKU09OLnBhcnNlKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXBsb2FkcmVzdWx0JykpOwoKICAgICAgICAgICAgICBpZiAoZm9ybURhdGEudHlwZSA9PSAnRHV0eURhdGEnKSB7CiAgICAgICAgICAgICAgICB0aGF0LiRlbWl0KCdsb2FkRGF0YVVwbG9hZCcsIHJlcyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChmb3JtRGF0YS50eXBlID09ICdXZWVrU3RhdGlzdGljcycpIHsKICAgICAgICAgICAgICAgIHRoYXQuZGF0YVNvdXJjZSA9IHJlczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIOWIoOmZpOS6i+S7tgogICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICAgICAgICB2YXIgJHRhYmxlID0gX3RoaXMxNC4kcmVmcy52eGU7CgogICAgICAgICAgICAgIHZhciBkZWxldGVSb3dzID0gX3RoaXMxNC5maWx0ZXJOZXdSb3dzKF90aGlzMTQuc2VsZWN0ZWRSb3dzKTsgLy8g6Kem5Y+R5Yig6Zmk5LqL5Lu2CgoKICAgICAgICAgICAgICBpZiAoZGVsZXRlUm93cy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlRXZlbnQgPSB7CiAgICAgICAgICAgICAgICAgIGRlbGV0ZVJvd3M6IGRlbGV0ZVJvd3MsCiAgICAgICAgICAgICAgICAgICR0YWJsZTogJHRhYmxlLAogICAgICAgICAgICAgICAgICB0YXJnZXQ6IF90aGlzMTQKICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgaWYgKF90aGlzMTQuYXN5bmNSZW1vdmUpIHsKICAgICAgICAgICAgICAgICAgLy8g56Gu6K6k5Yig6Zmk77yM5Y+q5pyJ6LCD55So6L+Z5Liq5pa55rOV5omN5Lya55yf5Yig6ZmkCiAgICAgICAgICAgICAgICAgIHJlbW92ZUV2ZW50LmNvbmZpcm1SZW1vdmUgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTQucmVtb3ZlU2VsZWN0aW9uKCk7CiAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBfdGhpczE0LnJlbW92ZVNlbGVjdGlvbigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF90aGlzMTQudHJpZ2dlcigncmVtb3ZlJywgcmVtb3ZlRXZlbnQpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczE0LnJlbW92ZVNlbGVjdGlvbigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8g5riF6Zmk6YCJ5oup5LqL5Lu2CiAgICAgICAgICAgIGNsZWFyU2VsZWN0aW9uOiB0aGlzLmNsZWFyU2VsZWN0aW9uCiAgICAgICAgICB9LAogICAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgICAgdG9vbGJhclByZWZpeDogdGhpcy4kc2NvcGVkU2xvdHMudG9vbGJhclByZWZpeCwKICAgICAgICAgICAgdG9vbGJhclN1ZmZpeDogdGhpcy4kc2NvcGVkU2xvdHMudG9vbGJhclN1ZmZpeAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICAvLyDmuLLmn5MgdG9vbGJhckFmdGVyIOaPkuanvQogICAgcmVuZGVyVG9vbGJhckFmdGVyU2xvdDogZnVuY3Rpb24gcmVuZGVyVG9vbGJhckFmdGVyU2xvdCgpIHsKICAgICAgaWYgKHRoaXMuJHNjb3BlZFNsb3RzWyd0b29sYmFyQWZ0ZXInXSkgewogICAgICAgIHJldHVybiB0aGlzLiRzY29wZWRTbG90c1sndG9vbGJhckFmdGVyJ10oKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LAogICAgLy8g5riy5p+T54K55Ye75pe25by55Ye655qE5a2Q6KGoCiAgICByZW5kZXJTdWJQb3BvdmVyOiBmdW5jdGlvbiByZW5kZXJTdWJQb3BvdmVyKGgpIHsKICAgICAgaWYgKHRoaXMuY2xpY2tSb3dTaG93U3ViRm9ybSAmJiB0aGlzLiRzY29wZWRTbG90cy5zdWJGb3JtKSB7CiAgICAgICAgcmV0dXJuIGgoJ2otdnhlLXN1Yi1wb3BvdmVyJywgewogICAgICAgICAgcmVmOiAnc3ViUG9wb3ZlcicsCiAgICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgICBzdWJGb3JtOiB0aGlzLiRzY29wZWRTbG90cy5zdWJGb3JtCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIC8vIOa4suafk+eCueWHu+aXtuW8ueWHuueahOivpue7huS/oeaBrwogICAgcmVuZGVyRGV0YWlsc01vZGFsOiBmdW5jdGlvbiByZW5kZXJEZXRhaWxzTW9kYWwoaCkgewogICAgICBpZiAodGhpcy5jbGlja1Jvd1Nob3dNYWluRm9ybSAmJiB0aGlzLiRzY29wZWRTbG90cy5tYWluRm9ybSkgewogICAgICAgIHJldHVybiBoKCdqLXZ4ZS1kZXRhaWxzLW1vZGFsJywgewogICAgICAgICAgcmVmOiAnZGV0YWlsc01vZGFsJywKICAgICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICAgIHN1YkZvcm06IHRoaXMuY2xpY2tSb3dTaG93U3ViRm9ybSA/IHRoaXMuJHNjb3BlZFNsb3RzLnN1YkZvcm0gOiBudWxsLAogICAgICAgICAgICBtYWluRm9ybTogdGhpcy4kc2NvcGVkU2xvdHMubWFpbkZvcm0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIC8vIOa4suafk+WIhumhteWZqAogICAgcmVuZGVyUGFnaW5hdGlvbjogZnVuY3Rpb24gcmVuZGVyUGFnaW5hdGlvbihoKSB7CiAgICAgIHZhciBfdGhpczE1ID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnBhZ2luYXRpb24gJiYgT2JqZWN0LmtleXModGhpcy5wYWdpbmF0aW9uKS5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIGgoJ2otdnhlLXBhZ2luYXRpb24nLCB7CiAgICAgICAgICBwcm9wczogewogICAgICAgICAgICBzaXplOiB0aGlzLnNpemUsCiAgICAgICAgICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGVkLAogICAgICAgICAgICBwYWdpbmF0aW9uOiB0aGlzLnBhZ2luYXRpb24KICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICBjaGFuZ2U6IGZ1bmN0aW9uIGNoYW5nZShlKSB7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTUudHJpZ2dlcigncGFnZUNoYW5nZScsIGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGxvYWRFeGNsdWRlQ29kZTogZnVuY3Rpb24gbG9hZEV4Y2x1ZGVDb2RlKCkgewogICAgICBpZiAoIXRoaXMuYXV0aFByZSB8fCB0aGlzLmF1dGhQcmUubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLmV4Y2x1ZGVDb2RlID0gW107CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHByZSA9IHRoaXMuYXV0aFByZTsKCiAgICAgICAgaWYgKCFwcmUuZW5kc1dpdGgoJzonKSkgewogICAgICAgICAgcHJlICs9ICc6JzsKICAgICAgICB9CgogICAgICAgIHRoaXMuZXhjbHVkZUNvZGUgPSBnZXROb0F1dGhDb2xzKHByZSk7CiAgICAgIH0KICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHsKICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAgIGNsYXNzOiBbJ2otdnhlLXRhYmxlLWJveCcsICJzaXplLS0iLmNvbmNhdCh0aGlzLnNpemUpXQogICAgfSwgW3RoaXMucmVuZGVyU3ViUG9wb3ZlcihoKSwgdGhpcy5yZW5kZXJEZXRhaWxzTW9kYWwoaCksIHRoaXMucmVuZGVyVG9vbGJhcihoKSwgdGhpcy5yZW5kZXJUb29sYmFyQWZ0ZXJTbG90KCksIHRoaXMucmVuZGVyVnhlR3JpZChoKSwgdGhpcy5yZW5kZXJQYWdpbmF0aW9uKGgpXSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy4kZW1pdCgnYmVmb3JlRGVzdHJveScpOwogIH0KfTsgLy8g5YW85a65IG9ubGluZSDnmoTop4TliJkKCnZhciBmb29QYXR0ZXJucyA9IFt7CiAgdGl0bGU6ICfpnZ7nqbonLAogIHZhbHVlOiAnKicsCiAgcGF0dGVybjogL14uKyQvCn0sIHsKICB0aXRsZTogJzbliLAxNuS9jeaVsOWtlycsCiAgdmFsdWU6ICduNi0xNicsCiAgcGF0dGVybjogL15cZHs2LDE4fSQvCn0sIHsKICB0aXRsZTogJzbliLAxNuS9jeS7u+aEj+Wtl+espicsCiAgdmFsdWU6ICcqNi0xNicsCiAgcGF0dGVybjogL14uezYsMTZ9JC8KfSwgewogIHRpdGxlOiAnNuWIsDE45L2N5a2X5q+NJywKICB2YWx1ZTogJ3M2LTE4JywKICBwYXR0ZXJuOiAvXlthLXp8QS1aXXs2LDE4fSQvCn0sIHsKICB0aXRsZTogJ+e9keWdgCcsCiAgdmFsdWU6ICd1cmwnLAogIHBhdHRlcm46IC9eKD86KFtBLVphLXpdKyk6KT8oXC97MCwzfSkoWzAtOS5cLUEtWmEtel0rKSg/OjooXGQrKSk/KD86XC8oW14/I10qKSk/KD86XD8oW14jXSopKT8oPzojKC4qKSk/JC8KfSwgewogIHRpdGxlOiAn55S15a2Q6YKu5Lu2JywKICB2YWx1ZTogJ2UnLAogIHBhdHRlcm46IC9eKFtcd10rXC4qKShbXHddKylAW1x3XStcLlx3ezN9KFwuXHd7Mn18KSQvCn0sIHsKICB0aXRsZTogJ+aJi+acuuWPt+eggScsCiAgdmFsdWU6ICdtJywKICBwYXR0ZXJuOiAvXjFbMzQ1Njc4OV1cZHs5fSQvCn0sIHsKICB0aXRsZTogJ+mCruaUv+e8lueggScsCiAgdmFsdWU6ICdwJywKICBwYXR0ZXJuOiAvXlsxLTldXGR7NX0kLwp9LCB7CiAgdGl0bGU6ICflrZfmr40nLAogIHZhbHVlOiAncycsCiAgcGF0dGVybjogL15bQS1afGEtel0rJC8KfSwgewogIHRpdGxlOiAn5pWw5a2XJywKICB2YWx1ZTogJ24nLAogIHBhdHRlcm46IC9eLT9cZCsoXC4/XGQrfFxkPykkLwp9LCB7CiAgdGl0bGU6ICfmlbTmlbAnLAogIHZhbHVlOiAneicsCiAgcGF0dGVybjogL14tP1xkKyQvCn0sIHsKICB0aXRsZTogJ+mHkeminScsCiAgdmFsdWU6ICdtb25leScsCiAgcGF0dGVybjogL14oKFsxLTldWzAtOV0qKXwoWzBdXC5cZHswLDJ9fFsxLTldWzAtOV0qXC5cZHswLDJ9KSkkLwp9XTsKLyoqIOaXp+eJiGhhbmRsZXLovazkuLrmlrDniYhWYWxpZGF0b3IgKi8KCmZ1bmN0aW9uIGhhbmRsZXJDb252ZXJ0VG9WYWxpZGF0b3IoZXZlbnQpIHsKICB2YXIgX3RoaXMxNiA9IHRoaXM7CgogIHZhciBjb2x1bW4gPSBldmVudC5jb2x1bW4sCiAgICAgIHJ1bGUgPSBldmVudC5ydWxlOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICBydWxlLmhhbmRsZXIoZXZlbnQsIGZ1bmN0aW9uIChmbGFnLCBtc2cpIHsKICAgICAgdmFyIG1lc3NhZ2UgPSBydWxlLm1lc3NhZ2U7CgogICAgICBpZiAodHlwZW9mIG1zZyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBtZXNzYWdlID0gcmVwbGFjZVByb3BzKGNvbHVtbi5vd24sIG1zZyk7CiAgICAgIH0KCiAgICAgIGlmIChmbGFnID09IG51bGwpIHsKICAgICAgICByZXNvbHZlKG1lc3NhZ2UpOwogICAgICB9IGVsc2UgaWYgKCEhZmxhZykgewogICAgICAgIHJlc29sdmUobWVzc2FnZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihtZXNzYWdlKSk7CiAgICAgIH0KICAgIH0sIF90aGlzMTYsIGV2ZW50KTsKICB9KTsKfQovKiog5ZSv5LiA5qCh6aqM5ZmoICovCgoKZnVuY3Rpb24gdW5pcXVlVmFsaWRhdG9yKGV2ZW50KSB7CiAgdmFyIGNlbGxWYWx1ZSA9IGV2ZW50LmNlbGxWYWx1ZSwKICAgICAgY29sdW1uID0gZXZlbnQuY29sdW1uLAogICAgICBydWxlID0gZXZlbnQucnVsZTsKICB2YXIgdGFibGVEYXRhID0gdGhpcy5nZXRUYWJsZURhdGEoKTsKICB2YXIgZmluZENvdW50ID0gMDsKCiAgdmFyIF9pdGVyYXRvcjYgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcih0YWJsZURhdGEpLAogICAgICBfc3RlcDY7CgogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvcjYucygpOyAhKF9zdGVwNiA9IF9pdGVyYXRvcjYubigpKS5kb25lOykgewogICAgICB2YXIgcm93RGF0YSA9IF9zdGVwNi52YWx1ZTsKCiAgICAgIGlmIChyb3dEYXRhW2NvbHVtbi5vd24ua2V5XSA9PT0gY2VsbFZhbHVlKSB7CiAgICAgICAgaWYgKCsrZmluZENvdW50ID49IDIpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IocnVsZS5tZXNzYWdlKSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfaXRlcmF0b3I2LmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yNi5mKCk7CiAgfQoKICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7Cn0="},{"version":3,"sources":["D:/vue/src/components/jeecg/JVxeTable/components/JVxeTable.js"],"names":["XEUtils","PropTypes","JVXETypes","VxeWebSocketMixins","initDictOptions","getRefPromise","getEnhancedMixins","replaceProps","JVxeToolbar","JVxeSubPopover","JVxeDetailsModal","JVxePagination","cloneObject","getVmParentByName","pushIfNotExist","randomString","simpleDebounce","UtilTools","getNoAuthCols","name","provide","superTrigger","event","trigger","mixins","components","props","rowKey","string","def","columns","type","Array","required","dataSource","authPre","String","default","isonline","Boolean","toolbar","importBtn","toolbarConfig","object","slots","btns","rowNumber","bool","rowSelection","rowSelectionType","oneOf","rowExpand","expandConfig","loading","height","instanceOf","Number","maxHeight","disabledRows","disabled","dragSort","dragSortKey","size","bordered","pagination","clickRowShowSubForm","clickRowShowMainForm","clickSelectRow","reloadEffect","Rules","asyncRemove","data","isJVXETable","caseId","_innerColumns","_innerEditRules","scroll","top","left","scrolling","defaultVxeProps","mode","showIcon","iconClose","iconOpen","highlight","selectedRows","selectedRowIds","statistics","has","sum","average","reloadEffectRowKeysMap","excludeCode","computed","vxeColumns","forEach","column","renderOptions","listeners","cellListeners","$type","rowDragSort","slot","$scopedSlots","hasOwnProperty","slotName","target","editRender","Object","assign","cellRender","file","image","width","endsWith","parseInt","substr","length","vxeEditRules","editRules","vxeProps","showFooter","$attrs","border","footerMethod","handleFooterMethod","vxeEvents","events","handleVxeScroll","handleCellClick","handleEditClosed","handleEditActived","handleVxeRadioChange","handleVxeCheckboxAll","handleVxeCheckboxChange","keys","$listeners","key","listen","isArray","push","valueChange","rowMoveUp","rowIndex","rowResort","rowMoveDown","rowInsertDown","insertRows","watch","immediate","handler","vxe","idx","$set","loadData","loadExcludeCode","expandColumn","seqColumn","checkboxColumn","radioColumn","dragSortColumn","indexOf","col","enhanced","rowCheckbox","rowRadio","field","renderName","_prefix","hidden","visible","switches","normal","dictCode","_loadDictConcatToOptions","validateRules","rules","rule","replace","message","unique","pattern","validator","uniqueValidator","bind","fooPatterns","value","foo","handlerConvertToValidator","item","arr","toLowerCase","title","fixed","align","unshift","content","created","mounted","handleTabsChange","methods","tabs","tabPane","currentKey","$vnode","unwatch","$children","$watch","$nextTick","refreshScroll","recalculate","$on","$refs","scrollTop","scrollLeft","subPopover","close","closeScrolling","row","$table","getRadioRecord","handleSelectChange","getCheckboxRecords","$event","action","includes","map","id","own","showDetails","detailsModal","open","toggle","className","toString","setRadioRow","toggleCheckboxRow","editClosed","apply","arguments","editActived","footers","getFooterStatisticsMap","checks","method","property","mean","columnIndex","handleFooterSpanMethod","colspan","resetScrollTop","scrollTo","loadNewData","xTable","validateTable","validate","catch","errMap","fullValidateTable","fullValidate","setValues","values","console","warn","record","getIfRowById","colKey","getColumnByKey","oldValue","newValue","isSetValues","getAll","tableData","getTableData","deleteData","getDeleteData","options","rowIds","rowId","fullData","filterNewRows","getNewData","newData","getInsertRecords","getNewDataWithId","getRowById","isNew","getNewRowById","records","getRemoveRecords","addRows","rows","isOnlJs","converter","dbDefaultVal","dbFieldName","dbFieldTxt","dbIsKey","dbIsNull","dbLength","dbPointLength","dbType","dictField","dictTable","dictText","fieldDefaultValue","fieldExtendJson","fieldHref","fieldLength","fieldMustInput","fieldShowType","isQuery","isReadOnly","isShowForm","isShowList","mainField","mainTable","orderNum","order_num","queryConfigFlag","queryDefVal","queryDictField","queryDictTable","queryDictText","queryMode","sortFlag","$emit","_addOrInsert","index","pushRows","setActive","tableFullData","insertAt","result","setActiveRow","_recalcSortNumber","clearSelection","clearRadioRow","clearCheckboxRow","removeRows","_remove","res","removeRowsById","filter","getColumnByField","$target","then","success","newOptions","option","group","groupEnd","remove","insertRecords","removeSelection","afterFullData","tableSourceData","editStore","treeConfig","checkboxOpts","selection","isInsertByRow","scrollYLoad","actived","removeList","insertList","checkField","rest","nowData","Error","getLog","slice","keepSource","rowIdSet","Set","clearActived","handleTableData","updateFooter","updateCache","checkSelectionStatus","updateScrollYSpace","oldIndex","newIndex","window","sort","array","splice","updateData","triggerName","undefined","log","_createRow","i","tableFullColumn","createValue","renderVxeGrid","h","ref","class","on","scopedSlots","renderToolbar","that","add","save","import","formData","JSON","parse","localStorage","getItem","deleteRows","removeEvent","confirmRemove","toolbarPrefix","toolbarSuffix","renderToolbarAfterSlot","renderSubPopover","subForm","renderDetailsModal","mainForm","renderPagination","change","e","pre","render","beforeDestroy","Promise","resolve","reject","flag","msg","cellValue","findCount","rowData"],"mappings":"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","sourcesContent":["import XEUtils from 'xe-utils'\r\nimport PropTypes from 'ant-design-vue/es/_util/vue-types'\r\nimport { JVXETypes } from '@/components/jeecg/JVxeTable/index'\r\nimport VxeWebSocketMixins from '../mixins/vxe.web.socket.mixins'\r\nimport { initDictOptions } from '@/components/dict/JDictSelectUtil'\r\n\r\nimport { getRefPromise } from '../utils/vxeUtils'\r\nimport { getEnhancedMixins, replaceProps } from '../utils/cellUtils'\r\n\r\nimport JVxeToolbar from './JVxeToolbar'\r\nimport JVxeSubPopover from './JVxeSubPopover'\r\nimport JVxeDetailsModal from './JVxeDetailsModal'\r\nimport JVxePagination from './JVxePagination'\r\nimport { cloneObject, getVmParentByName, pushIfNotExist, randomString, simpleDebounce } from '@/utils/util'\r\nimport { UtilTools } from 'vxe-table/packages/tools/src/utils'\r\nimport { getNoAuthCols } from \"@/utils/authFilter\"\r\n\r\nexport default {\r\n  name: 'JVxeTable',\r\n  provide() {\r\n    return {\r\n      superTrigger: (name, event) => this.trigger(name, event)\r\n    }\r\n  },\r\n  mixins: [VxeWebSocketMixins],\r\n  components: {JVxeToolbar, JVxeSubPopover, JVxeDetailsModal, JVxePagination},\r\n  props: {\r\n    rowKey: PropTypes.string.def('id'),\r\n    // 列信息\r\n    columns: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    // 数据源\r\n    dataSource: {\r\n      type: Array,\r\n      required: true\r\n    },\r\n    authPre: {\r\n      type: String,\r\n      required: false,\r\n      default: ''\r\n    },\r\n    isonline:{\r\n      type: Boolean,\r\n      required: false,\r\n      default: false\r\n    },\r\n    // 是否显示工具栏\r\n    toolbar: {\r\n      type: Boolean,\r\n      required: false,\r\n      default: true\r\n    },\r\n    importBtn:Boolean,\r\n    // 工具栏配置\r\n    toolbarConfig: PropTypes.object.def(() => ({\r\n      // prefix 前缀；suffix 后缀；\r\n      slots: ['prefix', 'suffix'],\r\n      // add 新增按钮；remove 删除按钮；clearSelection 清空选择按钮；collapse 展开收起\r\n      btns: ['add', 'remove', 'clearSelection'],\r\n    })),\r\n    // 是否显示行号\r\n    rowNumber: PropTypes.bool.def(false),\r\n    // 是否可选择行\r\n    rowSelection: PropTypes.bool.def(false),\r\n    // 选择行类型\r\n    rowSelectionType: PropTypes.oneOf(['checkbox', 'radio']).def('checkbox'),\r\n    // 是否可展开行\r\n    rowExpand: PropTypes.bool.def(false),\r\n    // 展开行配置\r\n    expandConfig: PropTypes.object.def(() => ({})),\r\n    // 页面是否在加载中\r\n    loading: PropTypes.bool.def(false),\r\n    height: PropTypes.instanceOf([Number, String]).def('auto'),\r\n    // 最大高度\r\n    maxHeight: {\r\n      type: Number,\r\n      default: () => null,\r\n    },\r\n    // 要禁用的行 TODO 未实现\r\n    disabledRows: PropTypes.object.def(() => ({})),\r\n    // 是否禁用全部组件\r\n    disabled: PropTypes.bool.def(false),\r\n    // 是否可拖拽排序 TODO 仅实现上下排序，未实现拖拽排序（可能无法实现或较为困难）\r\n    dragSort: PropTypes.bool.def(false),\r\n    // 排序字段保存的Key\r\n    dragSortKey: PropTypes.string.def('orderNum'),\r\n    // 大小，可选值有：medium（中）、small（小）、mini（微）、tiny（非常小）\r\n    size: PropTypes.oneOf(['medium', 'small', 'mini', 'tiny']).def('medium'),\r\n    // 是否显示边框线\r\n    bordered: PropTypes.bool.def(false),\r\n    // 分页器参数，设置了即可显示分页器\r\n    pagination: PropTypes.object.def(() => ({})),\r\n    // 点击行时是否显示子表单\r\n    clickRowShowSubForm: PropTypes.bool.def(false),\r\n    // 点击行时是否显示主表单\r\n    clickRowShowMainForm: PropTypes.bool.def(false),\r\n    // 是否点击选中行，优先级最低\r\n    clickSelectRow: PropTypes.bool.def(false),\r\n    // 是否开启 reload 数据效果\r\n    reloadEffect: PropTypes.bool.def(false),\r\n    // 校验规则\r\n    Rules: PropTypes.object.def(() => ({})),\r\n    // 是否异步删除行，如果你要实现异步删除，那么需要把这个选项开启，\r\n    // 在remove事件里调用confirmRemove方法才会真正删除（除非删除的全是新增的行）\r\n    asyncRemove: PropTypes.bool.def(false),\r\n  },\r\n  data() {\r\n    return {\r\n      isJVXETable: true,\r\n      // caseId，表格唯一标识\r\n      caseId: `_j-vxe-${randomString(8)}_`,\r\n      // 内置columns\r\n      _innerColumns: [],\r\n      // 内置 EditRules\r\n      _innerEditRules: [],\r\n      // 记录滚动条位置\r\n      scroll: {top: 0, left: 0},\r\n      // 当前是否正在滚动\r\n      scrolling: false,\r\n      // vxe 默认配置\r\n      defaultVxeProps: {\r\n        'row-id': this.rowKey,\r\n        // 高亮hover的行\r\n        'highlight-hover-row': true,\r\n        // 溢出隐藏并显示tooltip\r\n        'show-overflow': true,\r\n        // 表头溢出隐藏并显示tooltip\r\n        'show-header-overflow': true,\r\n        'show-footer-overflow': true,\r\n        // 可编辑配置\r\n        'edit-config': {trigger: 'click', mode: 'cell',showIcon:false},\r\n        'expand-config': {\r\n          iconClose: 'ant-table-row-expand-icon ant-table-row-collapsed',\r\n          iconOpen: 'ant-table-row-expand-icon ant-table-row-expanded'\r\n        },\r\n        // 虚拟滚动配置，y轴大于30条数据时启用虚拟滚动\r\n        // 'scroll-y': {\r\n        //   gt: 30\r\n        // },\r\n        // 'scroll-x': {\r\n        //   gt: 15\r\n        // },\r\n        'radio-config': {highlight: true},\r\n        'checkbox-config': {highlight: true},\r\n      },\r\n      // 绑定左侧选择框\r\n      selectedRows: [],\r\n      // 绑定左侧选择框已选择的id\r\n      selectedRowIds: [],\r\n      // 统计列配置\r\n      statistics: {\r\n        has: false,\r\n        sum: [],\r\n        average: [],\r\n      },\r\n      // 允许执行刷新特效的行ID\r\n      reloadEffectRowKeysMap: {},\r\n      //配置了但是没有授权的按钮和列 集合\r\n      excludeCode:[]\r\n    }\r\n  },\r\n  computed: {\r\n\r\n    // vxe 最终 columns\r\n    vxeColumns() {\r\n      this._innerColumns.forEach(column => {\r\n        let renderOptions = {\r\n          caseId: this.caseId,\r\n          bordered: this.bordered,\r\n          disabled: this.disabled,\r\n          scrolling: this.scrolling,\r\n          reloadEffect: this.reloadEffect,\r\n          reloadEffectRowKeysMap: this.reloadEffectRowKeysMap,\r\n          listeners: this.cellListeners,\r\n        }\r\n        if (column.$type === JVXETypes.rowDragSort) {\r\n          renderOptions.dragSortKey = this.dragSortKey\r\n        }\r\n        // slot 组件特殊处理\r\n        if (column.$type === JVXETypes.slot) {\r\n          if (this.$scopedSlots.hasOwnProperty(column.slotName)) {\r\n            renderOptions.slot = this.$scopedSlots[column.slotName]\r\n            renderOptions.target = this\r\n          }\r\n        }\r\n        if (column.editRender) {\r\n          Object.assign(column.editRender, renderOptions)\r\n        }\r\n        if (column.cellRender) {\r\n          Object.assign(column.cellRender, renderOptions)\r\n        }\r\n        // update--begin--autor:lvdandan-----date:20201019------for:LOWCOD-882 【新行编辑】列表上带按钮的遮挡问题\r\n        if (column.$type === JVXETypes.file || column.$type === JVXETypes.image) {\r\n          if (column.width && column.width.endsWith('px')) {\r\n            column.width = Number.parseInt(column.width.substr(0,column.width.length-2))+Number.parseInt(1)+'px';\r\n          }\r\n        }\r\n        // update--begin--autor:lvdandan-----date:20201019------for:LOWCOD-882 【新行编辑】列表上带按钮的遮挡问题\r\n      })\r\n      return this._innerColumns\r\n    },\r\n    // vxe 最终 editRules\r\n    vxeEditRules() {\r\n      return Object.assign({}, this.editRules, this._innerEditRules)\r\n    },\r\n    // vxe 最终 props\r\n    vxeProps() {\r\n      let expandConfig = Object.assign({}, this.defaultVxeProps['expand-config'], this.expandConfig)\r\n\r\n      return Object.assign({}, this.defaultVxeProps, {\r\n        showFooter: this.statistics.has,\r\n      }, this.$attrs, {\r\n        loading: this.loading,\r\n        columns: this.vxeColumns,\r\n        editRules: this.vxeEditRules,\r\n        // data: this.dataSource,\r\n        height: this.height === 'auto' ? null : this.height,\r\n        maxHeight: this.maxHeight,\r\n        border: this.bordered,\r\n        expandConfig: expandConfig,\r\n        footerMethod: this.handleFooterMethod,\r\n        // footerSpanMethod: this.handleFooterSpanMethod,\r\n      })\r\n    },\r\n    // vxe 最终 events\r\n    vxeEvents() {\r\n      // 内置事件\r\n      let events = {\r\n        'scroll': this.handleVxeScroll,\r\n        'cell-click': this.handleCellClick,\r\n        'edit-closed': this.handleEditClosed,\r\n        'edit-actived': this.handleEditActived,\r\n        'radio-change': this.handleVxeRadioChange,\r\n        'checkbox-all': this.handleVxeCheckboxAll,\r\n        'checkbox-change': this.handleVxeCheckboxChange,\r\n      }\r\n      // 用户传递的事件，进行合并操作\r\n      Object.keys(this.$listeners).forEach(key => {\r\n        let listen = this.$listeners[key]\r\n        if (events.hasOwnProperty(key)) {\r\n          if (Array.isArray(listen)) {\r\n            listen.push(events[key])\r\n          } else {\r\n            listen = [events[key], listen]\r\n          }\r\n        }\r\n        events[key] = listen\r\n      })\r\n      return events\r\n    },\r\n    // 组件监听事件\r\n    cellListeners() {\r\n      return {\r\n        trigger: (name, event) => this.trigger(name, event),\r\n        valueChange: event => this.trigger('valueChange', event),\r\n        /** 当前行向上移一位 */\r\n        rowMoveUp: rowIndex => this.rowResort(rowIndex, rowIndex - 1),\r\n        /** 当前行向下移一位 */\r\n        rowMoveDown: rowIndex => this.rowResort(rowIndex, rowIndex + 1),\r\n        /** 在当前行下面插入一行 */\r\n        rowInsertDown: rowIndex => this.insertRows({}, rowIndex + 1),\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    dataSource: {\r\n      //   deep: true,\r\n      immediate: true,\r\n      async handler() {\r\n        let vxe = await getRefPromise(this, 'vxe')\r\n        // 阻断vue监听大数据，提高性能\r\n\r\n        // 开启了排序就自动计算排序值\r\n        if (this.dragSort) {\r\n          this.dataSource.forEach((data, idx) => {\r\n            this.$set(data, this.dragSortKey, idx + 1)\r\n          })\r\n        }\r\n\r\n        vxe.loadData(this.dataSource)\r\n        // TODO 解析disabledRows\r\n        // let disabled = false\r\n        //\r\n        // let disabledRowIds = (this.disabledRowIds || [])\r\n        // // 解析disabledRows\r\n        // Object.keys(this.disabledRows).forEach(disabledColKey => {\r\n        //   // 判断是否有该属性\r\n        //   if (data.hasOwnProperty(disabledColKey)) {\r\n        //     if (disabled !== true) {\r\n        //       let temp = this.disabledRows[disabledColKey]\r\n        //       // 禁用规则可以是一个数组\r\n        //       if (Array.isArray(temp)) {\r\n        //         disabled = temp.includes(data[disabledColKey])\r\n        //       } else {\r\n        //         disabled = (temp === data[disabledColKey])\r\n        //       }\r\n        //       if (disabled) {\r\n        //         disabledRowIds.push(row.id)\r\n        //       }\r\n        //     }\r\n        //   }\r\n        // })\r\n      },\r\n    },\r\n    columns: {\r\n      immediate: true,\r\n      handler(columns) {\r\n        //获取不需要显示列\r\n        this.loadExcludeCode()\r\n        let _innerColumns = []\r\n        let _innerEditRules = {}\r\n        let {rowNumber, rowSelection, rowExpand, dragSort} = this\r\n        let expandColumn, seqColumn, checkboxColumn, radioColumn, dragSortColumn\r\n        if (Array.isArray(columns)) {\r\n          this.statistics.has = false\r\n          this.statistics.sum = []\r\n          this.statistics.average = []\r\n\r\n          // 处理成vxe可识别的columns\r\n          columns.forEach(column => {\r\n            if(this.excludeCode.indexOf(column.key)>=0){\r\n              return false\r\n            }\r\n            let col = {...column}\r\n            let {type} = col\r\n            const enhanced = getEnhancedMixins(type)\r\n            if (type === JVXETypes.rowNumber) {\r\n              seqColumn = col\r\n            } else if (type === JVXETypes.rowCheckbox) {\r\n              checkboxColumn = col\r\n            } else if (type === JVXETypes.rowRadio) {\r\n              radioColumn = col\r\n            } else if (type === JVXETypes.rowExpand) {\r\n              expandColumn = col\r\n            } else if (type === JVXETypes.rowDragSort) {\r\n              dragSortColumn = col\r\n            } else {\r\n              col.field = col.key\r\n              // 防止和vxeTable自带的type起冲突\r\n              col.$type = col.type\r\n              delete col.type\r\n              let renderName = 'cellRender', renderOptions = {name: JVXETypes._prefix + type}\r\n              if (type) {\r\n                // hidden 是特殊的组件\r\n                if (type === JVXETypes.hidden) {\r\n                  col.visible = false\r\n                } else if (enhanced.switches.editRender) {\r\n                  renderName = 'editRender'\r\n                  renderOptions.type = enhanced.switches.visible ? 'visible' : 'default'\r\n                }\r\n              } else {\r\n                renderOptions.name = JVXETypes._prefix + JVXETypes.normal\r\n              }\r\n              col[renderName] = renderOptions\r\n              // 处理字典\r\n              if (col.dictCode) {\r\n                this._loadDictConcatToOptions(col)\r\n              }\r\n              // 处理校验\r\n              if (col.validateRules) {\r\n                let rules = []\r\n                if (Array.isArray(col.validateRules)) {\r\n                  for (let rule of col.validateRules) {\r\n                    let replace = {\r\n                      message: replaceProps(col, rule.message)\r\n                    }\r\n                    if (rule.unique || rule.pattern === 'only') {\r\n                      // 唯一校验器\r\n                      rule.validator = uniqueValidator.bind(this)\r\n                    } else if (rule.pattern) {\r\n                      // 非空\r\n                      if (rule.pattern === fooPatterns[0].value) {\r\n                        rule.required = true\r\n                        delete rule.pattern\r\n                      } else {\r\n                        // 兼容Online表单的特殊规则\r\n                        for (let foo of fooPatterns) {\r\n                          if (foo.value === rule.pattern) {\r\n                            rule.pattern = foo.pattern\r\n                            break\r\n                          }\r\n                        }\r\n                      }\r\n                    } else if (typeof rule.handler === 'function') {\r\n                      // 自定义函数校验\r\n                      rule.validator = handlerConvertToValidator.bind(this)\r\n                    }\r\n                    rules.push(Object.assign({}, rule, replace))\r\n                  }\r\n                }\r\n                _innerEditRules[col.key] = rules\r\n              }\r\n              // 处理统计列\r\n              // sum = 求和、average = 平均值\r\n              if (Array.isArray(col.statistics)) {\r\n                this.statistics.has = true\r\n                col.statistics.forEach(item => {\r\n                  let arr = this.statistics[item.toLowerCase()]\r\n                  if (Array.isArray(arr)) {\r\n                    pushIfNotExist(arr, col.key)\r\n                  }\r\n                })\r\n              }\r\n              _innerColumns.push(col)\r\n            }\r\n          })\r\n        }\r\n        // 判断是否开启了序号\r\n        if (rowNumber) {\r\n          let col = {type: 'seq', title: '#', width: 60, fixed: 'left', align: 'center'}\r\n          if (seqColumn) {\r\n            col = Object.assign(col, seqColumn, {type: 'seq'})\r\n          }\r\n          _innerColumns.unshift(col)\r\n        }\r\n        // 判断是否开启了可选择行\r\n        if (rowSelection) {\r\n          let width = 40\r\n          if (this.statistics.has && !rowExpand && !dragSort) {\r\n            width = 60\r\n          }\r\n          let col = {type: this.rowSelectionType, width, fixed: 'left', align: 'center'}\r\n          // radio\r\n          if (this.rowSelectionType === 'radio' && radioColumn) {\r\n            col = Object.assign(col, radioColumn, {type: 'radio'})\r\n          }\r\n          // checkbox\r\n          if (this.rowSelectionType === 'checkbox' && checkboxColumn) {\r\n            col = Object.assign(col, checkboxColumn, {type: 'checkbox'})\r\n          }\r\n          _innerColumns.unshift(col)\r\n        }\r\n        // 是否可展开行\r\n        if (rowExpand) {\r\n          let width = 40\r\n          if (this.statistics.has && !dragSort) {\r\n            width = 60\r\n          }\r\n          let col = {type: 'expand', title: '', width, fixed: 'left', align: 'center', slots: {content: 'expandContent'}}\r\n          if (expandColumn) {\r\n            col = Object.assign(col, expandColumn, {type: 'expand'})\r\n          }\r\n          _innerColumns.unshift(col)\r\n        }\r\n        // 是否可拖动排序\r\n        if (dragSort) {\r\n          let width = 40\r\n          if (this.statistics.has) {\r\n            width = 60\r\n          }\r\n          let col = {type: JVXETypes.rowDragSort, title: '', width, fixed: 'left', align: 'center', cellRender: {name: JVXETypes._prefix + JVXETypes.rowDragSort}}\r\n          if (dragSortColumn) {\r\n            col = Object.assign(col, dragSortColumn, {type: JVXETypes.rowDragSort})\r\n          }\r\n          _innerColumns.unshift(col)\r\n        }\r\n\r\n        this._innerColumns = _innerColumns\r\n        this._innerEditRules = _innerEditRules\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  mounted() {\r\n    this.handleTabsChange()\r\n  },\r\n  methods: {\r\n\r\n    /**\r\n     * 自动判断父级是否是 <a-tabs/> 组件，然后添加事件监听，自动重置表格\r\n     */\r\n    handleTabsChange() {\r\n      // 获取父级\r\n      const tabs = getVmParentByName(this, 'ATabs')\r\n      const tabPane = getVmParentByName(this, 'ATabPane')\r\n      if (tabs && tabPane) {\r\n        // 用户自定义的 key\r\n        const currentKey = tabPane.$vnode.key\r\n        // 添加 activeKey 监听\r\n        const unwatch = tabs.$children[0].$watch('$data._activeKey', async (key) => {\r\n          // 切换到自己时重新计算\r\n          if (currentKey === key) {\r\n            await this.$nextTick()\r\n            await this.refreshScroll()\r\n            await this.recalculate()\r\n          }\r\n        })\r\n        // 当前实例销毁时取消监听\r\n        this.$on('beforeDestroy', () => unwatch())\r\n      }\r\n    },\r\n\r\n    handleVxeScroll(event) {\r\n      let {$refs, scroll} = this\r\n\r\n      // 记录滚动条的位置\r\n      scroll.top = event.scrollTop\r\n      scroll.left = event.scrollLeft\r\n\r\n      $refs.subPopover ? $refs.subPopover.close() : null\r\n      this.scrolling = true\r\n      this.closeScrolling()\r\n    },\r\n    // 当手动勾选单选时触发的事件\r\n    handleVxeRadioChange(event) {\r\n      let row = event.$table.getRadioRecord()\r\n      this.selectedRows = row ? [row] : []\r\n      this.handleSelectChange('radio', this.selectedRows, event)\r\n    },\r\n    // 当手动勾选全选时触发的事件\r\n    handleVxeCheckboxAll(event) {\r\n      this.selectedRows = event.$table.getCheckboxRecords()\r\n      this.handleSelectChange('checkbox-all', this.selectedRows, event)\r\n    },\r\n    // 当手动勾选并且值发生改变时触发的事件\r\n    handleVxeCheckboxChange(event) {\r\n      this.selectedRows = event.$table.getCheckboxRecords()\r\n      this.handleSelectChange('checkbox', this.selectedRows, event)\r\n    },\r\n    // 行选择change事件\r\n    handleSelectChange(type, selectedRows, $event) {\r\n      let action\r\n      if (type === 'radio') {\r\n        action = 'selected'\r\n      } else if (type === 'checkbox') {\r\n        action = selectedRows.includes($event.row) ? 'selected' : 'unselected'\r\n      } else {\r\n        action = 'selected-all'\r\n      }\r\n\r\n      this.selectedRowIds = selectedRows.map(row => row.id)\r\n      this.trigger('selectRowChange', {\r\n        type: type,\r\n        action: action,\r\n        $event: $event,\r\n        row: $event.row,\r\n        selectedRows: this.selectedRows,\r\n        selectedRowIds: this.selectedRowIds\r\n      })\r\n    },\r\n\r\n    // 点击单元格时触发的事件\r\n    handleCellClick(event) {\r\n      let {row, column, $event, $table} = event\r\n      let {$refs} = this\r\n\r\n      // 点击了可编辑的\r\n      if (column.editRender) {\r\n        $refs.subPopover ? $refs.subPopover.close() : null\r\n        return\r\n      }\r\n\r\n      // 显示详细信息\r\n      if (column.own.showDetails) {\r\n        // 两个如果同时存在的话会出现死循环\r\n        $refs.subPopover ? $refs.subPopover.close() : null\r\n        $refs.detailsModal ? $refs.detailsModal.open(event) : null\r\n      } else if ($refs.subPopover) {\r\n        $refs.subPopover.toggle(event)\r\n      } else if (this.clickSelectRow) {\r\n        let className = $event.target.className || ''\r\n        className = typeof className === 'string' ? className : className.toString()\r\n        // 点击的是expand，不做处理\r\n        if (className.includes('vxe-table--expand-btn')) {\r\n          return\r\n        }\r\n        // 点击的是checkbox，不做处理\r\n        if (className.includes('vxe-checkbox--icon') || className.includes('vxe-cell--checkbox')) {\r\n          return\r\n        }\r\n        // 点击的是radio，不做处理\r\n        if (className.includes('vxe-radio--icon') || className.includes('vxe-cell--radio')) {\r\n          return\r\n        }\r\n        if (this.rowSelectionType === 'radio') {\r\n          $table.setRadioRow(row)\r\n          this.handleVxeRadioChange(event)\r\n        } else {\r\n          $table.toggleCheckboxRow(row)\r\n          this.handleVxeCheckboxChange(event)\r\n        }\r\n      }\r\n    },\r\n\r\n    // 单元格编辑状态下被关闭时会触发该事件\r\n    handleEditClosed({column}) {\r\n      // 执行增强\r\n      getEnhancedMixins(column.own.$type, 'aopEvents').editClosed.apply(this, arguments)\r\n    },\r\n\r\n    // 单元格被激活编辑时会触发该事件\r\n    handleEditActived({column}) {\r\n      // 执行增强\r\n      getEnhancedMixins(column.own.$type, 'aopEvents').editActived.apply(this, arguments)\r\n    },\r\n\r\n    /** 表尾数据处理方法，用于显示统计信息 */\r\n    handleFooterMethod({columns, data}) {\r\n      const {statistics} = this\r\n      let footers = []\r\n      if (statistics.has) {\r\n        if (statistics.sum.length > 0) {\r\n          footers.push(this.getFooterStatisticsMap({\r\n            columns: columns,\r\n            title: '合计',\r\n            checks: statistics.sum,\r\n            method: (column) => XEUtils.sum(data, column.property)\r\n          }))\r\n        }\r\n        if (statistics.average.length > 0) {\r\n          footers.push(this.getFooterStatisticsMap({\r\n            columns: columns,\r\n            title: '平均',\r\n            checks: statistics.average,\r\n            method: (column) => XEUtils.mean(data, column.property)\r\n          }))\r\n        }\r\n      }\r\n      return footers\r\n    },\r\n\r\n    getFooterStatisticsMap({columns, title, checks, method}) {\r\n      return columns.map((column, columnIndex) => {\r\n        if (columnIndex === 0) {\r\n          return title\r\n        }\r\n        if (checks.includes(column.property)) {\r\n          return method(column, columnIndex)\r\n        }\r\n        return null\r\n      })\r\n    },\r\n\r\n    /** 表尾单元格合并方法 */\r\n    handleFooterSpanMethod(event) {\r\n      if (event.columnIndex === 0) {\r\n        return {colspan: 2}\r\n      }\r\n    },\r\n\r\n    /*--- 外部可调用接口方法 ---*/\r\n\r\n    /**\r\n     * 重置滚动条Top位置\r\n     * @param top 新top位置，留空则滚动到上次记录的位置，用于解决切换tab选项卡时导致白屏以及自动将滚动条滚动到顶部的问题\r\n     */\r\n    resetScrollTop(top) {\r\n      this.scrollTo(null, (top == null || top === '') ? this.scroll.top : top)\r\n    },\r\n\r\n    /**\r\n     * 加载新数据，和 loadData 不同的是，用该方法加载的数据都是相当于点新增按钮新增的数据。\r\n     * 适用于不是数据库里查出来的没有id的临时数据\r\n     * @param dataSource\r\n     */\r\n    async loadNewData(dataSource) {\r\n      if (Array.isArray(dataSource)) {\r\n        let {xTable} = this.$refs.vxe.$refs\r\n        return await xTable.loadData(dataSource)\r\n      }\r\n      return []\r\n    },\r\n\r\n    // 校验table，失败返回errMap，成功返回null\r\n    async validateTable() {\r\n      const errMap = await this.validate().catch(errMap => errMap)\r\n      return errMap ? errMap : null\r\n    },\r\n    // 完整校验\r\n    async fullValidateTable() {\r\n      const errMap = await this.fullValidate().catch(errMap => errMap)\r\n      return errMap ? errMap : null\r\n    },\r\n\r\n    /** 设置某行某列的值 */\r\n    setValues(values) {\r\n      if (!Array.isArray(values)) {\r\n        console.warn(`JVxeTable.setValues：必须传递数组`)\r\n        return\r\n      }\r\n      values.forEach((item, idx) => {\r\n        let {rowKey, values: record} = item\r\n        let {row} = this.getIfRowById(rowKey)\r\n        if (!row) {\r\n          return\r\n        }\r\n        Object.keys(record).forEach(colKey => {\r\n          let column = this.getColumnByKey(colKey)\r\n          if (column) {\r\n            let oldValue = row[colKey]\r\n            let newValue = record[colKey]\r\n            if (newValue !== oldValue) {\r\n              this.$set(row, colKey, newValue)\r\n              // 触发 valueChange 事件\r\n              this.trigger('valueChange', {\r\n                type: column.own.$type,\r\n                value: newValue,\r\n                oldValue: oldValue,\r\n                col: column.own,\r\n                column: column,\r\n                isSetValues: true,\r\n              })\r\n            }\r\n          } else {\r\n            console.warn(`JVxeTable.setValues：没有找到key为\"${colKey}\"的列`)\r\n          }\r\n        })\r\n      })\r\n    },\r\n\r\n    /** 获取所有的数据，包括values、deleteIds */\r\n    getAll() {\r\n      return {\r\n        tableData: this.getTableData(),\r\n        deleteData: this.getDeleteData()\r\n      }\r\n    },\r\n    /** 获取表格数据 */\r\n    getTableData(options = {}) {\r\n      let {rowIds} = options\r\n      let tableData\r\n      // 仅查询指定id的行\r\n      if (Array.isArray(rowIds) && rowIds.length > 0) {\r\n        tableData = []\r\n        rowIds.forEach(rowId => {\r\n          let {row} = this.getIfRowById(rowId)\r\n          if (row) {\r\n            tableData.push(row)\r\n          }\r\n        })\r\n      } else {\r\n        // 查询所有行\r\n        tableData = this.$refs.vxe.getTableData().fullData\r\n      }\r\n      return this.filterNewRows(tableData, false)\r\n    },\r\n    /** 仅获取新增的数据 */\r\n    getNewData() {\r\n      let newData = cloneObject(this.$refs.vxe.getInsertRecords())\r\n      newData.forEach(row => delete row.id)\r\n      return newData\r\n    },\r\n    /** 仅获取新增的数据,带有id */\r\n    getNewDataWithId() {\r\n      let newData = cloneObject(this.$refs.vxe.getInsertRecords())\r\n      return newData\r\n    },\r\n    /** 根据ID获取行，新增的行也能查出来 */\r\n    getIfRowById(id) {\r\n      let row = this.getRowById(id), isNew = false\r\n      if (!row) {\r\n        row = this.getNewRowById(id)\r\n        if (!row) {\r\n          console.warn(`JVxeTable.getIfRowById：没有找到id为\"${id}\"的行`)\r\n          return {row: null}\r\n        }\r\n        isNew = true\r\n      }\r\n      return {row, isNew}\r\n    },\r\n    /** 通过临时ID获取新增的行 */\r\n    getNewRowById(id) {\r\n      let records = this.getInsertRecords()\r\n      for (let record of records) {\r\n        if (record.id === id) {\r\n          return record\r\n        }\r\n      }\r\n      return null\r\n    },\r\n    /** 仅获取被删除的数据（新增又被删除的数据不会被获取到） */\r\n    getDeleteData() {\r\n      return cloneObject(this.$refs.vxe.getRemoveRecords())\r\n    },\r\n    /**\r\n     * 添加一行或多行\r\n     *\r\n     * @param rows\r\n     * @return\r\n     */\r\n    async addRows(rows = {\r\n\r\n    }, isOnlJs) {\r\n      if(this.isonline) {\r\n        rows = {\r\n          converter: \"\",\r\n          dbDefaultVal: \"\",\r\n          dbFieldName: \"\",\r\n          dbFieldTxt: \"\",\r\n          dbIsKey: \"1\",\r\n          dbIsNull: \"0\",\r\n          dbLength: \"36\",\r\n          dbPointLength: \"0\",\r\n          dbType: \"string\",\r\n          dictField: \"\",\r\n          dictTable: \"\",\r\n          dictText: \"\",\r\n          fieldDefaultValue: \"\",\r\n          fieldExtendJson: \"\",\r\n          fieldHref: \"\",\r\n          fieldLength: \"120\",\r\n          fieldMustInput: \"0\",\r\n          fieldShowType: \"text\",\r\n          isQuery: \"0\",\r\n          isReadOnly: \"1\",\r\n          isShowForm: \"0\",\r\n          isShowList: \"0\",\r\n          mainField: \"\",\r\n          mainTable: \"\",\r\n          orderNum: 1,\r\n          order_num: 0,\r\n          queryConfigFlag: \"0\",\r\n          queryDefVal: \"\",\r\n          queryDictField: \"\",\r\n          queryDictTable: \"\",\r\n          queryDictText: \"\",\r\n          queryMode: \"single\",\r\n          sortFlag: \"0\",\r\n        }\r\n        this.$emit('selfAdd')\r\n      }else {\r\n        return this._addOrInsert(rows, -1, 'added', isOnlJs)\r\n      }\r\n    },\r\n\r\n    /**\r\n     * 添加一行或多行\r\n     *\r\n     * @param rows\r\n     * @param index 添加下标，数字，必填\r\n     * @return\r\n     */\r\n    async insertRows(rows, index) {\r\n      if (typeof index !== 'number' || index < 0) {\r\n        console.warn(`【JVXETable】insertRows：index必须传递数字，且大于-1`)\r\n        return\r\n      }\r\n      return this._addOrInsert(rows, index, 'inserted')\r\n    },\r\n    /**\r\n     * 添加一行或多行临时数据，不会填充默认值，传什么就添加进去什么\r\n     * @param rows\r\n     * @param options 选项\r\n     * @param options.setActive 是否激活最后一行的编辑模式\r\n     */\r\n    async pushRows(rows = {}, options = {}) {\r\n      let {xTable} = this.$refs.vxe.$refs\r\n      let {setActive, index} = options\r\n      setActive = setActive == null ? false : !!setActive\r\n      index = index == null ? -1 : index\r\n      index = index === -1 ? index : xTable.tableFullData[index]\r\n      // 插入行\r\n      let result = await xTable.insertAt(rows, index)\r\n      if (setActive) {\r\n        // 激活最后一行的编辑模式\r\n        xTable.setActiveRow(result.rows[result.rows.length - 1])\r\n      }\r\n      await this._recalcSortNumber()\r\n      return result\r\n    },\r\n\r\n    /** 清空选择行 */\r\n    clearSelection() {\r\n      let event = {$table: this.$refs.vxe, target: this}\r\n      if (this.rowSelectionType === JVXETypes.rowRadio) {\r\n        this.$refs.vxe.clearRadioRow()\r\n        this.handleVxeRadioChange(event)\r\n      } else {\r\n        this.$refs.vxe.clearCheckboxRow()\r\n        this.handleVxeCheckboxChange(event)\r\n      }\r\n    },\r\n\r\n    /** 删除一行或多行数据 */\r\n    async removeRows(rows) {\r\n      const res = await this._remove(rows)\r\n      await this._recalcSortNumber()\r\n      return res\r\n    },\r\n\r\n    /** 根据id删除一行或多行 */\r\n    removeRowsById(rowId) {\r\n      let rowIds\r\n      if (Array.isArray(rowId)) {\r\n        rowIds = rowId\r\n      } else {\r\n        rowIds = [rowId]\r\n      }\r\n      let rows = rowIds.map((id) => {\r\n        let {row} = this.getIfRowById(id)\r\n        if (!row) {\r\n          return\r\n        }\r\n        if (row) {\r\n          return row\r\n        } else {\r\n          console.warn(`【JVXETable】removeRowsById：${id}不存在`)\r\n          return null\r\n        }\r\n      }).filter((row) => row != null)\r\n      return this.removeRows(rows)\r\n    },\r\n\r\n    getColumnByKey() {\r\n      return this.$refs.vxe.getColumnByField.apply(this.$refs.vxe, arguments)\r\n    },\r\n\r\n    /* --- 辅助方法 ---*/\r\n\r\n    // 触发事件\r\n    trigger(name, event = {}) {\r\n      event.$target = this\r\n      event.$table = this.$refs.vxe\r\n      //online增强参数兼容\r\n      event.target = this\r\n      this.$emit(name, event)\r\n    },\r\n\r\n    /** 加载数据字典并合并到 options */\r\n    _loadDictConcatToOptions(column) {\r\n      initDictOptions(column.dictCode).then((res) => {\r\n        if (res.success) {\r\n          let newOptions = (column.options || [])// .concat(res.result)\r\n          res.result.forEach(item => {\r\n            // 过滤重复数据\r\n            for (let option of newOptions) if (option.value === item.value) return\r\n            newOptions.push(item)\r\n          })\r\n          this.$set(column, 'options', newOptions)\r\n        } else {\r\n          console.group(`JVxeTable 查询字典(${column.dictCode})发生异常`)\r\n          console.warn(res.message)\r\n          console.groupEnd()\r\n        }\r\n      })\r\n    },\r\n\r\n    // 设置 this.scrolling 防抖模式\r\n    closeScrolling: simpleDebounce(function () {\r\n      this.scrolling = false\r\n    }, 100),\r\n\r\n    /**\r\n     * 过滤添加的行\r\n     * @param rows 要筛选的行数据\r\n     * @param remove true = 删除新增，false=只删除id\r\n     * @param handler function\r\n     */\r\n    filterNewRows(rows, remove = true, handler) {\r\n      let insertRecords = this.$refs.vxe.getInsertRecords()\r\n      let records = []\r\n      for (let row of rows) {\r\n        let item = cloneObject(row)\r\n        if (insertRecords.includes(row)) {\r\n          handler ? handler({item, row, insertRecords}) : null\r\n\r\n          if (remove) {\r\n            continue\r\n          }\r\n          delete item.id\r\n        }\r\n        records.push(item)\r\n      }\r\n      return records\r\n    },\r\n\r\n    // 删除选中的数据\r\n    async removeSelection() {\r\n      let res = await this._remove(this.selectedRows)\r\n      this.clearSelection()\r\n      await this._recalcSortNumber()\r\n      return res\r\n    },\r\n\r\n    /**\r\n     * 【删除指定行数据】（重写vxeTable的内部方法，添加了从keepSource中删除）\r\n     * 如果传 row 则删除一行\r\n     * 如果传 rows 则删除多行\r\n     * 如果为空则删除所有\r\n     */\r\n    _remove(rows) {\r\n      const xTable = this.$refs.vxe.$refs.xTable\r\n\r\n      const {afterFullData, tableFullData, tableSourceData, editStore, treeConfig, checkboxOpts, selection, isInsertByRow, scrollYLoad} = xTable\r\n      const {actived, removeList, insertList} = editStore\r\n      const {checkField: property} = checkboxOpts\r\n      let rest = []\r\n      const nowData = afterFullData\r\n      if (treeConfig) {\r\n        throw new Error(UtilTools.getLog('vxe.error.noTree', ['remove']))\r\n      }\r\n      if (!rows) {\r\n        rows = tableFullData\r\n      } else if (!XEUtils.isArray(rows)) {\r\n        rows = [rows]\r\n      }\r\n      // 如果是新增，则保存记录\r\n      rows.forEach(row => {\r\n        if (!isInsertByRow(row)) {\r\n          removeList.push(row)\r\n        }\r\n      })\r\n      // 如果绑定了多选属性，则更新状态\r\n      if (!property) {\r\n        XEUtils.remove(selection, row => rows.indexOf(row) > -1)\r\n      }\r\n      // 从数据源中移除\r\n      if (tableFullData === rows) {\r\n        rows = rest = tableFullData.slice(0)\r\n        tableFullData.length = 0\r\n        nowData.length = 0\r\n      } else {\r\n        rest = XEUtils.remove(tableFullData, row => rows.indexOf(row) > -1)\r\n        XEUtils.remove(nowData, row => rows.indexOf(row) > -1)\r\n      }\r\n      // 【从keepSource中删除】\r\n      if (xTable.keepSource) {\r\n        let rowIdSet = new Set(rows.map(row => row.id))\r\n        XEUtils.remove(tableSourceData, row => rowIdSet.has(row.id))\r\n      }\r\n\r\n      // 如果当前行被激活编辑，则清除激活状态\r\n      if (actived.row && rows.indexOf(actived.row) > -1) {\r\n        xTable.clearActived()\r\n      }\r\n      // 从新增中移除已删除的数据\r\n      XEUtils.remove(insertList, row => rows.indexOf(row) > -1)\r\n      xTable.handleTableData()\r\n      xTable.updateFooter()\r\n      xTable.updateCache()\r\n      xTable.checkSelectionStatus()\r\n      if (scrollYLoad) {\r\n        xTable.updateScrollYSpace()\r\n      }\r\n      return xTable.$nextTick().then(() => {\r\n        xTable.recalculate()\r\n        return {row: rest.length ? rest[rest.length - 1] : null, rows: rest}\r\n      })\r\n    },\r\n\r\n    /** 行重新排序 */\r\n    async rowResort(oldIndex, newIndex) {\r\n      const xTable = this.$refs.vxe.$refs.xTable\r\n      window.xTable = xTable\r\n      const sort = (array) => {\r\n        // 存储旧数据，并删除旧项目\r\n        let row = array.splice(oldIndex, 1)[0]\r\n        // 向新项目里添加旧数据\r\n        array.splice(newIndex, 0, row)\r\n      }\r\n      sort(xTable.tableFullData)\r\n      if (xTable.keepSource) {\r\n        sort(xTable.tableSourceData)\r\n      }\r\n      await this.$nextTick()\r\n      await this._recalcSortNumber()\r\n    },\r\n\r\n    /** 重新计算排序字段的数值 */\r\n    async _recalcSortNumber() {\r\n      const xTable = this.$refs.vxe.$refs.xTable\r\n      if (this.dragSort) {\r\n        xTable.tableFullData.forEach((data, idx) => data[this.dragSortKey] = (idx + 1))\r\n      }\r\n      await xTable.updateCache(true)\r\n      return await xTable.updateData()\r\n    },\r\n\r\n    async _addOrInsert(rows = {}, index, triggerName, isOnlJs) {\r\n      let {xTable} = this.$refs.vxe.$refs\r\n      let records\r\n      if (Array.isArray(rows)) {\r\n        delete rows.undefined\r\n        records = rows\r\n      } else {\r\n        delete rows.undefined\r\n        records = [rows]\r\n      }\r\n      console.log(records)\r\n      // 遍历添加默认值\r\n      records.forEach(record => this._createRow(record))\r\n      console.log(records)\r\n      let result = await this.pushRows(records, {index: index, setActive: true})\r\n      // 遍历插入的行\r\n      // update--begin--autor:lvdandan-----date:20201117------for:LOWCOD-987 【新行编辑】js增强附表内置方法调用问题 #1819\r\n      // online js增强时以传过来值为准，不再赋默认值\r\n      if (isOnlJs != true) {\r\n        for (let i = 0; i < result.rows.length; i++) {\r\n          let row = result.rows[i]\r\n          this.trigger(triggerName, {\r\n            row: row,\r\n            $table: xTable,\r\n            target: this,\r\n          })\r\n        }\r\n      }\r\n      // update--end--autor:lvdandan-----date:20201117------for:LOWCOD-987 【新行编辑】js增强附表内置方法调用问题 #1819\r\n      return result\r\n    },\r\n    // 创建新行，自动添加默认值\r\n    _createRow(record = {}) {\r\n      let {xTable} = this.$refs.vxe.$refs\r\n      // 添加默认值\r\n      xTable.tableFullColumn.forEach(column => {\r\n        let col = column.own\r\n        if (record[col.key] == null || record[col.key] === '') {\r\n          // 设置默认值\r\n          let createValue = getEnhancedMixins(col.$type || col.type, 'createValue')\r\n          record[col.key] = createValue({row: record, column, $table: xTable})\r\n        }\r\n      })\r\n      delete record.undefined\r\n      return record\r\n    },\r\n\r\n    /*--- 渲染函数 ---*/\r\n\r\n    // 渲染 vxe\r\n    renderVxeGrid(h) {\r\n      return h('vxe-grid', {\r\n        ref: 'vxe',\r\n        class: ['j-vxe-table'],\r\n        props: this.vxeProps,\r\n        on: this.vxeEvents,\r\n        // 作用域插槽的格式为\r\n        scopedSlots: this.$scopedSlots,\r\n      })\r\n    },\r\n    // 渲染工具栏\r\n    renderToolbar(h) {\r\n      var that = this\r\n      if (this.toolbar) {\r\n        return h('j-vxe-toolbar', {\r\n          props: {\r\n            toolbarConfig: this.toolbarConfig,\r\n            importBtn:this.importBtn,\r\n            excludeCode: this.excludeCode,\r\n            size: this.size,\r\n            disabled: this.disabled,\r\n            disabledRows: this.disabledRows,\r\n            selectedRowIds: this.selectedRowIds,\r\n          },\r\n          on: {\r\n            // 新增事件\r\n            add: () => this.addRows(),\r\n            // 保存事件\r\n            save: () => this.trigger('save', {\r\n              $table: this.$refs.vxe,\r\n              target: this,\r\n            }),\r\n            import() {\r\n              var formData = JSON.parse(window.localStorage.getItem('formData'))\r\n              var res = JSON.parse(window.localStorage.getItem('uploadresult'))\r\n              if(formData.type=='DutyData') {\r\n                  that.$emit('loadDataUpload',res)\r\n              }else if(formData.type=='WeekStatistics') {\r\n                that.dataSource = res\r\n              }\r\n            },\r\n            // 删除事件\r\n            remove: () => {\r\n              let $table = this.$refs.vxe\r\n              let deleteRows = this.filterNewRows(this.selectedRows)\r\n              // 触发删除事件\r\n              if (deleteRows.length > 0) {\r\n                let removeEvent = {deleteRows, $table, target: this}\r\n                if (this.asyncRemove) {\r\n                  // 确认删除，只有调用这个方法才会真删除\r\n                  removeEvent.confirmRemove = () => this.removeSelection()\r\n                } else {\r\n                  this.removeSelection()\r\n                }\r\n                this.trigger('remove', removeEvent)\r\n              } else {\r\n                this.removeSelection()\r\n              }\r\n            },\r\n            // 清除选择事件\r\n            clearSelection: this.clearSelection\r\n          },\r\n          scopedSlots: {\r\n            toolbarPrefix: this.$scopedSlots.toolbarPrefix,\r\n            toolbarSuffix: this.$scopedSlots.toolbarSuffix,\r\n          },\r\n        })\r\n      }\r\n      return null\r\n    },\r\n    // 渲染 toolbarAfter 插槽\r\n    renderToolbarAfterSlot() {\r\n      if (this.$scopedSlots['toolbarAfter']) {\r\n        return this.$scopedSlots['toolbarAfter']()\r\n      }\r\n      return null\r\n    },\r\n    // 渲染点击时弹出的子表\r\n    renderSubPopover(h) {\r\n      if (this.clickRowShowSubForm && this.$scopedSlots.subForm) {\r\n        return h('j-vxe-sub-popover', {\r\n          ref: 'subPopover',\r\n          scopedSlots: {\r\n            subForm: this.$scopedSlots.subForm,\r\n          }\r\n        })\r\n      }\r\n      return null\r\n    },\r\n    // 渲染点击时弹出的详细信息\r\n    renderDetailsModal(h) {\r\n      if (this.clickRowShowMainForm && this.$scopedSlots.mainForm) {\r\n        return h('j-vxe-details-modal', {\r\n          ref: 'detailsModal',\r\n          scopedSlots: {\r\n            subForm: this.clickRowShowSubForm ? this.$scopedSlots.subForm : null,\r\n            mainForm: this.$scopedSlots.mainForm\r\n          }\r\n        })\r\n      }\r\n    },\r\n    // 渲染分页器\r\n    renderPagination(h) {\r\n      if (this.pagination && Object.keys(this.pagination).length > 0) {\r\n        return h('j-vxe-pagination', {\r\n          props: {\r\n            size: this.size,\r\n            disabled: this.disabled,\r\n            pagination: this.pagination\r\n          },\r\n          on: {\r\n            change: (e) => this.trigger('pageChange', e)\r\n          },\r\n        })\r\n      }\r\n      return null\r\n    },\r\n    loadExcludeCode(){\r\n      if(!this.authPre || this.authPre.length==0){\r\n        this.excludeCode = []\r\n      }else{\r\n        let pre = this.authPre\r\n        if(!pre.endsWith(':')){\r\n          pre += ':'\r\n        }\r\n        this.excludeCode = getNoAuthCols(pre)\r\n      }\r\n    }\r\n\r\n  },\r\n  render(h) {\r\n    return h('div', {\r\n      class: ['j-vxe-table-box', `size--${this.size}`]\r\n    }, [\r\n      this.renderSubPopover(h),\r\n      this.renderDetailsModal(h),\r\n      this.renderToolbar(h),\r\n      this.renderToolbarAfterSlot(),\r\n      this.renderVxeGrid(h),\r\n      this.renderPagination(h),\r\n    ])\r\n  },\r\n  beforeDestroy() {\r\n    this.$emit('beforeDestroy')\r\n  }\r\n}\r\n\r\n// 兼容 online 的规则\r\nconst fooPatterns = [\r\n  {title: '非空', value: '*', pattern: /^.+$/},\r\n  {title: '6到16位数字', value: 'n6-16', pattern: /^\\d{6,18}$/},\r\n  {title: '6到16位任意字符', value: '*6-16', pattern: /^.{6,16}$/},\r\n  {title: '6到18位字母', value: 's6-18', pattern: /^[a-z|A-Z]{6,18}$/},\r\n  {title: '网址', value: 'url', pattern: /^(?:([A-Za-z]+):)?(\\/{0,3})([0-9.\\-A-Za-z]+)(?::(\\d+))?(?:\\/([^?#]*))?(?:\\?([^#]*))?(?:#(.*))?$/},\r\n  {title: '电子邮件', value: 'e', pattern: /^([\\w]+\\.*)([\\w]+)@[\\w]+\\.\\w{3}(\\.\\w{2}|)$/},\r\n  {title: '手机号码', value: 'm', pattern: /^1[3456789]\\d{9}$/},\r\n  {title: '邮政编码', value: 'p', pattern: /^[1-9]\\d{5}$/},\r\n  {title: '字母', value: 's', pattern: /^[A-Z|a-z]+$/},\r\n  {title: '数字', value: 'n', pattern: /^-?\\d+(\\.?\\d+|\\d?)$/},\r\n  {title: '整数', value: 'z', pattern: /^-?\\d+$/},\r\n  {title: '金额', value: 'money', pattern: /^(([1-9][0-9]*)|([0]\\.\\d{0,2}|[1-9][0-9]*\\.\\d{0,2}))$/},\r\n]\r\n\r\n/** 旧版handler转为新版Validator */\r\nfunction handlerConvertToValidator(event) {\r\n  const {column, rule} = event\r\n  return new Promise((resolve, reject) => {\r\n    rule.handler(event, (flag, msg) => {\r\n      let message = rule.message\r\n      if (typeof msg === 'string') {\r\n        message = replaceProps(column.own, msg)\r\n      }\r\n      if (flag == null) {\r\n        resolve(message)\r\n      } else if (!!flag) {\r\n        resolve(message)\r\n      } else {\r\n        reject(new Error(message))\r\n      }\r\n    }, this, event)\r\n  })\r\n}\r\n\r\n/** 唯一校验器 */\r\nfunction uniqueValidator(event) {\r\n  const {cellValue, column, rule} = event\r\n  let tableData = this.getTableData()\r\n  let findCount = 0\r\n  for (let rowData of tableData) {\r\n    if (rowData[column.own.key] === cellValue) {\r\n      if (++findCount >= 2) {\r\n        return Promise.reject(new Error(rule.message))\r\n      }\r\n    }\r\n  }\r\n  return Promise.resolve()\r\n}"]}]}