{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\JEditor.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JEditor.vue","mtime":1615948815730},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHRpbnltY2UgZnJvbSAndGlueW1jZS90aW55bWNlJzsKaW1wb3J0IEVkaXRvciBmcm9tICdAdGlueW1jZS90aW55bWNlLXZ1ZSc7CmltcG9ydCAndGlueW1jZS90aGVtZXMvc2lsdmVyL3RoZW1lJzsKaW1wb3J0ICd0aW55bWNlL3BsdWdpbnMvaW1hZ2UnOwppbXBvcnQgJ3RpbnltY2UvcGx1Z2lucy9saW5rJzsKaW1wb3J0ICd0aW55bWNlL3BsdWdpbnMvbWVkaWEnOwppbXBvcnQgJ3RpbnltY2UvcGx1Z2lucy90YWJsZSc7CmltcG9ydCAndGlueW1jZS9wbHVnaW5zL2xpc3RzJzsKaW1wb3J0ICd0aW55bWNlL3BsdWdpbnMvY29udGV4dG1lbnUnOwppbXBvcnQgJ3RpbnltY2UvcGx1Z2lucy93b3JkY291bnQnOwppbXBvcnQgJ3RpbnltY2UvcGx1Z2lucy9jb2xvcnBpY2tlcic7CmltcG9ydCAndGlueW1jZS9wbHVnaW5zL3RleHRjb2xvcic7CmltcG9ydCAndGlueW1jZS9wbHVnaW5zL2Z1bGxzY3JlZW4nOwppbXBvcnQgJ3RpbnltY2UvaWNvbnMvZGVmYXVsdCc7CmltcG9ydCB7IHVwbG9hZEFjdGlvbiwgZ2V0RmlsZUFjY2Vzc0h0dHBVcmwgfSBmcm9tICdAL2FwaS9tYW5hZ2UnOwppbXBvcnQgeyBnZXRWbVBhcmVudEJ5TmFtZSB9IGZyb20gJ0AvdXRpbHMvdXRpbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBFZGl0b3I6IEVkaXRvcgogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAogICAgdHJpZ2dlckNoYW5nZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBwbHVnaW5zOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XSwKICAgICAgZGVmYXVsdDogJ2xpc3RzIGltYWdlIGxpbmsgbWVkaWEgdGFibGUgdGV4dGNvbG9yIHdvcmRjb3VudCBjb250ZXh0bWVudSBmdWxsc2NyZWVuJwogICAgfSwKICAgIHRvb2xiYXI6IHsKICAgICAgdHlwZTogW1N0cmluZywgQXJyYXldLAogICAgICBkZWZhdWx0OiAndW5kbyByZWRvIHwgIGZvcm1hdHNlbGVjdCB8IGJvbGQgaXRhbGljIHwgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IHwgYnVsbGlzdCBudW1saXN0IG91dGRlbnQgaW5kZW50IHwgbGlzdHMgbGluayB1bmxpbmsgaW1hZ2UgbWVkaWEgdGFibGUgfCByZW1vdmVmb3JtYXQgfCBmdWxsc2NyZWVuJywKICAgICAgYnJhbmRpbmc6IGZhbHNlCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy/liJ3lp4vljJbphY3nva4KICAgICAgaW5pdDogewogICAgICAgIGxhbmd1YWdlX3VybDogJy90aW55bWNlL2xhbmdzL3poX0NOLmpzJywKICAgICAgICBsYW5ndWFnZTogJ3poX0NOJywKICAgICAgICBza2luX3VybDogJy90aW55bWNlL3NraW5zL2xpZ2h0Z3JheScsCiAgICAgICAgaGVpZ2h0OiAzMDAsCiAgICAgICAgcGx1Z2luczogdGhpcy5wbHVnaW5zLAogICAgICAgIHRvb2xiYXI6IHRoaXMudG9vbGJhciwKICAgICAgICBicmFuZGluZzogZmFsc2UsCiAgICAgICAgbWVudWJhcjogZmFsc2UsCiAgICAgICAgdG9vbGJhcl9kcmF3ZXI6IGZhbHNlLAogICAgICAgIGltYWdlc191cGxvYWRfaGFuZGxlcjogZnVuY3Rpb24gaW1hZ2VzX3VwbG9hZF9oYW5kbGVyKGJsb2JJbmZvLCBzdWNjZXNzKSB7CiAgICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZScsIGJsb2JJbmZvLmJsb2IoKSwgYmxvYkluZm8uZmlsZW5hbWUoKSk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2JpeicsICJqZWRpdG9yIik7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoImplZGl0b3IiLCAiMSIpOwogICAgICAgICAgdXBsb2FkQWN0aW9uKHdpbmRvdy5fQ09ORklHWydkb21pYW5VUkwnXSArICIvc3lzL2NvbW1vbi91cGxvYWQiLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIGlmIChyZXMubWVzc2FnZSA9PSAnbG9jYWwnKSB7CiAgICAgICAgICAgICAgICB2YXIgaW1nID0gJ2RhdGE6aW1hZ2UvanBlZztiYXNlNjQsJyArIGJsb2JJbmZvLmJhc2U2NCgpOwogICAgICAgICAgICAgICAgc3VjY2VzcyhpbWcpOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB2YXIgX2ltZyA9IGdldEZpbGVBY2Nlc3NIdHRwVXJsKHJlcy5tZXNzYWdlKTsKCiAgICAgICAgICAgICAgICBzdWNjZXNzKF9pbWcpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBteVZhbHVlOiB0aGlzLnZhbHVlLAogICAgICByZWxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuaW5pdEFUYWJzQ2hhbmdlQXV0b1JlbG9hZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgcmVsb2FkOiBmdW5jdGlvbiByZWxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnJlbG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMucmVsb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkgewogICAgICB0aGlzLiRlbWl0KCdvbkNsaWNrJywgZSwgdGlueW1jZSk7CiAgICB9LAogICAgLy/lj6/ku6Xmt7vliqDkuIDkupvoh6rlt7HnmoToh6rlrprkuYnkuovku7bvvIzlpoLmuIXnqbrlhoXlrrkKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy5teVZhbHVlID0gJyc7CiAgICB9LAoKICAgIC8qKgogICAgICog6Ieq5Yqo5Yik5pat54i257qn5piv5ZCm5pivIDxhLXRhYnMvPiDnu4Tku7bvvIznhLblkI7mt7vliqDkuovku7bnm5HlkKzvvIzoh6rliqjop6blj5FyZWxvYWQoKQogICAgICoKICAgICAqIOeUseS6jiB0YWJzIOe7hOS7tuWIh+aNouS8muWvvOiHtCB0aW55bWNlIOaXoOazlei+k+WFpe+8jAogICAgICog5Y+q5pyJ6YeN5paw5Yqg6L295omN6IO95L2/55So77yI5peg6K665pivdnVl54mI55qE6L+Y5pivalF1ZXJ554mIdGlueW1jZemDveaciei/meS4qumAmueXhe+8iQogICAgICovCiAgICBpbml0QVRhYnNDaGFuZ2VBdXRvUmVsb2FkOiBmdW5jdGlvbiBpbml0QVRhYnNDaGFuZ2VBdXRvUmVsb2FkKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIC8vIOiOt+WPlueItue6pwogICAgICB2YXIgdGFicyA9IGdldFZtUGFyZW50QnlOYW1lKHRoaXMsICdBVGFicycpOwogICAgICB2YXIgdGFiUGFuZSA9IGdldFZtUGFyZW50QnlOYW1lKHRoaXMsICdBVGFiUGFuZScpOwoKICAgICAgaWYgKHRhYnMgJiYgdGFiUGFuZSkgewogICAgICAgIC8vIOeUqOaIt+iHquWumuS5ieeahCBrZXkKICAgICAgICB2YXIgY3VycmVudEtleSA9IHRhYlBhbmUuJHZub2RlLmtleTsgLy8g5re75Yqg5LqL5Lu255uR5ZCsCgogICAgICAgIHRhYnMuJG9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAvLyDliIfmjaLliLDoh6rlt7Hml7bmiafooYxyZWxvYWQKICAgICAgICAgIGlmIChjdXJyZW50S2V5ID09PSBrZXkpIHsKICAgICAgICAgICAgX3RoaXMyLnJlbG9hZCgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vdXBkYXRlLS1iZWdpbi0tYXV0b3I6d2FuZ3NodWFpLS0tLS1kYXRlOjIwMjAwNzI0LS0tLS0tZm9y77ya5a+M5paH5pys57yW6L6R5Zmo5YiH5o2idGFi5peg5rOV5L+u5pS5LS0tLS0tCiAgICAgICAgdmFyIHRhYkxheW91dCA9IGdldFZtUGFyZW50QnlOYW1lKHRoaXMsICdUYWJMYXlvdXQnKTsKICAgICAgICB0YWJMYXlvdXQuZXhjdXRlQ2FsbGJhY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMyLnJlbG9hZCgpOwogICAgICAgIH0pOyAvL3VwZGF0ZS0tYmVnaW4tLWF1dG9yOndhbmdzaHVhaS0tLS0tZGF0ZToyMDIwMDcyNC0tLS0tLWZvcu+8muaWh+acrOe8lui+keWZqOWIh+aNonRhYuaXoOazleS/ruaUuS0tLS0tLQogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMubXlWYWx1ZSA9IG5ld1ZhbHVlID09IG51bGwgPyAnJyA6IG5ld1ZhbHVlOwogICAgfSwKICAgIG15VmFsdWU6IGZ1bmN0aW9uIG15VmFsdWUobmV3VmFsdWUpIHsKICAgICAgaWYgKHRoaXMudHJpZ2dlckNoYW5nZSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIG5ld1ZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG5ld1ZhbHVlKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["JEditor.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"tinymce-editor\">\r\n    <editor\r\n      v-if=\"!reloading\"\r\n      v-model=\"myValue\"\r\n      :init=\"init\"\r\n      :disabled=\"disabled\"\r\n      @onClick=\"onClick\">\r\n    </editor>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import tinymce from 'tinymce/tinymce'\r\n  import Editor from '@tinymce/tinymce-vue'\r\n  import 'tinymce/themes/silver/theme'\r\n  import 'tinymce/plugins/image'\r\n  import 'tinymce/plugins/link'\r\n  import 'tinymce/plugins/media'\r\n  import 'tinymce/plugins/table'\r\n  import 'tinymce/plugins/lists'\r\n  import 'tinymce/plugins/contextmenu'\r\n  import 'tinymce/plugins/wordcount'\r\n  import 'tinymce/plugins/colorpicker'\r\n  import 'tinymce/plugins/textcolor'\r\n  import 'tinymce/plugins/fullscreen'\r\n  import 'tinymce/icons/default'\r\n  import { uploadAction,getFileAccessHttpUrl } from '@/api/manage'\r\n  import { getVmParentByName } from '@/utils/util'\r\n  export default {\r\n    components: {\r\n      Editor\r\n    },\r\n    props: {\r\n      value: {\r\n        type: String,\r\n        required:false\r\n      },\r\n      triggerChange:{\r\n        type: Boolean,\r\n        default: false,\r\n        required:false\r\n      },\r\n      disabled: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      plugins: {\r\n        type: [String, Array],\r\n        default: 'lists image link media table textcolor wordcount contextmenu fullscreen'\r\n      },\r\n      toolbar: {\r\n        type: [String, Array],\r\n        default: 'undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists link unlink image media table | removeformat | fullscreen',\r\n        branding:false\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        //初始化配置\r\n        init: {\r\n          language_url: '/tinymce/langs/zh_CN.js',\r\n          language: 'zh_CN',\r\n          skin_url: '/tinymce/skins/lightgray',\r\n          height: 300,\r\n          plugins: this.plugins,\r\n          toolbar: this.toolbar,\r\n          branding: false,\r\n          menubar: false,\r\n          toolbar_drawer: false,\r\n          images_upload_handler: (blobInfo, success) => {\r\n            let formData = new FormData()\r\n            formData.append('file', blobInfo.blob(), blobInfo.filename());\r\n            formData.append('biz', \"jeditor\");\r\n            formData.append(\"jeditor\",\"1\");\r\n            uploadAction(window._CONFIG['domianURL']+\"/sys/common/upload\", formData).then((res) => {\r\n              if (res.success) {\r\n                if(res.message == 'local'){\r\n                  const img = 'data:image/jpeg;base64,' + blobInfo.base64()\r\n                  success(img)\r\n                }else{\r\n                  let img = getFileAccessHttpUrl(res.message)\r\n                  success(img)\r\n                }\r\n              }\r\n            })\r\n          }\r\n        },\r\n        myValue: this.value,\r\n        reloading: false,\r\n      }\r\n    },\r\n    mounted() {\r\n      this.initATabsChangeAutoReload()\r\n    },\r\n    methods: {\r\n\r\n      reload() {\r\n        this.reloading = true\r\n        this.$nextTick(() => this.reloading = false)\r\n      },\r\n\r\n      onClick(e) {\r\n        this.$emit('onClick', e, tinymce)\r\n      },\r\n      //可以添加一些自己的自定义事件，如清空内容\r\n      clear() {\r\n        this.myValue = ''\r\n      },\r\n\r\n      /**\r\n       * 自动判断父级是否是 <a-tabs/> 组件，然后添加事件监听，自动触发reload()\r\n       *\r\n       * 由于 tabs 组件切换会导致 tinymce 无法输入，\r\n       * 只有重新加载才能使用（无论是vue版的还是jQuery版tinymce都有这个通病）\r\n       */\r\n      initATabsChangeAutoReload() {\r\n        // 获取父级\r\n        let tabs = getVmParentByName(this, 'ATabs')\r\n        let tabPane = getVmParentByName(this, 'ATabPane')\r\n        if (tabs && tabPane) {\r\n          // 用户自定义的 key\r\n          let currentKey = tabPane.$vnode.key\r\n          // 添加事件监听\r\n          tabs.$on('change', (key) => {\r\n            // 切换到自己时执行reload\r\n            if (currentKey === key) {\r\n              this.reload()\r\n            }\r\n          })\r\n        }else{\r\n          //update--begin--autor:wangshuai-----date:20200724------for：富文本编辑器切换tab无法修改------\r\n          let tabLayout = getVmParentByName(this, 'TabLayout')\r\n          tabLayout.excuteCallback(()=>{\r\n            this.reload()\r\n          })\r\n          //update--begin--autor:wangshuai-----date:20200724------for：文本编辑器切换tab无法修改------\r\n        }\r\n      },\r\n\r\n    },\r\n    watch: {\r\n      value(newValue) {\r\n        this.myValue = (newValue == null ? '' : newValue)\r\n      },\r\n      myValue(newValue) {\r\n        if(this.triggerChange){\r\n          this.$emit('change', newValue)\r\n        }else{\r\n          this.$emit('input', newValue)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n<style scoped>\r\n</style>"],"sourceRoot":"src/components/jeecg"}]}