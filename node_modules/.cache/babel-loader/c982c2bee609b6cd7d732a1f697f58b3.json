{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\system\\modules\\QuartzJobModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\system\\modules\\QuartzJobModal.vue","mtime":1615948821501},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgaHR0cEFjdGlvbiB9IGZyb20gJ0AvYXBpL21hbmFnZSc7CmltcG9ydCBKQ3JvbiBmcm9tICJAL2NvbXBvbmVudHMvamVlY2cvSkNyb24iOwppbXBvcnQgcGljayBmcm9tICdsb2Rhc2gucGljayc7IC8vIGltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IgoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJRdWFydHpKb2JNb2RhbCIsCiAgY29tcG9uZW50czogewogICAgSkNyb246IEpDcm9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICLmk43kvZwiLAogICAgICBidXR0b25TdHlsZTogJ3NvbGlkJywKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIG1vZGVsOiB7fSwKICAgICAgbGFiZWxDb2w6IHsKICAgICAgICB4czogewogICAgICAgICAgc3BhbjogMjQKICAgICAgICB9LAogICAgICAgIHNtOiB7CiAgICAgICAgICBzcGFuOiA1CiAgICAgICAgfQogICAgICB9LAogICAgICB3cmFwcGVyQ29sOiB7CiAgICAgICAgeHM6IHsKICAgICAgICAgIHNwYW46IDI0CiAgICAgICAgfSwKICAgICAgICBzbTogewogICAgICAgICAgc3BhbjogMTYKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNyb246IHsKICAgICAgICBsYWJlbDogJycsCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH0sCiAgICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZSwKICAgICAgZm9ybTogdGhpcy4kZm9ybS5jcmVhdGVGb3JtKHRoaXMpLAogICAgICB2YWxpZGF0b3JSdWxlczogewogICAgICAgIGNyb246IHsKICAgICAgICAgIHJ1bGVzOiBbewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpWNyb27ooajovr7lvI8hJwogICAgICAgICAgfV0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIHVybDogewogICAgICAgIGFkZDogIi9zeXMvcXVhcnR6Sm9iL2FkZCIsCiAgICAgICAgZWRpdDogIi9zeXMvcXVhcnR6Sm9iL2VkaXQiCiAgICAgIH0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbWV0aG9kczogewogICAgYWRkOiBmdW5jdGlvbiBhZGQoKSB7CiAgICAgIHRoaXMuZWRpdCh7fSk7CiAgICB9LAogICAgZWRpdDogZnVuY3Rpb24gZWRpdChyZWNvcmQpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5mb3JtLnJlc2V0RmllbGRzKCk7CiAgICAgIHRoaXMubW9kZWwgPSBPYmplY3QuYXNzaWduKHt9LCByZWNvcmQpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm1vZGVsKTsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUocGljayhfdGhpcy5tb2RlbCwgJ2pvYkNsYXNzTmFtZScsICdjcm9uRXhwcmVzc2lvbicsICdwYXJhbWV0ZXInLCAnZGVzY3JpcHRpb24nLCAnc3RhdHVzJykpOwogICAgICB9KTsKICAgIH0sCiAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZU9rOiBmdW5jdGlvbiBoYW5kbGVPaygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB2YXIgdGhhdCA9IHRoaXM7IC8vIOinpuWPkeihqOWNlemqjOivgQoKICAgICAgdGhpcy5mb3JtLnZhbGlkYXRlRmllbGRzKGZ1bmN0aW9uIChlcnIsIHZhbHVlcykgewogICAgICAgIGNvbnNvbGUubG9nKCd2YWx1ZXMnLCB2YWx1ZXMpOwoKICAgICAgICBpZiAoIWVycikgewogICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZXMuY3JvbkV4cHJlc3Npb24gPT0gInVuZGVmaW5lZCIgfHwgT2JqZWN0LmtleXModmFsdWVzLmNyb25FeHByZXNzaW9uKS5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uud2FybmluZygn6K+36L6T5YWlY3JvbuihqOi+vuW8jyEnKTsKCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGF0LmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHZhciBodHRwdXJsID0gJyc7CiAgICAgICAgICB2YXIgbWV0aG9kID0gJyc7CgogICAgICAgICAgaWYgKCFfdGhpczIubW9kZWwuaWQpIHsKICAgICAgICAgICAgaHR0cHVybCArPSBfdGhpczIudXJsLmFkZDsKICAgICAgICAgICAgbWV0aG9kID0gJ3Bvc3QnOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaHR0cHVybCArPSBfdGhpczIudXJsLmVkaXQ7CiAgICAgICAgICAgIG1ldGhvZCA9ICdwdXQnOwogICAgICAgICAgfQoKICAgICAgICAgIHZhciBmb3JtRGF0YSA9IE9iamVjdC5hc3NpZ24oX3RoaXMyLm1vZGVsLCB2YWx1ZXMpOyAvL+aXtumXtOagvOW8j+WMlgoKICAgICAgICAgIGNvbnNvbGUubG9nKCfmj5DkuqTlj4LmlbAnLCBmb3JtRGF0YSk7CiAgICAgICAgICBodHRwQWN0aW9uKGh0dHB1cmwsIGZvcm1EYXRhLCBtZXRob2QpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICB0aGF0LiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpOwogICAgICAgICAgICAgIHRoYXQuJGVtaXQoJ29rJyk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhhdC4kbWVzc2FnZS53YXJuaW5nKHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuZmluYWxseShmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoYXQuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgdGhhdC5jbG9zZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgfSwKICAgIHNldENvcm46IGZ1bmN0aW9uIHNldENvcm4oZGF0YSkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCdkYXRhKScsIGRhdGEpOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMzLm1vZGVsLmNyb25FeHByZXNzaW9uID0gZGF0YTsKICAgICAgfSk7IC8vIGNvbnNvbGUubG9nKE9iamVjdC5rZXlzKGRhdGEpLmxlbmd0aD09MCk7CgogICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+i+k+WFpWNyb27ooajovr7lvI8hJyk7CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZUNyb246IGZ1bmN0aW9uIHZhbGlkYXRlQ3JvbihydWxlLCB2YWx1ZSwgY2FsbGJhY2spIHsKICAgICAgaWYgKCF2YWx1ZSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgY2FsbGJhY2soIuivt+i+k+WFpWNyb27ooajovr7lvI8hIik7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["QuartzJobModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"800\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    okText=\"保存并安排任务\"\r\n    cancelText=\"关闭\">\r\n\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form :form=\"form\">\r\n\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"任务类名\"\r\n          hasFeedback >\r\n          <a-input placeholder=\"请输入任务类名\" v-decorator=\"['jobClassName', {rules: [{ required: true, message: '请输入任务类名!' }]}]\" />\r\n        </a-form-item>\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"cron表达式\">\r\n<!--                    <a-input placeholder=\"请输入cron表达式\" v-decorator=\"['cronExpression', {'initialValue':'0/1 * * * * ?',rules: [{ required: true, message: '请输入任务类名!' }]}]\" />-->\r\n<!--                    <a target=\"_blank\" href=\"http://cron.qqe2.com/\">-->\r\n<!--                      <a-icon type=\"share-alt\" />-->\r\n<!--                      在线cron表达式生成-->\r\n<!--                    </a>-->\r\n<!--          <j-cron ref=\"innerVueCron\" v-decorator=\"['cronExpression', {'initialValue':'0/1 * * * * ?',rules: [{ required: true, message: '请输入cron表达式!' }]}]\"  @change=\"setCorn\"></j-cron>-->\r\n          <j-cron ref=\"innerVueCron\" v-decorator=\"['cronExpression', { initialValue: '* * * * * ? *' }]\" @change=\"setCorn\"></j-cron>\r\n        </a-form-item>\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"参数\">\r\n          <a-textarea placeholder=\"请输入参数\" :rows=\"5\" v-decorator=\"['parameter', {}]\" />\r\n        </a-form-item>\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"描述\">\r\n          <a-textarea placeholder=\"请输入描述\" :rows=\"3\" v-decorator=\"['description', {}]\" />\r\n        </a-form-item>\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"状态\">\r\n          <j-dict-select-tag type=\"radioButton\"  v-decorator=\"[ 'status', {'initialValue':0}]\" :trigger-change=\"true\" dictCode=\"quartz_status\"/>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-spin>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import { httpAction } from '@/api/manage'\r\n  import JCron from \"@/components/jeecg/JCron\";\r\n  import pick from 'lodash.pick'\r\n  // import moment from \"moment\"\r\n\r\n  export default {\r\n    name: \"QuartzJobModal\",\r\n    components: {\r\n      JCron\r\n    },\r\n    data () {\r\n      return {\r\n        title:\"操作\",\r\n        buttonStyle: 'solid',\r\n        visible: false,\r\n        model: {},\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n        cron: {\r\n          label: '',\r\n          value: ''\r\n        },\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {\r\n          cron: {\r\n            rules: [{\r\n              required: true, message: '请输入cron表达式!'\r\n            }]\r\n          }\r\n        },\r\n        url: {\r\n          add: \"/sys/quartzJob/add\",\r\n          edit: \"/sys/quartzJob/edit\",\r\n        },\r\n      }\r\n    },\r\n    created () {\r\n    },\r\n    methods: {\r\n      add () {\r\n        this.edit({});\r\n      },\r\n      edit (record) {\r\n        let that = this;\r\n        that.form.resetFields();\r\n        this.model = Object.assign({},record);\r\n        console.log(this.model)\r\n        this.visible = true;\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model,'jobClassName','cronExpression','parameter','description','status'));\r\n        });\r\n\r\n      },\r\n      close () {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n      },\r\n      handleOk () {\r\n        const that = this;\r\n        // 触发表单验证\r\n        this.form.validateFields((err, values) => {\r\n          console.log('values',values)\r\n          if (!err) {\r\n            if (typeof values.cronExpression == \"undefined\" || Object.keys(values.cronExpression).length==0 ) {\r\n              this.$message.warning('请输入cron表达式!');\r\n              return false;\r\n            }\r\n\r\n            that.confirmLoading = true;\r\n            let httpurl = '';\r\n            let method = '';\r\n            if(!this.model.id){\r\n              httpurl+=this.url.add;\r\n              method = 'post';\r\n            }else{\r\n              httpurl+=this.url.edit;\r\n              method = 'put';\r\n            }\r\n            let formData = Object.assign(this.model, values);\r\n            //时间格式化\r\n\r\n            console.log('提交参数',formData)\r\n            httpAction(httpurl,formData,method).then((res)=>{\r\n              if(res.success){\r\n                that.$message.success(res.message);\r\n                that.$emit('ok');\r\n              }else{\r\n                that.$message.warning(res.message);\r\n              }\r\n            }).finally(() => {\r\n              that.confirmLoading = false;\r\n              that.close();\r\n            })\r\n\r\n          }\r\n        })\r\n      },\r\n      handleCancel () {\r\n        this.close()\r\n      },\r\n      setCorn(data){\r\n        console.log('data)',data);\r\n        this.$nextTick(() => {\r\n          this.model.cronExpression = data;\r\n        })\r\n\r\n        // console.log(Object.keys(data).length==0);\r\n        if (Object.keys(data).length==0) {\r\n          this.$message.warning('请输入cron表达式!');\r\n        }\r\n      },\r\n      validateCron(rule, value, callback){\r\n        if(!value){\r\n          callback()\r\n        }else if (Object.keys(value).length==0) {\r\n          callback(\"请输入cron表达式!\");\r\n        }\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/views/system/modules"}]}