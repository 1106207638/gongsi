{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\JImageUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JImageUpload.vue","mtime":1615948815735},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgeyBBQ0NFU1NfVE9LRU4gfSBmcm9tICJAL3N0b3JlL211dGF0aW9uLXR5cGVzIjsKaW1wb3J0IHsgZ2V0RmlsZUFjY2Vzc0h0dHBVcmwgfSBmcm9tICdAL2FwaS9tYW5hZ2UnOwoKdmFyIHVpZEdlbmVyYXRvciA9IGZ1bmN0aW9uIHVpZEdlbmVyYXRvcigpIHsKICByZXR1cm4gJy0nICsgcGFyc2VJbnQoTWF0aC5yYW5kb20oKSAqIDEwMDAwICsgMSwgMTApOwp9OwoKdmFyIGdldEZpbGVOYW1lID0gZnVuY3Rpb24gZ2V0RmlsZU5hbWUocGF0aCkgewogIGlmIChwYXRoLmxhc3RJbmRleE9mKCJcXCIpID49IDApIHsKICAgIHZhciByZWcgPSBuZXcgUmVnRXhwKCJcXFxcIiwgImciKTsKICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocmVnLCAiLyIpOwogIH0KCiAgcmV0dXJuIHBhdGguc3Vic3RyaW5nKHBhdGgubGFzdEluZGV4T2YoIi8iKSArIDEpOwp9OwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdKSW1hZ2VVcGxvYWQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1cGxvYWRBY3Rpb246IHdpbmRvdy5fQ09ORklHWydkb21pYW5VUkwnXSArICIvc3lzL2NvbW1vbi91cGxvYWQiLAogICAgICB1cGxvYWRMb2FkaW5nOiBmYWxzZSwKICAgICAgcGljVXJsOiBmYWxzZSwKICAgICAgaGVhZGVyczoge30sCiAgICAgIGZpbGVMaXN0OiBbXSwKICAgICAgcHJldmlld0ltYWdlOiAiIiwKICAgICAgcHJldmlld1Zpc2libGU6IGZhbHNlCiAgICB9OwogIH0sCiAgcHJvcHM6IHsKICAgIHRleHQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICLkuIrkvKAiCiAgICB9LAoKICAgIC8q6L+Z5Liq5bGe5oCn55So5LqO5o6n5Yi25paH5Lu25LiK5Lyg55qE5Lia5Yqh6Lev5b6EKi8KICAgIGJpelBhdGg6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6ICJ0ZW1wIgogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEFycmF5XSwKICAgICAgcmVxdWlyZWQ6IGZhbHNlCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGlzTXVsdGlwbGU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIC8vdXBkYXRlLWJlZ2luLWF1dGhvcjp3YW5nc2h1YWkgZGF0ZToyMDIwMTAyMSBmb3I6TE9XQ09ELTk2OSDmlrDlop5udW1iZXLlsZ7mgKfvvIznlKjkuo7liKTmlq3kuIrkvKDmlbDph48KICAgIG51bWJlcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogMAogICAgfSAvL3VwZGF0ZS1lbmQtYXV0aG9yOndhbmdzaHVhaSBkYXRlOjIwMjAxMDIxIGZvcjpMT1dDT0QtOTY5IOaWsOWinm51bWJlcuWxnuaAp++8jOeUqOS6juWIpOaWreS4iuS8oOaVsOmHjwoKICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCwgb2xkVmFsdWUpIHsKICAgICAgICBpZiAodmFsIGluc3RhbmNlb2YgQXJyYXkpIHsKICAgICAgICAgIHRoaXMuaW5pdEZpbGVMaXN0KHZhbC5qb2luKCcsJykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmluaXRGaWxlTGlzdCh2YWwpOwogICAgICAgIH0KCiAgICAgICAgaWYgKCF2YWwgfHwgdmFsLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICB0aGlzLnBpY1VybCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSwKICAgICAgLy/nq4vliLvmiafooYxoYW5kbGVyCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciB0b2tlbiA9IFZ1ZS5scy5nZXQoQUNDRVNTX1RPS0VOKTsKICAgIHRoaXMuaGVhZGVycyA9IHsKICAgICAgIlgtQWNjZXNzLVRva2VuIjogdG9rZW4KICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBpbml0RmlsZUxpc3Q6IGZ1bmN0aW9uIGluaXRGaWxlTGlzdChwYXRocykgewogICAgICBpZiAoIXBhdGhzIHx8IHBhdGhzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy5maWxlTGlzdCA9IFtdOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5waWNVcmwgPSB0cnVlOwogICAgICB2YXIgZmlsZUxpc3QgPSBbXTsKICAgICAgdmFyIGFyciA9IHBhdGhzLnNwbGl0KCIsIik7CgogICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGFyci5sZW5ndGg7IGErKykgewogICAgICAgIHZhciB1cmwgPSBnZXRGaWxlQWNjZXNzSHR0cFVybChhcnJbYV0pOwogICAgICAgIGZpbGVMaXN0LnB1c2goewogICAgICAgICAgdWlkOiB1aWRHZW5lcmF0b3IoKSwKICAgICAgICAgIG5hbWU6IGdldEZpbGVOYW1lKGFyclthXSksCiAgICAgICAgICBzdGF0dXM6ICdkb25lJywKICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgcmVzcG9uc2U6IHsKICAgICAgICAgICAgc3RhdHVzOiAiaGlzdG9yeSIsCiAgICAgICAgICAgIG1lc3NhZ2U6IGFyclthXQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CiAgICB9LAogICAgYmVmb3JlVXBsb2FkOiBmdW5jdGlvbiBiZWZvcmVVcGxvYWQoZmlsZSkgewogICAgICB2YXIgZmlsZVR5cGUgPSBmaWxlLnR5cGU7CgogICAgICBpZiAoZmlsZVR5cGUuaW5kZXhPZignaW1hZ2UnKSA8IDApIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+S4iuS8oOWbvueJhycpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGluZm8pIHsKICAgICAgdGhpcy5waWNVcmwgPSBmYWxzZTsKICAgICAgdmFyIGZpbGVMaXN0ID0gaW5mby5maWxlTGlzdDsgLy91cGRhdGUtYmVnaW4tYXV0aG9yOndhbmdzaHVhaSBkYXRlOjIwMjAxMDIyIGZvcjpMT1dDT0QtOTY5IOWIpOaWrW51bWJlcuaYr+WQpuWkp+S6jjDlkozmmK/lkKblpJrpgInvvIzov5Tlm57pgInlrprnmoTlhYPntKDjgIIKCiAgICAgIGlmICh0aGlzLm51bWJlciA+IDAgJiYgdGhpcy5pc011bHRpcGxlKSB7CiAgICAgICAgZmlsZUxpc3QgPSBmaWxlTGlzdC5zbGljZSgtdGhpcy5udW1iZXIpOwogICAgICB9IC8vdXBkYXRlLWVuZC1hdXRob3I6d2FuZ3NodWFpIGRhdGU6MjAyMDEwMjIgZm9yOkxPV0NPRC05Njkg5Yik5patbnVtYmVy5piv5ZCm5aSn5LqOMOWSjOaYr+WQpuWkmumAie+8jOi/lOWbnumAieWumueahOWFg+e0oOOAggoKCiAgICAgIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZG9uZScpIHsKICAgICAgICBpZiAoaW5mby5maWxlLnJlc3BvbnNlLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoaXMucGljVXJsID0gdHJ1ZTsKICAgICAgICAgIGZpbGVMaXN0ID0gZmlsZUxpc3QubWFwKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgICAgIGlmIChmaWxlLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgZmlsZS51cmwgPSBmaWxlLnJlc3BvbnNlLm1lc3NhZ2U7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJldHVybiBmaWxlOwogICAgICAgICAgfSk7CiAgICAgICAgfSAvL3RoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhgJHtpbmZvLmZpbGUubmFtZX0g5LiK5Lyg5oiQ5YqfIWApOwoKICAgICAgfSBlbHNlIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZXJyb3InKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiIi5jb25jYXQoaW5mby5maWxlLm5hbWUsICIgXHU0RTBBXHU0RjIwXHU1OTMxXHU4RDI1LiIpKTsKICAgICAgfSBlbHNlIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAncmVtb3ZlZCcpIHsKICAgICAgICB0aGlzLmhhbmRsZURlbGV0ZShpbmZvLmZpbGUpOwogICAgICB9CgogICAgICB0aGlzLmZpbGVMaXN0ID0gZmlsZUxpc3Q7CgogICAgICBpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ2RvbmUnIHx8IGluZm8uZmlsZS5zdGF0dXMgPT09ICdyZW1vdmVkJykgewogICAgICAgIHRoaXMuaGFuZGxlUGF0aENoYW5nZSgpOwogICAgICB9CiAgICB9LAogICAgLy8g6aKE6KeICiAgICBoYW5kbGVQcmV2aWV3OiBmdW5jdGlvbiBoYW5kbGVQcmV2aWV3KGZpbGUpIHsKICAgICAgdGhpcy5wcmV2aWV3SW1hZ2UgPSBmaWxlLnVybCB8fCBmaWxlLnRodW1iVXJsOwogICAgICB0aGlzLnByZXZpZXdWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICBnZXRBdmF0YXJWaWV3OiBmdW5jdGlvbiBnZXRBdmF0YXJWaWV3KCkgewogICAgICBpZiAodGhpcy5maWxlTGlzdC5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIHVybCA9IHRoaXMuZmlsZUxpc3RbMF0udXJsOwogICAgICAgIHJldHVybiBnZXRGaWxlQWNjZXNzSHR0cFVybCh1cmwpOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlUGF0aENoYW5nZTogZnVuY3Rpb24gaGFuZGxlUGF0aENoYW5nZSgpIHsKICAgICAgdmFyIHVwbG9hZEZpbGVzID0gdGhpcy5maWxlTGlzdDsKICAgICAgdmFyIHBhdGggPSAnJzsKCiAgICAgIGlmICghdXBsb2FkRmlsZXMgfHwgdXBsb2FkRmlsZXMubGVuZ3RoID09IDApIHsKICAgICAgICBwYXRoID0gJyc7CiAgICAgIH0KCiAgICAgIHZhciBhcnIgPSBbXTsKCiAgICAgIGlmICghdGhpcy5pc011bHRpcGxlKSB7CiAgICAgICAgYXJyLnB1c2godXBsb2FkRmlsZXNbdXBsb2FkRmlsZXMubGVuZ3RoIC0gMV0ucmVzcG9uc2UubWVzc2FnZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCB1cGxvYWRGaWxlcy5sZW5ndGg7IGErKykgewogICAgICAgICAgLy8gdXBkYXRlLWJlZ2luLWF1dGhvcjp0YW95YW4gZGF0ZToyMDIwMDgxOSBmb3I644CQ5byA5rqQ6Zeu6aKYeuOAkeS4iuS8oOWbvueJh+e7hOS7tiBMT1dDT0QtNzgzCiAgICAgICAgICBpZiAodXBsb2FkRmlsZXNbYV0uc3RhdHVzID09PSAnZG9uZScpIHsKICAgICAgICAgICAgYXJyLnB1c2godXBsb2FkRmlsZXNbYV0ucmVzcG9uc2UubWVzc2FnZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9IC8vIHVwZGF0ZS1lbmQtYXV0aG9yOnRhb3lhbiBkYXRlOjIwMjAwODE5IGZvcjrjgJDlvIDmupDpl67poph644CR5LiK5Lyg5Zu+54mH57uE5Lu2IExPV0NPRC03ODMKCiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoYXJyLmxlbmd0aCA+IDApIHsKICAgICAgICBwYXRoID0gYXJyLmpvaW4oIiwiKTsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgcGF0aCk7CiAgICB9LAogICAgaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBoYW5kbGVEZWxldGUoZmlsZSkgewogICAgICAvL+WmguaciemcgOimgeaWsOWiniDliKDpmaTpgLvovpEKICAgICAgY29uc29sZS5sb2coZmlsZSk7CiAgICB9LAogICAgaGFuZGxlQ2FuY2VsOiBmdW5jdGlvbiBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgdGhpcy5wcmV2aWV3VmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHt9CiAgfSwKICBtb2RlbDogewogICAgcHJvcDogJ3ZhbHVlJywKICAgIGV2ZW50OiAnY2hhbmdlJwogIH0KfTs="},{"version":3,"sources":["JImageUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgCA,OAAA,GAAA,MAAA,KAAA;AACA,SAAA,YAAA,QAAA,wBAAA;AACA,SAAA,oBAAA,QAAA,cAAA;;AAEA,IAAA,YAAA,GAAA,SAAA,YAAA,GAAA;AACA,SAAA,MAAA,QAAA,CAAA,IAAA,CAAA,MAAA,KAAA,KAAA,GAAA,CAAA,EAAA,EAAA,CAAA;AACA,CAFA;;AAGA,IAAA,WAAA,GAAA,SAAA,WAAA,CAAA,IAAA,EAAA;AACA,MAAA,IAAA,CAAA,WAAA,CAAA,IAAA,KAAA,CAAA,EAAA;AACA,QAAA,GAAA,GAAA,IAAA,MAAA,CAAA,MAAA,EAAA,GAAA,CAAA;AACA,IAAA,IAAA,GAAA,IAAA,CAAA,OAAA,CAAA,GAAA,EAAA,GAAA,CAAA;AACA;;AACA,SAAA,IAAA,CAAA,SAAA,CAAA,IAAA,CAAA,WAAA,CAAA,GAAA,IAAA,CAAA,CAAA;AACA,CANA;;AAOA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,MAAA,CAAA,OAAA,CAAA,WAAA,IAAA,oBADA;AAEA,MAAA,aAAA,EAAA,KAFA;AAGA,MAAA,MAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,EAJA;AAKA,MAAA,QAAA,EAAA,EALA;AAMA,MAAA,YAAA,EAAA,EANA;AAOA,MAAA,cAAA,EAAA;AAPA,KAAA;AASA,GAZA;AAaA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KADA;;AAMA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAPA;AAYA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,MAAA,EAAA,KAAA,CADA;AAEA,MAAA,QAAA,EAAA;AAFA,KAZA;AAgBA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAhBA;AAqBA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KArBA;AA0BA;AACA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA,KAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KA3BA,CAgCA;;AAhCA,GAbA;AA+CA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA;AACA,MAAA,OADA,mBACA,GADA,EACA,QADA,EACA;AACA,YAAA,GAAA,YAAA,KAAA,EAAA;AACA,eAAA,YAAA,CAAA,GAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA,SAFA,MAEA;AACA,eAAA,YAAA,CAAA,GAAA;AACA;;AACA,YAAA,CAAA,GAAA,IAAA,GAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,eAAA,MAAA,GAAA,KAAA;AACA;AACA,OAVA;AAWA;AACA,MAAA,SAAA,EAAA;AAZA;AADA,GA/CA;AA+DA,EAAA,OA/DA,qBA+DA;AACA,QAAA,KAAA,GAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,YAAA,CAAA;AACA,SAAA,OAAA,GAAA;AAAA,wBAAA;AAAA,KAAA;AACA,GAlEA;AAmEA,EAAA,OAAA,EAAA;AACA,IAAA,YADA,wBACA,KADA,EACA;AACA,UAAA,CAAA,KAAA,IAAA,KAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,GAAA,EAAA;AACA;AACA;;AACA,WAAA,MAAA,GAAA,IAAA;AACA,UAAA,QAAA,GAAA,EAAA;AACA,UAAA,GAAA,GAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,GAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,GAAA,GAAA,oBAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAAA;AACA,QAAA,QAAA,CAAA,IAAA,CAAA;AACA,UAAA,GAAA,EAAA,YAAA,EADA;AAEA,UAAA,IAAA,EAAA,WAAA,CAAA,GAAA,CAAA,CAAA,CAAA,CAFA;AAGA,UAAA,MAAA,EAAA,MAHA;AAIA,UAAA,GAAA,EAAA,GAJA;AAKA,UAAA,QAAA,EAAA;AACA,YAAA,MAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA,GAAA,CAAA,CAAA;AAFA;AALA,SAAA;AAUA;;AACA,WAAA,QAAA,GAAA,QAAA;AACA,KAvBA;AAwBA,IAAA,YAAA,EAAA,sBAAA,IAAA,EAAA;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,IAAA;;AACA,UAAA,QAAA,CAAA,OAAA,CAAA,OAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,OAAA,CAAA,OAAA;AACA,eAAA,KAAA;AACA;AACA,KA9BA;AA+BA,IAAA,YA/BA,wBA+BA,IA/BA,EA+BA;AACA,WAAA,MAAA,GAAA,KAAA;AACA,UAAA,QAAA,GAAA,IAAA,CAAA,QAAA,CAFA,CAGA;;AACA,UAAA,KAAA,MAAA,GAAA,CAAA,IAAA,KAAA,UAAA,EAAA;AACA,QAAA,QAAA,GAAA,QAAA,CAAA,KAAA,CAAA,CAAA,KAAA,MAAA,CAAA;AACA,OANA,CAOA;;;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,MAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,QAAA,CAAA,OAAA,EAAA;AACA,eAAA,MAAA,GAAA,IAAA;AACA,UAAA,QAAA,GAAA,QAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,gBAAA,IAAA,CAAA,QAAA,EAAA;AACA,cAAA,IAAA,CAAA,GAAA,GAAA,IAAA,CAAA,QAAA,CAAA,OAAA;AACA;;AACA,mBAAA,IAAA;AACA,WALA,CAAA;AAMA,SATA,CAUA;;AACA,OAXA,MAWA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,OAAA,EAAA;AACA,aAAA,QAAA,CAAA,KAAA,WAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA,MAEA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,SAAA,EAAA;AACA,aAAA,YAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AACA,WAAA,QAAA,GAAA,QAAA;;AACA,UAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,MAAA,IAAA,IAAA,CAAA,IAAA,CAAA,MAAA,KAAA,SAAA,EAAA;AACA,aAAA,gBAAA;AACA;AACA,KA3DA;AA4DA;AACA,IAAA,aA7DA,yBA6DA,IA7DA,EA6DA;AACA,WAAA,YAAA,GAAA,IAAA,CAAA,GAAA,IAAA,IAAA,CAAA,QAAA;AACA,WAAA,cAAA,GAAA,IAAA;AACA,KAhEA;AAiEA,IAAA,aAjEA,2BAiEA;AACA,UAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,YAAA,GAAA,GAAA,KAAA,QAAA,CAAA,CAAA,EAAA,GAAA;AACA,eAAA,oBAAA,CAAA,GAAA,CAAA;AACA;AACA,KAtEA;AAuEA,IAAA,gBAvEA,8BAuEA;AACA,UAAA,WAAA,GAAA,KAAA,QAAA;AACA,UAAA,IAAA,GAAA,EAAA;;AACA,UAAA,CAAA,WAAA,IAAA,WAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,QAAA,IAAA,GAAA,EAAA;AACA;;AACA,UAAA,GAAA,GAAA,EAAA;;AACA,UAAA,CAAA,KAAA,UAAA,EAAA;AACA,QAAA,GAAA,CAAA,IAAA,CAAA,WAAA,CAAA,WAAA,CAAA,MAAA,GAAA,CAAA,CAAA,CAAA,QAAA,CAAA,OAAA;AACA,OAFA,MAEA;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,WAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA;AACA,cAAA,WAAA,CAAA,CAAA,CAAA,CAAA,MAAA,KAAA,MAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,WAAA,CAAA,CAAA,CAAA,CAAA,QAAA,CAAA,OAAA;AACA,WAFA,MAEA;AACA;AACA,WANA,CAOA;;AACA;AACA;;AACA,UAAA,GAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,GAAA,CAAA;AACA;;AACA,WAAA,KAAA,CAAA,QAAA,EAAA,IAAA;AACA,KA/FA;AAgGA,IAAA,YAhGA,wBAgGA,IAhGA,EAgGA;AACA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,KAnGA;AAoGA,IAAA,YApGA,0BAoGA;AACA,WAAA,KAAA;AACA,WAAA,cAAA,GAAA,KAAA;AACA,KAvGA;AAwGA,IAAA,KAxGA,mBAwGA,CAEA;AA1GA,GAnEA;AA+KA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA,OADA;AAEA,IAAA,KAAA,EAAA;AAFA;AA/KA,CAAA","sourcesContent":["<template>\r\n  <div class=\"img\">\r\n    <a-upload\r\n      name=\"file\"\r\n      listType=\"picture-card\"\r\n      :multiple=\"isMultiple\"\r\n      :action=\"uploadAction\"\r\n      :headers=\"headers\"\r\n      :data=\"{biz:bizPath}\"\r\n      :fileList=\"fileList\"\r\n      :beforeUpload=\"beforeUpload\"\r\n      :disabled=\"disabled\"\r\n      :isMultiple=\"isMultiple\"\r\n      :showUploadList=\"isMultiple\"\r\n      @change=\"handleChange\"\r\n      @preview=\"handlePreview\"\r\n      :class=\"!isMultiple?'imgupload':''\">\r\n      <div :style=\"{'width':(!isMultiple?'104px':'auto'),'height':(!isMultiple?'104px':'auto')}\">\r\n        <img v-if=\"!isMultiple && picUrl\" :src=\"getAvatarView()\" style=\"width:100%;height:100%\"/>\r\n        <div v-else class=\"iconp\">\r\n          <a-icon :type=\"uploadLoading ? 'loading' : 'plus'\" />\r\n          <div class=\"ant-upload-text\">{{ text }}</div>\r\n        </div>\r\n      </div>\r\n      <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel()\">\r\n        <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\"/>\r\n      </a-modal>\r\n    </a-upload>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import Vue from 'vue'\r\n  import { ACCESS_TOKEN } from \"@/store/mutation-types\"\r\n  import { getFileAccessHttpUrl } from '@/api/manage'\r\n\r\n  const uidGenerator=()=>{\r\n    return '-'+parseInt(Math.random()*10000+1,10);\r\n  }\r\n  const getFileName=(path)=>{\r\n    if(path.lastIndexOf(\"\\\\\")>=0){\r\n      let reg=new RegExp(\"\\\\\\\\\",\"g\");\r\n      path = path.replace(reg,\"/\");\r\n    }\r\n    return path.substring(path.lastIndexOf(\"/\")+1);\r\n  }\r\n  export default {\r\n    name: 'JImageUpload',\r\n    data(){\r\n      return {\r\n        uploadAction:window._CONFIG['domianURL']+\"/sys/common/upload\",\r\n        uploadLoading:false,\r\n        picUrl:false,\r\n        headers:{},\r\n        fileList: [],\r\n        previewImage:\"\",\r\n        previewVisible: false,\r\n      }\r\n    },\r\n    props:{\r\n      text:{\r\n        type:String,\r\n        required:false,\r\n        default:\"上传\"\r\n      },\r\n      /*这个属性用于控制文件上传的业务路径*/\r\n      bizPath:{\r\n        type:String,\r\n        required:false,\r\n        default:\"temp\"\r\n      },\r\n      value:{\r\n        type:[String,Array],\r\n        required:false\r\n      },\r\n      disabled:{\r\n        type:Boolean,\r\n        required:false,\r\n        default: false\r\n      },\r\n      isMultiple:{\r\n        type:Boolean,\r\n        required:false,\r\n        default: false\r\n      },\r\n      //update-begin-author:wangshuai date:20201021 for:LOWCOD-969 新增number属性，用于判断上传数量\r\n      number:{\r\n        type:Number,\r\n        required:false,\r\n        default:0\r\n      }\r\n      //update-end-author:wangshuai date:20201021 for:LOWCOD-969 新增number属性，用于判断上传数量\r\n    },\r\n    watch:{\r\n      value: {\r\n        handler(val,oldValue) {\r\n          if (val instanceof Array) {\r\n            this.initFileList(val.join(','))\r\n          } else {\r\n            this.initFileList(val)\r\n          }\r\n          if(!val || val.length==0){\r\n            this.picUrl = false;\r\n          }\r\n        },\r\n        //立刻执行handler\r\n        immediate: true\r\n      }\r\n    },\r\n    created(){\r\n      const token = Vue.ls.get(ACCESS_TOKEN);\r\n      this.headers = {\"X-Access-Token\":token}\r\n    },\r\n    methods:{\r\n      initFileList(paths){\r\n        if(!paths || paths.length==0){\r\n          this.fileList = [];\r\n          return;\r\n        }\r\n        this.picUrl = true;\r\n        let fileList = [];\r\n        let arr = paths.split(\",\")\r\n        for(var a=0;a<arr.length;a++){\r\n          let url = getFileAccessHttpUrl(arr[a]);\r\n          fileList.push({\r\n            uid: uidGenerator(),\r\n            name: getFileName(arr[a]),\r\n            status: 'done',\r\n            url: url,\r\n            response:{\r\n              status:\"history\",\r\n              message:arr[a]\r\n            }\r\n          })\r\n        }\r\n        this.fileList = fileList\r\n      },\r\n      beforeUpload: function(file){\r\n        var fileType = file.type;\r\n        if(fileType.indexOf('image')<0){\r\n          this.$message.warning('请上传图片');\r\n          return false;\r\n        }\r\n      },\r\n      handleChange(info) {\r\n        this.picUrl = false;\r\n        let fileList = info.fileList\r\n        //update-begin-author:wangshuai date:20201022 for:LOWCOD-969 判断number是否大于0和是否多选，返回选定的元素。\r\n        if(this.number>0 && this.isMultiple){\r\n          fileList = fileList.slice(-this.number);\r\n        }\r\n        //update-end-author:wangshuai date:20201022 for:LOWCOD-969 判断number是否大于0和是否多选，返回选定的元素。\r\n        if(info.file.status==='done'){\r\n          if(info.file.response.success){\r\n            this.picUrl = true;\r\n            fileList = fileList.map((file) => {\r\n              if (file.response) {\r\n                file.url = file.response.message;\r\n              }\r\n              return file;\r\n            });\r\n          }\r\n          //this.$message.success(`${info.file.name} 上传成功!`);\r\n        }else if (info.file.status === 'error') {\r\n          this.$message.error(`${info.file.name} 上传失败.`);\r\n        }else if(info.file.status === 'removed'){\r\n          this.handleDelete(info.file)\r\n        }\r\n        this.fileList = fileList\r\n        if(info.file.status==='done' || info.file.status === 'removed'){\r\n          this.handlePathChange()\r\n        }\r\n      },\r\n      // 预览\r\n      handlePreview (file) {\r\n        this.previewImage = file.url || file.thumbUrl\r\n        this.previewVisible = true\r\n      },\r\n      getAvatarView(){\r\n        if(this.fileList.length>0){\r\n          let url = this.fileList[0].url\r\n          return getFileAccessHttpUrl(url)\r\n        }\r\n      },\r\n      handlePathChange(){\r\n        let uploadFiles = this.fileList\r\n        let path = ''\r\n        if(!uploadFiles || uploadFiles.length==0){\r\n          path = ''\r\n        }\r\n        let arr = [];\r\n        if(!this.isMultiple){\r\n          arr.push(uploadFiles[uploadFiles.length-1].response.message)\r\n        }else{\r\n          for(let a=0;a<uploadFiles.length;a++){\r\n            // update-begin-author:taoyan date:20200819 for:【开源问题z】上传图片组件 LOWCOD-783\r\n            if(uploadFiles[a].status === 'done' ) {\r\n              arr.push(uploadFiles[a].response.message)\r\n            }else{\r\n              return;\r\n            }\r\n            // update-end-author:taoyan date:20200819 for:【开源问题z】上传图片组件 LOWCOD-783\r\n          }\r\n        }\r\n        if(arr.length>0){\r\n          path = arr.join(\",\")\r\n        }\r\n        this.$emit('change', path);\r\n      },\r\n      handleDelete(file){\r\n        //如有需要新增 删除逻辑\r\n        console.log(file)\r\n      },\r\n      handleCancel() {\r\n        this.close();\r\n        this.previewVisible = false;\r\n      },\r\n      close () {\r\n\r\n      },\r\n    },\r\n    model: {\r\n      prop: 'value',\r\n      event: 'change'\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  /* update--begin--autor:lvdandan-----date:20201016------for：j-image-upload图片组件单张图片详情回显空白\r\n  * https://github.com/zhangdaiscott/jeecg-boot/issues/1810\r\n  * https://github.com/zhangdaiscott/jeecg-boot/issues/1779\r\n  */\r\n  /deep/ .imgupload .ant-upload-select{display:block}\r\n  /deep/ .imgupload .ant-upload.ant-upload-select-picture-card{ width:120px;height: 120px;}\r\n  /deep/ .imgupload .iconp{padding:32px;}\r\n  /* update--end--autor:lvdandan-----date:20201016------for：j-image-upload图片组件单张图片详情回显空白*/\r\n</style>\r\n"],"sourceRoot":"src/components/jeecg"}]}