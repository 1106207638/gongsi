{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\src\\components\\jeecg\\JVxeTable\\utils\\vxeUtils.js","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JVxeTable\\utils\\vxeUtils.js","mtime":1615948814805},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiRDovdnVlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9yZWdlbmVyYXRvciI7CgpmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyAiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2YiOyBpZiAodHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSAic3ltYm9sIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gInN5bWJvbCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH0KCmZ1bmN0aW9uIGFzeW5jR2VuZXJhdG9yU3RlcChnZW4sIHJlc29sdmUsIHJlamVjdCwgX25leHQsIF90aHJvdywga2V5LCBhcmcpIHsgdHJ5IHsgdmFyIGluZm8gPSBnZW5ba2V5XShhcmcpOyB2YXIgdmFsdWUgPSBpbmZvLnZhbHVlOyB9IGNhdGNoIChlcnJvcikgeyByZWplY3QoZXJyb3IpOyByZXR1cm47IH0gaWYgKGluZm8uZG9uZSkgeyByZXNvbHZlKHZhbHVlKTsgfSBlbHNlIHsgUHJvbWlzZS5yZXNvbHZlKHZhbHVlKS50aGVuKF9uZXh0LCBfdGhyb3cpOyB9IH0KCmZ1bmN0aW9uIF9hc3luY1RvR2VuZXJhdG9yKGZuKSB7IHJldHVybiBmdW5jdGlvbiAoKSB7IHZhciBzZWxmID0gdGhpcywgYXJncyA9IGFyZ3VtZW50czsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdmFyIGdlbiA9IGZuLmFwcGx5KHNlbGYsIGFyZ3MpOyBmdW5jdGlvbiBfbmV4dCh2YWx1ZSkgeyBhc3luY0dlbmVyYXRvclN0ZXAoZ2VuLCByZXNvbHZlLCByZWplY3QsIF9uZXh0LCBfdGhyb3csICJuZXh0IiwgdmFsdWUpOyB9IGZ1bmN0aW9uIF90aHJvdyhlcnIpIHsgYXN5bmNHZW5lcmF0b3JTdGVwKGdlbiwgcmVzb2x2ZSwgcmVqZWN0LCBfbmV4dCwgX3Rocm93LCAidGhyb3ciLCBlcnIpOyB9IF9uZXh0KHVuZGVmaW5lZCk7IH0pOyB9OyB9CgppbXBvcnQgeyBnZXRWbVBhcmVudEJ5TmFtZSB9IGZyb20gJ0AvdXRpbHMvdXRpbCc7CmltcG9ydCB7IEpWWEVUeXBlcyB9IGZyb20gJ0Bjb21wL2plZWNnL0pWeGVUYWJsZS9pbmRleCc7CmV4cG9ydCB2YXIgVkFMSURBVEVfRkFJTEVEID0gU3ltYm9sKCk7Ci8qKg0KICog6I635Y+W5oyH5a6a55qEICRyZWZzIOWvueixoQ0KICog5pyJ5pe25YCZ5Y+v6IO95Lya6YGH5Yiw57uE5Lu25pyq5oyC6L295Yiw6aG16Z2i5Lit55qE5oOF5Ya177yM5a+86Ie05peg5rOV6I635Y+WICRyZWZzIOS4reeahOafkOS4quWvueixoQ0KICog6L+Z5Liq5pa55rOV5Y+v5Lul562J5b6F5oyC6L295a6M5oiQ5LmL5ZCO5YaN6L+U5ZueICRyZWZzIOeahOWvueixoe+8jOmBv+WFjeaKpemUmQ0KICogQGF1dGhvciBzdW5qaWFubGVpDQogKiovCgpleHBvcnQgZnVuY3Rpb24gZ2V0UmVmUHJvbWlzZSh2bSwgbmFtZSkgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgKGZ1bmN0aW9uIG5leHQoKSB7CiAgICAgIHZhciByZWYgPSB2bS4kcmVmc1tuYW1lXTsKCiAgICAgIGlmIChyZWYpIHsKICAgICAgICByZXNvbHZlKHJlZik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBuZXh0KCk7CiAgICAgICAgfSwgMTApOwogICAgICB9CiAgICB9KSgpOwogIH0pOwp9Ci8qKiDojrflj5bmn5DkuIDmlbDlrZfovpPlhaXmoYbliJfkuK3nmoTmnIDlpKfnmoTlgLwgKi8KCmV4cG9ydCBmdW5jdGlvbiBnZXRJbnB1dE51bWJlck1heFZhbHVlKGNvbCwgcm93c1ZhbHVlcykgewogIHZhciBtYXhOdW0gPSAwOwogIE9iamVjdC52YWx1ZXMocm93c1ZhbHVlcykuZm9yRWFjaChmdW5jdGlvbiAocm93VmFsdWUsIGluZGV4KSB7CiAgICB2YXIgdmFsID0gcm93VmFsdWVbY29sLmtleV0sCiAgICAgICAgbnVtOwoKICAgIHRyeSB7CiAgICAgIG51bSA9IE51bWJlci5wYXJzZUZsb2F0KHZhbCk7CiAgICB9IGNhdGNoIChfdW51c2VkKSB7CiAgICAgIG51bSA9IDA7CiAgICB9IC8vIOaKiummluasoeW+queOr+eahOe7k+aenOW9k+aIkOacgOWkp+WAvAoKCiAgICBpZiAoaW5kZXggPT09IDApIHsKICAgICAgbWF4TnVtID0gbnVtOwogICAgfSBlbHNlIHsKICAgICAgbWF4TnVtID0gbnVtID4gbWF4TnVtID8gbnVtIDogbWF4TnVtOwogICAgfQogIH0pOwogIHJldHVybiBtYXhOdW07Cn0KLyoqDQogKg0KICog5qC55o2uIHRhZ05hbWUg6I635Y+W54i257qn6IqC54K5DQogKg0KICogQHBhcmFtIGRvbSDkuIDnuqdkb23oioLngrkNCiAqIEBwYXJhbSB0YWdOYW1lIOagh+etvuWQje+8jOS4jeWMuuWIhuWkp+Wwj+WGmQ0KICogQHJldHVybiB7SFRNTEVsZW1lbnQgfCBOVUxMfQ0KICovCgpleHBvcnQgZnVuY3Rpb24gZ2V0UGFyZW50Tm9kZUJ5VGFnTmFtZShkb20pIHsKICB2YXIgdGFnTmFtZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJ2JvZHknOwoKICBpZiAodGFnTmFtZSA9PT0gJ2JvZHknKSB7CiAgICByZXR1cm4gZG9jdW1lbnQuYm9keTsKICB9CgogIGlmIChkb20ucGFyZW50Tm9kZSkgewogICAgaWYgKGRvbS5wYXJlbnROb2RlLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gdGFnTmFtZS50cmltKCkudG9Mb3dlckNhc2UoKSkgewogICAgICByZXR1cm4gZG9tLnBhcmVudE5vZGU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZ2V0UGFyZW50Tm9kZUJ5VGFnTmFtZShkb20ucGFyZW50Tm9kZSwgdGFnTmFtZSk7CiAgICB9CiAgfSBlbHNlIHsKICAgIHJldHVybiBudWxsOwogIH0KfQovKioNCiAqIHZ4ZSBjb2x1bW5zIOWwgeijheaIkOmrmOe6p+afpeivouWPr+ivhuWIq+eahOmAiemhuQ0KICogQHBhcmFtIGNvbHVtbnMNCiAqIEBwYXJhbSBoYW5kbGVyIOWNleeLrOWkhOeQhuaWueazlQ0KICovCgpleHBvcnQgZnVuY3Rpb24gdnhlUGFja2FnZVRvU3VwZXJRdWVyeShjb2x1bW5zLCBoYW5kbGVyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoY29sdW1ucykpIHsKICAgIC8vIOmrmOe6p+afpeivouaJgOmcgOimgeeahOWPguaVsAogICAgdmFyIGZpZWxkTGlzdCA9IFtdOyAvLyDpgY3ljobliJcKCiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbnMubGVuZ3RoOyBpKyspIHsKICAgICAgdmFyIGNvbCA9IGNvbHVtbnNbaV07CgogICAgICBpZiAoY29sLnR5cGUgPT09IEpWWEVUeXBlcy5yb3dDaGVja2JveCB8fCBjb2wudHlwZSA9PT0gSlZYRVR5cGVzLnJvd1JhZGlvIHx8IGNvbC50eXBlID09PSBKVlhFVHlwZXMucm93RXhwYW5kIHx8IGNvbC50eXBlID09PSBKVlhFVHlwZXMucm93TnVtYmVyKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KCiAgICAgIHZhciBmaWVsZCA9IHsKICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICB2YWx1ZTogY29sLmtleSwKICAgICAgICB0ZXh0OiBjb2wudGl0bGUsCiAgICAgICAgZGljdENvZGU6IGNvbC5kaWN0Q29kZSB8fCBjb2wuZGljdAogICAgICB9OwoKICAgICAgaWYgKGNvbC50eXBlID09PSBKVlhFVHlwZXMuZGF0ZSB8fCBjb2wudHlwZSA9PT0gSlZYRVR5cGVzLmRhdGV0aW1lKSB7CiAgICAgICAgZmllbGQudHlwZSA9IGNvbC50eXBlOwogICAgICAgIGZpZWxkLmZvcm1hdCA9IGNvbC5mb3JtYXQ7CiAgICAgIH0KCiAgICAgIGlmIChjb2wudHlwZSA9PT0gSlZYRVR5cGVzLmlucHV0TnVtYmVyKSB7CiAgICAgICAgZmllbGQudHlwZSA9ICdpbnQnOwogICAgICB9CgogICAgICBpZiAoQXJyYXkuaXNBcnJheShjb2wub3B0aW9ucykpIHsKICAgICAgICBmaWVsZC5vcHRpb25zID0gY29sLm9wdGlvbnM7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgaGFuZGxlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAgIE9iamVjdC5hc3NpZ24oZmllbGQsIGhhbmRsZXIoY29sLCBpZHgpKTsKICAgICAgfQoKICAgICAgZmllbGRMaXN0LnB1c2goZmllbGQpOwogICAgfQoKICAgIHJldHVybiBmaWVsZExpc3Q7CiAgfSBlbHNlIHsKICAgIGNvbnNvbGUuZXJyb3IoJ2NvbHVtbnPlv4XpobvmmK/kuIDkuKrmlbDnu4QnKTsKICB9CgogIHJldHVybiBudWxsOwp9Ci8qKg0KICog5LiA5qyh5oCn6aqM6K+B5Li76KGo5Y2V5ZKM5omA5pyJ55qE5qyh6KGo5Y2VDQogKiBAcGFyYW0gZm9ybSDkuLvooajljZUgZm9ybSDlr7nosaENCiAqIEBwYXJhbSBjYXNlcyDmjqXmlLbkuIDkuKrmlbDnu4TvvIzmr4/pobnpg73mmK/kuIDkuKpKVnhlVGFibGXlrp7kvosNCiAqIEBwYXJhbSBhdXRvSnVtcFRhYg0KICogQHJldHVybnMge1Byb21pc2U8YW55Pn0NCiAqIEBhdXRob3Igc3VuamlhbmxlaQ0KICovCgpleHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVGb3JtQW5kVGFibGVzKF94LCBfeDIsIF94MykgewogIHJldHVybiBfdmFsaWRhdGVGb3JtQW5kVGFibGVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KLyoqDQogKiDpqozor4Hlubbojrflj5bkuIDkuKrmiJblpJrkuKrooajmoLznmoTmiYDmnInlgLwNCiAqDQogKiBAcGFyYW0gY2FzZXMg5o6l5pS25LiA5Liq5pWw57uE77yM5q+P6aG56YO95piv5LiA5LiqSlZ4ZVRhYmxl5a6e5L6LDQogKiBAcGFyYW0gYXV0b0p1bXBUYWIg5qCh6aqM5aSx6LSl5ZCO77yM5piv5ZCm6Ieq5Yqo6Lez6L2sdGFi6YCJ6aG5DQogKi8KCmZ1bmN0aW9uIF92YWxpZGF0ZUZvcm1BbmRUYWJsZXMoKSB7CiAgX3ZhbGlkYXRlRm9ybUFuZFRhYmxlcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoZm9ybSwgY2FzZXMsIGF1dG9KdW1wVGFiKSB7CiAgICB2YXIgZGF0YU1hcCwgdmFsdWVzLCBzdWJEYXRhOwogICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICB3aGlsZSAoMSkgewogICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgaWYgKGZvcm0gJiYgdHlwZW9mIGZvcm0udmFsaWRhdGVGaWVsZHMgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhyb3cgImZvcm0gXHU1M0MyXHU2NTcwXHU5NzAwXHU4OTgxXHU3Njg0XHU2NjJGXHU0RTAwXHU0RTJBZm9ybVx1NUJGOVx1OEM2MVx1RkYwQ1x1ODAwQ1x1NEYyMFx1NTE2NVx1NzY4NFx1NTM3NFx1NjYyRiIuY29uY2F0KF90eXBlb2YoZm9ybSkpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgZGF0YU1hcCA9IHt9OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAgICAgICAvLyDpqozor4HkuLvooajooajljZUKICAgICAgICAgICAgICBmb3JtLnZhbGlkYXRlRmllbGRzKGZ1bmN0aW9uIChlcnIsIHZhbHVlcykgewogICAgICAgICAgICAgICAgZXJyID8gcmVqZWN0KHsKICAgICAgICAgICAgICAgICAgZXJyb3I6IFZBTElEQVRFX0ZBSUxFRCwKICAgICAgICAgICAgICAgICAgb3JpZ2luRXJyb3I6IGVycgogICAgICAgICAgICAgICAgfSkgOiByZXNvbHZlKHZhbHVlcyk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgdmFsdWVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihkYXRhTWFwLCB7CiAgICAgICAgICAgICAgZm9ybVZhbHVlOiB2YWx1ZXMKICAgICAgICAgICAgfSk7IC8vIOmqjOivgeaJgOacieWtkOihqOeahOihqOWNlQoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIHJldHVybiB2YWxpZGF0ZVRhYmxlcyhjYXNlcywgYXV0b0p1bXBUYWIpOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgc3ViRGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIC8vIOWQiOW5tuacgOe7iOaVsOaNrgogICAgICAgICAgICBkYXRhTWFwID0gT2JqZWN0LmFzc2lnbihkYXRhTWFwLCB7CiAgICAgICAgICAgICAgdGFibGVzVmFsdWU6IHN1YkRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIGRhdGFNYXApOwoKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfdmFsaWRhdGVGb3JtQW5kVGFibGVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZVRhYmxlcyhjYXNlcykgewogIHZhciBhdXRvSnVtcFRhYiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKCiAgaWYgKCFBcnJheS5pc0FycmF5KGNhc2VzKSkgewogICAgdGhyb3cgIid2YWxpZGF0ZVRhYmxlcydcdTUxRkRcdTY1NzBcdTc2ODQnY2FzZXMnXHU1M0MyXHU2NTcwXHU5NzAwXHU4OTgxXHU3Njg0XHU2NjJGXHU0RTAwXHU0RTJBXHU2NTcwXHU3RUM0XHVGRjBDXHU4MDBDXHU0RjIwXHU1MTY1XHU3Njg0XHU1Mzc0XHU2NjJGIi5jb25jYXQoX3R5cGVvZihjYXNlcykpOwogIH0KCiAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIHZhciB0YWJsZXNEYXRhID0gW107CiAgICB2YXIgaW5kZXggPSAwOwoKICAgIGlmICghY2FzZXMgfHwgY2FzZXMubGVuZ3RoID09PSAwKSB7CiAgICAgIHJlc29sdmUoKTsKICAgIH0KCiAgICAoZnVuY3Rpb24gbmV4dCgpIHsKICAgICAgdmFyIHZtID0gY2FzZXNbaW5kZXhdOwogICAgICB2bS52YWxpZGF0ZVRhYmxlKCkudGhlbihmdW5jdGlvbiAoZXJyTWFwKSB7CiAgICAgICAgLy8g5qCh6aqM6YCa6L+HCiAgICAgICAgaWYgKCFlcnJNYXApIHsKICAgICAgICAgIHRhYmxlc0RhdGFbaW5kZXhdID0gdm0uZ2V0QWxsKCk7IC8vIOWIpOaWreagoemqjOaYr+WQpuWFqOmDqOWujOaIkO+8jOWujOaIkOi/lOWbnuaIkOWKn++8jOWQpuWImee7p+e7rei/m+ihjOS4i+S4gOatpeagoemqjAoKICAgICAgICAgIGlmICgrK2luZGV4ID09PSBjYXNlcy5sZW5ndGgpIHsKICAgICAgICAgICAgcmVzb2x2ZSh0YWJsZXNEYXRhKTsKICAgICAgICAgIH0gZWxzZSBuZXh0KCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOWwneivleiOt+WPlnRhYktlee+8jOWmguaenOWcqEFUYWLnu4Tku7blhoXljbPlj6/ojrflj5YKICAgICAgICAgIHZhciBwYW5lS2V5OwogICAgICAgICAgdmFyIHRhYlBhbmUgPSBnZXRWbVBhcmVudEJ5TmFtZSh2bSwgJ0FUYWJQYW5lJyk7CgogICAgICAgICAgaWYgKHRhYlBhbmUpIHsKICAgICAgICAgICAgcGFuZUtleSA9IHRhYlBhbmUuJHZub2RlLmtleTsgLy8g6Ieq5Yqo6Lez6L2s5Yiw6K+l6KGo5qC8CgogICAgICAgICAgICBpZiAoYXV0b0p1bXBUYWIpIHsKICAgICAgICAgICAgICB2YXIgdGFicyA9IGdldFZtUGFyZW50QnlOYW1lKHRhYlBhbmUsICdUYWJzJyk7CiAgICAgICAgICAgICAgdGFicyAmJiB0YWJzLnNldEFjdGl2ZUtleSAmJiB0YWJzLnNldEFjdGl2ZUtleShwYW5lS2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSAvLyDlh7rnjrDmnKrpqozor4HpgJrov4fnmoTooajljZXvvIzkuI3lho3ov5vooYzkuIvkuIDmraXmoKHpqozvvIznm7TmjqXov5Tlm57lpLHotKUKCgogICAgICAgICAgcmVqZWN0KHsKICAgICAgICAgICAgZXJyb3I6IFZBTElEQVRFX0ZBSUxFRCwKICAgICAgICAgICAgaW5kZXg6IGluZGV4LAogICAgICAgICAgICBwYW5lS2V5OiBwYW5lS2V5LAogICAgICAgICAgICBlcnJNYXA6IGVyck1hcAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pKCk7CiAgfSk7Cn0="},{"version":3,"sources":["D:/vue/src/components/jeecg/JVxeTable/utils/vxeUtils.js"],"names":["getVmParentByName","JVXETypes","VALIDATE_FAILED","Symbol","getRefPromise","vm","name","Promise","resolve","next","ref","$refs","setTimeout","getInputNumberMaxValue","col","rowsValues","maxNum","Object","values","forEach","rowValue","index","val","key","num","Number","parseFloat","getParentNodeByTagName","dom","tagName","document","body","parentNode","toLowerCase","trim","vxePackageToSuperQuery","columns","handler","Array","isArray","fieldList","i","length","type","rowCheckbox","rowRadio","rowExpand","rowNumber","field","value","text","title","dictCode","dict","date","datetime","format","inputNumber","options","assign","idx","push","console","error","validateFormAndTables","form","cases","autoJumpTab","validateFields","dataMap","reject","err","originError","formValue","validateTables","subData","tablesValue","tablesData","validateTable","then","errMap","getAll","paneKey","tabPane","$vnode","tabs","setActiveKey"],"mappings":"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","sourcesContent":["import { getVmParentByName } from '@/utils/util'\r\nimport { JVXETypes } from '@comp/jeecg/JVxeTable/index'\r\n\r\nexport const VALIDATE_FAILED = Symbol()\r\n\r\n/**\r\n * 获取指定的 $refs 对象\r\n * 有时候可能会遇到组件未挂载到页面中的情况，导致无法获取 $refs 中的某个对象\r\n * 这个方法可以等待挂载完成之后再返回 $refs 的对象，避免报错\r\n * @author sunjianlei\r\n **/\r\nexport function getRefPromise(vm, name) {\r\n  return new Promise((resolve) => {\r\n    (function next() {\r\n      let ref = vm.$refs[name]\r\n      if (ref) {\r\n        resolve(ref)\r\n      } else {\r\n        setTimeout(() => {\r\n          next()\r\n        }, 10)\r\n      }\r\n    })()\r\n  })\r\n}\r\n\r\n/** 获取某一数字输入框列中的最大的值 */\r\nexport function getInputNumberMaxValue(col, rowsValues) {\r\n  let maxNum = 0\r\n  Object.values(rowsValues).forEach((rowValue, index) => {\r\n    let val = rowValue[col.key], num\r\n    try {\r\n      num = Number.parseFloat(val)\r\n    } catch {\r\n      num = 0\r\n    }\r\n    // 把首次循环的结果当成最大值\r\n    if (index === 0) {\r\n      maxNum = num\r\n    } else {\r\n      maxNum = (num > maxNum) ? num : maxNum\r\n    }\r\n  })\r\n  return maxNum\r\n}\r\n\r\n/**\r\n *\r\n * 根据 tagName 获取父级节点\r\n *\r\n * @param dom 一级dom节点\r\n * @param tagName 标签名，不区分大小写\r\n * @return {HTMLElement | NULL}\r\n */\r\nexport function getParentNodeByTagName(dom, tagName = 'body') {\r\n  if (tagName === 'body') {\r\n    return document.body\r\n  }\r\n  if (dom.parentNode) {\r\n    if (dom.parentNode.tagName.toLowerCase() === tagName.trim().toLowerCase()) {\r\n      return dom.parentNode\r\n    } else {\r\n      return getParentNodeByTagName(dom.parentNode, tagName)\r\n    }\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\n/**\r\n * vxe columns 封装成高级查询可识别的选项\r\n * @param columns\r\n * @param handler 单独处理方法\r\n */\r\nexport function vxePackageToSuperQuery(columns, handler) {\r\n  if (Array.isArray(columns)) {\r\n    // 高级查询所需要的参数\r\n    let fieldList = []\r\n    // 遍历列\r\n    for (let i = 0; i < columns.length; i++) {\r\n      let col = columns[i]\r\n      if (col.type === JVXETypes.rowCheckbox ||\r\n        col.type === JVXETypes.rowRadio ||\r\n        col.type === JVXETypes.rowExpand ||\r\n        col.type === JVXETypes.rowNumber\r\n      ) {\r\n        continue\r\n      }\r\n      let field = {\r\n        type: 'string',\r\n        value: col.key,\r\n        text: col.title,\r\n        dictCode: col.dictCode || col.dict,\r\n      }\r\n      if (col.type === JVXETypes.date || col.type === JVXETypes.datetime) {\r\n        field.type = col.type\r\n        field.format = col.format\r\n      }\r\n      if (col.type === JVXETypes.inputNumber) {\r\n        field.type = 'int'\r\n      }\r\n      if (Array.isArray(col.options)) {\r\n        field.options = col.options\r\n      }\r\n      if (typeof handler === 'function') {\r\n        Object.assign(field, handler(col, idx))\r\n      }\r\n      fieldList.push(field)\r\n    }\r\n    return fieldList\r\n  } else {\r\n    console.error('columns必须是一个数组')\r\n  }\r\n  return null\r\n}\r\n\r\n/**\r\n * 一次性验证主表单和所有的次表单\r\n * @param form 主表单 form 对象\r\n * @param cases 接收一个数组，每项都是一个JVxeTable实例\r\n * @param autoJumpTab\r\n * @returns {Promise<any>}\r\n * @author sunjianlei\r\n */\r\nexport async function validateFormAndTables(form, cases, autoJumpTab) {\r\n  if (!(form && typeof form.validateFields === 'function')) {\r\n    throw `form 参数需要的是一个form对象，而传入的却是${typeof form}`\r\n  }\r\n  let dataMap = {}\r\n  let values = await new Promise((resolve, reject) => {\r\n    // 验证主表表单\r\n    form.validateFields((err, values) => {\r\n      err ? reject({error: VALIDATE_FAILED, originError: err}) : resolve(values)\r\n    })\r\n  })\r\n  Object.assign(dataMap, {formValue: values})\r\n  // 验证所有子表的表单\r\n  let subData = await validateTables(cases, autoJumpTab)\r\n  // 合并最终数据\r\n  dataMap = Object.assign(dataMap, {tablesValue: subData})\r\n  return dataMap\r\n}\r\n\r\n/**\r\n * 验证并获取一个或多个表格的所有值\r\n *\r\n * @param cases 接收一个数组，每项都是一个JVxeTable实例\r\n * @param autoJumpTab 校验失败后，是否自动跳转tab选项\r\n */\r\nexport function validateTables(cases, autoJumpTab = true) {\r\n  if (!Array.isArray(cases)) {\r\n    throw `'validateTables'函数的'cases'参数需要的是一个数组，而传入的却是${typeof cases}`\r\n  }\r\n  return new Promise((resolve, reject) => {\r\n    let tablesData = []\r\n    let index = 0\r\n    if (!cases || cases.length === 0) {\r\n      resolve()\r\n    }\r\n    (function next() {\r\n      let vm = cases[index]\r\n      vm.validateTable().then(errMap => {\r\n        // 校验通过\r\n        if (!errMap) {\r\n          tablesData[index] = vm.getAll()\r\n          // 判断校验是否全部完成，完成返回成功，否则继续进行下一步校验\r\n          if (++index === cases.length) {\r\n            resolve(tablesData)\r\n          } else (\r\n            next()\r\n          )\r\n        } else {\r\n          // 尝试获取tabKey，如果在ATab组件内即可获取\r\n          let paneKey\r\n          let tabPane = getVmParentByName(vm, 'ATabPane')\r\n          if (tabPane) {\r\n            paneKey = tabPane.$vnode.key\r\n            // 自动跳转到该表格\r\n            if (autoJumpTab) {\r\n              let tabs = getVmParentByName(tabPane, 'Tabs')\r\n              tabs && tabs.setActiveKey && tabs.setActiveKey(paneKey)\r\n            }\r\n          }\r\n          // 出现未验证通过的表单，不再进行下一步校验，直接返回失败\r\n          reject({error: VALIDATE_FAILED, index, paneKey, errMap})\r\n        }\r\n      })\r\n    })()\r\n  })\r\n}"]}]}