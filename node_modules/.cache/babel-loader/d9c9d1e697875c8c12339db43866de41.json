{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\modules\\oss\\OSSFileList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\modules\\oss\\OSSFileList.vue","mtime":1615948820465},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgSmVlY2dMaXN0TWl4aW4gfSBmcm9tICdAL21peGlucy9KZWVjZ0xpc3RNaXhpbic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiT1NTRmlsZUxpc3QiLAogIG1peGluczogW0plZWNnTGlzdE1peGluXSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVzY3JpcHRpb246ICfmlofku7bliJfooagnLAogICAgICAvLyDooajlpLQKICAgICAgY29sdW1uczogW3sKICAgICAgICB0aXRsZTogJyMnLAogICAgICAgIGRhdGFJbmRleDogJycsCiAgICAgICAga2V5OiAncm93SW5kZXgnLAogICAgICAgIHdpZHRoOiA2MCwKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgY3VzdG9tUmVuZGVyOiBmdW5jdGlvbiBjdXN0b21SZW5kZXIodCwgciwgaW5kZXgpIHsKICAgICAgICAgIHJldHVybiBwYXJzZUludChpbmRleCkgKyAxOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5paH5Lu25ZCN56ewJywKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgZGF0YUluZGV4OiAnZmlsZU5hbWUnCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+aWh+S7tuWcsOWdgCcsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIGRhdGFJbmRleDogJ3VybCcKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICBkYXRhSW5kZXg6ICdhY3Rpb24nLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICBzY29wZWRTbG90czogewogICAgICAgICAgY3VzdG9tUmVuZGVyOiAnYWN0aW9uJwogICAgICAgIH0KICAgICAgfV0sCiAgICAgIHVybDogewogICAgICAgIHVwbG9hZDogIi9zeXMvb3NzL2ZpbGUvdXBsb2FkIiwKICAgICAgICBsaXN0OiAiL3N5cy9vc3MvZmlsZS9saXN0IiwKICAgICAgICBkZWxldGU6ICIvc3lzL29zcy9maWxlL2RlbGV0ZSIsCiAgICAgICAgbWluaW9VcGxvYWQ6ICIvc3lzL3VwbG9hZC91cGxvYWRNaW5pbyIKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB1cGxvYWRBY3Rpb246IGZ1bmN0aW9uIHVwbG9hZEFjdGlvbigpIHsKICAgICAgcmV0dXJuIHdpbmRvdy5fQ09ORklHWydkb21pYW5VUkwnXSArIHRoaXMudXJsLnVwbG9hZDsKICAgIH0sCiAgICBtaW5pb1VwbG9hZEFjdGlvbjogZnVuY3Rpb24gbWluaW9VcGxvYWRBY3Rpb24oKSB7CiAgICAgIHJldHVybiB3aW5kb3cuX0NPTkZJR1snZG9taWFuVVJMJ10gKyB0aGlzLnVybC5taW5pb1VwbG9hZDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGJlZm9yZVVwbG9hZDogZnVuY3Rpb24gYmVmb3JlVXBsb2FkKGZpbGUpIHsKICAgICAgdmFyIGZpbGVUeXBlID0gZmlsZS50eXBlOwoKICAgICAgaWYgKGZpbGVUeXBlID09PSAnaW1hZ2UnKSB7CiAgICAgICAgaWYgKGZpbGVUeXBlLmluZGV4T2YoJ2ltYWdlJykgPCAwKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+S4iuS8oOWbvueJhycpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChmaWxlVHlwZSA9PT0gJ2ZpbGUnKSB7CiAgICAgICAgaWYgKGZpbGVUeXBlLmluZGV4T2YoJ2ltYWdlJykgPj0gMCkgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fkuIrkvKDmlofku7YnKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGluZm8pIHsKICAgICAgaWYgKGluZm8uZmlsZS5zdGF0dXMgPT09ICdkb25lJykgewogICAgICAgIGlmIChpbmZvLmZpbGUucmVzcG9uc2Uuc3VjY2VzcykgewogICAgICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCIiLmNvbmNhdChpbmZvLmZpbGUubmFtZSwgIiBcdTRFMEFcdTRGMjBcdTYyMTBcdTUyOUYhIikpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCIiLmNvbmNhdChpbmZvLmZpbGUucmVzcG9uc2UubWVzc2FnZSkpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZXJyb3InKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiIi5jb25jYXQoaW5mby5maWxlLnJlc3BvbnNlLm1lc3NhZ2UpKTsKICAgICAgfQogICAgfSwKICAgIG9zc0RlbGV0ZTogZnVuY3Rpb24gb3NzRGVsZXRlKGlkKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC4kY29uZmlybSh7CiAgICAgICAgdGl0bGU6ICLnoa7orqTliKDpmaQiLAogICAgICAgIGNvbnRlbnQ6ICLmmK/lkKbliKDpmaTpgInkuK3mlofku7Y/IiwKICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkgewogICAgICAgICAgdGhhdC5oYW5kbGVEZWxldGUoaWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlUHJldmlldzogZnVuY3Rpb24gaGFuZGxlUHJldmlldyhyZWNvcmQpIHsKICAgICAgaWYgKHJlY29yZCAmJiByZWNvcmQudXJsKSB7CiAgICAgICAgdmFyIHVybCA9IHdpbmRvdy5fQ09ORklHWydvbmxpbmVQcmV2aWV3RG9tYWluVVJMJ10gKyAnP3VybD0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHJlY29yZC51cmwpOwogICAgICAgIHdpbmRvdy5vcGVuKHVybCwgJ19ibGFuaycpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["OSSFileList.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\r\n        <a-row :gutter=\"24\">\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件名称\">\r\n              <a-input placeholder=\"请输入文件名称\" v-model=\"queryParam.fileName\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <a-form-item label=\"文件地址\">\r\n              <a-input placeholder=\"请输入文件地址\" v-model=\"queryParam.url\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :md=\"6\" :sm=\"8\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\">\r\n      <!--      <a-button type=\"primary\" icon=\"download\" @click=\"handleExportXls('文件列表')\">导出</a-button>-->\r\n      <a-upload\r\n          name=\"file\"\r\n          :multiple=\"false\"\r\n          :action=\"uploadAction\"\r\n          :headers=\"tokenHeader\"\r\n          :showUploadList=\"false\"\r\n          :beforeUpload=\"beforeUpload\"\r\n          @change=\"handleChange\">\r\n        <a-button>\r\n          <a-icon type=\"upload\"/>\r\n          OSS文件上传\r\n        </a-button>\r\n      </a-upload>\r\n\r\n      <a-upload\r\n        name=\"file\"\r\n        :multiple=\"false\"\r\n        :action=\"minioUploadAction\"\r\n        :headers=\"tokenHeader\"\r\n        :showUploadList=\"false\"\r\n        :beforeUpload=\"beforeUpload\"\r\n        @change=\"handleChange\">\r\n        <a-button>\r\n          <a-icon type=\"upload\"/>\r\n          MINIO文件上传\r\n        </a-button>\r\n      </a-upload>\r\n    </div>\r\n\r\n    <!-- table区域-begin -->\r\n    <div>\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a\r\n          style=\"font-weight: 600\">{{\r\n        selectedRowKeys.length }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n\r\n      <a-table\r\n          ref=\"table\"\r\n          size=\"middle\"\r\n          bordered\r\n          rowKey=\"id\"\r\n          :columns=\"columns\"\r\n          :dataSource=\"dataSource\"\r\n          :pagination=\"ipagination\"\r\n          :loading=\"loading\"\r\n          :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n          @change=\"handleTableChange\">\r\n\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handlePreview(record)\">预览</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"ossDelete(record.id)\">删除</a>\r\n        </span>\r\n\r\n      </a-table>\r\n    </div>\r\n    <!-- table区域-end -->\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n\r\n  export default {\r\n    name: \"OSSFileList\",\r\n    mixins: [JeecgListMixin],\r\n    data() {\r\n      return {\r\n        description: '文件列表',\r\n        // 表头\r\n        columns: [\r\n          {\r\n            title: '#',\r\n            dataIndex: '',\r\n            key: 'rowIndex',\r\n            width: 60,\r\n            align: \"center\",\r\n            customRender: function (t, r, index) {\r\n              return parseInt(index) + 1;\r\n            }\r\n          },\r\n          {\r\n            title: '文件名称',\r\n            align: \"center\",\r\n            dataIndex: 'fileName'\r\n          },\r\n          {\r\n            title: '文件地址',\r\n            align: \"center\",\r\n            dataIndex: 'url'\r\n          },\r\n          {\r\n            title: '操作',\r\n            dataIndex: 'action',\r\n            align: \"center\",\r\n            scopedSlots: {customRender: 'action'},\r\n          }\r\n        ],\r\n        url: {\r\n          upload: \"/sys/oss/file/upload\",\r\n          list: \"/sys/oss/file/list\",\r\n          delete: \"/sys/oss/file/delete\",\r\n          minioUpload: \"/sys/upload/uploadMinio\"\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      uploadAction() {\r\n        return window._CONFIG['domianURL'] + this.url.upload;\r\n      },\r\n      minioUploadAction() {\r\n        return window._CONFIG['domianURL'] + this.url.minioUpload;\r\n      },\r\n    },\r\n    methods: {\r\n      beforeUpload(file) {\r\n        var fileType = file.type;\r\n        if (fileType === 'image') {\r\n          if (fileType.indexOf('image') < 0) {\r\n            this.$message.warning('请上传图片');\r\n            return false;\r\n          }\r\n        } else if (fileType === 'file') {\r\n          if (fileType.indexOf('image') >= 0) {\r\n            this.$message.warning('请上传文件');\r\n            return false;\r\n          }\r\n        }\r\n        return true\r\n      },\r\n      handleChange(info) {\r\n        if (info.file.status === 'done') {\r\n          if (info.file.response.success) {\r\n            this.loadData()\r\n            this.$message.success(`${info.file.name} 上传成功!`);\r\n          } else {\r\n            this.$message.error(`${info.file.response.message}`);\r\n          }\r\n        } else if (info.file.status === 'error') {\r\n          this.$message.error(`${info.file.response.message}`);\r\n        }\r\n      },\r\n      ossDelete(id) {\r\n        var that = this;\r\n        that.$confirm({\r\n          title: \"确认删除\",\r\n          content: \"是否删除选中文件?\",\r\n          onOk: function () {\r\n            that.handleDelete(id)\r\n          }\r\n        });\r\n      },\r\n      handlePreview(record) {\r\n        if (record && record.url) {\r\n          let url = window._CONFIG['onlinePreviewDomainURL'] + '?url=' + encodeURIComponent(record.url)\r\n          window.open(url, '_blank')\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  @import '~@assets/less/common.less';\r\n</style>\r\n"],"sourceRoot":"src/views/modules/oss"}]}