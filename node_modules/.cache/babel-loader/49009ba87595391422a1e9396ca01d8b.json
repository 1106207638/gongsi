{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\system\\modules\\DataLogCompareModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\system\\modules\\DataLogCompareModal.vue","mtime":1615948821473},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QWN0aW9uIH0gZnJvbSAnQC9hcGkvbWFuYWdlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdEYXRhTG9nQ29tcGFyZU1vZGFsJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW9kYWxXaWR0aDogMTAwMCwKICAgICAgbW9kYWx0b2dnbGVGbGFnOiB0cnVlLAogICAgICBjb25maXJtRGlydHk6IGZhbHNlLAogICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICBtb2RlbDoge30sCiAgICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZSwKICAgICAgaGVhZGVyczoge30sCiAgICAgIC8v54mI5pys5Y+3CiAgICAgIGRhdGFWZXJzaW9uMU51bTogJycsCiAgICAgIGRhdGFWZXJzaW9uMk51bTogJycsCiAgICAgIC8v6KGo5aS0CiAgICAgIGNvbHVtbnM6IFt7CiAgICAgICAgdGl0bGU6ICflrZfmrrXlkI0nLAogICAgICAgIGFsaWduOiAnbGVmdCcsCiAgICAgICAgZGF0YUluZGV4OiAnY29kZScsCiAgICAgICAgd2lkdGg6ICczMCUnCiAgICAgIH0sIHsKICAgICAgICBhbGlnbjogJ2xlZnQnLAogICAgICAgIGRhdGFJbmRleDogJ2RhdGFWZXJzaW9uMScsCiAgICAgICAgd2lkdGg6ICczMCUnLAogICAgICAgIHNsb3RzOiB7CiAgICAgICAgICB0aXRsZTogJ2RhdGFWZXJzaW9uVGl0bGUxJwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBkYXRhSW5kZXg6ICdpbWdzaG93JywKICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogImF2YXRhcnNsb3QiCiAgICAgICAgfSwKICAgICAgICB3aWR0aDogJzEwJScKICAgICAgfSwgewogICAgICAgIGFsaWduOiAnbGVmdCcsCiAgICAgICAgZGF0YUluZGV4OiAnZGF0YVZlcnNpb24yJywKICAgICAgICB3aWR0aDogJzMwJScsCiAgICAgICAgc2xvdHM6IHsKICAgICAgICAgIHRpdGxlOiAnZGF0YVZlcnNpb25UaXRsZTInCiAgICAgICAgfQogICAgICB9XSwKICAgICAgLy/mlbDmja7pm4YKICAgICAgZGF0YVNvdXJjZTogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB1cmw6IHsKICAgICAgICBxdWVyeUNvbXBhcmVVcmw6ICIvc3lzL2RhdGFMb2cvcXVlcnlDb21wYXJlTGlzdCIKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7fSwKICBtZXRob2RzOiB7CiAgICBsb2FkRGF0YTogZnVuY3Rpb24gbG9hZERhdGEoZGF0YUlkMSwgZGF0YUlkMikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy5kYXRhU291cmNlID0gW107CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgZ2V0QWN0aW9uKHRoYXQudXJsLnF1ZXJ5Q29tcGFyZVVybCwgewogICAgICAgIGRhdGFJZDE6IGRhdGFJZDEsCiAgICAgICAgZGF0YUlkMjogZGF0YUlkMgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgIHRoYXQuZGF0YVZlcnNpb24xTnVtID0gcmVzLnJlc3VsdFswXS5kYXRhVmVyc2lvbjsKICAgICAgICAgIHRoYXQuZGF0YVZlcnNpb24yTnVtID0gcmVzLnJlc3VsdFsxXS5kYXRhVmVyc2lvbjsKICAgICAgICAgIHZhciBqc29uMSA9IEpTT04ucGFyc2UocmVzLnJlc3VsdFswXS5kYXRhQ29udGVudCk7CiAgICAgICAgICB2YXIganNvbjIgPSBKU09OLnBhcnNlKHJlcy5yZXN1bHRbMV0uZGF0YUNvbnRlbnQpOwoKICAgICAgICAgIGZvciAodmFyIGl0ZW0xIGluIGpzb24xKSB7CiAgICAgICAgICAgIGZvciAodmFyIGl0ZW0yIGluIGpzb24yKSB7CiAgICAgICAgICAgICAgaWYgKGl0ZW0xID09IGl0ZW0yKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5kYXRhU291cmNlLnB1c2goewogICAgICAgICAgICAgICAgICBjb2RlOiBpdGVtMSwKICAgICAgICAgICAgICAgICAgaW1nc2hvdzogJycsCiAgICAgICAgICAgICAgICAgIGRhdGFWZXJzaW9uMToganNvbjFbaXRlbTFdLAogICAgICAgICAgICAgICAgICBkYXRhVmVyc2lvbjI6IGpzb24yW2l0ZW0yXQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNvbXBhcmVNb2RhbDogZnVuY3Rpb24gY29tcGFyZU1vZGFsKGRhdGFJZDEsIGRhdGFJZDIpIHsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5sb2FkRGF0YShkYXRhSWQxLCBkYXRhSWQyKTsKICAgIH0sCiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uIGhhbmRsZUNhbmNlbCgpIHsKICAgICAgdGhpcy5jbG9zZSgpOwogICAgfSwKICAgIG1vZGFsRm9ybU9rOiBmdW5jdGlvbiBtb2RhbEZvcm1PaygpIHt9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpOwogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5kaXNhYmxlU3VibWl0ID0gZmFsc2U7CiAgICB9LAogICAgc2V0ZGF0YUNzczogZnVuY3Rpb24gc2V0ZGF0YUNzcyhyZWNvcmQpIHsKICAgICAgdmFyIGNsYXNzTmFtZSA9ICd0cmNvbG9yJzsKICAgICAgdmFyIGRhdGFWZXJzaW9uMSA9IHJlY29yZC5kYXRhVmVyc2lvbjE7CiAgICAgIHZhciBkYXRhVmVyc2lvbjIgPSByZWNvcmQuZGF0YVZlcnNpb24yOwoKICAgICAgaWYgKGRhdGFWZXJzaW9uMSAhPSBkYXRhVmVyc2lvbjIpIHsKICAgICAgICByZXR1cm4gY2xhc3NOYW1lOwogICAgICB9CiAgICB9LAogICAgZ2V0QXZhdGFyVmlldzogZnVuY3Rpb24gZ2V0QXZhdGFyVmlldyhhdmF0YXIpIHsKICAgICAgaWYgKGF2YXRhci5kYXRhVmVyc2lvbjEgIT0gYXZhdGFyLmRhdGFWZXJzaW9uMikgewogICAgICAgIHJldHVybiAiL2dvcmlnaHQucG5nIjsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["DataLogCompareModal.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-modal\r\n    :width=\"modalWidth\"\r\n    :visible=\"visible\"\r\n    :footer=\"null\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n    <!--table区 -->\r\n    <div class=\"marginCss\">\r\n      <a-table\r\n        ref=\"table\"\r\n        size=\"small\"\r\n        bordered\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :rowClassName=\"setdataCss\"\r\n        :loading=\"loading\"\r\n        :scroll=\"{ y: 700 }\"\r\n        :pagination=\"false\">\r\n        <span slot=\"dataVersionTitle1\"><a-icon type=\"smile-o\" /> 版本:{{dataVersion1Num}}</span>\r\n        <span slot=\"dataVersionTitle2\"><a-icon type=\"smile-o\" /> 版本:{{dataVersion2Num}}</span>\r\n        <template slot=\"avatarslot\" slot-scope=\"text, record\">\r\n          <div class=\"anty-img-wrap\">\r\n            <img :src=\"getAvatarView(record)\"/>\r\n          </div>\r\n\r\n        </template>\r\n      </a-table>\r\n    </div>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import {getAction} from '@/api/manage'\r\n\r\n  export default {\r\n    name: 'DataLogCompareModal',\r\n    data() {\r\n      return {\r\n        modalWidth: 1000,\r\n        modaltoggleFlag: true,\r\n        confirmDirty: false,\r\n        title: '操作',\r\n        visible: false,\r\n        model: {},\r\n        confirmLoading: false,\r\n        headers: {},\r\n        //版本号\r\n        dataVersion1Num:'',\r\n        dataVersion2Num:'',\r\n        //表头\r\n        columns: [\r\n          {\r\n            title: '字段名',\r\n            align: 'left',\r\n            dataIndex: 'code',\r\n            width: '30%',\r\n          }, {\r\n            align: 'left',\r\n            dataIndex: 'dataVersion1',\r\n            width: '30%',\r\n            slots: { title: 'dataVersionTitle1' },\r\n          }, {\r\n            title: '',\r\n            dataIndex: 'imgshow',\r\n            align: 'center',\r\n            scopedSlots: {customRender: \"avatarslot\"},\r\n            width: '10%',\r\n          }, {\r\n            align: 'left',\r\n            dataIndex: 'dataVersion2',\r\n            width: '30%',\r\n            slots: { title: 'dataVersionTitle2' },\r\n          }\r\n        ],\r\n        //数据集\r\n        dataSource: [],\r\n        loading: false,\r\n        url: {\r\n          queryCompareUrl: \"/sys/dataLog/queryCompareList\",\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n\r\n    },\r\n    methods: {\r\n      loadData(dataId1, dataId2) {\r\n        this.dataSource = [];\r\n        let that = this;\r\n        getAction(that.url.queryCompareUrl, {dataId1: dataId1, dataId2: dataId2}).then((res) => {\r\n          if (res.success) {\r\n            that.dataVersion1Num = res.result[0].dataVersion;\r\n            that.dataVersion2Num = res.result[1].dataVersion;\r\n            let json1 = JSON.parse(res.result[0].dataContent);\r\n            let json2 = JSON.parse(res.result[1].dataContent);\r\n            for (var item1 in json1) {\r\n              for (var item2 in json2) {\r\n                if (item1 == item2) {\r\n                  this.dataSource.push({\r\n                    code: item1,\r\n                    imgshow: '',\r\n                    dataVersion1: json1[item1],\r\n                    dataVersion2: json2[item2],\r\n                  })\r\n                }\r\n              }\r\n            }\r\n          } else {\r\n            console.log(res.message);\r\n          }\r\n        })\r\n      },\r\n      compareModal(dataId1, dataId2) {\r\n        this.visible = true\r\n        this.loadData(dataId1, dataId2);\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n      modalFormOk() {\r\n      },\r\n      close() {\r\n        this.$emit('close');\r\n        this.visible = false;\r\n        this.disableSubmit = false;\r\n      },\r\n      setdataCss(record) {\r\n        let className = 'trcolor';\r\n        const dataVersion1 = record.dataVersion1;\r\n        const dataVersion2 = record.dataVersion2;\r\n        if (dataVersion1 != dataVersion2) {\r\n          return className;\r\n        }\r\n      },\r\n      getAvatarView: function (avatar) {\r\n        if (avatar.dataVersion1 != avatar.dataVersion2) {\r\n          return \"/goright.png\";\r\n        } else {\r\n          return \"\";\r\n        }\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .anty-img-wrap {\r\n    height: 25px;\r\n    position: relative;\r\n  }\r\n\r\n  .anty-img-wrap > img {\r\n    max-height: 100%;\r\n  }\r\n\r\n  .marginCss {\r\n    margin-top: 20px;\r\n  }\r\n\r\n  @import '../../../assets/less/index.less';\r\n</style>"],"sourceRoot":"src/views/system/modules"}]}