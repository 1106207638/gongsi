{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\src\\api\\GroupRequest.js","dependencies":[{"path":"D:\\vue\\src\\api\\GroupRequest.js","mtime":1615948807143},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwovKioNCiAqIOWwhuS4gOS4quivt+axguWIhue7hA0KICoNCiAqIEBwYXJhbSBnZXRQcm9taXNlIOS8oOWFpeS4gOS4quWPr+S7peiOt+WPluWIsFByb21pc2Xlr7nosaHnmoTmlrnms5UNCiAqIEBwYXJhbSBncm91cElkIOWIhue7hElE77yM5aaC5p6c5LiN5Lyg5oiW6ICF5Li656m65YiZ5LiN5YiG57uEDQogKiBAcGFyYW0gZXhwaXJlIOi/h+acn+aXtumXtO+8jOm7mOiupCDljYrliIbpkp8NCiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGh0dHBHcm91cFJlcXVlc3QoZ2V0UHJvbWlzZSwgZ3JvdXBJZCkgewogIHZhciBleHBpcmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IDEwMDAgKiAzMDsKCiAgaWYgKGdyb3VwSWQgPT0gbnVsbCB8fCBncm91cElkID09PSAnJykgewogICAgY29uc29sZS5sb2coIi0tLS0tLS0tcG9wdXAtLS0tLS0tLS0tZ2V0RnJvbSAgREItLS0tLS0td2l0aC0tLW5vLS1ncm91cElkICIpOwogICAgcmV0dXJuIGdldFByb21pc2UoKTsKICB9CgogIGlmIChWdWUubHMuZ2V0KGdyb3VwSWQpKSB7CiAgICBjb25zb2xlLmxvZygiLS0tLS0tLS0tcG9wdXAtLS0tLS0tLWdldEZyb20gIENhY2hlLS0tLS0tLS1ncm91cElkID0gIiArIGdyb3VwSWQpOwogICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShWdWUubHMuZ2V0KGdyb3VwSWQpKTsKICB9IGVsc2UgewogICAgY29uc29sZS5sb2coIi0tLS0tLS0tcG9wdXAtLS0tLS0tLS0tZ2V0RnJvbSAgREItLS0tLS0tLS1ncm91cElkID0gIiArIGdyb3VwSWQpOwogIH0gLy8g6L+Y5rKh5pyJ5Y+R5Ye66K+35rGC77yM5bCx5Y+R5Ye656ys5LiA5qyh55qE6K+35rGCCgoKICByZXR1cm4gZ2V0UHJvbWlzZSgpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgVnVlLmxzLnNldChncm91cElkLCByZXMsIGV4cGlyZSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlcyk7CiAgfSk7Cn0="},{"version":3,"sources":["D:/vue/src/api/GroupRequest.js"],"names":["Vue","httpGroupRequest","getPromise","groupId","expire","console","log","ls","get","Promise","resolve","then","res","set"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AAEA;;;;;;;;AAOA,OAAO,SAASC,gBAAT,CAA0BC,UAA1B,EAAsCC,OAAtC,EAAmE;AAAA,MAApBC,MAAoB,uEAAX,OAAO,EAAI;;AACxE,MAAID,OAAO,IAAI,IAAX,IAAmBA,OAAO,KAAK,EAAnC,EAAuC;AACrCE,IAAAA,OAAO,CAACC,GAAR,CAAY,8DAAZ;AACA,WAAOJ,UAAU,EAAjB;AACD;;AAED,MAAIF,GAAG,CAACO,EAAJ,CAAOC,GAAP,CAAWL,OAAX,CAAJ,EAAyB;AACvBE,IAAAA,OAAO,CAACC,GAAR,CAAY,2DAA2DH,OAAvE;AACA,WAAOM,OAAO,CAACC,OAAR,CAAgBV,GAAG,CAACO,EAAJ,CAAOC,GAAP,CAAWL,OAAX,CAAhB,CAAP;AACD,GAHD,MAGO;AACLE,IAAAA,OAAO,CAACC,GAAR,CAAY,0DAA0DH,OAAtE;AACD,GAXuE,CAaxE;;;AACA,SAAOD,UAAU,GAAGS,IAAb,CAAkB,UAAAC,GAAG,EAAI;AAC9BZ,IAAAA,GAAG,CAACO,EAAJ,CAAOM,GAAP,CAAWV,OAAX,EAAoBS,GAApB,EAAyBR,MAAzB;AACA,WAAOK,OAAO,CAACC,OAAR,CAAgBE,GAAhB,CAAP;AACD,GAHM,CAAP;AAID","sourcesContent":["import Vue from 'vue'\r\n\r\n/**\r\n * 将一个请求分组\r\n *\r\n * @param getPromise 传入一个可以获取到Promise对象的方法\r\n * @param groupId 分组ID，如果不传或者为空则不分组\r\n * @param expire 过期时间，默认 半分钟\r\n */\r\nexport function httpGroupRequest(getPromise, groupId, expire = 1000 * 30) {\r\n  if (groupId == null || groupId === '') {\r\n    console.log(\"--------popup----------getFrom  DB-------with---no--groupId \")\r\n    return getPromise()\r\n  }\r\n\r\n  if (Vue.ls.get(groupId)) {\r\n    console.log(\"---------popup--------getFrom  Cache--------groupId = \" + groupId)\r\n    return Promise.resolve(Vue.ls.get(groupId));\r\n  } else {\r\n    console.log(\"--------popup----------getFrom  DB---------groupId = \" + groupId)\r\n  }\r\n\r\n  // 还没有发出请求，就发出第一次的请求\r\n  return getPromise().then(res => {\r\n    Vue.ls.set(groupId, res, expire);\r\n    return Promise.resolve(res);\r\n  })\r\n}\r\n\r\n\r\n"]}]}