{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\modules\\monitor\\HttpTrace.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\modules\\monitor\\HttpTrace.vue","mtime":1615948820441},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyBnZXRBY3Rpb24gfSBmcm9tICdAL2FwaS9tYW5hZ2UnOwptb21lbnQubG9jYWxlKCd6aC1jbicpOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkdmFuY2VkOiBmYWxzZSwKICAgICAgZGF0YVNvdXJjZTogW10sCiAgICAgIHBhZ2luYXRpb246IHsKICAgICAgICBkZWZhdWx0UGFnZVNpemU6IDEwLAogICAgICAgIGRlZmF1bHRDdXJyZW50OiAxLAogICAgICAgIHBhZ2VTaXplT3B0aW9uczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICcxMDAnXSwKICAgICAgICBzaG93UXVpY2tKdW1wZXI6IHRydWUsCiAgICAgICAgc2hvd1NpemVDaGFuZ2VyOiB0cnVlLAogICAgICAgIHNob3dUb3RhbDogZnVuY3Rpb24gc2hvd1RvdGFsKHRvdGFsLCByYW5nZSkgewogICAgICAgICAgcmV0dXJuICJcdTY2M0VcdTc5M0EgIi5jb25jYXQocmFuZ2VbMF0sICIgfiAiKS5jb25jYXQocmFuZ2VbMV0sICIgXHU2NzYxXHU4QkIwXHU1RjU1XHVGRjBDXHU1MTcxICIpLmNvbmNhdCh0b3RhbCwgIiBcdTY3NjFcdThCQjBcdTVGNTUiKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxvYWRpbmc6IHRydWUsCiAgICAgIHRhYmxlTG9hZGluZzogdHJ1ZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb2x1bW5zOiBmdW5jdGlvbiBjb2x1bW5zKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICB0aXRsZTogJ+ivt+axguaXtumXtCcsCiAgICAgICAgZGF0YUluZGV4OiAndGltZXN0YW1wJywKICAgICAgICBjdXN0b21SZW5kZXI6IGZ1bmN0aW9uIGN1c3RvbVJlbmRlcih0ZXh0KSB7CiAgICAgICAgICByZXR1cm4gbW9tZW50KHRleHQpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpOwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn6K+35rGC5pa55rOVJywKICAgICAgICBkYXRhSW5kZXg6ICdyZXF1ZXN0Lm1ldGhvZCcsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogJ3JlcXVlc3RNZXRob2QnCiAgICAgICAgfSwKICAgICAgICBmaWx0ZXJzOiBbewogICAgICAgICAgdGV4dDogJ0dFVCcsCiAgICAgICAgICB2YWx1ZTogJ0dFVCcKICAgICAgICB9LCB7CiAgICAgICAgICB0ZXh0OiAnUE9TVCcsCiAgICAgICAgICB2YWx1ZTogJ1BPU1QnCiAgICAgICAgfSwgewogICAgICAgICAgdGV4dDogJ1BVVCcsCiAgICAgICAgICB2YWx1ZTogJ1BVVCcKICAgICAgICB9LCB7CiAgICAgICAgICB0ZXh0OiAnREVMRVRFJywKICAgICAgICAgIHZhbHVlOiAnREVMRVRFJwogICAgICAgIH1dLAogICAgICAgIGZpbHRlck11bHRpcGxlOiB0cnVlLAogICAgICAgIG9uRmlsdGVyOiBmdW5jdGlvbiBvbkZpbHRlcih2YWx1ZSwgcmVjb3JkKSB7CiAgICAgICAgICByZXR1cm4gcmVjb3JkLnJlcXVlc3QubWV0aG9kLmluY2x1ZGVzKHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogJ+ivt+axglVSTCcsCiAgICAgICAgZGF0YUluZGV4OiAncmVxdWVzdC51cmknLAogICAgICAgIGN1c3RvbVJlbmRlcjogZnVuY3Rpb24gY3VzdG9tUmVuZGVyKHRleHQpIHsKICAgICAgICAgIHJldHVybiB0ZXh0LnNwbGl0KCc/JylbMF07CiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICflk43lupTnirbmgIEnLAogICAgICAgIGRhdGFJbmRleDogJ3Jlc3BvbnNlLnN0YXR1cycsCiAgICAgICAgc2NvcGVkU2xvdHM6IHsKICAgICAgICAgIGN1c3RvbVJlbmRlcjogJ3Jlc3BvbnNlU3RhdHVzJwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHRpdGxlOiAn6K+35rGC6ICX5pe2JywKICAgICAgICBkYXRhSW5kZXg6ICd0aW1lVGFrZW4nLAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBjdXN0b21SZW5kZXI6ICd0aW1lVGFrZW4nCiAgICAgICAgfQogICAgICB9XTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmZldGNoKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDbGlja1VwZGF0ZTogZnVuY3Rpb24gaGFuZGxlQ2xpY2tVcGRhdGUoKSB7CiAgICAgIHRoaXMuZmV0Y2goKTsKICAgIH0sCiAgICBoYW5kbGVUYWJsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlVGFibGVDaGFuZ2UoKSB7CiAgICAgIHRoaXMuZmV0Y2goKTsKICAgIH0sCiAgICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLnRhYmxlTG9hZGluZyA9IHRydWU7CiAgICAgIGdldEFjdGlvbignYWN0dWF0b3IvaHR0cHRyYWNlJykudGhlbihmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIHZhciBmaWx0ZXJEYXRhID0gW107CiAgICAgICAgdmFyIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlOwogICAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGRhdGEudHJhY2VzW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkgewogICAgICAgICAgICB2YXIgZCA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgaWYgKGQucmVxdWVzdC5tZXRob2QgIT09ICdPUFRJT05TJyAmJiBkLnJlcXVlc3QudXJpLmluZGV4T2YoJ2h0dHB0cmFjZScpID09PSAtMSkgewogICAgICAgICAgICAgIGZpbHRlckRhdGEucHVzaChkKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IgPSB0cnVlOwogICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5kYXRhU291cmNlID0gZmlsdGVyRGF0YTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGUpOwoKICAgICAgICBfdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+WSFRUUOS/oeaBr+Wksei0pScpOwogICAgICB9KS5maW5hbGx5KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgX3RoaXMudGFibGVMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["HttpTrace.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-skeleton active :loading=\"loading\" :paragraph=\"{rows: 17}\">\r\n    <a-card :bordered=\"false\" class=\"card-area\">\r\n\r\n      <a-alert type=\"info\" :showIcon=\"true\">\r\n        <div slot=\"message\">\r\n          共追踪到 {{ dataSource.length }} 条近期HTTP请求记录\r\n          <a-divider type=\"vertical\"/>\r\n          <a @click=\"handleClickUpdate\">立即刷新</a>\r\n        </div>\r\n      </a-alert>\r\n\r\n      <!-- 表格区域 -->\r\n      <a-table\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :pagination=\"pagination\"\r\n        :loading=\"tableLoading\"\r\n        :scroll=\"{ x: 900 }\"\r\n        style=\"margin-top: 20px;\"\r\n        @change=\"handleTableChange\">\r\n\r\n        <template slot=\"timeTaken\" slot-scope=\"text\">\r\n          <a-tag v-if=\"text < 500\" color=\"green\">{{ text }} ms</a-tag>\r\n          <a-tag v-else-if=\"text < 1000\" color=\"cyan\">{{ text }} ms</a-tag>\r\n          <a-tag v-else-if=\"text < 1500\" color=\"orange\">{{ text }} ms</a-tag>\r\n          <a-tag v-else color=\"red\">{{ text }} ms</a-tag>\r\n        </template>\r\n\r\n        <template slot=\"responseStatus\" slot-scope=\"text\">\r\n          <a-tag v-if=\"text < 200\" color=\"pink\">{{ text }} </a-tag>\r\n          <a-tag v-else-if=\"text < 201\" color=\"green\">{{ text }} </a-tag>\r\n          <a-tag v-else-if=\"text < 399\" color=\"cyan\">{{ text }} </a-tag>\r\n          <a-tag v-else-if=\"text < 403\" color=\"orange\">{{ text }} </a-tag>\r\n          <a-tag v-else-if=\"text < 501\" color=\"red\">{{ text }} </a-tag>\r\n          <span v-else>{{ text }}</span>\r\n        </template>\r\n\r\n        <template slot=\"requestMethod\" slot-scope=\"text\">\r\n          <a-tag v-if=\"text === 'GET'\" color=\"#87d068\">{{ text }}</a-tag>\r\n          <a-tag v-else-if=\"text === 'POST'\" color=\"#2db7f5\">{{ text }}</a-tag>\r\n          <a-tag v-else-if=\"text === 'PUT'\" color=\"#ffba5a\">{{ text }}</a-tag>\r\n          <a-tag v-else-if=\"text === 'DELETE'\" color=\"#f50\">{{ text }}</a-tag>\r\n          <span v-else>{{ text }} ms</span>\r\n        </template>\r\n\r\n      </a-table>\r\n\r\n    </a-card>\r\n  </a-skeleton>\r\n</template>\r\n\r\n<script>\r\n  import moment from 'moment'\r\n  import { getAction } from '@/api/manage'\r\n\r\n  moment.locale('zh-cn')\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        advanced: false,\r\n        dataSource: [],\r\n        pagination: {\r\n          defaultPageSize: 10,\r\n          defaultCurrent: 1,\r\n          pageSizeOptions: ['10', '20', '30', '40', '100'],\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          showTotal: (total, range) => `显示 ${range[0]} ~ ${range[1]} 条记录，共 ${total} 条记录`\r\n        },\r\n        loading: true,\r\n        tableLoading: true\r\n      }\r\n    },\r\n    computed: {\r\n      columns() {\r\n        return [{\r\n          title: '请求时间',\r\n          dataIndex: 'timestamp',\r\n          customRender(text) {\r\n            return moment(text).format('YYYY-MM-DD HH:mm:ss')\r\n          }\r\n        }, {\r\n          title: '请求方法',\r\n          dataIndex: 'request.method',\r\n          scopedSlots: { customRender: 'requestMethod' },\r\n          filters: [\r\n            { text: 'GET', value: 'GET' },\r\n            { text: 'POST', value: 'POST' },\r\n            { text: 'PUT', value: 'PUT' },\r\n            { text: 'DELETE', value: 'DELETE' }\r\n          ],\r\n          filterMultiple: true,\r\n          onFilter: (value, record) => record.request.method.includes(value)\r\n        }, {\r\n          title: '请求URL',\r\n          dataIndex: 'request.uri',\r\n          customRender(text) {\r\n            return text.split('?')[0]\r\n          }\r\n        }, {\r\n          title: '响应状态',\r\n          dataIndex: 'response.status',\r\n          scopedSlots: { customRender: 'responseStatus' }\r\n        }, {\r\n          title: '请求耗时',\r\n          dataIndex: 'timeTaken',\r\n          scopedSlots: { customRender: 'timeTaken' }\r\n        }]\r\n      }\r\n    },\r\n    mounted() {\r\n      this.fetch()\r\n    },\r\n    methods: {\r\n\r\n      handleClickUpdate() {\r\n        this.fetch()\r\n      },\r\n\r\n      handleTableChange() {\r\n        this.fetch()\r\n      },\r\n\r\n      fetch() {\r\n        this.tableLoading = true\r\n        getAction('actuator/httptrace').then((data) => {\r\n          let filterData = []\r\n          for (let d of data.traces) {\r\n            if (d.request.method !== 'OPTIONS' && d.request.uri.indexOf('httptrace') === -1) {\r\n              filterData.push(d)\r\n            }\r\n          }\r\n          this.dataSource = filterData\r\n        }).catch((e) => {\r\n          console.error(e)\r\n          this.$message.error('获取HTTP信息失败')\r\n        }).finally(() => {\r\n          this.loading = false\r\n          this.tableLoading = false\r\n        })\r\n      }\r\n\r\n    }\r\n  }\r\n</script>\r\n<style></style>\r\n"],"sourceRoot":"src/views/modules/monitor"}]}