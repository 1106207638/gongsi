{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeInputCell.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeInputCell.vue","mtime":1615948814715},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgSlZYRVR5cGVzIH0gZnJvbSAnQC9jb21wb25lbnRzL2plZWNnL0pWeGVUYWJsZSc7CmltcG9ydCBKVnhlQ2VsbE1peGlucyBmcm9tICdAL2NvbXBvbmVudHMvamVlY2cvSlZ4ZVRhYmxlL21peGlucy9KVnhlQ2VsbE1peGlucyc7CnZhciBOdW1iZXJSZWdFeHAgPSAvXi0/XGQrXC4/XGQqJC87CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSlZ4ZUlucHV0Q2VsbCcsCiAgbWl4aW5zOiBbSlZ4ZUNlbGxNaXhpbnNdLAogIG1ldGhvZHM6IHsKICAgIC8qKiDlpITnkIZjaGFuZ2Xkuovku7YgKi8KICAgIGhhbmRsZUNoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ2hhbmdlKGV2ZW50KSB7CiAgICAgIHZhciAkdHlwZSA9IHRoaXMuJHR5cGU7CiAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICAgIHZhciB2YWx1ZSA9IHRhcmdldC52YWx1ZSwKICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gdGFyZ2V0LnNlbGVjdGlvblN0YXJ0OwogICAgICB2YXIgY2hhbmdlID0gdHJ1ZTsKCiAgICAgIGlmICgkdHlwZSA9PT0gSlZYRVR5cGVzLmlucHV0TnVtYmVyKSB7CiAgICAgICAgLy8g5Yik5pat6L6T5YWl55qE5YC85piv5ZCm5Yy56YWN5pWw5a2X5q2j5YiZ6KGo6L6+5byP77yM5LiN5Yy56YWN5bCx6L+Y5Y6fCiAgICAgICAgaWYgKCFOdW1iZXJSZWdFeHAudGVzdCh2YWx1ZSkgJiYgdmFsdWUgIT09ICcnICYmIHZhbHVlICE9PSAnLScpIHsKICAgICAgICAgIGNoYW5nZSA9IGZhbHNlOwogICAgICAgICAgdmFsdWUgPSB0aGlzLmlubmVyVmFsdWU7CiAgICAgICAgICB0YXJnZXQudmFsdWUgPSB2YWx1ZSB8fCAnJzsKCiAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGlvblN0YXJ0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICB0YXJnZXQuc2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb25TdGFydCAtIDE7CiAgICAgICAgICAgIHRhcmdldC5zZWxlY3Rpb25FbmQgPSBzZWxlY3Rpb25TdGFydCAtIDE7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIOinpuWPkeS6i+S7tu+8jOWtmOWCqOi+k+WFpeeahOWAvAoKCiAgICAgIGlmIChjaGFuZ2UpIHsKICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZUNvbW1vbih2YWx1ZSk7CiAgICAgIH0KCiAgICAgIGlmICgkdHlwZSA9PT0gSlZYRVR5cGVzLmlucHV0TnVtYmVyKSB7Ly8gdGhpcy5yZWNhbGNPbmVTdGF0aXN0aWNzQ29sdW1uKGNvbC5rZXkpCiAgICAgIH0KICAgIH0sCgogICAgLyoqIOWkhOeQhmJsdXLlpLHljrvnhKbngrnkuovku7YgKi8KICAgIGhhbmRsZUJsdXI6IGZ1bmN0aW9uIGhhbmRsZUJsdXIoZXZlbnQpIHsKICAgICAgdmFyICR0eXBlID0gdGhpcy4kdHlwZTsKICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDsgLy8g5Yik5pat6L6T5YWl55qE5YC85piv5ZCm5Yy56YWN5pWw5a2X5q2j5YiZ6KGo6L6+5byP77yM5LiN5Yy56YWN5bCx572u56m6CgogICAgICBpZiAoJHR5cGUgPT09IEpWWEVUeXBlcy5pbnB1dE51bWJlcikgewogICAgICAgIGlmICghTnVtYmVyUmVnRXhwLnRlc3QodGFyZ2V0LnZhbHVlKSkgewogICAgICAgICAgdGFyZ2V0LnZhbHVlID0gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRhcmdldC52YWx1ZSA9IE51bWJlci5wYXJzZUZsb2F0KHRhcmdldC52YWx1ZSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmhhbmRsZUNoYW5nZUNvbW1vbih0YXJnZXQudmFsdWUpOwogICAgICB9CgogICAgICB0aGlzLmhhbmRsZUJsdXJDb21tb24odGFyZ2V0LnZhbHVlKTsKICAgIH0KICB9LAogIC8vIOOAkOe7hOS7tuWinuW8uuOAkeazqOmHiuivpuinge+8mkpWeGVDZWxsTWl4aW5zLmpzCiAgZW5oYW5jZWQ6IHsKICAgIGluc3RhbGxPcHRpb25zOiB7CiAgICAgIC8vIOiHquWKqOiBmueEpueahCBjbGFzcyDnsbvlkI0KICAgICAgYXV0b2ZvY3VzOiAnLmFudC1pbnB1dCcKICAgIH0sCiAgICBnZXRWYWx1ZTogZnVuY3Rpb24gZ2V0VmFsdWUodmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHR5cGUgPT09IEpWWEVUeXBlcy5pbnB1dE51bWJlciAmJiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgaWYgKE51bWJlclJlZ0V4cC50ZXN0KHZhbHVlKSkgewogICAgICAgICAgcmV0dXJuIE51bWJlci5wYXJzZUZsb2F0KHZhbHVlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB2YWx1ZTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["JVxeInputCell.vue"],"names":[],"mappings":";;;;;;;;;;AAWA,SAAA,SAAA,QAAA,8BAAA;AACA,OAAA,cAAA,MAAA,oDAAA;AAEA,IAAA,YAAA,GAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,eADA;AAEA,EAAA,MAAA,EAAA,CAAA,cAAA,CAFA;AAGA,EAAA,OAAA,EAAA;AAEA;AACA,IAAA,YAHA,wBAGA,KAHA,EAGA;AAAA,UACA,KADA,GACA,IADA,CACA,KADA;AAAA,UAEA,MAFA,GAEA,KAFA,CAEA,MAFA;AAAA,UAGA,KAHA,GAGA,MAHA,CAGA,KAHA;AAAA,UAGA,cAHA,GAGA,MAHA,CAGA,cAHA;AAIA,UAAA,MAAA,GAAA,IAAA;;AACA,UAAA,KAAA,KAAA,SAAA,CAAA,WAAA,EAAA;AACA;AACA,YAAA,CAAA,YAAA,CAAA,IAAA,CAAA,KAAA,CAAA,IAAA,KAAA,KAAA,EAAA,IAAA,KAAA,KAAA,GAAA,EAAA;AACA,UAAA,MAAA,GAAA,KAAA;AACA,UAAA,KAAA,GAAA,KAAA,UAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,KAAA,IAAA,EAAA;;AACA,cAAA,OAAA,cAAA,KAAA,QAAA,EAAA;AACA,YAAA,MAAA,CAAA,cAAA,GAAA,cAAA,GAAA,CAAA;AACA,YAAA,MAAA,CAAA,YAAA,GAAA,cAAA,GAAA,CAAA;AACA;AACA;AACA,OAhBA,CAiBA;;;AACA,UAAA,MAAA,EAAA;AACA,aAAA,kBAAA,CAAA,KAAA;AACA;;AAEA,UAAA,KAAA,KAAA,SAAA,CAAA,WAAA,EAAA,CACA;AACA;AACA,KA5BA;;AA8BA;AACA,IAAA,UA/BA,sBA+BA,KA/BA,EA+BA;AAAA,UACA,KADA,GACA,IADA,CACA,KADA;AAAA,UAEA,MAFA,GAEA,KAFA,CAEA,MAFA,EAGA;;AACA,UAAA,KAAA,KAAA,SAAA,CAAA,WAAA,EAAA;AACA,YAAA,CAAA,YAAA,CAAA,IAAA,CAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,EAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,MAAA,CAAA,UAAA,CAAA,MAAA,CAAA,KAAA,CAAA;AACA;;AACA,aAAA,kBAAA,CAAA,MAAA,CAAA,KAAA;AACA;;AAEA,WAAA,gBAAA,CAAA,MAAA,CAAA,KAAA;AACA;AA7CA,GAHA;AAmDA;AACA,EAAA,QAAA,EAAA;AACA,IAAA,cAAA,EAAA;AACA;AACA,MAAA,SAAA,EAAA;AAFA,KADA;AAKA,IAAA,QALA,oBAKA,KALA,EAKA;AACA,UAAA,KAAA,KAAA,KAAA,SAAA,CAAA,WAAA,IAAA,OAAA,KAAA,KAAA,QAAA,EAAA;AACA,YAAA,YAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA;AACA,iBAAA,MAAA,CAAA,UAAA,CAAA,KAAA,CAAA;AACA;AACA;;AACA,aAAA,KAAA;AACA;AAZA;AApDA,CAAA","sourcesContent":["<template>\r\n  <a-input\r\n    ref=\"input\"\r\n    :value=\"innerValue\"\r\n    v-bind=\"cellProps\"\r\n    @blur=\"handleBlur\"\r\n    @change=\"handleChange\"\r\n  />\r\n</template>\r\n\r\n<script>\r\n  import { JVXETypes } from '@/components/jeecg/JVxeTable'\r\n  import JVxeCellMixins from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\r\n\r\n  const NumberRegExp = /^-?\\d+\\.?\\d*$/\r\n  export default {\r\n    name: 'JVxeInputCell',\r\n    mixins: [JVxeCellMixins],\r\n    methods: {\r\n\r\n      /** 处理change事件 */\r\n      handleChange(event) {\r\n        let {$type} = this\r\n        let {target} = event\r\n        let {value, selectionStart} = target\r\n        let change = true\r\n        if ($type === JVXETypes.inputNumber) {\r\n          // 判断输入的值是否匹配数字正则表达式，不匹配就还原\r\n          if (!NumberRegExp.test(value) && (value !== '' && value !== '-')) {\r\n            change = false\r\n            value = this.innerValue\r\n            target.value = value || ''\r\n            if (typeof selectionStart === 'number') {\r\n              target.selectionStart = selectionStart - 1\r\n              target.selectionEnd = selectionStart - 1\r\n            }\r\n          }\r\n        }\r\n        // 触发事件，存储输入的值\r\n        if (change) {\r\n          this.handleChangeCommon(value)\r\n        }\r\n\r\n        if ($type === JVXETypes.inputNumber) {\r\n          // this.recalcOneStatisticsColumn(col.key)\r\n        }\r\n      },\r\n\r\n      /** 处理blur失去焦点事件 */\r\n      handleBlur(event) {\r\n        let {$type} = this\r\n        let {target} = event\r\n        // 判断输入的值是否匹配数字正则表达式，不匹配就置空\r\n        if ($type === JVXETypes.inputNumber) {\r\n          if (!NumberRegExp.test(target.value)) {\r\n            target.value = ''\r\n          } else {\r\n            target.value = Number.parseFloat(target.value)\r\n          }\r\n          this.handleChangeCommon(target.value)\r\n        }\r\n\r\n        this.handleBlurCommon(target.value)\r\n      },\r\n\r\n    },\r\n    // 【组件增强】注释详见：JVxeCellMixins.js\r\n    enhanced: {\r\n      installOptions: {\r\n        // 自动聚焦的 class 类名\r\n        autofocus: '.ant-input',\r\n      },\r\n      getValue(value) {\r\n        if (this.$type === JVXETypes.inputNumber && typeof value === 'string') {\r\n          if (NumberRegExp.test(value)) {\r\n            return Number.parseFloat(value)\r\n          }\r\n        }\r\n        return value\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/components/jeecg/JVxeTable/components/cells"}]}