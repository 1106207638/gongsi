{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\jeecg\\JVxeDemo\\demo\\SocketReload.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\jeecg\\JVxeDemo\\demo\\SocketReload.vue","mtime":1615948818513},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QWN0aW9uIH0gZnJvbSAnQGFwaS9tYW5hZ2UnOwppbXBvcnQgeyBKVlhFVHlwZXMgfSBmcm9tICdAL2NvbXBvbmVudHMvamVlY2cvSlZ4ZVRhYmxlJzsgLy8g5peg55eV5Yi35paw56S65L6LCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NvY2tldFJlbG9hZCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBkYXRhU291cmNlOiBbXSwKICAgICAgY29sdW1uczogW3sKICAgICAgICBrZXk6ICdudW0nLAogICAgICAgIHRpdGxlOiAn5bqP5Y+3JywKICAgICAgICB3aWR0aDogJzgwcHgnCiAgICAgIH0sIHsKICAgICAgICBrZXk6ICdzaGlwX25hbWUnLAogICAgICAgIHRpdGxlOiAn6Ii55ZCNJywKICAgICAgICB3aWR0aDogJzE4MHB4JywKICAgICAgICB0eXBlOiBKVlhFVHlwZXMuaW5wdXQKICAgICAgfSwgewogICAgICAgIGtleTogJ2NhbGwnLAogICAgICAgIHRpdGxlOiAn5ZG85Y+rJywKICAgICAgICB3aWR0aDogJzgwcHgnLAogICAgICAgIHR5cGU6IEpWWEVUeXBlcy5pbnB1dAogICAgICB9LCB7CiAgICAgICAga2V5OiAnbGVuJywKICAgICAgICB0aXRsZTogJ+mVvycsCiAgICAgICAgd2lkdGg6ICc4MHB4JywKICAgICAgICB0eXBlOiBKVlhFVHlwZXMuaW5wdXQKICAgICAgfSwgewogICAgICAgIGtleTogJ3RvbicsCiAgICAgICAgdGl0bGU6ICflkKgnLAogICAgICAgIHdpZHRoOiAnMTIwcHgnLAogICAgICAgIHR5cGU6IEpWWEVUeXBlcy5pbnB1dAogICAgICB9LCB7CiAgICAgICAga2V5OiAncGF5ZXInLAogICAgICAgIHRpdGxlOiAn5LuY5qy+5pa5JywKICAgICAgICB3aWR0aDogJzEyMHB4JywKICAgICAgICB0eXBlOiBKVlhFVHlwZXMuaW5wdXQKICAgICAgfSwgewogICAgICAgIGtleTogJ2NvdW50JywKICAgICAgICB0aXRsZTogJ+aVsCcsCiAgICAgICAgd2lkdGg6ICc0MHB4JwogICAgICB9LCB7CiAgICAgICAga2V5OiAnY29tcGFueScsCiAgICAgICAgdGl0bGU6ICflhazlj7gnLAogICAgICAgIG1pbldpZHRoOiAnMTgwcHgnLAogICAgICAgIHR5cGU6IEpWWEVUeXBlcy5pbnB1dAogICAgICB9LCB7CiAgICAgICAga2V5OiAndHJlbmQnLAogICAgICAgIHRpdGxlOiAn5Yqo5ZCRJywKICAgICAgICB3aWR0aDogJzEyMHB4JywKICAgICAgICB0eXBlOiBKVlhFVHlwZXMuaW5wdXQKICAgICAgfV0sCiAgICAgIC8vIOafpeivonVybOWcsOWdgAogICAgICB1cmw6IHsKICAgICAgICBnZXREYXRhOiAnL21vY2svdnhlL2dldERhdGEnCiAgICAgIH0sCiAgICAgIC8vIOaYr+WQpuWQr+eUqOaXpeWOhuWIt+aWsOaViOaenAogICAgICByZWxvYWRFZmZlY3Q6IGZhbHNlCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWKoOi9veaVsOaNrgogICAgbG9hZERhdGE6IGZ1bmN0aW9uIGxvYWREYXRhKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGZvcm1EYXRhID0gewogICAgICAgIHBhZ2VObzogMSwKICAgICAgICBwYWdlU2l6ZTogMjAwCiAgICAgIH07CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGdldEFjdGlvbih0aGlzLnVybC5nZXREYXRhLCBmb3JtRGF0YSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICBfdGhpcy5kYXRhU291cmNlID0gcmVzLnJlc3VsdC5yZWNvcmRzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kZXJyb3IoewogICAgICAgICAgICB0aXRsZTogJ+S4u+ihqOafpeivouWksei0pScsCiAgICAgICAgICAgIGNvbnRlbnQ6IHJlcy5tZXNzYWdlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5Y2V5YWD5qC857yW6L6R5a6M5oiQ5LmL5ZCO6Kem5Y+R55qE5LqL5Lu2CiAgICBoYW5kbGVFZGl0Q2xvc2VkOiBmdW5jdGlvbiBoYW5kbGVFZGl0Q2xvc2VkKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyICR0YWJsZSA9IGV2ZW50LiR0YWJsZSwKICAgICAgICAgIHJvdyA9IGV2ZW50LnJvdywKICAgICAgICAgIGNvbHVtbiA9IGV2ZW50LmNvbHVtbjsKICAgICAgdmFyIGZpZWxkID0gY29sdW1uLnByb3BlcnR5OwogICAgICB2YXIgY2VsbFZhbHVlID0gcm93W2ZpZWxkXTsgLy8g5Yik5pat5Y2V5YWD5qC85YC85piv5ZCm6KKr5L+u5pS5CgogICAgICBpZiAoJHRhYmxlLmlzVXBkYXRlQnlSb3cocm93LCBmaWVsZCkpIHsKICAgICAgICAvLyDmoKHpqozlvZPliY3ooYwKICAgICAgICAkdGFibGUudmFsaWRhdGUocm93KS50aGVuKGZ1bmN0aW9uIChlcnJNYXApIHsKICAgICAgICAgIC8vIOagoemqjOmAmui/hwogICAgICAgICAgaWYgKCFlcnJNYXApIHsKICAgICAgICAgICAgLy8g44CQ5qih5ouf5L+d5a2Y44CR77yI5q2k5aSE6ZyA6KaB5pu/5o2i5oiQ55yf5a6e55qE6K+35rGC77yJCiAgICAgICAgICAgIHZhciBoaWRlTG9hZGluZyA9IF90aGlzMi4kbWVzc2FnZS5sb2FkaW5nKCJcdTZCNjNcdTU3MjhcdTRGRERcdTVCNThcIiIuY29uY2F0KGNvbHVtbi50aXRsZSwgIlwiIiksIDApOwoKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTsKCiAgICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlLnN1Y2Nlc3MoIlwiIi5jb25jYXQoY29sdW1uLnRpdGxlLCAiXCJcdTRGRERcdTVCNThcdTYyMTBcdTUyOUZcdUZGMDEiKSk7IC8vIOWxgOmDqOabtOaWsOWNleWFg+agvOS4uuW3suS/neWtmOeKtuaAgQoKCiAgICAgICAgICAgICAgJHRhYmxlLnJlbG9hZFJvdyhyb3csIG51bGwsIGZpZWxkKTsgLy8g5Y+R6YCB5pu05paw5raI5oGvCgogICAgICAgICAgICAgIF90aGlzMi4kcmVmcy50YWJsZS5zb2NrZXRTZW5kVXBkYXRlUm93KHJvdyk7CiAgICAgICAgICAgIH0sIDU1NSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["SocketReload.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-card title=\"无痕刷新示例\" :bordered=\"false\">\r\n\r\n    <div style=\"margin-bottom: 8px;\">\r\n      <span>启用数据变动特效：</span>\r\n      <a-switch v-model=\"reloadEffect\"/>\r\n    </div>\r\n\r\n    <!--\r\n      【即时保存大体思路】：\r\n      1. 该功能依赖于【即时保存】功能，请先看即时保存示例\r\n      2. 必须要有 socket-reload 属性，且设为 true\r\n      3. 必须要有 socket-key 属性，该属性为当前表格的唯一标识，\r\n         系统会自动更新所有 socket-key 相同的表格\r\n      4. 在局部保存 edit-closed 事件中，\r\n         保存成功后调用 socketSendUpdateRow 方法，将当前 row 传递过去即可 （见第 108 行）\r\n    -->\r\n    <j-vxe-table\r\n      ref=\"table\"\r\n      row-number\r\n      row-selection\r\n\r\n      keep-source\r\n      socket-reload\r\n      socket-key=\"demo-socket-reload\"\r\n      :reload-effect=\"reloadEffect\"\r\n\r\n      :height=\"340\"\r\n      :loading=\"loading\"\r\n      :columns=\"columns\"\r\n      :dataSource=\"dataSource\"\r\n      @edit-closed=\"handleEditClosed\"\r\n    />\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import { getAction } from '@api/manage'\r\n  import { JVXETypes } from '@/components/jeecg/JVxeTable'\r\n\r\n  // 无痕刷新示例\r\n  export default {\r\n    name: 'SocketReload',\r\n    data() {\r\n      return {\r\n        loading: false,\r\n        dataSource: [],\r\n        columns: [\r\n          {key: 'num', title: '序号', width: '80px'},\r\n          {key: 'ship_name', title: '船名', width: '180px', type: JVXETypes.input},\r\n          {key: 'call', title: '呼叫', width: '80px', type: JVXETypes.input},\r\n          {key: 'len', title: '长', width: '80px', type: JVXETypes.input},\r\n          {key: 'ton', title: '吨', width: '120px', type: JVXETypes.input},\r\n          {key: 'payer', title: '付款方', width: '120px', type: JVXETypes.input},\r\n          {key: 'count', title: '数', width: '40px'},\r\n          {key: 'company', title: '公司', minWidth: '180px', type: JVXETypes.input},\r\n          {key: 'trend', title: '动向', width: '120px', type: JVXETypes.input},\r\n        ],\r\n        // 查询url地址\r\n        url: {\r\n          getData: '/mock/vxe/getData',\r\n        },\r\n        // 是否启用日历刷新效果\r\n        reloadEffect: false,\r\n      }\r\n    },\r\n    created() {\r\n      this.loadData()\r\n    },\r\n    methods: {\r\n      // 加载数据\r\n      loadData() {\r\n        let formData = {pageNo: 1, pageSize: 200}\r\n        this.loading = true\r\n        getAction(this.url.getData, formData).then(res => {\r\n          if (res.success) {\r\n            this.dataSource = res.result.records\r\n          } else {\r\n            this.$error({title: '主表查询失败', content: res.message})\r\n          }\r\n        }).finally(() => {\r\n          this.loading = false\r\n        })\r\n      },\r\n\r\n      // 单元格编辑完成之后触发的事件\r\n      handleEditClosed(event) {\r\n        let {$table, row, column} = event\r\n\r\n        let field = column.property\r\n        let cellValue = row[field]\r\n        // 判断单元格值是否被修改\r\n        if ($table.isUpdateByRow(row, field)) {\r\n          // 校验当前行\r\n          $table.validate(row).then((errMap) => {\r\n            // 校验通过\r\n            if (!errMap) {\r\n              // 【模拟保存】（此处需要替换成真实的请求）\r\n              let hideLoading = this.$message.loading(`正在保存\"${column.title}\"`, 0)\r\n              setTimeout(() => {\r\n                hideLoading()\r\n                this.$message.success(`\"${column.title}\"保存成功！`)\r\n                // 局部更新单元格为已保存状态\r\n                $table.reloadRow(row, null, field)\r\n                // 发送更新消息\r\n                this.$refs.table.socketSendUpdateRow(row)\r\n              }, 555)\r\n            }\r\n          })\r\n        }\r\n      },\r\n\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":"src/views/jeecg/JVxeDemo/demo"}]}