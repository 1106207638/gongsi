{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\src\\components\\jeecg\\dynamic\\load.js","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\dynamic\\load.js","mtime":1615948814842},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIGNhbGxiYWNrcyA9IFtdOwoKZnVuY3Rpb24gbG9hZFN1Y2Nlc3Moa2V5KSB7CiAgLy8gdG8gZml4ZWQgaHR0cHM6Ly9naXRodWIuY29tL1BhbkppYUNoZW4vdnVlLWVsZW1lbnQtYWRtaW4vaXNzdWVzLzIxNDQKICAvLyBjaGVjayBpcyBzdWNjZXNzZnVsbHkgZG93bmxvYWRlZCBzY3JpcHQKICByZXR1cm4gd2luZG93W2tleV07Cn0KCnZhciBsb2FkID0gZnVuY3Rpb24gbG9hZChzcmMsIHR5cGUsIGNhbGxiYWNrKSB7CiAgaWYgKHR5cGUgPT0gJ2xpbmsnKSB7CiAgICBsb2FkU3R5bGUoc3JjLCBjYWxsYmFjayk7CiAgfSBlbHNlIHsKICAgIHZhciBsb2FkS2V5ID0gJyc7CgogICAgaWYgKHNyYy5pbmRleE9mKCd0aW55bWNlJykgPj0gMCkgewogICAgICBsb2FkS2V5ID0gJ3RpbnltY2UnOwogICAgfSBlbHNlIGlmIChzcmMuaW5kZXhPZignY29kZW1pcnJvcicpID49IDApIHsKICAgICAgbG9hZEtleSA9ICdDb2RlTWlycm9yJzsKICAgIH0KCiAgICB2YXIgc2NyaXB0VGFnID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3JjKTsgLy9jb25zdCBjYiA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKCkge30KCiAgICBpZiAoIXNjcmlwdFRhZykgewogICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgIHNjcmlwdC5zcmMgPSBzcmM7IC8vIHNyYyB1cmwgZm9yIHRoZSB0aGlyZC1wYXJ0eSBsaWJyYXJ5IGJlaW5nIGxvYWRlZC4KCiAgICAgIHNjcmlwdC5pZCA9IHNyYzsKCiAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7CiAgICAgIH07CgogICAgICBzY3JpcHQub25lcnJvciA9IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2soJ+WKoOi9veWksei0pe+8micgKyBzcmMpOwogICAgICB9OwoKICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpOyAvL2NhbGxiYWNrcy5wdXNoKGNiKQogICAgICAvLyBjb25zdCBvbkVuZCA9ICdvbmxvYWQnIGluIHNjcmlwdCA/IHN0ZE9uRW5kIDogaWVPbkVuZAogICAgICAvLyBvbkVuZChzY3JpcHQpCiAgICB9IGVsc2UgewogICAgICBpZiAobG9hZFN1Y2Nlc3MobG9hZEtleSkpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9CgogICAgaWYgKHNjcmlwdFRhZykgewogICAgICAvKiBlbHNlIHsNCiAgICAgICAgIGNhbGxiYWNrcy5wdXNoKGNiKQ0KICAgICAgIH0qLwogICAgfQogIH0KCiAgZnVuY3Rpb24gc3RkT25FbmQoc2NyaXB0KSB7CiAgICBzY3JpcHRbJ29ubG9hZCddID0gZnVuY3Rpb24gKCkgewogICAgICAvLyB0aGlzLm9ubG9hZCA9IG51bGwgaGVyZSBpcyBuZWNlc3NhcnkKICAgICAgLy8gYmVjYXVzZSBldmVuIElFOSB3b3JrcyBub3QgbGlrZSBvdGhlcnMKICAgICAgdGhpcy5vbmVycm9yID0gdGhpcy5vbmxvYWQgPSBudWxsOwogICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlOwogICAgICB2YXIgX2l0ZXJhdG9yRXJyb3IgPSB1bmRlZmluZWQ7CgogICAgICB0cnkgewogICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IGNhbGxiYWNrc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHsKICAgICAgICAgIHZhciBfY2IgPSBfc3RlcC52YWx1ZTsKCiAgICAgICAgICBfY2IobnVsbCwgc2NyaXB0KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTsKICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikgewogICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNhbGxiYWNrcyA9IG51bGw7CiAgICB9OwoKICAgIHNjcmlwdFsnb25lcnJvciddID0gZnVuY3Rpb24gKCkgewogICAgICB0aGlzLm9uZXJyb3IgPSB0aGlzLm9ubG9hZCA9IG51bGw7CiAgICAgIGNiKG5ldyBFcnJvcignRmFpbGVkIHRvIGxvYWQgJyArIHNyYyksIHNjcmlwdCk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gaWVPbkVuZChzY3JpcHQpIHsKICAgIHNjcmlwdC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgIT09ICdjb21wbGV0ZScgJiYgdGhpcy5yZWFkeVN0YXRlICE9PSAnbG9hZGVkJykgcmV0dXJuOwogICAgICB0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IG51bGw7CiAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWU7CiAgICAgIHZhciBfZGlkSXRlcmF0b3JFcnJvcjIgPSBmYWxzZTsKICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yICh2YXIgX2l0ZXJhdG9yMiA9IGNhbGxiYWNrc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwMjsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IChfc3RlcDIgPSBfaXRlcmF0b3IyLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24yID0gdHJ1ZSkgewogICAgICAgICAgdmFyIF9jYjIgPSBfc3RlcDIudmFsdWU7CgogICAgICAgICAgX2NiMihudWxsLCBzY3JpcHQpOyAvLyB0aGVyZSBpcyBubyB3YXkgdG8gY2F0Y2ggbG9hZGluZyBlcnJvcnMgaW4gSUU4CgogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2RpZEl0ZXJhdG9yRXJyb3IyID0gdHJ1ZTsKICAgICAgICBfaXRlcmF0b3JFcnJvcjIgPSBlcnI7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgJiYgX2l0ZXJhdG9yMi5yZXR1cm4gIT0gbnVsbCkgewogICAgICAgICAgICBfaXRlcmF0b3IyLnJldHVybigpOwogICAgICAgICAgfQogICAgICAgIH0gZmluYWxseSB7CiAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IyKSB7CiAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNhbGxiYWNrcyA9IG51bGw7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gbG9hZFN0eWxlKHNyYywgY2FsbGJhY2spIHsKICAgIHZhciBsaW5rID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoc3JjKTsKCiAgICBpZiAoIWxpbmspIHsKICAgICAgdmFyIF9saW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpOwoKICAgICAgX2xpbmsuc2V0QXR0cmlidXRlKCJyZWwiLCAic3R5bGVzaGVldCIpOwoKICAgICAgX2xpbmsuc2V0QXR0cmlidXRlKCJ0eXBlIiwgInRleHQvY3NzIik7CgogICAgICBfbGluay5zZXRBdHRyaWJ1dGUoImhyZWYiLCBzcmMpOwoKICAgICAgX2xpbmsuaWQgPSBzcmM7CiAgICAgIHZhciBoZWFkcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCJoZWFkIik7CgogICAgICBpZiAoaGVhZHMubGVuZ3RoKSB7CiAgICAgICAgaGVhZHNbMF0uYXBwZW5kQ2hpbGQoX2xpbmspOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChfbGluayk7CiAgICAgIH0KICAgIH0KCiAgICBjYWxsYmFjaygpOwogIH0KfTsKCmV4cG9ydCBkZWZhdWx0IGxvYWQ7"},{"version":3,"sources":["D:/vue/src/components/jeecg/dynamic/load.js"],"names":["callbacks","loadSuccess","key","window","load","src","type","callback","loadStyle","loadKey","indexOf","scriptTag","document","getElementById","script","createElement","id","onload","onerror","body","appendChild","stdOnEnd","cb","Error","ieOnEnd","onreadystatechange","readyState","link","setAttribute","heads","getElementsByTagName","length","documentElement"],"mappings":"AAAA,IAAIA,SAAS,GAAG,EAAhB;;AAEA,SAASC,WAAT,CAAqBC,GAArB,EAA0B;AACxB;AACA;AACA,SAAOC,MAAM,CAACD,GAAD,CAAb;AACD;;AAED,IAAME,IAAI,GAAG,SAAPA,IAAO,CAACC,GAAD,EAAMC,IAAN,EAAYC,QAAZ,EAAyB;AACpC,MAAGD,IAAI,IAAE,MAAT,EAAgB;AAEdE,IAAAA,SAAS,CAACH,GAAD,EAAME,QAAN,CAAT;AACD,GAHD,MAGK;AACH,QAAIE,OAAO,GAAG,EAAd;;AACA,QAAGJ,GAAG,CAACK,OAAJ,CAAY,SAAZ,KAAwB,CAA3B,EAA6B;AAC3BD,MAAAA,OAAO,GAAG,SAAV;AACD,KAFD,MAEM,IAAGJ,GAAG,CAACK,OAAJ,CAAY,YAAZ,KAA2B,CAA9B,EAAgC;AACpCD,MAAAA,OAAO,GAAG,YAAV;AACD;;AACD,QAAME,SAAS,GAAGC,QAAQ,CAACC,cAAT,CAAwBR,GAAxB,CAAlB,CAPG,CAQH;;AACA,QAAI,CAACM,SAAL,EAAgB;AACd,UAAMG,MAAM,GAAGF,QAAQ,CAACG,aAAT,CAAuB,QAAvB,CAAf;AACAD,MAAAA,MAAM,CAACT,GAAP,GAAaA,GAAb,CAFc,CAEG;;AACjBS,MAAAA,MAAM,CAACE,EAAP,GAAYX,GAAZ;;AACAS,MAAAA,MAAM,CAACG,MAAP,GAAc;AAAA,eAAIV,QAAQ,EAAZ;AAAA,OAAd;;AACAO,MAAAA,MAAM,CAACI,OAAP,GAAe;AAAA,eAAIX,QAAQ,CAAC,UAAQF,GAAT,CAAZ;AAAA,OAAf;;AACAO,MAAAA,QAAQ,CAACO,IAAT,CAAcC,WAAd,CAA0BN,MAA1B,EANc,CAOd;AACD;AACA;AACA,KAVD,MAUK;AACH,UAAIb,WAAW,CAACQ,OAAD,CAAf,EAA0B;AACxBF,QAAAA,QAAQ;AACT;AACF;;AAED,QAAII,SAAJ,EAAe;AACd;;;AAGA;AACF;;AAED,WAASU,QAAT,CAAkBP,MAAlB,EAA0B;AACxBA,IAAAA,MAAM,CAAC,QAAD,CAAN,GAAmB,YAAW;AAC5B;AACA;AACA,WAAKI,OAAL,GAAe,KAAKD,MAAL,GAAc,IAA7B;AAH4B;AAAA;AAAA;;AAAA;AAI5B,6BAAiBjB,SAAjB,8HAA4B;AAAA,cAAjBsB,GAAiB;;AAC1BA,UAAAA,GAAE,CAAC,IAAD,EAAOR,MAAP,CAAF;AACD;AAN2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAO5Bd,MAAAA,SAAS,GAAG,IAAZ;AACD,KARD;;AASAc,IAAAA,MAAM,CAAC,SAAD,CAAN,GAAoB,YAAW;AAC7B,WAAKI,OAAL,GAAe,KAAKD,MAAL,GAAc,IAA7B;AACAK,MAAAA,EAAE,CAAC,IAAIC,KAAJ,CAAU,oBAAoBlB,GAA9B,CAAD,EAAqCS,MAArC,CAAF;AACD,KAHD;AAID;;AAED,WAASU,OAAT,CAAiBV,MAAjB,EAAyB;AACvBA,IAAAA,MAAM,CAACW,kBAAP,GAA4B,YAAW;AACrC,UAAI,KAAKC,UAAL,KAAoB,UAApB,IAAkC,KAAKA,UAAL,KAAoB,QAA1D,EAAoE;AACpE,WAAKD,kBAAL,GAA0B,IAA1B;AAFqC;AAAA;AAAA;;AAAA;AAGrC,8BAAiBzB,SAAjB,mIAA4B;AAAA,cAAjBsB,IAAiB;;AAC1BA,UAAAA,IAAE,CAAC,IAAD,EAAOR,MAAP,CAAF,CAD0B,CACT;;AAClB;AALoC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAMrCd,MAAAA,SAAS,GAAG,IAAZ;AACD,KAPD;AAQD;;AAED,WAASQ,SAAT,CAAmBH,GAAnB,EAAwBE,QAAxB,EAAkC;AAChC,QAAMoB,IAAI,GAAGf,QAAQ,CAACC,cAAT,CAAwBR,GAAxB,CAAb;;AACA,QAAI,CAACsB,IAAL,EAAW;AACT,UAAMA,KAAI,GAAGf,QAAQ,CAACG,aAAT,CAAuB,MAAvB,CAAb;;AACAY,MAAAA,KAAI,CAACC,YAAL,CAAkB,KAAlB,EAAyB,YAAzB;;AACAD,MAAAA,KAAI,CAACC,YAAL,CAAkB,MAAlB,EAA0B,UAA1B;;AACAD,MAAAA,KAAI,CAACC,YAAL,CAAkB,MAAlB,EAA0BvB,GAA1B;;AACAsB,MAAAA,KAAI,CAACX,EAAL,GAAUX,GAAV;AACA,UAAIwB,KAAK,GAAGjB,QAAQ,CAACkB,oBAAT,CAA8B,MAA9B,CAAZ;;AACA,UAAGD,KAAK,CAACE,MAAT,EAAgB;AACdF,QAAAA,KAAK,CAAC,CAAD,CAAL,CAAST,WAAT,CAAqBO,KAArB;AACD,OAFD,MAEK;AACHf,QAAAA,QAAQ,CAACoB,eAAT,CAAyBZ,WAAzB,CAAqCO,KAArC;AACD;AACF;;AACDpB,IAAAA,QAAQ;AACT;AAEF,CAjFD;;AAmFA,eAAeH,IAAf","sourcesContent":["let callbacks = []\r\n\r\nfunction loadSuccess(key) {\r\n  // to fixed https://github.com/PanJiaChen/vue-element-admin/issues/2144\r\n  // check is successfully downloaded script\r\n  return window[key]\r\n}\r\n\r\nconst load = (src, type, callback) => {\r\n  if(type=='link'){\r\n\r\n    loadStyle(src, callback)\r\n  }else{\r\n    let loadKey = ''\r\n    if(src.indexOf('tinymce')>=0){\r\n      loadKey = 'tinymce'\r\n    }else if(src.indexOf('codemirror')>=0){\r\n      loadKey = 'CodeMirror'\r\n    }\r\n    const scriptTag = document.getElementById(src)\r\n    //const cb = callback || function() {}\r\n    if (!scriptTag) {\r\n      const script = document.createElement('script')\r\n      script.src = src // src url for the third-party library being loaded.\r\n      script.id = src\r\n      script.onload=()=>callback()\r\n      script.onerror=()=>callback('加载失败：'+src)\r\n      document.body.appendChild(script)\r\n      //callbacks.push(cb)\r\n     // const onEnd = 'onload' in script ? stdOnEnd : ieOnEnd\r\n     // onEnd(script)\r\n    }else{\r\n      if (loadSuccess(loadKey)) {\r\n        callback()\r\n      }\r\n    }\r\n\r\n    if (scriptTag) {\r\n     /* else {\r\n        callbacks.push(cb)\r\n      }*/\r\n    }\r\n  }\r\n\r\n  function stdOnEnd(script) {\r\n    script['onload'] = function() {\r\n      // this.onload = null here is necessary\r\n      // because even IE9 works not like others\r\n      this.onerror = this.onload = null\r\n      for (const cb of callbacks) {\r\n        cb(null, script)\r\n      }\r\n      callbacks = null\r\n    }\r\n    script['onerror'] = function() {\r\n      this.onerror = this.onload = null\r\n      cb(new Error('Failed to load ' + src), script)\r\n    }\r\n  }\r\n\r\n  function ieOnEnd(script) {\r\n    script.onreadystatechange = function() {\r\n      if (this.readyState !== 'complete' && this.readyState !== 'loaded') return\r\n      this.onreadystatechange = null\r\n      for (const cb of callbacks) {\r\n        cb(null, script) // there is no way to catch loading errors in IE8\r\n      }\r\n      callbacks = null\r\n    }\r\n  }\r\n\r\n  function loadStyle(src, callback) {\r\n    const link = document.getElementById(src)\r\n    if (!link) {\r\n      const link = document.createElement('link')\r\n      link.setAttribute(\"rel\", \"stylesheet\");\r\n      link.setAttribute(\"type\", \"text/css\");\r\n      link.setAttribute(\"href\", src);\r\n      link.id = src\r\n      let heads = document.getElementsByTagName(\"head\")\r\n      if(heads.length){\r\n        heads[0].appendChild(link)\r\n      }else{\r\n        document.documentElement.appendChild(link)\r\n      }\r\n    }\r\n    callback();\r\n  }\r\n\r\n}\r\n\r\nexport default load\r\n"]}]}