{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\tools\\HeaderNotice.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\tools\\HeaderNotice.vue","mtime":1615948816699},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QWN0aW9uLCBwdXRBY3Rpb24gfSBmcm9tICdAL2FwaS9tYW5hZ2UnOwppbXBvcnQgU2hvd0Fubm91bmNlbWVudCBmcm9tICcuL1Nob3dBbm5vdW5jZW1lbnQnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZS8nOwppbXBvcnQgRHluYW1pY05vdGljZSBmcm9tICcuL0R5bmFtaWNOb3RpY2UnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkhlYWRlck5vdGljZSIsCiAgY29tcG9uZW50czogewogICAgRHluYW1pY05vdGljZTogRHluYW1pY05vdGljZSwKICAgIFNob3dBbm5vdW5jZW1lbnQ6IFNob3dBbm5vdW5jZW1lbnQKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkZGluZzogZmFsc2UsCiAgICAgIHVybDogewogICAgICAgIGxpc3RDZW1lbnRCeVVzZXI6ICIvc3lzL2Fubm91bnRDZW1lbnQvbGlzdEJ5VXNlciIsCiAgICAgICAgZWRpdENlbWVudFNlbmQ6ICIvc3lzL3N5c0Fubm91bmNlbWVudFNlbmQvZWRpdEJ5QW5udElkQW5kVXNlcklkIiwKICAgICAgICBxdWVyeUJ5SWQ6ICIvc3lzL2Fubm91bnRDZW1lbnQvcXVlcnlCeUlkIgogICAgICB9LAogICAgICBob3ZlcmVkOiBmYWxzZSwKICAgICAgYW5ub3VuY2VtZW50MTogW10sCiAgICAgIGFubm91bmNlbWVudDI6IFtdLAogICAgICBtc2cxQ291bnQ6ICIwIiwKICAgICAgbXNnMkNvdW50OiAiMCIsCiAgICAgIG1zZzFUaXRsZTogIumAmuefpSgwKSIsCiAgICAgIG1zZzJUaXRsZTogIiIsCiAgICAgIHN0b3BUaW1lcjogZmFsc2UsCiAgICAgIHdlYnNvY2s6IG51bGwsCiAgICAgIGxvY2tSZWNvbm5lY3Q6IGZhbHNlLAogICAgICBoZWFydENoZWNrOiBudWxsLAogICAgICBmb3JtRGF0YToge30sCiAgICAgIG9wZW5QYXRoOiAnJwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBtc2dUb3RhbDogZnVuY3Rpb24gbXNnVG90YWwoKSB7CiAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLm1zZzFDb3VudCkgKyBwYXJzZUludCh0aGlzLm1zZzJDb3VudCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdGhpcy5sb2FkRGF0YSgpOyAvL3RoaXMudGltZXJGdW4oKTsKICAgIC8vdGhpcy5pbml0V2ViU29ja2V0KCk7CiAgICAvLyB0aGlzLmhlYXJ0Q2hlY2tGdW4oKTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgLy8g56a75byA6aG16Z2i55Sf5ZG95ZGo5pyf5Ye95pWwCiAgICB0aGlzLndlYnNvY2tldE9uY2xvc2UoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHRpbWVyRnVuOiBmdW5jdGlvbiB0aW1lckZ1bigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuc3RvcFRpbWVyID0gZmFsc2U7CiAgICAgIHZhciBteVRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIC8vIOWBnOatouWumuaXtuWZqAogICAgICAgIGlmIChfdGhpcy5zdG9wVGltZXIgPT0gdHJ1ZSkgewogICAgICAgICAgY2xlYXJJbnRlcnZhbChteVRpbWVyKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIF90aGlzLmxvYWREYXRhKCk7CiAgICAgIH0sIDYwMDApOwogICAgfSwKICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0cnkgewogICAgICAgIC8vIOiOt+WPluezu+e7n+a2iOaBrwogICAgICAgIGdldEFjdGlvbih0aGlzLnVybC5saXN0Q2VtZW50QnlVc2VyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICBfdGhpczIuYW5ub3VuY2VtZW50MSA9IHJlcy5yZXN1bHQuYW5udE1zZ0xpc3Q7CiAgICAgICAgICAgIF90aGlzMi5tc2cxQ291bnQgPSByZXMucmVzdWx0LmFubnRNc2dUb3RhbDsKICAgICAgICAgICAgX3RoaXMyLm1zZzFUaXRsZSA9ICLpgJrnn6UoIiArIHJlcy5yZXN1bHQuYW5udE1zZ1RvdGFsICsgIikiOwogICAgICAgICAgICBfdGhpczIuYW5ub3VuY2VtZW50MiA9IHJlcy5yZXN1bHQuc3lzTXNnTGlzdDsKICAgICAgICAgICAgX3RoaXMyLm1zZzJDb3VudCA9IHJlcy5yZXN1bHQuc3lzTXNnVG90YWw7CiAgICAgICAgICAgIF90aGlzMi5tc2cyVGl0bGUgPSAi57O757uf5raI5oGvKCIgKyByZXMucmVzdWx0LnN5c01zZ1RvdGFsICsgIikiOwogICAgICAgICAgfQogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgLy9jb25zb2xlLmxvZygi57O757uf5raI5oGv6YCa55+l5byC5bi4IixlcnJvcik7Ly/ov5nooYzmiZPljbBwZXJtaXNzaW9uTmFtZSBpcyB1bmRlZmluZWQKICAgICAgICAgIF90aGlzMi5zdG9wVGltZXIgPSB0cnVlOyAvL2NvbnNvbGUubG9nKCLmuIXnkIZ0aW1lciIpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLnN0b3BUaW1lciA9IHRydWU7IC8vY29uc29sZS5sb2coIumAmuefpeW8guW4uCIsZXJyKTsKICAgICAgfQogICAgfSwKICAgIGZldGNoTm90aWNlOiBmdW5jdGlvbiBmZXRjaE5vdGljZSgpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBpZiAodGhpcy5sb2FkZGluZykgewogICAgICAgIHRoaXMubG9hZGRpbmcgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMubG9hZGRpbmcgPSB0cnVlOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMubG9hZGRpbmcgPSBmYWxzZTsKICAgICAgfSwgMjAwKTsKICAgIH0sCiAgICBzaG93QW5ub3VuY2VtZW50OiBmdW5jdGlvbiBzaG93QW5ub3VuY2VtZW50KHJlY29yZCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHB1dEFjdGlvbih0aGlzLnVybC5lZGl0Q2VtZW50U2VuZCwgewogICAgICAgIGFubnRJZDogcmVjb3JkLmlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgX3RoaXM0LmxvYWREYXRhKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5ob3ZlcmVkID0gZmFsc2U7CgogICAgICBpZiAocmVjb3JkLm9wZW5UeXBlID09PSAnY29tcG9uZW50JykgewogICAgICAgIHRoaXMub3BlblBhdGggPSByZWNvcmQub3BlblBhZ2U7CiAgICAgICAgdGhpcy5mb3JtRGF0YSA9IHsKICAgICAgICAgIGlkOiByZWNvcmQuYnVzSWQKICAgICAgICB9OwogICAgICAgIHRoaXMuJHJlZnMuc2hvd0R5bmFtTm90aWNlLmRldGFpbChyZWNvcmQub3BlblBhZ2UpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJlZnMuU2hvd0Fubm91bmNlbWVudC5kZXRhaWwocmVjb3JkKTsKICAgICAgfQogICAgfSwKICAgIHRvTXlBbm5vdW5jZW1lbnQ6IGZ1bmN0aW9uIHRvTXlBbm5vdW5jZW1lbnQoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2lzcHMvdXNlckFubm91bmNlbWVudCcKICAgICAgfSk7CiAgICB9LAogICAgbW9kYWxGb3JtT2s6IGZ1bmN0aW9uIG1vZGFsRm9ybU9rKCkge30sCiAgICBoYW5kbGVIb3ZlckNoYW5nZTogZnVuY3Rpb24gaGFuZGxlSG92ZXJDaGFuZ2UodmlzaWJsZSkgewogICAgICB0aGlzLmhvdmVyZWQgPSB2aXNpYmxlOwogICAgfSwKICAgIGluaXRXZWJTb2NrZXQ6IGZ1bmN0aW9uIGluaXRXZWJTb2NrZXQoKSB7CiAgICAgIC8vIFdlYlNvY2tldOS4juaZrumAmueahOivt+axguaJgOeUqOWNj+iuruacieaJgOS4jeWQjO+8jHdz562J5ZCM5LqOaHR0cO+8jHdzc+etieWQjOS6jmh0dHBzCiAgICAgIHZhciB1c2VySWQgPSBzdG9yZS5nZXR0ZXJzLnVzZXJJbmZvLmlkOwogICAgICB2YXIgdXJsID0gd2luZG93Ll9DT05GSUdbJ2RvbWlhblVSTCddLnJlcGxhY2UoImh0dHBzOi8vIiwgIndzczovLyIpLnJlcGxhY2UoImh0dHA6Ly8iLCAid3M6Ly8iKSArICIvd2Vic29ja2V0LyIgKyB1c2VySWQ7IC8vY29uc29sZS5sb2codXJsKTsKCiAgICAgIHRoaXMud2Vic29jayA9IG5ldyBXZWJTb2NrZXQodXJsKTsKICAgICAgdGhpcy53ZWJzb2NrLm9ub3BlbiA9IHRoaXMud2Vic29ja2V0T25vcGVuOwogICAgICB0aGlzLndlYnNvY2sub25lcnJvciA9IHRoaXMud2Vic29ja2V0T25lcnJvcjsKICAgICAgdGhpcy53ZWJzb2NrLm9ubWVzc2FnZSA9IHRoaXMud2Vic29ja2V0T25tZXNzYWdlOwogICAgICB0aGlzLndlYnNvY2sub25jbG9zZSA9IHRoaXMud2Vic29ja2V0T25jbG9zZTsKICAgIH0sCiAgICB3ZWJzb2NrZXRPbm9wZW46IGZ1bmN0aW9uIHdlYnNvY2tldE9ub3BlbigpIHsvL2NvbnNvbGUubG9nKCJXZWJTb2NrZXTov57mjqXmiJDlip8iKTsKICAgICAgLy/lv4Pot7Pmo4DmtYvph43nva4KICAgICAgLy90aGlzLmhlYXJ0Q2hlY2sucmVzZXQoKS5zdGFydCgpOwogICAgfSwKICAgIHdlYnNvY2tldE9uZXJyb3I6IGZ1bmN0aW9uIHdlYnNvY2tldE9uZXJyb3IoZSkgewogICAgICAvL2NvbnNvbGUubG9nKCJXZWJTb2NrZXTov57mjqXlj5HnlJ/plJnor68iKTsKICAgICAgdGhpcy5yZWNvbm5lY3QoKTsKICAgIH0sCiAgICB3ZWJzb2NrZXRPbm1lc3NhZ2U6IGZ1bmN0aW9uIHdlYnNvY2tldE9ubWVzc2FnZShlKSB7CiAgICAgIC8vY29uc29sZS5sb2coIi0tLS0t5o6l5pS25raI5oGvLS0tLS0tLSIsZS5kYXRhKTsKICAgICAgdmFyIGRhdGEgPSBldmFsKCIoIiArIGUuZGF0YSArICIpIik7IC8v6Kej5p6Q5a+56LGhCgogICAgICBpZiAoZGF0YS5jbWQgPT0gInRvcGljIikgewogICAgICAgIC8v57O757uf6YCa55+lCiAgICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgICB9IGVsc2UgaWYgKGRhdGEuY21kID09ICJ1c2VyIikgewogICAgICAgIC8v55So5oi35raI5oGvCiAgICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgICB9IC8v5b+D6Lez5qOA5rWL6YeN572uCiAgICAgIC8vdGhpcy5oZWFydENoZWNrLnJlc2V0KCkuc3RhcnQoKTsKCiAgICB9LAogICAgd2Vic29ja2V0T25jbG9zZTogZnVuY3Rpb24gd2Vic29ja2V0T25jbG9zZShlKSB7CiAgICAgIC8vY29uc29sZS5sb2coImNvbm5lY3Rpb24gY2xvc2VkICgiICsgZSArICIpIik7CiAgICAgIGlmIChlKSB7Ly9jb25zb2xlLmxvZygiY29ubmVjdGlvbiBjbG9zZWQgKCIgKyBlLmNvZGUgKyAiKSIpOwogICAgICB9CgogICAgICB0aGlzLnJlY29ubmVjdCgpOwogICAgfSwKICAgIHdlYnNvY2tldFNlbmQ6IGZ1bmN0aW9uIHdlYnNvY2tldFNlbmQodGV4dCkgewogICAgICAvLyDmlbDmja7lj5HpgIEKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLndlYnNvY2suc2VuZCh0ZXh0KTsKICAgICAgfSBjYXRjaCAoZXJyKSB7Ly9jb25zb2xlLmxvZygic2VuZCBmYWlsZWQgKCIgKyBlcnIuY29kZSArICIpIik7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuTm90aWZpY2F0aW9uOiBmdW5jdGlvbiBvcGVuTm90aWZpY2F0aW9uKGRhdGEpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB2YXIgdGV4dCA9IGRhdGEubXNnVHh0OwogICAgICB2YXIga2V5ID0gIm9wZW4iLmNvbmNhdChEYXRlLm5vdygpKTsKICAgICAgdGhpcy4kbm90aWZpY2F0aW9uLm9wZW4oewogICAgICAgIG1lc3NhZ2U6ICfmtojmga/mj5DphpInLAogICAgICAgIHBsYWNlbWVudDogJ2JvdHRvbVJpZ2h0JywKICAgICAgICBkZXNjcmlwdGlvbjogdGV4dCwKICAgICAgICBrZXk6IGtleSwKICAgICAgICBidG46IGZ1bmN0aW9uIGJ0bihoKSB7CiAgICAgICAgICByZXR1cm4gaCgnYS1idXR0b24nLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgdHlwZTogJ3ByaW1hcnknLAogICAgICAgICAgICAgIHNpemU6ICdzbWFsbCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb246IHsKICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LnNob3dEZXRhaWwoa2V5LCBkYXRhKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sICfmn6XnnIvor6bmg4UnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlY29ubmVjdDogZnVuY3Rpb24gcmVjb25uZWN0KCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIGlmICh0aGF0LmxvY2tSZWNvbm5lY3QpIHJldHVybjsKICAgICAgdGhhdC5sb2NrUmVjb25uZWN0ID0gdHJ1ZTsgLy/msqHov57mjqXkuIrkvJrkuIDnm7Tph43ov57vvIzorr7nva7lu7bov5/pgb/lhY3or7fmsYLov4flpJoKCiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIC8vY29uc29sZS5pbmZvKCLlsJ3or5Xph43ov54uLi4iKTsKICAgICAgICB0aGF0LmluaXRXZWJTb2NrZXQoKTsKICAgICAgICB0aGF0LmxvY2tSZWNvbm5lY3QgPSBmYWxzZTsKICAgICAgfSwgNTAwMCk7CiAgICB9LAogICAgaGVhcnRDaGVja0Z1bjogZnVuY3Rpb24gaGVhcnRDaGVja0Z1bigpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvL+W/g+i3s+ajgOa1iyzmr48yMHPlv4Pot7PkuIDmrKEKCiAgICAgIHRoYXQuaGVhcnRDaGVjayA9IHsKICAgICAgICB0aW1lb3V0OiAyMDAwMCwKICAgICAgICB0aW1lb3V0T2JqOiBudWxsLAogICAgICAgIHNlcnZlclRpbWVvdXRPYmo6IG51bGwsCiAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dE9iaik7IC8vY2xlYXJUaW1lb3V0KHRoaXMuc2VydmVyVGltZW91dE9iaik7CgogICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfSwKICAgICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoKSB7CiAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICAgICB0aGlzLnRpbWVvdXRPYmogPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgLy/ov5nph4zlj5HpgIHkuIDkuKrlv4Pot7PvvIzlkI7nq6/mlLbliLDlkI7vvIzov5Tlm57kuIDkuKrlv4Pot7Pmtojmga/vvIwKICAgICAgICAgICAgLy9vbm1lc3NhZ2Xmi7/liLDov5Tlm57nmoTlv4Pot7PlsLHor7TmmI7ov57mjqXmraPluLgKICAgICAgICAgICAgdGhhdC53ZWJzb2NrZXRTZW5kKCJIZWFydEJlYXQiKTsgLy9jb25zb2xlLmluZm8oIuWuouaIt+err+WPkemAgeW/g+i3syIpOwogICAgICAgICAgICAvL3NlbGYuc2VydmVyVGltZW91dE9iaiA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsvL+WmguaenOi2hei/h+S4gOWumuaXtumXtOi/mOayoemHjee9ru+8jOivtOaYjuWQjuerr+S4u+WKqOaWreW8gOS6hgogICAgICAgICAgICAvLyAgdGhhdC53ZWJzb2NrLmNsb3NlKCk7Ly/lpoLmnpxvbmNsb3Nl5Lya5omn6KGMcmVjb25uZWN077yM5oiR5Lus5omn6KGMd3MuY2xvc2UoKeWwseihjOS6hi7lpoLmnpznm7TmjqXmiafooYxyZWNvbm5lY3Qg5Lya6Kem5Y+Rb25jbG9zZeWvvOiHtOmHjei/nuS4pOasoQogICAgICAgICAgICAvL30sIHNlbGYudGltZW91dCkKICAgICAgICAgIH0sIHRoaXMudGltZW91dCk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIHNob3dEZXRhaWw6IGZ1bmN0aW9uIHNob3dEZXRhaWwoa2V5LCBkYXRhKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgdGhpcy4kbm90aWZpY2F0aW9uLmNsb3NlKGtleSk7CiAgICAgIHZhciBpZCA9IGRhdGEubXNnSWQ7CiAgICAgIGdldEFjdGlvbih0aGlzLnVybC5xdWVyeUJ5SWQsIHsKICAgICAgICBpZDogaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB2YXIgcmVjb3JkID0gcmVzLnJlc3VsdDsKCiAgICAgICAgICBfdGhpczYuc2hvd0Fubm91bmNlbWVudChyZWNvcmQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["HeaderNotice.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <a-popover\r\n    trigger=\"click\"\r\n    placement=\"bottomRight\"\r\n    :autoAdjustOverflow=\"true\"\r\n    :arrowPointAtCenter=\"true\"\r\n    overlayClassName=\"header-notice-wrapper\"\r\n    @visibleChange=\"handleHoverChange\"\r\n    :overlayStyle=\"{ width: '300px', top: '50px' }\">\r\n    <template slot=\"content\">\r\n      <a-spin :spinning=\"loadding\">\r\n        <a-tabs>\r\n          <a-tab-pane :tab=\"msg1Title\" key=\"1\">\r\n            <!--<a-list>\r\n              <a-list-item>\r\n                <a-list-item-meta title=\"你收到了 14 份新周报\" description=\"一年前\">\r\n                  <a-avatar style=\"background-color: white\" slot=\"avatar\" src=\"https://gw.alipayobjects.com/zos/rmsportal/ThXAXghbEsBCCSDihZxY.png\"/>\r\n                </a-list-item-meta>\r\n              </a-list-item>\r\n              <a-list-item>\r\n                <a-list-item-meta title=\"你推荐的 IT大牛 已通过第三轮面试\" description=\"一年前\">\r\n                  <a-avatar style=\"background-color: white\" slot=\"avatar\" src=\"https://gw.alipayobjects.com/zos/rmsportal/OKJXDXrmkNshAMvwtvhu.png\"/>\r\n                </a-list-item-meta>\r\n              </a-list-item>\r\n              <a-list-item>\r\n                <a-list-item-meta title=\"这种模板可以区分多种通知类型\" description=\"一年前\">\r\n                  <a-avatar style=\"background-color: white\" slot=\"avatar\" src=\"https://gw.alipayobjects.com/zos/rmsportal/kISTdvpyTAhtGxpovNWd.png\"/>\r\n                </a-list-item-meta>\r\n              </a-list-item>\r\n            </a-list>-->\r\n            <a-list>\r\n              <a-list-item :key=\"index\" v-for=\"(record, index) in announcement1\">\r\n                <div style=\"margin-left: 5%;width: 80%\">\r\n                  <p><a @click=\"showAnnouncement(record)\">{{ record.titile }}</a></p>\r\n                  <p style=\"color: rgba(0,0,0,.45);margin-bottom: 0px\">{{ record.createTime }} 发布</p>\r\n                </div>\r\n                <div style=\"text-align: right\">\r\n                  <a-tag @click=\"showAnnouncement(record)\" v-if=\"record.priority === 'L'\" color=\"blue\">一般消息</a-tag>\r\n                  <a-tag @click=\"showAnnouncement(record)\" v-if=\"record.priority === 'M'\" color=\"orange\">重要消息</a-tag>\r\n                  <a-tag @click=\"showAnnouncement(record)\" v-if=\"record.priority === 'H'\" color=\"red\">紧急消息</a-tag>\r\n                </div>\r\n              </a-list-item>\r\n              <div style=\"margin-top: 5px;text-align: center\">\r\n                <a-button @click=\"toMyAnnouncement()\" type=\"dashed\" block>查看更多</a-button>\r\n              </div>\r\n            </a-list>\r\n          </a-tab-pane>\r\n          <a-tab-pane :tab=\"msg2Title\" key=\"2\">\r\n            <a-list>\r\n              <a-list-item :key=\"index\" v-for=\"(record, index) in announcement2\">\r\n                <div style=\"margin-left: 5%;width: 80%\">\r\n                  <p><a @click=\"showAnnouncement(record)\">{{ record.titile }}</a></p>\r\n                  <p style=\"color: rgba(0,0,0,.45);margin-bottom: 0px\">{{ record.createTime }} 发布</p>\r\n                </div>\r\n                <div style=\"text-align: right\">\r\n                  <a-tag @click=\"showAnnouncement(record)\" v-if=\"record.priority === 'L'\" color=\"blue\">一般消息</a-tag>\r\n                  <a-tag @click=\"showAnnouncement(record)\" v-if=\"record.priority === 'M'\" color=\"orange\">重要消息</a-tag>\r\n                  <a-tag @click=\"showAnnouncement(record)\" v-if=\"record.priority === 'H'\" color=\"red\">紧急消息</a-tag>\r\n                </div>\r\n              </a-list-item>\r\n              <div style=\"margin-top: 5px;text-align: center\">\r\n                <a-button @click=\"toMyAnnouncement()\" type=\"dashed\" block>查看更多</a-button>\r\n              </div>\r\n            </a-list>\r\n          </a-tab-pane>\r\n        </a-tabs>\r\n      </a-spin>\r\n    </template>\r\n    <span @click=\"fetchNotice\" class=\"header-notice\">\r\n      <a-badge :count=\"msgTotal\">\r\n        <a-icon style=\"font-size: 16px; padding: 4px\" type=\"bell\" />\r\n      </a-badge>\r\n    </span>\r\n    <show-announcement ref=\"ShowAnnouncement\" @ok=\"modalFormOk\"></show-announcement>\r\n    <dynamic-notice ref=\"showDynamNotice\" :path=\"openPath\" :formData=\"formData\"/>\r\n  </a-popover>\r\n</template>\r\n\r\n<script>\r\n  import { getAction,putAction } from '@/api/manage'\r\n  import ShowAnnouncement from './ShowAnnouncement'\r\n  import store from '@/store/'\r\n  import DynamicNotice from './DynamicNotice'\r\n\r\n\r\n  export default {\r\n    name: \"HeaderNotice\",\r\n    components: {\r\n      DynamicNotice,\r\n      ShowAnnouncement,\r\n    },\r\n    data () {\r\n      return {\r\n        loadding: false,\r\n        url:{\r\n          listCementByUser:\"/sys/annountCement/listByUser\",\r\n          editCementSend:\"/sys/sysAnnouncementSend/editByAnntIdAndUserId\",\r\n          queryById:\"/sys/annountCement/queryById\",\r\n        },\r\n        hovered: false,\r\n        announcement1:[],\r\n        announcement2:[],\r\n        msg1Count:\"0\",\r\n        msg2Count:\"0\",\r\n        msg1Title:\"通知(0)\",\r\n        msg2Title:\"\",\r\n        stopTimer:false,\r\n        websock: null,\r\n        lockReconnect:false,\r\n        heartCheck:null,\r\n        formData:{},\r\n        openPath:''\r\n      }\r\n    },\r\n    computed:{\r\n      msgTotal () {\r\n        return parseInt(this.msg1Count)+parseInt(this.msg2Count);\r\n      }\r\n    },\r\n    mounted() {\r\n      this.loadData();\r\n      //this.timerFun();\r\n      //this.initWebSocket();\r\n     // this.heartCheckFun();\r\n    },\r\n    destroyed: function () { // 离开页面生命周期函数\r\n      this.websocketOnclose();\r\n    },\r\n    methods: {\r\n      timerFun() {\r\n        this.stopTimer = false;\r\n        let myTimer = setInterval(()=>{\r\n          // 停止定时器\r\n          if (this.stopTimer == true) {\r\n            clearInterval(myTimer);\r\n            return;\r\n          }\r\n          this.loadData()\r\n        },6000)\r\n      },\r\n      loadData (){\r\n        try {\r\n          // 获取系统消息\r\n          getAction(this.url.listCementByUser).then((res) => {\r\n            if (res.success) {\r\n              this.announcement1 = res.result.anntMsgList;\r\n              this.msg1Count = res.result.anntMsgTotal;\r\n              this.msg1Title = \"通知(\" + res.result.anntMsgTotal + \")\";\r\n              this.announcement2 = res.result.sysMsgList;\r\n              this.msg2Count = res.result.sysMsgTotal;\r\n              this.msg2Title = \"系统消息(\" + res.result.sysMsgTotal + \")\";\r\n            }\r\n          }).catch(error => {\r\n            //console.log(\"系统消息通知异常\",error);//这行打印permissionName is undefined\r\n            this.stopTimer = true;\r\n            //console.log(\"清理timer\");\r\n          });\r\n        } catch (err) {\r\n          this.stopTimer = true;\r\n          //console.log(\"通知异常\",err);\r\n        }\r\n      },\r\n      fetchNotice () {\r\n        if (this.loadding) {\r\n          this.loadding = false\r\n          return\r\n        }\r\n        this.loadding = true\r\n        setTimeout(() => {\r\n          this.loadding = false\r\n        }, 200)\r\n      },\r\n      showAnnouncement(record){\r\n        putAction(this.url.editCementSend,{anntId:record.id}).then((res)=>{\r\n          if(res.success){\r\n            this.loadData();\r\n          }\r\n        });\r\n        this.hovered = false;\r\n        if(record.openType==='component'){\r\n          this.openPath = record.openPage;\r\n          this.formData = {id:record.busId};\r\n          this.$refs.showDynamNotice.detail(record.openPage);\r\n        }else{\r\n          this.$refs.ShowAnnouncement.detail(record);\r\n        }\r\n      },\r\n      toMyAnnouncement(){\r\n        this.$router.push({\r\n          path: '/isps/userAnnouncement'\r\n        });\r\n      },\r\n      modalFormOk(){\r\n      },\r\n      handleHoverChange (visible) {\r\n        this.hovered = visible;\r\n      },\r\n\r\n      initWebSocket: function () {\r\n        // WebSocket与普通的请求所用协议有所不同，ws等同于http，wss等同于https\r\n        var userId = store.getters.userInfo.id;\r\n        var url = window._CONFIG['domianURL'].replace(\"https://\",\"wss://\").replace(\"http://\",\"ws://\")+\"/websocket/\"+userId;\r\n        //console.log(url);\r\n        this.websock = new WebSocket(url);\r\n        this.websock.onopen = this.websocketOnopen;\r\n        this.websock.onerror = this.websocketOnerror;\r\n        this.websock.onmessage = this.websocketOnmessage;\r\n        this.websock.onclose = this.websocketOnclose;\r\n      },\r\n      websocketOnopen: function () {\r\n        //console.log(\"WebSocket连接成功\");\r\n        //心跳检测重置\r\n        //this.heartCheck.reset().start();\r\n      },\r\n      websocketOnerror: function (e) {\r\n        //console.log(\"WebSocket连接发生错误\");\r\n        this.reconnect();\r\n      },\r\n      websocketOnmessage: function (e) {\r\n        //console.log(\"-----接收消息-------\",e.data);\r\n        var data = eval(\"(\" + e.data + \")\"); //解析对象\r\n        if(data.cmd == \"topic\"){\r\n            //系统通知\r\n          this.loadData();\r\n        }else if(data.cmd == \"user\"){\r\n            //用户消息\r\n          this.loadData();\r\n        }\r\n        //心跳检测重置\r\n        //this.heartCheck.reset().start();\r\n      },\r\n      websocketOnclose: function (e) {\r\n        //console.log(\"connection closed (\" + e + \")\");\r\n        if(e){\r\n          //console.log(\"connection closed (\" + e.code + \")\");\r\n        }\r\n        this.reconnect();\r\n      },\r\n      websocketSend(text) { // 数据发送\r\n        try {\r\n          this.websock.send(text);\r\n        } catch (err) {\r\n          //console.log(\"send failed (\" + err.code + \")\");\r\n        }\r\n      },\r\n\r\n      openNotification (data) {\r\n        var text = data.msgTxt;\r\n        const key = `open${Date.now()}`;\r\n        this.$notification.open({\r\n          message: '消息提醒',\r\n          placement:'bottomRight',\r\n          description: text,\r\n          key,\r\n          btn: (h)=>{\r\n            return h('a-button', {\r\n              props: {\r\n                type: 'primary',\r\n                size: 'small',\r\n              },\r\n              on: {\r\n                click: () => this.showDetail(key,data)\r\n              }\r\n            }, '查看详情')\r\n          },\r\n        });\r\n      },\r\n\r\n      reconnect() {\r\n        var that = this;\r\n        if(that.lockReconnect) return;\r\n        that.lockReconnect = true;\r\n        //没连接上会一直重连，设置延迟避免请求过多\r\n        setTimeout(function () {\r\n          //console.info(\"尝试重连...\");\r\n          that.initWebSocket();\r\n          that.lockReconnect = false;\r\n        }, 5000);\r\n      },\r\n      heartCheckFun(){\r\n        var that = this;\r\n        //心跳检测,每20s心跳一次\r\n        that.heartCheck = {\r\n          timeout: 20000,\r\n          timeoutObj: null,\r\n          serverTimeoutObj: null,\r\n          reset: function(){\r\n            clearTimeout(this.timeoutObj);\r\n            //clearTimeout(this.serverTimeoutObj);\r\n            return this;\r\n          },\r\n          start: function(){\r\n            var self = this;\r\n            this.timeoutObj = setTimeout(function(){\r\n              //这里发送一个心跳，后端收到后，返回一个心跳消息，\r\n              //onmessage拿到返回的心跳就说明连接正常\r\n              that.websocketSend(\"HeartBeat\");\r\n              //console.info(\"客户端发送心跳\");\r\n              //self.serverTimeoutObj = setTimeout(function(){//如果超过一定时间还没重置，说明后端主动断开了\r\n              //  that.websock.close();//如果onclose会执行reconnect，我们执行ws.close()就行了.如果直接执行reconnect 会触发onclose导致重连两次\r\n              //}, self.timeout)\r\n            }, this.timeout)\r\n          }\r\n        }\r\n      },\r\n\r\n\r\n      showDetail(key,data){\r\n        this.$notification.close(key);\r\n        var id = data.msgId;\r\n        getAction(this.url.queryById,{id:id}).then((res) => {\r\n          if (res.success) {\r\n            var record = res.result;\r\n            this.showAnnouncement(record);\r\n          }\r\n        })\r\n\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"css\">\r\n  .header-notice-wrapper {\r\n    top: 50px !important;\r\n  }\r\n</style>\r\n<style lang=\"less\" scoped>\r\n  .header-notice{\r\n    display: inline-block;\r\n    transition: all 0.3s;\r\n\r\n    span {\r\n      vertical-align: initial;\r\n    }\r\n  }\r\n</style>"],"sourceRoot":"src/components/tools"}]}