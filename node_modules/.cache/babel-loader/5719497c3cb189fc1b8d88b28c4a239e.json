{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\JVxeCells\\JVxeImageCell.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\JVxeCells\\JVxeImageCell.vue","mtime":1615948813429},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0RmlsZUFjY2Vzc0h0dHBVcmwgfSBmcm9tICdAYXBpL21hbmFnZSc7CmltcG9ydCBKVnhlQ2VsbE1peGlucyBmcm9tICdAL2NvbXBvbmVudHMvamVlY2cvSlZ4ZVRhYmxlL21peGlucy9KVnhlQ2VsbE1peGlucyc7CmltcG9ydCB7IEFDQ0VTU19UT0tFTiB9IGZyb20gJ0Avc3RvcmUvbXV0YXRpb24tdHlwZXMnOwppbXBvcnQgSkZpbGVQb3AgZnJvbSAnQC9jb21wb25lbnRzL2plZWNnL21pbmlwb3AvSkZpbGVQb3AnOwppbXBvcnQgSlZ4ZVVwbG9hZENlbGwgZnJvbSAnQC9jb21wb25lbnRzL2plZWNnL0pWeGVUYWJsZS9jb21wb25lbnRzL2NlbGxzL0pWeGVVcGxvYWRDZWxsJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdKVnhlSW1hZ2VDZWxsJywKICBtaXhpbnM6IFtKVnhlQ2VsbE1peGluc10sCiAgY29tcG9uZW50czogewogICAgSkZpbGVQb3A6IEpGaWxlUG9wCiAgfSwKICBwcm9wczoge30sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlubmVyRmlsZTogbnVsbCwKICAgICAgbnVtYmVyOiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC8qKiB1cGxvYWQgaGVhZGVycyAqLwogICAgdXBsb2FkSGVhZGVyczogZnVuY3Rpb24gdXBsb2FkSGVhZGVycygpIHsKICAgICAgdmFyIGNvbCA9IHRoaXMub3JpZ2luQ29sdW1uOwogICAgICB2YXIgaGVhZGVycyA9IHt9OwoKICAgICAgaWYgKGNvbC50b2tlbiA9PT0gdHJ1ZSkgewogICAgICAgIGhlYWRlcnNbJ1gtQWNjZXNzLVRva2VuJ10gPSB0aGlzLiRscy5nZXQoQUNDRVNTX1RPS0VOKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGhlYWRlcnM7CiAgICB9LAoKICAgIC8qKiDkuIrkvKDor7fmsYLlnLDlnYAgKi8KICAgIHVwbG9hZEFjdGlvbjogZnVuY3Rpb24gdXBsb2FkQWN0aW9uKCkgewogICAgICBpZiAoIXRoaXMub3JpZ2luQ29sdW1uLmFjdGlvbikgewogICAgICAgIHJldHVybiB3aW5kb3cuX0NPTkZJR1snZG9taWFuVVJMJ10gKyAnL3N5cy9jb21tb24vdXBsb2FkJzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5Db2x1bW4uYWN0aW9uOwogICAgICB9CiAgICB9LAogICAgaGFzRmlsZTogZnVuY3Rpb24gaGFzRmlsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5uZXJGaWxlICE9IG51bGw7CiAgICB9LAoKICAgIC8qKiDpooTop4jlm77niYflnLDlnYAgKi8KICAgIGltZ1NyYzogZnVuY3Rpb24gaW1nU3JjKCkgewogICAgICBpZiAodGhpcy5pbm5lckZpbGUpIHsKICAgICAgICBpZiAodGhpcy5pbm5lckZpbGVbJ3VybCddKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5pbm5lckZpbGVbJ3VybCddOwogICAgICAgIH0gZWxzZSBpZiAodGhpcy5pbm5lckZpbGVbJ3BhdGgnXSkgewogICAgICAgICAgdmFyIHBhdGggPSB0aGlzLmlubmVyRmlsZVsncGF0aCddLnNwbGl0KCcsJylbMF07CiAgICAgICAgICByZXR1cm4gZ2V0RmlsZUFjY2Vzc0h0dHBVcmwocGF0aCk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgcmVzcG9uc2VOYW1lOiBmdW5jdGlvbiByZXNwb25zZU5hbWUoKSB7CiAgICAgIGlmICh0aGlzLm9yaWdpbkNvbHVtbi5yZXNwb25zZU5hbWUpIHsKICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5Db2x1bW4ucmVzcG9uc2VOYW1lOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnbWVzc2FnZSc7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBpbm5lclZhbHVlOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICBpZiAodGhpcy5pbm5lclZhbHVlKSB7CiAgICAgICAgICB0aGlzLmlubmVyRmlsZSA9IHRoaXMuaW5uZXJWYWx1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5pbm5lckZpbGUgPSBudWxsOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g54K55Ye75pu05aSa5oyJ6ZKuCiAgICBoYW5kbGVNb3JlT3BlcmF0aW9uOiBmdW5jdGlvbiBoYW5kbGVNb3JlT3BlcmF0aW9uKG9yaWdpbkNvbHVtbikgewogICAgICAvL3VwZGF0ZS1iZWdpbi1hdXRob3I6d2FuZ3NodWFpIGRhdGU6MjAyMDEwMjEgZm9yOkxPV0NPRC05Njkg5Yik5pat5Lyg6L+H5p2l55qE5a2X5q615piv5ZCm5a2Y5ZyobnVtYmVy77yM55So5LqO5o6n5Yi25LiK5Lyg5paH5Lu2CiAgICAgIGlmIChvcmlnaW5Db2x1bW4ubnVtYmVyKSB7CiAgICAgICAgdGhpcy5udW1iZXIgPSBvcmlnaW5Db2x1bW4ubnVtYmVyOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubnVtYmVyID0gMDsKICAgICAgfSAvL3VwZGF0ZS1lbmQtYXV0aG9yOndhbmdzaHVhaSBkYXRlOjIwMjAxMDIxIGZvcjpMT1dDT0QtOTY5IOWIpOaWreS8oOi/h+adpeeahOWtl+auteaYr+WQpuWtmOWcqG51bWJlcu+8jOeUqOS6juaOp+WItuS4iuS8oOaWh+S7tgoKCiAgICAgIGlmIChvcmlnaW5Db2x1bW4gJiYgb3JpZ2luQ29sdW1uLmZpZWxkRXh0ZW5kSnNvbikgewogICAgICAgIHZhciBqc29uID0gSlNPTi5wYXJzZShvcmlnaW5Db2x1bW4uZmllbGRFeHRlbmRKc29uKTsKICAgICAgICB0aGlzLm51bWJlciA9IGpzb24udXBsb2FkbnVtID8ganNvbi51cGxvYWRudW0gOiAwOwogICAgICB9CgogICAgICB2YXIgcGF0aCA9ICcnOwoKICAgICAgaWYgKHRoaXMuaW5uZXJGaWxlKSB7CiAgICAgICAgcGF0aCA9IHRoaXMuaW5uZXJGaWxlLnBhdGg7CiAgICAgIH0KCiAgICAgIHRoaXMuJHJlZnMuZmlsZVBvcC5zaG93KCcnLCBwYXRoLCAnaW1nJyk7CiAgICB9LAogICAgLy8g5pu05aSa5LiK5Lyg5Zue6LCDCiAgICBoYW5kbGVGaWxlU3VjY2VzczogZnVuY3Rpb24gaGFuZGxlRmlsZVN1Y2Nlc3MoZmlsZSkgewogICAgICBpZiAoZmlsZSkgewogICAgICAgIHRoaXMuaW5uZXJGaWxlLnBhdGggPSBmaWxlLnBhdGg7CiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2VDb21tb24odGhpcy5pbm5lckZpbGUpOwogICAgICB9CiAgICB9LAogICAgLy8g5by55Ye65LiK5Lyg5Ye66ZSZ6K+m57uG5L+h5oGvCiAgICBoYW5kbGVDbGlja1Nob3dJbWFnZUVycm9yOiBmdW5jdGlvbiBoYW5kbGVDbGlja1Nob3dJbWFnZUVycm9yKCkgewogICAgICB2YXIgZmlsZSA9IHRoaXMuaW5uZXJGaWxlIHx8IG51bGw7CgogICAgICBpZiAoZmlsZSAmJiBmaWxlWydtZXNzYWdlJ10pIHsKICAgICAgICB0aGlzLiRlcnJvcih7CiAgICAgICAgICB0aXRsZTogJ+S4iuS8oOWHuumUmScsCiAgICAgICAgICBjb250ZW50OiAn6ZSZ6K+v5L+h5oGv77yaJyArIGZpbGVbJ21lc3NhZ2UnXSwKICAgICAgICAgIG1hc2tDbG9zYWJsZTogdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlVXBsb2FkOiBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VVcGxvYWQoaW5mbykgewogICAgICB2YXIgY29sID0gdGhpcy5vcmlnaW5Db2x1bW47CiAgICAgIHZhciBmaWxlID0gaW5mby5maWxlOwogICAgICB2YXIgdmFsdWUgPSB7CiAgICAgICAgbmFtZTogZmlsZS5uYW1lLAogICAgICAgIHR5cGU6IGZpbGUudHlwZSwKICAgICAgICBzaXplOiBmaWxlLnNpemUsCiAgICAgICAgc3RhdHVzOiBmaWxlLnN0YXR1cywKICAgICAgICBwZXJjZW50OiBmaWxlLnBlcmNlbnQKICAgICAgfTsKCiAgICAgIGlmIChmaWxlLnJlc3BvbnNlKSB7CiAgICAgICAgdmFsdWVbJ3Jlc3BvbnNlTmFtZSddID0gZmlsZS5yZXNwb25zZVt0aGlzLnJlc3BvbnNlTmFtZV07CiAgICAgIH0KCiAgICAgIGlmIChmaWxlLnN0YXR1cyA9PT0gJ2RvbmUnKSB7CiAgICAgICAgdmFsdWVbJ3BhdGgnXSA9IGZpbGUucmVzcG9uc2VbdGhpcy5yZXNwb25zZU5hbWVdOwogICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlQ29tbW9uKHZhbHVlKTsKICAgICAgfSBlbHNlIGlmIChmaWxlLnN0YXR1cyA9PT0gJ2Vycm9yJykgewogICAgICAgIHZhbHVlWydtZXNzYWdlJ10gPSBmaWxlLnJlc3BvbnNlLm1lc3NhZ2UgfHwgJ+acquefpemUmeivryc7CiAgICAgIH0KCiAgICAgIHRoaXMuaW5uZXJGaWxlID0gdmFsdWU7CiAgICB9LAogICAgaGFuZGxlQ2xpY2tEb3dubG9hZEZpbGU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrRG93bmxvYWRGaWxlKCkgewogICAgICBpZiAodGhpcy5pbWdTcmMpIHsKICAgICAgICB3aW5kb3cub3Blbih0aGlzLmltZ1NyYyk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVDbGlja0RlbGV0ZUZpbGU6IGZ1bmN0aW9uIGhhbmRsZUNsaWNrRGVsZXRlRmlsZSgpIHsKICAgICAgdGhpcy5oYW5kbGVDaGFuZ2VDb21tb24obnVsbCk7CiAgICB9CiAgfSwKICAvLyDjgJDnu4Tku7blop7lvLrjgJHms6jph4ror6bop4HvvJpKVnhlQ2VsbE1peGlucy5qcwogIGVuaGFuY2VkOiB7CiAgICBzd2l0Y2hlczogewogICAgICB2aXNpYmxlOiB0cnVlCiAgICB9LAogICAgZ2V0VmFsdWU6IGZ1bmN0aW9uIGdldFZhbHVlKHZhbHVlKSB7CiAgICAgIHJldHVybiBKVnhlVXBsb2FkQ2VsbC5lbmhhbmNlZC5nZXRWYWx1ZSh2YWx1ZSk7CiAgICB9LAogICAgc2V0VmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHZhbHVlKSB7CiAgICAgIHJldHVybiBKVnhlVXBsb2FkQ2VsbC5lbmhhbmNlZC5zZXRWYWx1ZSh2YWx1ZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["JVxeImageCell.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <template v-if=\"hasFile\" v-for=\"(file, fileKey) of [innerFile || {}]\">\r\n      <div :key=\"fileKey\" style=\"position: relative;\">\r\n        <template v-if=\"!file || !(file['url'] || file['path'] || file['message'])\">\r\n          <a-tooltip :title=\"'请稍后: ' + JSON.stringify (file) + ((file['url'] || file['path'] || file['message']))\">\r\n            <a-icon type=\"loading\"/>\r\n          </a-tooltip>\r\n        </template>\r\n        <template v-else-if=\"file['path']\">\r\n          <img class=\"j-editable-image\" :src=\"imgSrc\" alt=\"无图片\" @click=\"handleMoreOperation\"/>\r\n        </template>\r\n        <template v-else>\r\n          <a-icon type=\"exclamation-circle\" style=\"color: red;\" @click=\"handleClickShowImageError\"/>\r\n        </template>\r\n        <template slot=\"addonBefore\" style=\"width: 30px\">\r\n          <a-tooltip v-if=\"file.status==='uploading'\" :title=\"`上传中(${Math.floor(file.percent)}%)`\">\r\n            <a-icon type=\"loading\"/>\r\n          </a-tooltip>\r\n          <a-tooltip v-else-if=\"file.status==='done'\" title=\"上传完成\">\r\n            <a-icon type=\"check-circle\" style=\"color:#00DB00;\"/>\r\n          </a-tooltip>\r\n          <a-tooltip v-else title=\"上传失败\">\r\n            <a-icon type=\"exclamation-circle\" style=\"color:red;\"/>\r\n          </a-tooltip>\r\n        </template>\r\n\r\n        <template style=\"width: 30px\">\r\n          <a-dropdown :trigger=\"['click']\" placement=\"bottomRight\" style=\"margin-left: 10px;\">\r\n            <a-tooltip title=\"操作\">\r\n              <a-icon\r\n                v-if=\"file.status!=='uploading'\"\r\n                type=\"setting\"\r\n                style=\"cursor: pointer;\"/>\r\n            </a-tooltip>\r\n\r\n            <a-menu slot=\"overlay\">\r\n              <a-menu-item v-if=\"originColumn.allowDownload !== false\" @click=\"handleClickDownloadFile\">\r\n                <span><a-icon type=\"download\"/>&nbsp;下载</span>\r\n              </a-menu-item>\r\n              <a-menu-item v-if=\"originColumn.allowRemove !== false\" @click=\"handleClickDeleteFile\">\r\n                <span><a-icon type=\"delete\"/>&nbsp;删除</span>\r\n              </a-menu-item>\r\n              <a-menu-item @click=\"handleMoreOperation(originColumn)\">\r\n                <span><a-icon type=\"bars\"/> 更多</span>\r\n              </a-menu-item>\r\n            </a-menu>\r\n          </a-dropdown>\r\n        </template>\r\n\r\n      </div>\r\n    </template>\r\n    <a-upload\r\n      v-show=\"!hasFile\"\r\n      name=\"file\"\r\n      :data=\"{'isup': 1}\"\r\n      :multiple=\"false\"\r\n      :action=\"uploadAction\"\r\n      :headers=\"uploadHeaders\"\r\n      :showUploadList=\"false\"\r\n      v-bind=\"cellProps\"\r\n      @change=\"handleChangeUpload\"\r\n    >\r\n      <a-button icon=\"upload\">{{originColumn.btnText || '上传图片'}}</a-button>\r\n    </a-upload>\r\n    <j-file-pop ref=\"filePop\" @ok=\"handleFileSuccess\" :number=\"number\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { getFileAccessHttpUrl } from '@api/manage'\r\n  import JVxeCellMixins from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\r\n  import { ACCESS_TOKEN } from '@/store/mutation-types'\r\n  import JFilePop from '@/components/jeecg/minipop/JFilePop'\r\n\r\n  import JVxeUploadCell from '@/components/jeecg/JVxeTable/components/cells/JVxeUploadCell'\r\n\r\n  export default {\r\n    name: 'JVxeImageCell',\r\n    mixins: [JVxeCellMixins],\r\n    components: {JFilePop},\r\n    props: {},\r\n    data() {\r\n      return {\r\n        innerFile: null,\r\n        number:0\r\n      }\r\n    },\r\n    computed: {\r\n      /** upload headers */\r\n      uploadHeaders() {\r\n        let {originColumn: col} = this\r\n        let headers = {}\r\n        if (col.token === true) {\r\n          headers['X-Access-Token'] = this.$ls.get(ACCESS_TOKEN)\r\n        }\r\n        return headers\r\n      },\r\n\r\n      /** 上传请求地址 */\r\n      uploadAction() {\r\n        if (!this.originColumn.action) {\r\n          return window._CONFIG['domianURL'] + '/sys/common/upload'\r\n        } else {\r\n          return this.originColumn.action\r\n        }\r\n      },\r\n\r\n      hasFile() {\r\n        return this.innerFile != null\r\n      },\r\n\r\n      /** 预览图片地址 */\r\n      imgSrc() {\r\n        if (this.innerFile) {\r\n          if (this.innerFile['url']) {\r\n            return this.innerFile['url']\r\n          } else if (this.innerFile['path']) {\r\n            let path = this.innerFile['path'].split(',')[0]\r\n            return getFileAccessHttpUrl(path)\r\n          }\r\n        }\r\n        return ''\r\n      },\r\n\r\n      responseName() {\r\n        if (this.originColumn.responseName) {\r\n          return this.originColumn.responseName\r\n        } else {\r\n          return 'message'\r\n        }\r\n      },\r\n\r\n    },\r\n    watch: {\r\n      innerValue: {\r\n        immediate: true,\r\n        handler() {\r\n          if (this.innerValue) {\r\n            this.innerFile = this.innerValue\r\n          } else {\r\n            this.innerFile = null\r\n          }\r\n        },\r\n      },\r\n    },\r\n    methods: {\r\n\r\n      // 点击更多按钮\r\n      handleMoreOperation(originColumn) {\r\n        //update-begin-author:wangshuai date:20201021 for:LOWCOD-969 判断传过来的字段是否存在number，用于控制上传文件\r\n        if (originColumn.number) {\r\n          this.number = originColumn.number\r\n        } else {\r\n          this.number = 0\r\n        }\r\n        //update-end-author:wangshuai date:20201021 for:LOWCOD-969 判断传过来的字段是否存在number，用于控制上传文件\r\n        if(originColumn && originColumn.fieldExtendJson){\r\n          let json = JSON.parse(originColumn.fieldExtendJson);\r\n          this.number = json.uploadnum?json.uploadnum:0;\r\n        }\r\n        let path = ''\r\n        if (this.innerFile) {\r\n          path = this.innerFile.path\r\n        }\r\n        this.$refs.filePop.show('', path, 'img')\r\n      },\r\n\r\n      // 更多上传回调\r\n      handleFileSuccess(file) {\r\n        if (file) {\r\n          this.innerFile.path = file.path\r\n          this.handleChangeCommon(this.innerFile)\r\n        }\r\n      },\r\n\r\n      // 弹出上传出错详细信息\r\n      handleClickShowImageError() {\r\n        let file = this.innerFile || null\r\n        if (file && file['message']) {\r\n          this.$error({title: '上传出错', content: '错误信息：' + file['message'], maskClosable: true})\r\n        }\r\n      },\r\n\r\n      handleChangeUpload(info) {\r\n        let {originColumn: col} = this\r\n        let {file} = info\r\n        let value = {\r\n          name: file.name,\r\n          type: file.type,\r\n          size: file.size,\r\n          status: file.status,\r\n          percent: file.percent\r\n        }\r\n        if (file.response) {\r\n          value['responseName'] = file.response[this.responseName]\r\n        }\r\n        if (file.status === 'done') {\r\n          value['path'] = file.response[this.responseName]\r\n          this.handleChangeCommon(value)\r\n        } else if (file.status === 'error') {\r\n          value['message'] = file.response.message || '未知错误'\r\n        }\r\n        this.innerFile = value\r\n      },\r\n\r\n      handleClickDownloadFile() {\r\n        if (this.imgSrc) {\r\n          window.open(this.imgSrc)\r\n        }\r\n      },\r\n\r\n      handleClickDeleteFile() {\r\n        this.handleChangeCommon(null)\r\n      },\r\n\r\n    },\r\n    // 【组件增强】注释详见：JVxeCellMixins.js\r\n    enhanced: {\r\n      switches: {visible: true},\r\n      getValue: value => JVxeUploadCell.enhanced.getValue(value),\r\n      setValue: value => JVxeUploadCell.enhanced.setValue(value),\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .j-editable-image {\r\n    height: 32px;\r\n    max-width: 100px !important;\r\n    cursor: pointer;\r\n\r\n    &:hover {\r\n      opacity: 0.8;\r\n    }\r\n\r\n    &:active {\r\n      opacity: 0.6;\r\n    }\r\n\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/components/JVxeCells"}]}