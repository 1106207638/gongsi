{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\jeecg\\JeecgPdfView.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\jeecg\\JeecgPdfView.vue","mtime":1615948819750},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgZ2V0QWN0aW9uIH0gZnJvbSAnQC9hcGkvbWFuYWdlJzsKaW1wb3J0IHsgQUNDRVNTX1RPS0VOIH0gZnJvbSAiQC9zdG9yZS9tdXRhdGlvbi10eXBlcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFBkZlByZXZpZXdNb2RhbCBmcm9tICcuL21vZHVsZXMvUGRmUHJldmlld01vZGFsJzsKdmFyIG1vY2tkYXRhID0gW3sKICAiaWQiOiAiMSIsCiAgImtleSI6ICIxIiwKICAidGl0bGUiOiAi5a6e5L6LLnBkZiIsCiAgImZpbGVDb2RlIjogInNoaWxpIiwKICAiZmlsZU5hbWUiOiAi5a6e5L6LIiwKICAiZmlsZVBkZlBhdGgiOiAi5a6e5L6LIgp9XTsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJKZWVjZ1BkZlZpZXciLAogIGNvbXBvbmVudHM6IHsKICAgIFBkZlByZXZpZXdNb2RhbDogUGRmUHJldmlld01vZGFsCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGVzY3JpcHRpb246ICdQREbpooTop4jpobXpnaInLAogICAgICAvLyDmlofku7bnsbvlnovpm4YKICAgICAgdHJlZURhdGE6IFt7CiAgICAgICAgdGl0bGU6ICfmiYDmnIlQREbnlLXlrZDmoaMnLAogICAgICAgIGtleTogJzAtMCcsCiAgICAgICAgY2hpbGRyZW46IG1vY2tkYXRhCiAgICAgIH1dLAogICAgICAvLyDmlofku7bmlbDmja7pm4YKICAgICAgZGF0YVNvdXJjZTogbW9ja2RhdGEsCiAgICAgIGFsbERhdGE6IG1vY2tkYXRhLAogICAgICAvLyDkuIrkvKDmlofku7bpm4YKICAgICAgZGVmYXVsdEV4cGFuZEFsbDogdHJ1ZSwKICAgICAgLy8g5Yqg6L295LitCiAgICAgIHNwaW5uaW5nOiBmYWxzZSwKICAgICAgdXJsOiB7CiAgICAgICAgcGRmTGlzdDogIi9tb2NrL2FwaS9wZGZMaXN0IgogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsvL3RoaXMubG9hZERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWREYXRhOiBmdW5jdGlvbiBsb2FkRGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuc3Bpbm5pbmcgPSBmYWxzZTsKICAgICAgZ2V0QWN0aW9uKHRoaXMudXJsLnBkZkxpc3QpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgX3RoaXMuYWxsRGF0YSA9IHJlczsKICAgICAgICAgIF90aGlzLmRhdGFTb3VyY2UgPSByZXM7CiAgICAgICAgICBfdGhpcy50cmVlRGF0YVswXS5jaGlsZHJlbiA9IHJlczsKICAgICAgICB9CgogICAgICAgIF90aGlzLnNwaW5uaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHBkZlByZXZpZXc6IGZ1bmN0aW9uIHBkZlByZXZpZXcodGl0bGUpIHsKICAgICAgdmFyIHRva2VuID0gVnVlLmxzLmdldChBQ0NFU1NfVE9LRU4pOwogICAgICB0aGlzLmhlYWRlcnMgPSB7CiAgICAgICAgIlgtQWNjZXNzLVRva2VuIjogdG9rZW4KICAgICAgfTsKICAgICAgdGhpcy4kcmVmcy5wZGZtb2RhbC5wcmV2aWV3RmlsZXModGl0bGUsIHRva2VuKTsKICAgIH0sCiAgICAvLyDpgInmi6nmlofku7bnsbvlnosKICAgIG9uU2VsZWN0OiBmdW5jdGlvbiBvblNlbGVjdChzZWxlY3RlZEtleXMsIGluZm8pIHsKICAgICAgdGhpcy5kYXRhU291cmNlID0gW107CgogICAgICBpZiAoc2VsZWN0ZWRLZXlzWzBdID09PSB1bmRlZmluZWQgfHwgc2VsZWN0ZWRLZXlzWzBdID09PSAnMC0wJykgewogICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IHRoaXMuYWxsRGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmRhdGFTb3VyY2UucHVzaChpbmZvLm5vZGUuX3Byb3BzLmRhdGFSZWYpOwogICAgICB9CgogICAgICBjb25zb2xlLmxvZygiU0VMRUNULS0+ZGF0YVNvdXJjZSIsIHRoaXMuZGF0YVNvdXJjZSk7CiAgICB9LAogICAgLy8gbW9kZWzlm57osIMKICAgIG1vZGFsRm9ybU9rOiBmdW5jdGlvbiBtb2RhbEZvcm1PaygpIHsKICAgICAgdGhpcy5sb2FkRGF0YSgpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["JeecgPdfView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2CA,SAAA,SAAA,QAAA,cAAA;AACA,SAAA,YAAA,QAAA,wBAAA;AACA,OAAA,GAAA,MAAA,KAAA;AACA,OAAA,eAAA,MAAA,2BAAA;AACA,IAAA,QAAA,GAAA,CAAA;AACA,QAAA,GADA;AAEA,SAAA,GAFA;AAGA,WAAA,QAHA;AAIA,cAAA,OAJA;AAKA,cAAA,IALA;AAMA,iBAAA;AANA,CAAA,CAAA;AASA,eAAA;AACA,EAAA,IAAA,EAAA,cADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,eAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,WAAA,EAAA,SADA;AAEA;AACA,MAAA,QAAA,EAAA,CAAA;AACA,QAAA,KAAA,EAAA,UADA;AAEA,QAAA,GAAA,EAAA,KAFA;AAGA,QAAA,QAAA,EAAA;AAHA,OAAA,CAHA;AAOA;AACA,MAAA,UAAA,EAAA,QARA;AASA,MAAA,OAAA,EAAA,QATA;AAUA;AACA,MAAA,gBAAA,EAAA,IAXA;AAYA;AACA,MAAA,QAAA,EAAA,KAbA;AAcA,MAAA,GAAA,EAAA;AACA,QAAA,OAAA,EAAA;AADA;AAdA,KAAA;AAkBA,GAxBA;AAyBA,EAAA,OAzBA,qBAyBA,CACA;AACA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,WAAA,QAAA,GAAA,KAAA;AACA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,GAAA,GAAA;AACA,UAAA,KAAA,CAAA,UAAA,GAAA,GAAA;AACA,UAAA,KAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA,GAAA,GAAA;AACA;;AACA,QAAA,KAAA,CAAA,QAAA,GAAA,KAAA;AACA,OAPA;AAQA,KAXA;AAYA,IAAA,UAAA,EAAA,oBAAA,KAAA,EAAA;AACA,UAAA,KAAA,GAAA,GAAA,CAAA,EAAA,CAAA,GAAA,CAAA,YAAA,CAAA;AACA,WAAA,OAAA,GAAA;AAAA,0BAAA;AAAA,OAAA;AACA,WAAA,KAAA,CAAA,QAAA,CAAA,YAAA,CAAA,KAAA,EAAA,KAAA;AACA,KAhBA;AAiBA;AACA,IAAA,QAlBA,oBAkBA,YAlBA,EAkBA,IAlBA,EAkBA;AACA,WAAA,UAAA,GAAA,EAAA;;AACA,UAAA,YAAA,CAAA,CAAA,CAAA,KAAA,SAAA,IAAA,YAAA,CAAA,CAAA,CAAA,KAAA,KAAA,EAAA;AACA,aAAA,UAAA,GAAA,KAAA,OAAA;AACA,OAFA,MAEA;AACA,aAAA,UAAA,CAAA,IAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA;AACA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,qBAAA,EAAA,KAAA,UAAA;AACA,KA1BA;AA2BA;AACA,IAAA,WA5BA,yBA4BA;AACA,WAAA,QAAA;AACA;AA9BA;AA5BA,CAAA","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 左侧文件树 -->\r\n    <a-col :span=\"4\" class=\"clName\">\r\n      <a-tree\r\n        :treeData=\"treeData\"\r\n        :defaultExpandAll=\"defaultExpandAll\"\r\n        @select=\"this.onSelect\"\r\n        style=\"height: 500px;overflow-y: auto;\"\r\n      >\r\n      </a-tree>\r\n    </a-col>\r\n    <!-- 中间面板 -->\r\n    <a-col :span=\"2\"/>\r\n    <!--右侧缩略图-->\r\n    <a-col :span=\"18\">\r\n      <a-spin tip=\"Loading...\" :spinning=\"spinning\">\r\n        <div v-for=\"(file, key) in dataSource\" :key=\"key\">\r\n          <a-row>\r\n            <a-col :span=\"24\"><p><a-divider orientation=\"left\">{{ file.fileName }}</a-divider></p></a-col>\r\n            <!-- 预览区域 -->\r\n            <a-col :span=\"24\">\r\n              <template v-if=\"file.filePdfPath\">\r\n                <div style=\"float: left;width:104px;height:104px;margin-right: 10px;margin: 0 8px 8px 0;\">\r\n                  <div style=\"width: 100%;height: 100%;position: relative;padding: 8px;\" @click=\"pdfPreview(file.title)\">\r\n                    <img style=\"width: 100%;\" src=\"~@/assets/pdf4.jpg\">\r\n                  </div>\r\n                </div>\r\n              </template>\r\n              <template v-else>\r\n                (暂无材料，点击\"选择文件\"或\"扫描上传\"上传文件)\r\n              </template>\r\n            </a-col>\r\n          </a-row>\r\n        </div>\r\n      </a-spin>\r\n    </a-col>\r\n    <pdf-preview-modal ref=\"pdfmodal\"></pdf-preview-modal >\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n\r\n  import { getAction } from '@/api/manage'\r\n  import { ACCESS_TOKEN } from \"@/store/mutation-types\"\r\n  import Vue from 'vue'\r\n  import PdfPreviewModal from './modules/PdfPreviewModal'\r\n  const mockdata=[{\r\n    \"id\": \"1\",\r\n    \"key\": \"1\",\r\n    \"title\": \"实例.pdf\",\r\n    \"fileCode\": \"shili\",\r\n    \"fileName\": \"实例\",\r\n    \"filePdfPath\": \"实例\"\r\n  }]\r\n\r\n  export default {\r\n    name: \"JeecgPdfView\",\r\n    components:{\r\n      PdfPreviewModal\r\n    },\r\n    data () {\r\n      return {\r\n        description: 'PDF预览页面',\r\n        // 文件类型集\r\n        treeData:[{\r\n          title: '所有PDF电子档',\r\n          key: '0-0',\r\n          children: mockdata }],\r\n        // 文件数据集\r\n        dataSource: mockdata,\r\n        allData:mockdata,\r\n        // 上传文件集\r\n        defaultExpandAll: true,\r\n        // 加载中\r\n        spinning:false,\r\n        url: {\r\n          pdfList: \"/mock/api/pdfList\",\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      //this.loadData();\r\n    },\r\n    methods: {\r\n      loadData (){\r\n        this.spinning = false;\r\n        getAction(this.url.pdfList).then((res)=>{\r\n          if(res.length>0){\r\n            this.allData = res;\r\n            this.dataSource = res;\r\n            this.treeData[0].children = res;\r\n          }\r\n          this.spinning = false;\r\n        })\r\n      },\r\n      pdfPreview:function(title){\r\n        const token = Vue.ls.get(ACCESS_TOKEN);\r\n        this.headers = {\"X-Access-Token\":token}\r\n        this.$refs.pdfmodal.previewFiles(title,token);\r\n      },\r\n      // 选择文件类型\r\n      onSelect (selectedKeys, info) {\r\n        this.dataSource = [];\r\n        if(selectedKeys[0] === undefined || selectedKeys[0] === '0-0'){\r\n          this.dataSource = this.allData;\r\n        }else{\r\n          this.dataSource.push(info.node._props.dataRef);\r\n        }\r\n        console.log(\"SELECT-->dataSource\",this.dataSource );\r\n      },\r\n      // model回调\r\n      modalFormOk () {\r\n        this.loadData();\r\n      },\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .clName .ant-tree li span.ant-tree-switcher, .ant-tree li span.ant-tree-iconEle{width:10px}\r\n</style>"],"sourceRoot":"src/views/jeecg"}]}