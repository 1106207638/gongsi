{"remainingRequest":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\cells\\ReloadEffect.js","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\cells\\ReloadEffect.js","mtime":1615948814735},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICcuLi8uLi9sZXNzL3JlbG9hZC1lZmZlY3QubGVzcyc7CmltcG9ydCB7IHJhbmRvbVN0cmluZyB9IGZyb20gJ0AvdXRpbHMvdXRpbCc7IC8vIOS/ruaUueaVsOaNrueJueaViAoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB2Tm9kZTogbnVsbCwKICAgIC8vIOaYr+WQpuWQr+eUqOeJueaViAogICAgZWZmZWN0OiBCb29sZWFuCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gdk5vZGU6IG51bGwsCiAgICAgIGlubmVyRWZmZWN0OiBmYWxzZSwKICAgICAgLy8g5bqU5LuY5ZCM5pe25aSa5Liq54m55pWICiAgICAgIGVmZmVjdElkeDogMCwKICAgICAgZWZmZWN0TGlzdDogW10KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdk5vZGU6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZOb2RlLCBvbGQpIHsKICAgICAgICB0aGlzLmlubmVyRWZmZWN0ID0gdGhpcy5lZmZlY3Q7CgogICAgICAgIGlmICh0aGlzLmlubmVyRWZmZWN0ICYmIG9sZCAhPSBudWxsKSB7CiAgICAgICAgICB2YXIgdG9wTGF5ZXIgPSB0aGlzLnJlbmRlclNwYW4ob2xkLCAndG9wJyk7CiAgICAgICAgICB0aGlzLmVmZmVjdExpc3QucHVzaCh0b3BMYXllcik7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDmnaHku7bmuLLmn5PlhoXlrrkgc3BhbgogICAgcmVuZGVyVk5vZGU6IGZ1bmN0aW9uIHJlbmRlclZOb2RlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMudk5vZGUgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICB2YXIgYm90dG9tID0gdGhpcy5yZW5kZXJTcGFuKHRoaXMudk5vZGUsICdib3R0b20nKTsgLy8g5ZCv55So5LqG54m55pWI77yM5bm25LiU5pyJ5pen5pWw5o2u77yM5bCx5riy5p+T54m55pWI6aG25bGCCgogICAgICBpZiAodGhpcy5pbm5lckVmZmVjdCAmJiB0aGlzLmVmZmVjdExpc3QubGVuZ3RoID4gMCkgewogICAgICAgIHRoaXMuJGVtaXQoJ2VmZmVjdC1iZWdpbicpOyAvLyAxLjRzIOS7peWQjuWFs+mXreeJueaViAoKICAgICAgICB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgaXRlbSA9IF90aGlzLmVmZmVjdExpc3RbX3RoaXMuZWZmZWN0SWR4XTsKCiAgICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLmVsbSkgewogICAgICAgICAgICAvLyDnibnmlYjnu5PmnZ/lkI7vvIzlsZXnpLrlhYjmioogZGlzcGxheSDorr7kuLogbm9uZe+8jOiAjOS4jeaYr+ebtOaOpeWIoOaOieivpeWFg+e0oO+8jAogICAgICAgICAgICAvLyDnm67nmoTmmK/kuLrkuobpmLLmraLpobXpnaLph43mlrDmuLLmn5PvvIzlr7zoh7TliqjnlLvph43nva4KICAgICAgICAgICAgaXRlbS5lbG0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICAgIH0gLy8g5b2T5omA5pyJ55qE5bGC57qn5Yqo55S76YO957uT5p2f5pe277yM5YaN5Yig5o6J5omA5pyJ5YWD57SgCgoKICAgICAgICAgIGlmICgrK190aGlzLmVmZmVjdElkeCA9PT0gX3RoaXMuZWZmZWN0TGlzdC5sZW5ndGgpIHsKICAgICAgICAgICAgX3RoaXMuaW5uZXJFZmZlY3QgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMuZWZmZWN0SWR4ID0gMDsKICAgICAgICAgICAgX3RoaXMuZWZmZWN0TGlzdCA9IFtdOwoKICAgICAgICAgICAgX3RoaXMuJGVtaXQoJ2VmZmVjdC1lbmQnKTsKICAgICAgICAgIH0KICAgICAgICB9LCAxNDAwKTsKICAgICAgICByZXR1cm4gW3RoaXMuZWZmZWN0TGlzdCwgYm90dG9tXTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gYm90dG9tOwogICAgICB9CiAgICB9LAogICAgLy8g5riy5p+T5YaF5a65IHNwYW4KICAgIHJlbmRlclNwYW46IGZ1bmN0aW9uIHJlbmRlclNwYW4odk5vZGUsIGxheWVyKSB7CiAgICAgIHZhciBvcHRpb25zID0gewogICAgICAgIGtleTogbGF5ZXIgKyB0aGlzLmVmZmVjdElkeCArIHJhbmRvbVN0cmluZyg2KSwKICAgICAgICBjbGFzczogWydqLXZ4ZS1yZWxvYWQtZWZmZWN0LXNwYW4nLCAibGF5ZXItIi5jb25jYXQobGF5ZXIpXSwKICAgICAgICBzdHlsZToge30KICAgICAgfTsKCiAgICAgIGlmIChsYXllciA9PT0gJ3RvcCcpIHsKICAgICAgICAvLyDmnIDmlrDmuLLmn5PnmoTlnKjkuIvpnaIKICAgICAgICBvcHRpb25zLnN0eWxlWyd6LWluZGV4J10gPSA5OTk5IC0gdGhpcy5lZmZlY3RJZHg7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdzcGFuJywgb3B0aW9ucywgW3ZOb2RlXSk7CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICByZXR1cm4gaCgnZGl2JywgewogICAgICBjbGFzczogWydqLXZ4ZS1yZWxvYWQtZWZmZWN0LWJveCddCiAgICB9LCBbdGhpcy5yZW5kZXJWTm9kZSgpXSk7CiAgfQp9Ow=="},{"version":3,"sources":["D:/vue/src/components/jeecg/JVxeTable/components/cells/ReloadEffect.js"],"names":["randomString","props","vNode","effect","Boolean","data","innerEffect","effectIdx","effectList","watch","deep","immediate","handler","old","topLayer","renderSpan","push","methods","renderVNode","bottom","length","$emit","window","setTimeout","item","elm","style","display","layer","options","key","class","$createElement","render","h"],"mappings":"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","sourcesContent":["import '../../less/reload-effect.less'\r\nimport { randomString } from '@/utils/util'\r\n\r\n// 修改数据特效\r\nexport default {\r\n  props: {\r\n    vNode: null,\r\n    // 是否启用特效\r\n    effect: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      // vNode: null,\r\n      innerEffect: false,\r\n      // 应付同时多个特效\r\n      effectIdx: 0,\r\n      effectList: [],\r\n    }\r\n  },\r\n  watch: {\r\n    vNode: {\r\n      deep: true,\r\n      immediate: true,\r\n      handler(vNode, old) {\r\n        this.innerEffect = this.effect\r\n        if (this.innerEffect && old != null) {\r\n          let topLayer = this.renderSpan(old, 'top')\r\n          this.effectList.push(topLayer)\r\n        }\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n\r\n    // 条件渲染内容 span\r\n    renderVNode() {\r\n      if (this.vNode == null) {\r\n        return null\r\n      }\r\n      let bottom = this.renderSpan(this.vNode, 'bottom')\r\n      // 启用了特效，并且有旧数据，就渲染特效顶层\r\n      if (this.innerEffect && this.effectList.length > 0) {\r\n        this.$emit('effect-begin')\r\n        // 1.4s 以后关闭特效\r\n        window.setTimeout(() => {\r\n          let item = this.effectList[this.effectIdx]\r\n          if (item && item.elm) {\r\n            // 特效结束后，展示先把 display 设为 none，而不是直接删掉该元素，\r\n            // 目的是为了防止页面重新渲染，导致动画重置\r\n            item.elm.style.display = 'none'\r\n          }\r\n          // 当所有的层级动画都结束时，再删掉所有元素\r\n          if (++this.effectIdx === this.effectList.length) {\r\n            this.innerEffect = false\r\n            this.effectIdx = 0\r\n            this.effectList = []\r\n            this.$emit('effect-end')\r\n          }\r\n        }, 1400)\r\n        return [this.effectList, bottom]\r\n      } else {\r\n        return bottom\r\n      }\r\n    },\r\n    // 渲染内容 span\r\n    renderSpan(vNode, layer) {\r\n      let options = {\r\n        key: layer + this.effectIdx + randomString(6),\r\n        class: ['j-vxe-reload-effect-span', `layer-${layer}`],\r\n        style: {},\r\n      }\r\n      if (layer === 'top') {\r\n        // 最新渲染的在下面\r\n        options.style['z-index'] = (9999 - this.effectIdx)\r\n      }\r\n      return this.$createElement('span', options, [vNode])\r\n    },\r\n  },\r\n  render(h) {\r\n    return h('div', {\r\n      class: ['j-vxe-reload-effect-box'],\r\n    }, [this.renderVNode()])\r\n  },\r\n}"]}]}