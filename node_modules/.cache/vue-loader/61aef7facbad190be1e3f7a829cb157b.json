{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\jeecg\\TableTotal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\jeecg\\TableTotal.vue","mtime":1615948819781},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnVGFibGVUb3RhbCcsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNvbHVtbnM6IFsKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogJyMnLAogICAgICAgICAgd2lkdGg6ICcxODBweCcsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicsCiAgICAgICAgICBkYXRhSW5kZXg6ICdyb3dJbmRleCcsCiAgICAgICAgICBjdXN0b21SZW5kZXI6IGZ1bmN0aW9uICh0ZXh0LCByLCBpbmRleCkgewogICAgICAgICAgICByZXR1cm4gKHRleHQgIT09ICflkIjorqEnKSA/IChwYXJzZUludChpbmRleCkgKyAxKSA6IHRleHQKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRpdGxlOiAn5aeT5ZCNJywKICAgICAgICAgIGRhdGFJbmRleDogJ25hbWUnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfotKHnjK7ngrknLAogICAgICAgICAgZGF0YUluZGV4OiAncG9pbnQnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfnrYnnuqcnLAogICAgICAgICAgZGF0YUluZGV4OiAnbGV2ZWwnLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICfmm7TmlrDml7bpl7QnLAogICAgICAgICAgZGF0YUluZGV4OiAndXBkYXRlVGltZScsCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgLyog5YiG6aG15Y+C5pWwICovCiAgICAgIGlwYWdpbmF0aW9uOnsKICAgICAgICBjdXJyZW50OiAxLAogICAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgICBwYWdlU2l6ZU9wdGlvbnM6IFsnMTAnLCAnMjAnLCAnMzAnXSwKICAgICAgICBzaG93VG90YWw6ICh0b3RhbCwgcmFuZ2UpID0+IHsKICAgICAgICAgIHJldHVybiByYW5nZVswXSArICItIiArIHJhbmdlWzFdICsgIiDlhbEiICsgdG90YWwgKyAi5p2hIgogICAgICAgIH0sCiAgICAgICAgc2hvd1F1aWNrSnVtcGVyOiB0cnVlLAogICAgICAgIHNob3dTaXplQ2hhbmdlcjogdHJ1ZSwKICAgICAgICB0b3RhbDogMAogICAgICB9LAogICAgICBkYXRhU291cmNlOiBbCiAgICAgICAgeyBpZDoiMSIsbmFtZTogJ+W8oOS4iScsIHBvaW50OiAyMywgbGV2ZWw6IDMsIHVwZGF0ZVRpbWU6ICcyMDE5LTgtMTQnIH0sCiAgICAgICAgeyBuYW1lOiAn5bCP546LJywgcG9pbnQ6IDYsIGxldmVsOiAxLCB1cGRhdGVUaW1lOiAnMjAxOS04LTEzJyB9LAogICAgICAgIHsgbmFtZTogJ+adjuWbmycsIHBvaW50OiA1MywgbGV2ZWw6IDgsIHVwZGF0ZVRpbWU6ICcyMDE5LTgtMTInIH0sCiAgICAgICAgeyBuYW1lOiAn5bCP57qiJywgcG9pbnQ6IDQ0LCBsZXZlbDogNSwgdXBkYXRlVGltZTogJzIwMTktOC0xMScgfSwKICAgICAgICB7IG5hbWU6ICfnjovkupQnLCBwb2ludDogOTcsIGxldmVsOiAxMCwgdXBkYXRlVGltZTogJzIwMTktOC0xMCcgfSwKICAgICAgICB7IG5hbWU6ICflsI/mmI4nLCBwb2ludDogMzMsIGxldmVsOiAyLCB1cGRhdGVUaW1lOiAnMjAxOS04LTEwJyB9LAogICAgICAgIHsgbmFtZTogJ+Wwj+W8oCcsIHBvaW50OiAzMywgbGV2ZWw6IDIsIHVwZGF0ZVRpbWU6ICcyMDE5LTgtMTAnIH0sCiAgICAgICAgeyBuYW1lOiAn5bCP5YWtJywgcG9pbnQ6IDMzLCBsZXZlbDogMiwgdXBkYXRlVGltZTogJzIwMTktOC0xMCcgfSwKICAgICAgICB7IG5hbWU6ICflsI/kupQnLCBwb2ludDogMzMsIGxldmVsOiAyLCB1cGRhdGVUaW1lOiAnMjAxOS04LTEwJyB9LAogICAgICAgIHsgbmFtZTogJ+Wwj+i1tScsIHBvaW50OiAzMywgbGV2ZWw6IDIsIHVwZGF0ZVRpbWU6ICcyMDE5LTgtMTAnIH0sCiAgICAgICAgeyBuYW1lOiAn5p2O5Y2OJywgcG9pbnQ6IDMzLCBsZXZlbDogMiwgdXBkYXRlVGltZTogJzIwMTktOC0xMCcgfSwKICAgICAgICB7IG5hbWU6ICflsI/lurcnLCBwb2ludDogMzMsIGxldmVsOiAyLCB1cGRhdGVUaW1lOiAnMjAxOS04LTEwJyB9LAogICAgICAgIHsgbmFtZTogJ+Wwj+m5vycsIHBvaW50OiAzMywgbGV2ZWw6IDIsIHVwZGF0ZVRpbWU6ICcyMDE5LTgtMTAnIH0sCiAgICAgIF0sCiAgICAgIG5ld0FycjpbXSwKICAgICAgbmV3RGF0YVNvdXJjZTpbXSwKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyB0aGlzLnRhYmxlQWRkVG90YWxSb3codGhpcy5jb2x1bW5zLCB0aGlzLmRhdGFTb3VyY2UpCiAgICAvKuaWsOWinuWIhumhteWQiOiuoeaWueazlSovCiAgICB0aGlzLm5ld0RhdGFTb3VyY2U9dGhpcy5kYXRhU291cmNlCiAgICB0aGlzLmRhdGFIYW5kbGluZyh0aGlzLmlwYWdpbmF0aW9uLnBhZ2VTaXplLTEpCiAgfSwKICB3YXRjaDp7CiAgICAnaXBhZ2luYXRpb24ucGFnZVNpemUnOmZ1bmN0aW9uKHZhbCkgewogICAgICB0aGlzLmRhdGFIYW5kbGluZyh2YWwtMSkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKiDooajmoLzlop7liqDlkIjorqHooYwgKi8KICAgIHRhYmxlQWRkVG90YWxSb3coY29sdW1ucywgZGF0YVNvdXJjZSkgewogICAgICBsZXQgbnVtS2V5ID0gJ3Jvd0luZGV4JwogICAgICBsZXQgdG90YWxSb3cgPSB7IFtudW1LZXldOiAn5ZCI6K6hJyB9CiAgICAgIGNvbHVtbnMuZm9yRWFjaChjb2x1bW4gPT4gewogICAgICAgIGxldCB7IGtleSwgZGF0YUluZGV4IH0gPSBjb2x1bW4KICAgICAgICBpZiAoIVtrZXksIGRhdGFJbmRleF0uaW5jbHVkZXMobnVtS2V5KSkgewoKICAgICAgICAgIGxldCB0b3RhbCA9IDAKICAgICAgICAgIGRhdGFTb3VyY2UuZm9yRWFjaChkYXRhID0+IHsKICAgICAgICAgICAgdG90YWwgKz0gL15cZCtcLj9cZD8kLy50ZXN0KGRhdGFbZGF0YUluZGV4XSkgPyBOdW1iZXIucGFyc2VJbnQoZGF0YVtkYXRhSW5kZXhdKSA6IE51bWJlci5OYU4KICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YVtkYXRhSW5kZXhdLCAnOicsICgvXlxkK1wuP1xkPyQvLnRlc3QoZGF0YVtkYXRhSW5kZXhdKSA/IE51bWJlci5wYXJzZUludChkYXRhW2RhdGFJbmRleF0pIDogTnVtYmVyLk5hTikpCiAgICAgICAgICB9KQoKICAgICAgICAgIGlmIChOdW1iZXIuaXNOYU4odG90YWwpKSB7CiAgICAgICAgICAgIHRvdGFsID0gJy0nCiAgICAgICAgICB9CiAgICAgICAgICB0b3RhbFJvd1tkYXRhSW5kZXhdID0gdG90YWwKICAgICAgICB9CiAgICAgIH0pCgogICAgICBkYXRhU291cmNlLnB1c2godG90YWxSb3cpCiAgICB9LAogICAgaGFuZGxlVGFibGVDaGFuZ2UocGFnaW5hdGlvbiwgZmlsdGVycywgc29ydGVyKSB7CiAgICAgIHRoaXMuaXBhZ2luYXRpb24gPSBwYWdpbmF0aW9uOwogICAgfSwKICAgIC8q5aaC5p6c5YiG6aG16LWw6L+Z5Liq5pa55rOVKi8KICAgIGRhdGFIYW5kbGluZyhudW0pIHsKICAgICAgdGhpcy5uZXdBcnI9W107CiAgICAgIGxldCBhcnJMZW5ndGggPSB0aGlzLm5ld0RhdGFTb3VyY2UubGVuZ3RoOyAvLyDmlbDnu4Tplb/luqY7CiAgICAgIGxldCBpbmRleCA9IDA7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyTGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAoaSAlIG51bSA9PT0gMCAmJiBpICE9PSAwKSB7CiAgICAgICAgICB0aGlzLm5ld0Fyci5wdXNoKHRoaXMubmV3RGF0YVNvdXJjZS5zbGljZShpbmRleCwgaSkpOwogICAgICAgICAgaW5kZXggPSBpOwogICAgICAgIH0KICAgICAgICBpZiAoKGkgKyAxKSA9PT0gYXJyTGVuZ3RoKSB7CiAgICAgICAgICB0aGlzLm5ld0Fyci5wdXNoKHRoaXMubmV3RGF0YVNvdXJjZS5zbGljZShpbmRleCwgKGkgKyAxKSkpOwogICAgICAgIH0KICAgICAgfQogICAgICB2YXIgYXJycz10aGlzLm5ld0FycjsKICAgICAgZm9yIChsZXQgaSA9MDtpPGFycnMubGVuZ3RoO2krKyl7CiAgICAgICAgbGV0IGFyciA9IGFycnNbaV07CiAgICAgICAgbGV0IG5ld0Fycj0geyB9OwogICAgICAgIG5ld0Fyci5uYW1lPSItIjsKICAgICAgICBuZXdBcnIudXBkYXRlVGltZT0iLSI7CiAgICAgICAgbmV3QXJyLnJvd0luZGV4PSLlkIjorqEiCiAgICAgICAgdmFyIGxldmVsPTA7CiAgICAgICAgdmFyIHBvaW50PTA7CiAgICAgICAgZm9yIChsZXQgaj0wO2o8YXJyLmxlbmd0aDtqKyspewogICAgICAgICAgbGV2ZWwrPWFycltqXS5sZXZlbDsKICAgICAgICAgIHBvaW50Kz1hcnJbal0ucG9pbnQ7CiAgICAgICAgfQogICAgICAgIG5ld0Fyci5sZXZlbD1sZXZlbDsKICAgICAgICBuZXdBcnIucG9pbnQ9cG9pbnQ7CiAgICAgICAgYXJyc1tpXS5wdXNoKG5ld0Fycik7CiAgICAgIH0KICAgICAgdmFyIG5ld0RhdGFTb3VyY2U9W107CiAgICAgIGZvciAobGV0IGkgPTA7aTxhcnJzLmxlbmd0aDtpKyspewogICAgICAgIGxldCBhcnIgPSBhcnJzW2ldOwogICAgICAgIGZvcih2YXIgaiBpbiBhcnIpewogICAgICAgICAgbmV3RGF0YVNvdXJjZS5wdXNoKGFycltqXSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZGF0YVNvdXJjZSkKICAgICAgdGhpcy5kYXRhU291cmNlID0gT2JqZWN0LnZhbHVlcyhuZXdEYXRhU291cmNlKTsKICAgICAgY29uc29sZS5sb2codGhpcy5kYXRhU291cmNlKQogICAgfQogIH0KfQo="},{"version":3,"sources":["TableTotal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TableTotal.vue","sourceRoot":"src/views/jeecg","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <a-table\r\n      rowKey=\"rowIndex\"\r\n      bordered\r\n      :columns=\"columns\"\r\n      :dataSource=\"dataSource\"\r\n      :pagination=\"ipagination\"\r\n      @change=\"handleTableChange\"\r\n    >\r\n    </a-table>\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'TableTotal',\r\n    data() {\r\n      return {\r\n        columns: [\r\n          {\r\n            title: '#',\r\n            width: '180px',\r\n            align: 'center',\r\n            dataIndex: 'rowIndex',\r\n            customRender: function (text, r, index) {\r\n              return (text !== '合计') ? (parseInt(index) + 1) : text\r\n            }\r\n          },\r\n          {\r\n            title: '姓名',\r\n            dataIndex: 'name',\r\n          },\r\n          {\r\n            title: '贡献点',\r\n            dataIndex: 'point',\r\n          },\r\n          {\r\n            title: '等级',\r\n            dataIndex: 'level',\r\n          },\r\n          {\r\n            title: '更新时间',\r\n            dataIndex: 'updateTime',\r\n          },\r\n        ],\r\n        /* 分页参数 */\r\n        ipagination:{\r\n          current: 1,\r\n          pageSize: 10,\r\n          pageSizeOptions: ['10', '20', '30'],\r\n          showTotal: (total, range) => {\r\n            return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\r\n          },\r\n          showQuickJumper: true,\r\n          showSizeChanger: true,\r\n          total: 0\r\n        },\r\n        dataSource: [\r\n          { id:\"1\",name: '张三', point: 23, level: 3, updateTime: '2019-8-14' },\r\n          { name: '小王', point: 6, level: 1, updateTime: '2019-8-13' },\r\n          { name: '李四', point: 53, level: 8, updateTime: '2019-8-12' },\r\n          { name: '小红', point: 44, level: 5, updateTime: '2019-8-11' },\r\n          { name: '王五', point: 97, level: 10, updateTime: '2019-8-10' },\r\n          { name: '小明', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小张', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小六', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小五', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小赵', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '李华', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小康', point: 33, level: 2, updateTime: '2019-8-10' },\r\n          { name: '小鹿', point: 33, level: 2, updateTime: '2019-8-10' },\r\n        ],\r\n        newArr:[],\r\n        newDataSource:[],\r\n      }\r\n    },\r\n    mounted() {\r\n      // this.tableAddTotalRow(this.columns, this.dataSource)\r\n      /*新增分页合计方法*/\r\n      this.newDataSource=this.dataSource\r\n      this.dataHandling(this.ipagination.pageSize-1)\r\n    },\r\n    watch:{\r\n      'ipagination.pageSize':function(val) {\r\n        this.dataHandling(val-1)\r\n      }\r\n    },\r\n    methods: {\r\n      /** 表格增加合计行 */\r\n      tableAddTotalRow(columns, dataSource) {\r\n        let numKey = 'rowIndex'\r\n        let totalRow = { [numKey]: '合计' }\r\n        columns.forEach(column => {\r\n          let { key, dataIndex } = column\r\n          if (![key, dataIndex].includes(numKey)) {\r\n\r\n            let total = 0\r\n            dataSource.forEach(data => {\r\n              total += /^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN\r\n              console.log(data[dataIndex], ':', (/^\\d+\\.?\\d?$/.test(data[dataIndex]) ? Number.parseInt(data[dataIndex]) : Number.NaN))\r\n            })\r\n\r\n            if (Number.isNaN(total)) {\r\n              total = '-'\r\n            }\r\n            totalRow[dataIndex] = total\r\n          }\r\n        })\r\n\r\n        dataSource.push(totalRow)\r\n      },\r\n      handleTableChange(pagination, filters, sorter) {\r\n        this.ipagination = pagination;\r\n      },\r\n      /*如果分页走这个方法*/\r\n      dataHandling(num) {\r\n        this.newArr=[];\r\n        let arrLength = this.newDataSource.length; // 数组长度;\r\n        let index = 0;\r\n        for (let i = 0; i < arrLength; i++) {\r\n          if (i % num === 0 && i !== 0) {\r\n            this.newArr.push(this.newDataSource.slice(index, i));\r\n            index = i;\r\n          }\r\n          if ((i + 1) === arrLength) {\r\n            this.newArr.push(this.newDataSource.slice(index, (i + 1)));\r\n          }\r\n        }\r\n        var arrs=this.newArr;\r\n        for (let i =0;i<arrs.length;i++){\r\n          let arr = arrs[i];\r\n          let newArr= { };\r\n          newArr.name=\"-\";\r\n          newArr.updateTime=\"-\";\r\n          newArr.rowIndex=\"合计\"\r\n          var level=0;\r\n          var point=0;\r\n          for (let j=0;j<arr.length;j++){\r\n            level+=arr[j].level;\r\n            point+=arr[j].point;\r\n          }\r\n          newArr.level=level;\r\n          newArr.point=point;\r\n          arrs[i].push(newArr);\r\n        }\r\n        var newDataSource=[];\r\n        for (let i =0;i<arrs.length;i++){\r\n          let arr = arrs[i];\r\n          for(var j in arr){\r\n            newDataSource.push(arr[j]);\r\n          }\r\n        }\r\n        console.log(this.dataSource)\r\n        this.dataSource = Object.values(newDataSource);\r\n        console.log(this.dataSource)\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}