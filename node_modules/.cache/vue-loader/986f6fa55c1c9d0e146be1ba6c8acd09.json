{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\zbtest\\zbjc.vue?vue&type=style&index=0&id=0edda728&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue\\src\\views\\zbtest\\zbjc.vue","mtime":1615967940424},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1615952641773},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1615952643260},{"path":"D:\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1615952643158},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZnJvbS1pdGVtIHsKICBtYXJnaW4tbGVmdDogMTBweDsKfQo="},{"version":3,"sources":["zbjc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuTA;AACA;AACA","file":"zbjc.vue","sourceRoot":"src/views/zbtest","sourcesContent":["<template>\n  <a-card :bordered=\"false\">\n    <!-- 查询 -->\n    <div class=\"table-page-search-wrapper\">\n      <a-form layout=\"inline\">\n        <a-row :gutter=\"48\">\n          <a-col :xl=\"5\" :lg=\"6\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"检查方式\">\n              <j-dict-select-tag\n                type=\"list\"\n                v-model=\"queryParam.checkWay\"\n                placeholder=\"请选择报告类型\"\n                dictCode=\"check_way\"\n              />\n            </a-form-item>\n          </a-col>\n          <a-col :xl=\"5\" :lg=\"6\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"检查状态\">\n              <a-select\n                style=\"width: 100%\"\n                placeholder=\"请选择任务状态\"\n                v-model=\"queryParam.checkStatus\"\n              >\n                <a-select-option value=\"Check\"> 已检查 </a-select-option>\n                <a-select-option value=\"NotCheck\"> 未检查 </a-select-option>\n              </a-select>\n            </a-form-item>\n          </a-col>\n          <a-col :xl=\"5\" :lg=\"6\" :md=\"8\" :sm=\"24\">\n            <a-form-item label=\"执行时间\">\n              <j-date\n                v-model=\"queryParam.checkTime\"\n                style=\"width: 100%\"\n                placeholder=\"请输入更新日期\"\n                dateFormat=\"YYYY-MM-DD\"\n              />\n            </a-form-item>\n          </a-col>\n\n          <a-col :xl=\"4\" :lg=\"6\" :md=\"(!advanced && 8) || 24\" :sm=\"24\">\n            <a-button\n              type=\"primary\"\n              style=\"height: 40px; width: 120px\"\n              @click=\"searchQuery\"\n              >搜索</a-button\n            >\n          </a-col>\n        </a-row>\n      </a-form>\n    </div>\n\n    <a-divider />\n\n    <a-button\n      type=\"primary\"\n      @click=\"add\"\n      style=\"height: 40px; width: 120px; margin-bottom: 20px\"\n    >\n      添加\n    </a-button>\n\n    <!-- 表格Strat -->\n    <a-table\n      ref=\"table\"\n      size=\"middle\"\n      :scroll=\"{ x: true }\"\n      bordered\n      rowKey=\"id\"\n      :columns=\"columns\"\n      :dataSource=\"dataSource\"\n      :pagination=\"ipagination\"\n      :loading=\"loading\"\n      :rowSelection=\"{\n        selectedRowKeys: selectedRowKeys,\n        onChange: onSelectChange,\n      }\"\n      class=\"j-table-force-nowrap\"\n      @change=\"handleTableChange\"\n    >\n      <template slot=\"htmlSlot\" slot-scope=\"text\">\n        <div v-html=\"text\"></div>\n      </template>\n\n      <span slot=\"action\" slot-scope=\"text, record\" style=\"text-align: center\">\n        <!-- 未检查 -->\n        <div v-if=\"record.checkStatus == 'NotCheck'\">\n          <a @click=\"implement(record)\" v-if=\"record.checkStatus == 'NotCheck'\"\n            >执行</a\n          >\n\n          <a-divider type=\"vertical\" v-if=\"record.checkStatus == 'NotCheck'\" />\n\n          <a-popconfirm\n            title=\"确定删除吗?\"\n            @confirm=\"() => handleDelete(record.id)\"\n          >\n            <a>删除</a>\n          </a-popconfirm>\n        </div>\n\n        <!-- 检查 -->\n        <div v-if=\"record.checkStatus != 'NotCheck'\">\n          <a @click=\"handleEdit(record)\">编辑</a>\n\n          <a-divider type=\"vertical\" v-if=\"record.checkStatus == 'Check'\" />\n\n          <a @click=\"look(record.id)\" v-if=\"record.checkStatus == 'Check'\"\n            >查看</a\n          >\n\n          <a-divider type=\"vertical\" />\n\n          <a-popconfirm\n            title=\"确定删除吗?\"\n            @confirm=\"() => handleDelete(record.id)\"\n          >\n            <a>删除</a>\n          </a-popconfirm>\n        </div>\n      </span>\n    </a-table>\n    <!-- 表格end -->\n    <a-button style=\"height: 40px; width: 120px\" @click=\"batchDel\"\n      >删除</a-button\n    >\n\n    <editionModal ref=\"detailForm\" @ok=\"searchQuery\" />\n    <addModule ref=\"modalForm\" @ok=\"searchQuery\" />\n  </a-card>\n</template>\n\n<script>\nimport \"@/assets/less/TableExpand.less\";\nimport ATextarea from \"ant-design-vue/es/input/TextArea\";\nimport AInput from \"ant-design-vue/es/input/Input\";\nimport { JeecgListMixin } from \"@/mixins/JeecgListMixin\";\nimport { mixinDevice } from \"@/utils/mixin\";\nimport moment from \"moment\";\nimport axios from \"axios\";\nimport JDictSelectTag from \"@/components/dict/JDictSelectTag.vue\";\nimport { getRoleList } from \"@/api/manage\";\nimport addModule from \"./module/zbjcaddModal\";\nimport editionModal from \"./module/zbjceditionModal\";\nexport default {\n  name: \"cblb\",\n  mixins: [JeecgListMixin, mixinDevice],\n  components: {\n    AInput,\n    ATextarea,\n    JDictSelectTag,\n    addModule,\n    editionModal,\n  },\n  data() {\n    return {\n      visibleCreateModal: false,\n      visible: false,\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 5 },\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 12 },\n      },\n      form: null,\n      mdl: {},\n\n      // 高级搜索 展开/关闭\n      advanced: true,\n      // 查询参数\n      queryParam: {},\n      // 表头\n      columns: [\n        {\n          title: \"任务编号\",\n          dataIndex: \"checkTaskNo\",\n          align: \"center\",\n        },\n        {\n          title: \"执行时间\",\n          dataIndex: \"checkTime\",\n          align: \"center\",\n        },\n        {\n          title: \"受检单位\",\n          dataIndex: \"checkDept\",\n          align: \"center\",\n        },\n        {\n          title: \"检查方式\",\n          dataIndex: \"checkWay_dictText\",\n          align: \"center\",\n        },\n        {\n          title: \"检查状态\",\n          dataIndex: \"checkStatus_dictText\",\n          align: \"center\",\n        },\n        {\n          title: \"操作\",\n          dataIndex: \"action\",\n          width: \"140px\",\n          scopedSlots: { customRender: \"action\" },\n        },\n      ],\n      url: {\n        list: \"/southCheckTask/list\",\n        delete: \"/southCheckTask/delete\",\n        deleteBatch: \"/southCheckTask/deleteBatch\",\n      },\n      selectedRowKeys: [],\n      selectedRows: [],\n    };\n  },\n  created() {\n    getRoleList({ t: new Date() });\n  },\n  methods: {\n    // 执行\n    implement(records) {\n      this.$refs.modalForm.edit(records);\n      // 根据检查方式 显示时间内容\n      let time1 = \"\";\n      let time2 = \"\";\n      if (records.checkWay === \"Message\") {\n        time1 = \"发文时间\";\n        time2 = \"回执时间\";\n      } else if (records.checkWay === \"View\") {\n        time1 = \"呼出时间\";\n        time2 = \"到位时间\";\n      } else {\n        time1 = \"下发时间\";\n        time2 = \"回执时间\";\n      }\n      this.$refs.modalForm.time1 = time1;\n      this.$refs.modalForm.time2 = time2;\n\n      this.$refs.modalForm.title = \"执行\";\n      this.$refs.modalForm.taskId = records.id; //当前任务项id\n      this.$refs.modalForm.checkWay = records.checkWay; //检查方式\n      this.$refs.modalForm.disableSubmit = false;\n    },\n\n    // 查看\n    look(id) {\n      this.$router.push(`/zbtest/zbjcLook/` + id);\n    },\n    //添加\n    add(records) {\n      console.log(records);\n      this.$router.push(`/zbtest/zbjcAdd`);\n    },\n    // 编辑\n    handleEdit(record) {\n      this.$refs.detailForm.edit(record);\n      this.$refs.detailForm.title = \"编辑内容\";\n      this.$refs.detailForm.disableSubmit = false;\n    },\n\n    handleOk() {},\n\n    //添加逻辑\n    handleModalVisible(isVisible) {\n      this.visibleCreateModal = isVisible;\n    },\n    handleCreateModalOk() {\n      this.createForm.validateFields((err, fieldsValue) => {\n        if (err) {\n          return;\n        }\n        const description = this.createForm.getFieldValue(\"description\");\n        axios\n          .post(\"/saveRule\", {\n            desc: description,\n          })\n          .then((res) => {\n            this.createForm.resetFields();\n            this.visibleCreateModal = false;\n            this.loadRuleData();\n          });\n      });\n    },\n    handleCreateModalCancel() {\n      this.visibleCreateModal = false;\n    },\n\n    onChange(row) {\n      this.selectedRowKeys = row.selectedRowKeys;\n      this.selectedRows = row.selectedRows;\n      console.log(this.$refs.table);\n    },\n    toggleAdvanced() {\n      this.advanced = !this.advanced;\n    },\n\n    resetSearchForm() {\n      this.queryParam = {\n        date: moment(new Date()),\n      };\n    },\n  },\n  watch: {\n    $route: function (newVal, oldVal) {\n      this.searchQuery();\n    },\n  },\n};\n</script>\n\n<style scoped>\n.from-item {\n  margin-left: 10px;\n}\n</style>"]}]}