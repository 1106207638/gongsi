{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\zbtest\\cblbdetail.vue?vue&type=style&index=0&id=713f001e&lang=less&scoped=true&","dependencies":[{"path":"D:\\vue\\src\\views\\zbtest\\cblbdetail.vue","mtime":1616062180928},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1615952641773},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1615952643260},{"path":"D:\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1615952643158},{"path":"D:\\vue\\node_modules\\less-loader\\dist\\cjs.js","mtime":1615952670554},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNlbnRlci1mbGV4LWJveCB7CiAgZGlzcGxheTogZmxleDsKICBoZWlnaHQ6IGNhbGMoMTAwdmggLSAxNjBweCk7CiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogIC5jYXJkLWJveCB7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgYmFja2dyb3VuZDogI2ZmZjsKICAgIG92ZXJmbG93LXk6IGF1dG87CiAgICBib3JkZXI6IDFweCBzb2xpZCAjZGRkOwogIH0KfQouYm94LXRpdGxlIHsKICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDEyMSwgMjU0LCAxKTsKICBsaW5lLWhlaWdodDogMi42cmVtOwogIGNvbG9yOiAjZmZmOwogIGZvbnQtc2l6ZTogMS4ycmVtOwogIHBhZGRpbmctbGVmdDogMjBweDsKfQouYm94LWNvbnRlbnQgewogIHBhZGRpbmc6IDEuM3JlbTsKfQouY2FyZC1pdGVtIHsKICBkaXNwbGF5OiBmbGV4OwogIG1hcmdpbjogMTBweCAwOwp9Ci5jYXJkLWl0ZW0gLmxhYmVsIHsKICB3aWR0aDogMTAwcHg7Cn0KLnRib3R0b20gewogIGRpc3BsYXk6IGZsZXg7Cn0KLmJpIHsKICBmbGV4OiAxOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQo="},{"version":3,"sources":["cblbdetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"cblbdetail.vue","sourceRoot":"src/views/zbtest","sourcesContent":["<template>\n  <div class=\"center-flex-box\">\n    <div class=\"card-box\" style=\"width: 300px\">\n      <div class=\"box-title\">报表信息</div>\n\n      <div class=\"box-content\">\n        <div class=\"card\">\n          <div class=\"card-item\">\n            <div class=\"label\">时间:</div>\n            <div class=\"text\">{{ headVersion.createTime }}</div>\n          </div>\n          <div class=\"card-item\">\n            <div class=\"label\">报告类型：</div>\n            <div class=\"text\">{{ headVersion.reportFormName }}</div>\n          </div>\n          <div class=\"card-item\">\n            <div class=\"label\">报表模板：</div>\n            <div class=\"text\">{{ headVersion.businessType }}</div>\n          </div>\n          <div class=\"card-item\">\n            <div class=\"label\">席位：</div>\n            <div class=\"text\">{{ headVersion.sysOrgCodeName }}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"card-box\" style=\"flex: 1; margin-left: 20px\">\n      <div class=\"box-title\">数据展示</div>\n      <div class=\"box-content\">\n        <div>\n          <div v-if=\"headVersion.reportFormType != 'DutyData'\">\n            <a-table\n              ref=\"table\"\n              size=\"default\"\n              :columns=\"columns\"\n              :dataSource=\"dataSource\"\n              :pagination=\"false\"\n            >\n            </a-table>\n          </div>\n\n          <div v-if=\"headVersion.reportFormType == 'DutyData'\">\n            <a-tabs>\n              <a-tab-pane v-for=\"tab in tabs\" :key=\"tab.key\" :tab=\"tab.title\">\n                <a-table\n                  ref=\"table\"\n                  size=\"default\"\n                  :columns=\"tab.columns\"\n                  :dataSource=\"tab.dataSource\"\n                  :pagination=\"false\"\n                >\n                </a-table>\n              </a-tab-pane>\n            </a-tabs>\n          </div>\n\n          <div class=\"tbottom\">\n            <div class=\"bi\">协调席：马化腾</div>\n            <div class=\"bi\">海上席：张一鸣</div>\n            <div class=\"bi\">防空席：李彦宏</div>\n            <div class=\"bi\">陆上席：马云</div>\n            <div class=\"bi\">防务席：黄峥</div>\n            <div class=\"bi\">防务席：黄兴</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport STable from \"@/components/table/\";\nimport { getAction } from \"@/api/manage\";\nimport { JVXETypes } from \"@comp/jeecg/JVxeTable\";\n\nexport default {\n  name: \"cblbdetail\",\n  components: {\n    STable,\n  },\n  data() {\n    return {\n      id: this.$route.params.id,\n      indexStyle: 1,\n      istable: true,\n      columns: [],\n      columnss: [],\n      tabs: [],\n      url: {\n        list: \"/reportFormModel/queryReportFormData\",\n        details: \"/reportFormModel/queryReportFormData\",\n        structure: \"/southTable/queryTableStructure\", //结构\n      },\n      dataSource: [],\n      headVersion: {},\n    };\n  },\n  created() {\n    this.getDeptHeadDetails();\n  },\n  mounted() {},\n  methods: {\n    //  版本详情\n    getDeptHeadDetails() {\n      getAction(this.url.details + \"?id=\" + this.id, {}).then((res) => {\n        if (res.code == 200) {\n          this.dataSource = res.result.data;\n          this.headVersion = res.result.headVersion;\n          this.getStructure();\n        } else {\n          this.$message.error(res.message);\n        }\n      });\n    },\n    // 查询结构（table的头部）\n    getStructure() {\n      // 封装查询条件\n      let formData = {\n        reportFromType: this.headVersion.reportFormType,\n        templateType: this.headVersion.businessTypeId,\n      };\n      // 调用查询数据接口\n      this.loading = true;\n      getAction(this.url.structure, formData)\n        .then((res) => {\n          if (res.success) {\n            if (formData.reportFromType != \"DutyData\") {\n              var result = res.result;\n              // 将查询的数据赋值给 dataSource\n              var arr = [];\n              for (var i = 0; i < result.length; i++) {\n                if (result[i].isShowForm == 1) {\n                  arr.push({\n                    dataIndex: result[i].dbFieldName,\n                    title: result[i].dbFieldTxt,\n                  });\n                }\n              }\n              this.jdemoshow = true;\n              this.columns = arr;\n              this.columnss = [];\n            } else {\n              //执勤数据\n              var result = res.result;\n              var columns = [];\n              this.tabs = []\n              for (var i = 0; i < result.length; i++) {\n                var arr = [];\n                var obj = {\n                  name: result[i].sheetName,\n                  dataSource: [],\n                };\n                var results = result[i].fields;\n                for (var j = 0; j < results.length; j++) {\n                  if (results[j].isShowForm == 1) {\n                    arr.push({\n                      dataIndex: results[j].dbFieldName,\n                      title: results[j].dbFieldTxt,\n                    });\n                  }\n                }\n                obj.columns = arr;\n                columns.push(obj);\n                this.tabs.push({\n                  title: result[i].sheetName,\n                  columns: arr,\n                  dataSource: this.dataSource[i],\n                  key: i,\n                });\n              }\n              this.columnss = columns;\n              this.jdemoshow = false;\n            }\n          } else {\n            this.$error({ title: \"主表查询失败\", content: res.message });\n          }\n        })\n        .finally(() => {\n          // 这里是无论成功或失败都会执行的方法，在这里关闭loading\n          this.loading = false;\n        });\n    },\n  },\n  watch: {\n    \"$route\": function (newVal, oldVal) {\n        this.id = newVal.params.id\n      if(newVal.params.id) {\n        this.getDeptHeadDetails();\n\n      }\n      // if (typeof newVal != \"undefined\") {\n      // }\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.center-flex-box {\n  display: flex;\n  height: calc(100vh - 160px);\n  justify-content: space-between;\n  .card-box {\n    height: 100%;\n    box-sizing: border-box;\n    background: #fff;\n    overflow-y: auto;\n    border: 1px solid #ddd;\n  }\n}\n.box-title {\n  background: rgba(0, 121, 254, 1);\n  line-height: 2.6rem;\n  color: #fff;\n  font-size: 1.2rem;\n  padding-left: 20px;\n}\n.box-content {\n  padding: 1.3rem;\n}\n.card-item {\n  display: flex;\n  margin: 10px 0;\n}\n.card-item .label {\n  width: 100px;\n}\n.tbottom {\n  display: flex;\n}\n.bi {\n  flex: 1;\n  text-align: center;\n}\n</style>"]}]}