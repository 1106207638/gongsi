{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\table\\StandardTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\table\\StandardTable.vue","mtime":1615948816444},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogIlN0YW5kYXJkVGFibGUiLAogICAgLy8gcHJvcHM6IFsnYm9yZGVyZWQnLCAnbG9hZGluZycsICdjb2x1bW5zJywgJ2RhdGEnLCAncm93S2V5JywgJ3BhZ2luYXRpb24nLCAnc2VsZWN0ZWRSb3dzJ10sCiAgICBwcm9wczogewoKICAgICAgLyoqCiAgICAgICAqIOaVsOaNruWKoOi9veWHveaVsO+8jOi/lOWbnuWAvOW/hemhu+aYryBQcm9taXNlCiAgICAgICAqIOm7mOiupOaDheWGteS4i+W/hemhu+S8oOmAkiBkYXRhIOWPguaVsO+8mwogICAgICAgKiAgICDlpoLmnpzkvb/nlKjmnKzlnLDmlbDmja7muLLmn5PooajmoLzvvIzkuJrliqHku6PnoIHkuK3lsIbojrflj5bmnKzlnLDmlbDmja7ljIXoo4XkuLogUHJvbWlzZSDljbPlj6/jgIIKICAgICAgICoKICAgICAgICogY3VycmVudERhdGEg55So5LqO5ZCR5aSW5pq06Zyy6KGo5qC85b2T5YmN5riy5p+T55qE5pWw5o2u77yMCiAgICAgICAqIOS4muWKoeW8gOWPkeS4reS5n+WPr+S7peebtOaOpeS/ruaUuSBjdXJyZW50RGF0Ye+8jOS7juiAjOmHjeaWsOa4suafk+ihqOagvO+8iOS7heaOqOiNkOeUqOS6juWuouaIt+err+aOkuW6j+OAgeaVsOaNrui/h+a7pOetieWcuuaZr++8iQogICAgICAgKi8KICAgICAgZGF0YTogewogICAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIH0sCiAgICAgIGRhdGFTb3VyY2U6IHsKICAgICAgICB0eXBlOiBBcnJheSwKICAgICAgICBkZWZhdWx0ICgpIHsKICAgICAgICAgIHJldHVybiBbXQogICAgICAgIH0KICAgICAgfSwKICAgICAgY29sdW1uczogewogICAgICAgIHR5cGU6IEFycmF5LAogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgIH0sCi8qICAgICAgcGFnaW5hdGlvbjogewogICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICBkZWZhdWx0ICgpIHsKICAgICAgICAgIHJldHVybiB7fQogICAgICAgIH0KICAgICAgfSwqLwogICAgICBwYWdlU2l6ZTogewogICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICBkZWZhdWx0OiAxMAogICAgICB9LAogICAgICBwYWdlTnVtOiB7CiAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgIGRlZmF1bHQ6IDEKICAgICAgfSwKICAgICAgcGFnZVNpemVPcHRpb25zOiB7CiAgICAgICAgdHlwZTogQXJyYXksCiAgICAgICAgZGVmYXVsdCAoKSB7CiAgICAgICAgICByZXR1cm4gWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCddCiAgICAgICAgfQogICAgICB9LAogICAgICByZXNwb25zZVBhcmFtc05hbWU6IHsKICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgZGVmYXVsdCAoKSB7CiAgICAgICAgICByZXR1cm4ge30KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGJvcmRlcmVkOiB7CiAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICBkZWZhdWx0OiBmYWxzZQogICAgICB9LAogICAgICAvKioKICAgICAgICog6KGo5qC85aSn5bCP6aOO5qC877yMZGVmYXVsdCwgbWlkZGxlLCBzbWFsbAogICAgICAgKi8KICAgICAgc2l6ZTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICBkZWZhdWx0OiAnZGVmYXVsdCcKICAgICAgfSwKICAgICAgcm93S2V5OiB7CiAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgIGRlZmF1bHQ6ICcnCiAgICAgIH0sCiAgICAgIHNlbGVjdGVkUm93czogewogICAgICAgIHR5cGU6IEFycmF5LAogICAgICAgIGRlZmF1bHQ6IG51bGwKICAgICAgfQogICAgfSwKICAgIGRhdGEgKCkgewogICAgICByZXR1cm4gewogICAgICAgIG5lZWRUb3RhbExpc3Q6IFtdLAogICAgICAgIHNlbGVjdGVkUm93S2V5czogW10sCgogICAgICAgIGxvYWRpbmc6IHRydWUsCgogICAgICAgIHRvdGFsOiAwLAogICAgICAgIHBhZ2VOdW1iZXI6IHRoaXMucGFnZU51bSwKICAgICAgICBjdXJyZW50UGFnZVNpemU6IHRoaXMucGFnZVNpemUsCiAgICAgICAgZGVmYXVsdEN1cnJlbnQ6IDEsCiAgICAgICAgc29ydFBhcmFtczoge30sCgogICAgICAgIGN1cnJlbnQ6IFtdLAogICAgICAgIHBhZ2luYXRpb246IHt9LAogICAgICAgIHBhcmFtc05hbWU6IHt9LAogICAgICB9CiAgICB9LAogICAgY3JlYXRlZCAoKSB7CiAgICAgIC8v5pWw5o2u6K+35rGC5Y+C5pWw6YWN572uCiAgICAgIHRoaXMucGFyYW1zTmFtZSA9IE9iamVjdC5hc3NpZ24oCiAgICAgICAge30sCiAgICAgICAgewogICAgICAgICAgcGFnZU51bWJlcjogInBhZ2VObyIsCiAgICAgICAgICBwYWdlU2l6ZTogInBhZ2VTaXplIiwKICAgICAgICAgIHRvdGFsOiAidG90YWxDb3VudCIsCiAgICAgICAgICByZXN1bHRzOiAiZGF0YSIsCiAgICAgICAgICBzb3J0Q29sdW1uczogInNvcnRDb2x1bW5zIgogICAgICAgIH0sCiAgICAgICAgdGhpcy5yZXNwb25zZVBhcmFtc05hbWUKICAgICAgKTsKCiAgICAgIHRoaXMubmVlZFRvdGFsTGlzdCA9IHRoaXMuaW5pdFRvdGFsTGlzdCh0aGlzLmNvbHVtbnMpCgogICAgICAvLyBsb2FkIGRhdGEKICAgICAgdGhpcy5sb2FkRGF0YSggeyBwYWdlTnVtOiB0aGlzLnBhZ2VOdW1iZXIgfSApCiAgICB9LAogICAgbWV0aG9kczogewogICAgICB1cGRhdGVTZWxlY3QgKHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0tleXMgPSBzZWxlY3RlZFJvd0tleXMKICAgICAgICBsZXQgbGlzdCA9IHRoaXMubmVlZFRvdGFsTGlzdAogICAgICAgIHRoaXMubmVlZFRvdGFsTGlzdCA9IGxpc3QubWFwKGl0ZW0gPT4gewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLi4uaXRlbSwKICAgICAgICAgICAgdG90YWw6IHNlbGVjdGVkUm93cy5yZWR1Y2UoKHN1bSwgdmFsKSA9PiB7CiAgICAgICAgICAgICAgcmV0dXJuIHN1bSArIHZhbFtpdGVtLmRhdGFJbmRleF0KICAgICAgICAgICAgfSwgMCkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScsIHNlbGVjdGVkUm93S2V5cywgc2VsZWN0ZWRSb3dzKQogICAgICB9LAogICAgICBpbml0VG90YWxMaXN0IChjb2x1bW5zKSB7CiAgICAgICAgY29uc3QgdG90YWxMaXN0ID0gW10KICAgICAgICBjb2x1bW5zLmZvckVhY2goY29sdW1uID0+IHsKICAgICAgICAgIGlmIChjb2x1bW4ubmVlZFRvdGFsKSB7CiAgICAgICAgICAgIHRvdGFsTGlzdC5wdXNoKHsgLi4uY29sdW1uLCB0b3RhbDogMCB9KQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHRvdGFsTGlzdAogICAgICB9LAoKICAgICAgbG9hZERhdGEgKHBhcmFtcykgewogICAgICAgIGxldCB0aGF0ID0gdGhpcwogICAgICAgIHRoYXQubG9hZGluZyA9IHRydWUKICAgICAgICBwYXJhbXMgPSBPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpCiAgICAgICAgY29uc3QgcmVtb3RlUGFyYW1zID0gT2JqZWN0LmFzc2lnbih7fSwgdGhhdC5zb3J0UGFyYW1zKQogICAgICAgIHJlbW90ZVBhcmFtc1t0aGF0LnBhcmFtc05hbWUucGFnZU51bWJlcl0gPSBwYXJhbXMucGFnZU51bSB8fCB0aGF0LnBhZ2VOdW1iZXIKICAgICAgICByZW1vdGVQYXJhbXNbdGhhdC5wYXJhbXNOYW1lLnBhZ2VTaXplXSA9IHBhcmFtcy5wYWdlU2l6ZSB8fCB0aGF0LmN1cnJlbnRQYWdlU2l6ZQoKICAgICAgICBpZiAocGFyYW1zLnBhZ2VOdW0pIHsKICAgICAgICAgIHRoYXQucGFnZU51bWJlciA9IHBhcmFtcy5wYWdlTnVtCiAgICAgICAgfQogICAgICAgIGlmIChwYXJhbXMucGFnZVNpemUpIHsKICAgICAgICAgIHRoYXQuY3VycmVudFBhZ2VTaXplID0gcGFyYW1zLnBhZ2VTaXplCiAgICAgICAgfQoKICAgICAgICBsZXQgZGF0YVByb21pc2UgPSB0aGF0LmRhdGEocmVtb3RlUGFyYW1zKQoKICAgICAgICBkYXRhUHJvbWlzZS50aGVuKCByZXNwb25zZSA9PiB7CiAgICAgICAgICBpZiAoIXJlc3BvbnNlKSB7CiAgICAgICAgICAgIHRoYXQubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIHJldHVybgogICAgICAgICAgfQogICAgICAgICAgbGV0IHJlc3VsdHMgPSByZXNwb25zZVt0aGF0LnBhcmFtc05hbWUucmVzdWx0c10KICAgICAgICAgIHJlc3VsdHMgPSAocmVzdWx0cyBpbnN0YW5jZW9mIEFycmF5ICYmIHJlc3VsdHMpIHx8IFtdCgogICAgICAgICAgdGhhdC5jdXJyZW50ID0gcmVzdWx0cwoKICAgICAgICAgIHRoYXQuJGVtaXQoInVwZGF0ZTpjdXJyZW50RGF0YSIsIHRoYXQuY3VycmVudC5zbGljZSgpKQogICAgICAgICAgdGhhdC4kZW1pdCgiZGF0YWxvYWRlZCIsIHRoYXQuY3VycmVudC5zbGljZSgpKQoKICAgICAgICAgIHRoYXQudG90YWwgPSByZXNwb25zZVt0aGF0LnBhcmFtc05hbWUudG90YWxdICogMQogICAgICAgICAgdGhhdC5wYWdpbmF0aW9uID0gdGhhdC5wYWdlcigpCiAgICAgICAgICB0aGF0LmxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0sICgpID0+IHsKICAgICAgICAgIC8vIGVycm9yIGNhbGxiYWNrCiAgICAgICAgICB0aGF0LmxvYWRpbmcgPSBmYWxzZQogICAgICAgIH0pCiAgICAgIH0sCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQogICAgICBvblBhZ2VyQ2hhbmdlIChwYWdlLCBwYWdlU2l6ZSkgewogICAgICAgIHRoaXMucGFnZU51bWJlciA9IHBhZ2UKICAgICAgICB0aGlzLmxvYWREYXRhKHsgcGFnZU51bTogcGFnZSB9KQogICAgICB9LAogICAgICBvblBhZ2VyU2l6ZUNoYW5nZSAoY3VycmVudCwgc2l6ZSkgewogICAgICAgIHRoaXMuY3VycmVudFBhZ2VTaXplID0gc2l6ZQogICAgICAgIC8qCiAgICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMucGFnZU51bWJlcikgdGhpcy5sb2FkRGF0YSgpCiAgICAgICAgY29uc29sZS5sb2coJ3BhZ2Utc2l6ZS1jaGFuZ2UnLCBjdXJyZW50LCBzaXplKQogICAgICAgICovCiAgICAgIH0sCiAgICAgIG9uQ2xlYXJTZWxlY3RlZCAoKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZFJvd0tleXMgPSBbXQogICAgICAgIHRoaXMudXBkYXRlU2VsZWN0KFtdLCBbXSkKICAgICAgfSwKICAgICAgcGFnZXIgKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0b3RhbDogdGhpcy50b3RhbCwKICAgICAgICAgIHNob3dUb3RhbDogdG90YWwgPT4gYOWFseaciSAke3RvdGFsfSDmnaFgLAogICAgICAgICAgc2hvd1NpemVDaGFuZ2VyOiB0cnVlLAogICAgICAgICAgcGFnZVNpemVPcHRpb25zOiB0aGlzLnBhZ2VTaXplT3B0aW9ucywKICAgICAgICAgIHBhZ2VTaXplOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgZGVmYXVsdEN1cnJlbnQ6IHRoaXMuZGVmYXVsdEN1cnJlbnQsCiAgICAgICAgICBvbkNoYW5nZTogdGhpcy5vblBhZ2VyQ2hhbmdlLAogICAgICAgICAgb25TaG93U2l6ZUNoYW5nZTogdGhpcy5vblBhZ2VyU2l6ZUNoYW5nZQogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICdzZWxlY3RlZFJvd3MnOiBmdW5jdGlvbiAoc2VsZWN0ZWRSb3dzKSB7CiAgICAgICAgdGhpcy5uZWVkVG90YWxMaXN0ID0gdGhpcy5uZWVkVG90YWxMaXN0Lm1hcChpdGVtID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgIHRvdGFsOiBzZWxlY3RlZFJvd3MucmVkdWNlKCAoc3VtLCB2YWwpID0+IHsKICAgICAgICAgICAgICByZXR1cm4gc3VtICsgdmFsW2l0ZW0uZGF0YUluZGV4XQogICAgICAgICAgICB9LCAwKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KICB9Cg=="},{"version":3,"sources":["StandardTable.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"StandardTable.vue","sourceRoot":"src/components/table","sourcesContent":["<template>\r\n  <div class=\"standard-table\">\r\n    <!-- <div class=\"alert\">\r\n      <a-alert type=\"info\" :show-icon=\"true\">\r\n        <div slot=\"message\">\r\n          已选择&nbsp;<a style=\"font-weight: 600\">{{ selectedRows.length }}</a>&nbsp;&nbsp;\r\n          <template    v-for=\"(item, index) in needTotalList\"  v-if=\"item.needTotal\" >\r\n            {{ item.title }} 总计&nbsp;\r\n            <a :key=\"index\" style=\"font-weight: 600\">\r\n              {{ item.customRender ? item.customRender(item.total) : item.total }}\r\n            </a>&nbsp;&nbsp;\r\n          </template>\r\n          <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n        </div>\r\n      </a-alert>\r\n    </div> -->\r\n    <a-table\r\n      :size=\"size\"\r\n      :bordered=\"bordered\"\r\n      :loading=\"loading\"\r\n      :columns=\"columns\"\r\n      :dataSource=\"current\"\r\n      :rowKey=\"rowKey\"\r\n      :pagination=\"pagination\"\r\n      :rowSelection=\"{ selectedRowKeys: selectedRowKeys, onChange: updateSelect }\"\r\n    >\r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: \"StandardTable\",\r\n    // props: ['bordered', 'loading', 'columns', 'data', 'rowKey', 'pagination', 'selectedRows'],\r\n    props: {\r\n\r\n      /**\r\n       * 数据加载函数，返回值必须是 Promise\r\n       * 默认情况下必须传递 data 参数；\r\n       *    如果使用本地数据渲染表格，业务代码中将获取本地数据包装为 Promise 即可。\r\n       *\r\n       * currentData 用于向外暴露表格当前渲染的数据，\r\n       * 业务开发中也可以直接修改 currentData，从而重新渲染表格（仅推荐用于客户端排序、数据过滤等场景）\r\n       */\r\n      data: {\r\n        type: Function,\r\n        required: true\r\n      },\r\n      dataSource: {\r\n        type: Array,\r\n        default () {\r\n          return []\r\n        }\r\n      },\r\n      columns: {\r\n        type: Array,\r\n        required: true\r\n      },\r\n/*      pagination: {\r\n        type: Object,\r\n        default () {\r\n          return {}\r\n        }\r\n      },*/\r\n      pageSize: {\r\n        type: Number,\r\n        default: 10\r\n      },\r\n      pageNum: {\r\n        type: Number,\r\n        default: 1\r\n      },\r\n      pageSizeOptions: {\r\n        type: Array,\r\n        default () {\r\n          return ['10', '20', '30', '40', '50']\r\n        }\r\n      },\r\n      responseParamsName: {\r\n        type: Object,\r\n        default () {\r\n          return {}\r\n        }\r\n      },\r\n      bordered: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      /**\r\n       * 表格大小风格，default, middle, small\r\n       */\r\n      size: {\r\n        type: String,\r\n        default: 'default'\r\n      },\r\n      rowKey: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      selectedRows: {\r\n        type: Array,\r\n        default: null\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        needTotalList: [],\r\n        selectedRowKeys: [],\r\n\r\n        loading: true,\r\n\r\n        total: 0,\r\n        pageNumber: this.pageNum,\r\n        currentPageSize: this.pageSize,\r\n        defaultCurrent: 1,\r\n        sortParams: {},\r\n\r\n        current: [],\r\n        pagination: {},\r\n        paramsName: {},\r\n      }\r\n    },\r\n    created () {\r\n      //数据请求参数配置\r\n      this.paramsName = Object.assign(\r\n        {},\r\n        {\r\n          pageNumber: \"pageNo\",\r\n          pageSize: \"pageSize\",\r\n          total: \"totalCount\",\r\n          results: \"data\",\r\n          sortColumns: \"sortColumns\"\r\n        },\r\n        this.responseParamsName\r\n      );\r\n\r\n      this.needTotalList = this.initTotalList(this.columns)\r\n\r\n      // load data\r\n      this.loadData( { pageNum: this.pageNumber } )\r\n    },\r\n    methods: {\r\n      updateSelect (selectedRowKeys, selectedRows) {\r\n        this.selectedRowKeys = selectedRowKeys\r\n        let list = this.needTotalList\r\n        this.needTotalList = list.map(item => {\r\n          return {\r\n            ...item,\r\n            total: selectedRows.reduce((sum, val) => {\r\n              return sum + val[item.dataIndex]\r\n            }, 0)\r\n          }\r\n        })\r\n        this.$emit('change', selectedRowKeys, selectedRows)\r\n      },\r\n      initTotalList (columns) {\r\n        const totalList = []\r\n        columns.forEach(column => {\r\n          if (column.needTotal) {\r\n            totalList.push({ ...column, total: 0 })\r\n          }\r\n        })\r\n        return totalList\r\n      },\r\n\r\n      loadData (params) {\r\n        let that = this\r\n        that.loading = true\r\n        params = Object.assign({}, params)\r\n        const remoteParams = Object.assign({}, that.sortParams)\r\n        remoteParams[that.paramsName.pageNumber] = params.pageNum || that.pageNumber\r\n        remoteParams[that.paramsName.pageSize] = params.pageSize || that.currentPageSize\r\n\r\n        if (params.pageNum) {\r\n          that.pageNumber = params.pageNum\r\n        }\r\n        if (params.pageSize) {\r\n          that.currentPageSize = params.pageSize\r\n        }\r\n\r\n        let dataPromise = that.data(remoteParams)\r\n\r\n        dataPromise.then( response => {\r\n          if (!response) {\r\n            that.loading = false\r\n            return\r\n          }\r\n          let results = response[that.paramsName.results]\r\n          results = (results instanceof Array && results) || []\r\n\r\n          that.current = results\r\n\r\n          that.$emit(\"update:currentData\", that.current.slice())\r\n          that.$emit(\"dataloaded\", that.current.slice())\r\n\r\n          that.total = response[that.paramsName.total] * 1\r\n          that.pagination = that.pager()\r\n          that.loading = false\r\n        }, () => {\r\n          // error callback\r\n          that.loading = false\r\n        })\r\n      },\r\n      // eslint-disable-next-line\r\n      onPagerChange (page, pageSize) {\r\n        this.pageNumber = page\r\n        this.loadData({ pageNum: page })\r\n      },\r\n      onPagerSizeChange (current, size) {\r\n        this.currentPageSize = size\r\n        /*\r\n        if (current === this.pageNumber) this.loadData()\r\n        console.log('page-size-change', current, size)\r\n        */\r\n      },\r\n      onClearSelected () {\r\n        this.selectedRowKeys = []\r\n        this.updateSelect([], [])\r\n      },\r\n      pager () {\r\n        return {\r\n          total: this.total,\r\n          showTotal: total => `共有 ${total} 条`,\r\n          showSizeChanger: true,\r\n          pageSizeOptions: this.pageSizeOptions,\r\n          pageSize: this.pageSize,\r\n          defaultCurrent: this.defaultCurrent,\r\n          onChange: this.onPagerChange,\r\n          onShowSizeChange: this.onPagerSizeChange\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      'selectedRows': function (selectedRows) {\r\n        this.needTotalList = this.needTotalList.map(item => {\r\n          return {\r\n            ...item,\r\n            total: selectedRows.reduce( (sum, val) => {\r\n              return sum + val[item.dataIndex]\r\n            }, 0)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n    .alert {\r\n        margin-bottom: 16px;\r\n    }\r\n</style>"]}]}