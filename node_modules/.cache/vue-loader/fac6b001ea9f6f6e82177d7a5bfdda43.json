{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeInputCell.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JVxeTable\\components\\cells\\JVxeInputCell.vue","mtime":1615948814715},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IEpWWEVUeXBlcyB9IGZyb20gJ0AvY29tcG9uZW50cy9qZWVjZy9KVnhlVGFibGUnCmltcG9ydCBKVnhlQ2VsbE1peGlucyBmcm9tICdAL2NvbXBvbmVudHMvamVlY2cvSlZ4ZVRhYmxlL21peGlucy9KVnhlQ2VsbE1peGlucycKCmNvbnN0IE51bWJlclJlZ0V4cCA9IC9eLT9cZCtcLj9cZCokLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0pWeGVJbnB1dENlbGwnLAogIG1peGluczogW0pWeGVDZWxsTWl4aW5zXSwKICBtZXRob2RzOiB7CgogICAgLyoqIOWkhOeQhmNoYW5nZeS6i+S7tiAqLwogICAgaGFuZGxlQ2hhbmdlKGV2ZW50KSB7CiAgICAgIGxldCB7JHR5cGV9ID0gdGhpcwogICAgICBsZXQge3RhcmdldH0gPSBldmVudAogICAgICBsZXQge3ZhbHVlLCBzZWxlY3Rpb25TdGFydH0gPSB0YXJnZXQKICAgICAgbGV0IGNoYW5nZSA9IHRydWUKICAgICAgaWYgKCR0eXBlID09PSBKVlhFVHlwZXMuaW5wdXROdW1iZXIpIHsKICAgICAgICAvLyDliKTmlq3ovpPlhaXnmoTlgLzmmK/lkKbljLnphY3mlbDlrZfmraPliJnooajovr7lvI/vvIzkuI3ljLnphY3lsLHov5jljp8KICAgICAgICBpZiAoIU51bWJlclJlZ0V4cC50ZXN0KHZhbHVlKSAmJiAodmFsdWUgIT09ICcnICYmIHZhbHVlICE9PSAnLScpKSB7CiAgICAgICAgICBjaGFuZ2UgPSBmYWxzZQogICAgICAgICAgdmFsdWUgPSB0aGlzLmlubmVyVmFsdWUKICAgICAgICAgIHRhcmdldC52YWx1ZSA9IHZhbHVlIHx8ICcnCiAgICAgICAgICBpZiAodHlwZW9mIHNlbGVjdGlvblN0YXJ0ID09PSAnbnVtYmVyJykgewogICAgICAgICAgICB0YXJnZXQuc2VsZWN0aW9uU3RhcnQgPSBzZWxlY3Rpb25TdGFydCAtIDEKICAgICAgICAgICAgdGFyZ2V0LnNlbGVjdGlvbkVuZCA9IHNlbGVjdGlvblN0YXJ0IC0gMQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgICAvLyDop6blj5Hkuovku7bvvIzlrZjlgqjovpPlhaXnmoTlgLwKICAgICAgaWYgKGNoYW5nZSkgewogICAgICAgIHRoaXMuaGFuZGxlQ2hhbmdlQ29tbW9uKHZhbHVlKQogICAgICB9CgogICAgICBpZiAoJHR5cGUgPT09IEpWWEVUeXBlcy5pbnB1dE51bWJlcikgewogICAgICAgIC8vIHRoaXMucmVjYWxjT25lU3RhdGlzdGljc0NvbHVtbihjb2wua2V5KQogICAgICB9CiAgICB9LAoKICAgIC8qKiDlpITnkIZibHVy5aSx5Y6754Sm54K55LqL5Lu2ICovCiAgICBoYW5kbGVCbHVyKGV2ZW50KSB7CiAgICAgIGxldCB7JHR5cGV9ID0gdGhpcwogICAgICBsZXQge3RhcmdldH0gPSBldmVudAogICAgICAvLyDliKTmlq3ovpPlhaXnmoTlgLzmmK/lkKbljLnphY3mlbDlrZfmraPliJnooajovr7lvI/vvIzkuI3ljLnphY3lsLHnva7nqboKICAgICAgaWYgKCR0eXBlID09PSBKVlhFVHlwZXMuaW5wdXROdW1iZXIpIHsKICAgICAgICBpZiAoIU51bWJlclJlZ0V4cC50ZXN0KHRhcmdldC52YWx1ZSkpIHsKICAgICAgICAgIHRhcmdldC52YWx1ZSA9ICcnCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRhcmdldC52YWx1ZSA9IE51bWJlci5wYXJzZUZsb2F0KHRhcmdldC52YWx1ZSkKICAgICAgICB9CiAgICAgICAgdGhpcy5oYW5kbGVDaGFuZ2VDb21tb24odGFyZ2V0LnZhbHVlKQogICAgICB9CgogICAgICB0aGlzLmhhbmRsZUJsdXJDb21tb24odGFyZ2V0LnZhbHVlKQogICAgfSwKCiAgfSwKICAvLyDjgJDnu4Tku7blop7lvLrjgJHms6jph4ror6bop4HvvJpKVnhlQ2VsbE1peGlucy5qcwogIGVuaGFuY2VkOiB7CiAgICBpbnN0YWxsT3B0aW9uczogewogICAgICAvLyDoh6rliqjogZrnhKbnmoQgY2xhc3Mg57G75ZCNCiAgICAgIGF1dG9mb2N1czogJy5hbnQtaW5wdXQnLAogICAgfSwKICAgIGdldFZhbHVlKHZhbHVlKSB7CiAgICAgIGlmICh0aGlzLiR0eXBlID09PSBKVlhFVHlwZXMuaW5wdXROdW1iZXIgJiYgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgewogICAgICAgIGlmIChOdW1iZXJSZWdFeHAudGVzdCh2YWx1ZSkpIHsKICAgICAgICAgIHJldHVybiBOdW1iZXIucGFyc2VGbG9hdCh2YWx1ZSkKICAgICAgICB9CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlCiAgICB9LAogIH0KfQo="},{"version":3,"sources":["JVxeInputCell.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JVxeInputCell.vue","sourceRoot":"src/components/jeecg/JVxeTable/components/cells","sourcesContent":["<template>\r\n  <a-input\r\n    ref=\"input\"\r\n    :value=\"innerValue\"\r\n    v-bind=\"cellProps\"\r\n    @blur=\"handleBlur\"\r\n    @change=\"handleChange\"\r\n  />\r\n</template>\r\n\r\n<script>\r\n  import { JVXETypes } from '@/components/jeecg/JVxeTable'\r\n  import JVxeCellMixins from '@/components/jeecg/JVxeTable/mixins/JVxeCellMixins'\r\n\r\n  const NumberRegExp = /^-?\\d+\\.?\\d*$/\r\n  export default {\r\n    name: 'JVxeInputCell',\r\n    mixins: [JVxeCellMixins],\r\n    methods: {\r\n\r\n      /** 处理change事件 */\r\n      handleChange(event) {\r\n        let {$type} = this\r\n        let {target} = event\r\n        let {value, selectionStart} = target\r\n        let change = true\r\n        if ($type === JVXETypes.inputNumber) {\r\n          // 判断输入的值是否匹配数字正则表达式，不匹配就还原\r\n          if (!NumberRegExp.test(value) && (value !== '' && value !== '-')) {\r\n            change = false\r\n            value = this.innerValue\r\n            target.value = value || ''\r\n            if (typeof selectionStart === 'number') {\r\n              target.selectionStart = selectionStart - 1\r\n              target.selectionEnd = selectionStart - 1\r\n            }\r\n          }\r\n        }\r\n        // 触发事件，存储输入的值\r\n        if (change) {\r\n          this.handleChangeCommon(value)\r\n        }\r\n\r\n        if ($type === JVXETypes.inputNumber) {\r\n          // this.recalcOneStatisticsColumn(col.key)\r\n        }\r\n      },\r\n\r\n      /** 处理blur失去焦点事件 */\r\n      handleBlur(event) {\r\n        let {$type} = this\r\n        let {target} = event\r\n        // 判断输入的值是否匹配数字正则表达式，不匹配就置空\r\n        if ($type === JVXETypes.inputNumber) {\r\n          if (!NumberRegExp.test(target.value)) {\r\n            target.value = ''\r\n          } else {\r\n            target.value = Number.parseFloat(target.value)\r\n          }\r\n          this.handleChangeCommon(target.value)\r\n        }\r\n\r\n        this.handleBlurCommon(target.value)\r\n      },\r\n\r\n    },\r\n    // 【组件增强】注释详见：JVxeCellMixins.js\r\n    enhanced: {\r\n      installOptions: {\r\n        // 自动聚焦的 class 类名\r\n        autofocus: '.ant-input',\r\n      },\r\n      getValue(value) {\r\n        if (this.$type === JVXETypes.inputNumber && typeof value === 'string') {\r\n          if (NumberRegExp.test(value)) {\r\n            return Number.parseFloat(value)\r\n          }\r\n        }\r\n        return value\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}