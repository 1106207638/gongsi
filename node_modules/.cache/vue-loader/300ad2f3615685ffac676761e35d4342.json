{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\dynamic\\JSqlCodeEditorDyn.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\dynamic\\JSqlCodeEditorDyn.vue","mtime":1615948814836},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBsb2FkIGZyb20gJy4vbG9hZCcKaW1wb3J0ICdAL2Fzc2V0cy9sZXNzL2NvZGVtaXJyb3JfaWRlYS5jc3MnCmltcG9ydCAnLi9jbV9zcWxfaGludC5qcycKaW1wb3J0IHsgc3FsX2tleXdvcmQgfSBmcm9tICcuL1Jlc291cmNlJwoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSlNxbENvZGVFZGl0b3JEeW4nLAogIHByb3BzOnsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICd2dWUtZWRpdG9yLScgKyBuZXcgRGF0ZSgpICsgKChNYXRoLnJhbmRvbSgpICogMTAwMCkudG9GaXhlZCgwKSArICcnKQogICAgICB9CiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIC8vIOaYvuekuuihjOWPtwogICAgbGluZU51bWJlcnM6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHBsYWNlaG9sZGVyOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICB6SW5kZXg6IHsKICAgICAgdHlwZTogW051bWJlciwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogOTk5CiAgICB9LAogICAgYXV0b0hlaWdodDogewogICAgICB0eXBlOiBbU3RyaW5nLCBCb29sZWFuXSwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIC8vIOS4jeiHqumAguW6lOmrmOW6pueahOaDheWGteS4i+eUn+aViOeahOWbuuWumumrmOW6pgogICAgaGVpZ2h0OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICcyNDBweCcKICAgIH0sCiAgICBhdXRvSGVpZ2h0OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIEJvb2xlYW5dLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgLy8g5piv5ZCm5pi+56S65YWo5bGP5oyJ6ZKuCiAgICBmdWxsU2NyZWVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgYXV0b0hpbnQ6ewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9CgogIH0sCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgZHluYW1pY0lkOiB0aGlzLmlkLAogICAgICBjb2RlcjogJycsCiAgICAgIGhhc0NvZGU6IGZhbHNlLAogICAgICBjb2RlOiAnJywKICAgICAgLy8gY29kZSDnvJbovpHlmagg5piv5ZCm5YWo5bGPCiAgICAgIGZ1bGxDb2RlcjogZmFsc2UsCiAgICAgIGljb25UeXBlOiAnZnVsbHNjcmVlbicsCiAgICB9CiAgfSwKICBjb21wdXRlZDp7CiAgICBwbGFjZWhvbGRlclNob3coKSB7CiAgICAgIGlmICh0aGlzLnBsYWNlaG9sZGVyID09IG51bGwpIHsKICAgICAgICByZXR1cm4gYOivt+WcqOatpOi+k+WFpWphdmFzY3JpcHTku6PnoIFgCiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGxhY2Vob2xkZXIKICAgICAgfQogICAgfSwKICAgIG51bGxUaXBTdHlsZSgpewogICAgICBpZiAodGhpcy5saW5lTnVtYmVycykgewogICAgICAgIHJldHVybiB7IGxlZnQ6ICczNnB4JyB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHsgbGVmdDogJzEycHgnIH0KICAgICAgfQogICAgfSwKICAgIGlzQXV0b0hlaWdodCgpIHsKICAgICAgbGV0IHthdXRvSGVpZ2h0fSA9IHRoaXMKICAgICAgaWYgKHR5cGVvZiBhdXRvSGVpZ2h0ID09PSAnc3RyaW5nJyAmJiBhdXRvSGVpZ2h0LnRvTG93ZXJDYXNlKCkudHJpbSgpID09PSAnIWllJykgewogICAgICAgIGF1dG9IZWlnaHQgPSAhKGlzSUUoKSB8fCBpc0lFMTEoKSkKICAgICAgfSBlbHNlIHsKICAgICAgICBhdXRvSGVpZ2h0ID0gdHJ1ZQogICAgICB9CiAgICAgIHJldHVybiBhdXRvSGVpZ2h0CiAgICB9LAogICAgZnVsbFNjcmVlblBhcmVudFByb3BzKCkgewogICAgICBsZXQgcHJvcHMgPSB7CiAgICAgICAgY2xhc3M6IHsKICAgICAgICAgICdmdWxsLXNjcmVlbi1wYXJlbnQnOiB0cnVlLAogICAgICAgICAgJ2Z1bGwtc2NyZWVuJzogdGhpcy5mdWxsQ29kZXIsCiAgICAgICAgICAnYXV0by1oZWlnaHQnOiB0aGlzLmlzQXV0b0hlaWdodAogICAgICAgIH0sCiAgICAgICAgc3R5bGU6IHt9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZnVsbENvZGVyKSB7CiAgICAgICAgcHJvcHMuc3R5bGVbJ3otaW5kZXgnXSA9IHRoaXMuekluZGV4CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmlzQXV0b0hlaWdodCkgewogICAgICAgIHByb3BzLnN0eWxlWydoZWlnaHQnXSA9ICh0eXBlb2YgdGhpcy5oZWlnaHQgPT09ICdudW1iZXInID8gdGhpcy5oZWlnaHQgKyAncHgnIDogdGhpcy5oZWlnaHQpCiAgICAgIH0KICAgICAgcmV0dXJuIHByb3BzCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgZnVsbENvZGVyOnsKICAgICAgaGFuZGxlcih2YWx1ZSkgewogICAgICAgIGlmKHZhbHVlKXsKICAgICAgICAgIHRoaXMuaWNvblR5cGU9ImZ1bGxzY3JlZW4tZXhpdCIKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuaWNvblR5cGU9ImZ1bGxzY3JlZW4iCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5pbml0KCkKICB9LAogIG1ldGhvZHM6ewogICAgaW5pdCgpewogICAgICB0aGlzLm1haW4oKTsKICAgIH0sCiAgICBtYWluKCl7CiAgICAgIGxldCBvYmogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmR5bmFtaWNJZCk7CiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOwogICAgICBsZXQgZWRpdG9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEob2JqLHsKICAgICAgICB0aGVtZTonaWRlYScsCiAgICAgICAgbGluZU51bWJlcnM6IHRoaXMubGluZU51bWJlcnMsCiAgICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLAogICAgICAgIG1vZGU6ICJzcWwiLAogICAgICAgIGluZGVudFVuaXQ6IDEsCiAgICAgICAgaW5kZW50V2l0aFRhYnM6IHRydWUsCiAgICAgICAgc3R5bGVBY3RpdmVMaW5lOiB0cnVlLAogICAgICAgIC8qIHN0eWxlU2VsZWN0ZWRUZXh0OiBmYWxzZSwgKi8KICAgICAgICBleHRyYUtleXM6IHsKICAgICAgICAgICJGMTEiOiBmdW5jdGlvbihjbSkgewogICAgICAgICAgICB0aGF0LmZ1bGxDb2RlciA9ICF0aGF0LmZ1bGxDb2RlcgogICAgICAgICAgICBjbS5zZXRPcHRpb24oImZ1bGxTY3JlZW4iLCAhY20uZ2V0T3B0aW9uKCJmdWxsU2NyZWVuIikpOwogICAgICAgICAgfSwKICAgICAgICAgICJFc2MiOiBmdW5jdGlvbihjbSkgewogICAgICAgICAgICB0aGF0LmZ1bGxDb2RlciA9IGZhbHNlCiAgICAgICAgICAgIGlmIChjbS5nZXRPcHRpb24oImZ1bGxTY3JlZW4iKSkgY20uc2V0T3B0aW9uKCJmdWxsU2NyZWVuIiwgZmFsc2UpOwogICAgICAgICAgfSwKICAgICAgICAgICJBbHQtLyI6ICBmdW5jdGlvbihjbSkgewogICAgICAgICAgICBjbS5zaG93SGludCgpOwogICAgICAgICAgfSwKICAgICAgICAgICJUYWIiOiAoY20pID0+IHsKICAgICAgICAgICAgaWYgKGNtLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHsKICAgICAgICAgICAgICBjbS5pbmRlbnRTZWxlY3Rpb24oJ2FkZCcpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vY20uaW5kZW50TGluZShjbS5nZXRDdXJzb3IoKS5saW5lLCAiYWRkIik7CiAgICAgICAgICAgICAgLy/otbDkuKTmoLwg56ys5LiJ5qC86L6T5YWlCiAgICAgICAgICAgICAgY20ucmVwbGFjZVNlbGVjdGlvbihBcnJheSgzKS5qb2luKCIgIiksICJlbmQiLCAiK2lucHV0Iik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICAiU2hpZnQtVGFiIjogKGNtKSA9PiB7CiAgICAgICAgICAgIGlmIChjbS5zb21ldGhpbmdTZWxlY3RlZCgpKSB7CiAgICAgICAgICAgICAgY20uaW5kZW50U2VsZWN0aW9uKCdzdWJ0cmFjdCcpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIGNtLmluZGVudExpbmUoY20uZ2V0Q3Vyc29yKCkubGluZSwgInN1YnRyYWN0Iik7CiAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gY20uZ2V0Q3Vyc29yKCk7CiAgICAgICAgICAgICAgLy8g5YWJ5qCH5Zue6YCAIGluZGV4VW5pdCDlrZfnrKYKICAgICAgICAgICAgICBjbS5zZXRDdXJzb3Ioe2xpbmU6IGN1cnNvci5saW5lLCBjaDogY3Vyc29yLmNoIC0gNH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiA7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KQogICAgICB0aGlzLmNvZGVyID0gZWRpdG9yCiAgICAgIHRoaXMuYWRkRXZlbnQoKTsKICAgICAgdGhpcy5zZXRDb2RlclZhbHVlKCk7CiAgICAgIHRoaXMuYWRkU3lzdGVtSGludCgpOwogICAgfSwKICAgIHNldENvZGVyVmFsdWUoKXsKICAgICAgaWYodGhpcy52YWx1ZXx8dGhpcy5jb2RlKXsKICAgICAgICB0aGlzLmhhc0NvZGU9dHJ1ZQogICAgICAgIHRoaXMuc2V0Q29kZUNvbnRlbnQodGhpcy52YWx1ZSB8fCB0aGlzLmNvZGUpCiAgICAgIH1lbHNlewogICAgICAgIHRoaXMuY29kZXIuc2V0VmFsdWUoJycpCiAgICAgICAgdGhpcy5oYXNDb2RlPWZhbHNlCiAgICAgIH0KICAgIH0sCiAgICBnZXRDb2RlQ29udGVudCgpewogICAgICByZXR1cm4gdGhpcy5jb2RlCiAgICB9LAogICAgc2V0Q29kZUNvbnRlbnQodmFsKXsKICAgICAgc2V0VGltZW91dCgoKT0+ewogICAgICAgIGlmKCF2YWwpewogICAgICAgICAgdGhpcy5jb2Rlci5zZXRWYWx1ZSgnJykKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuY29kZXIuc2V0VmFsdWUodmFsKQogICAgICAgIH0KICAgICAgfSwzMDApCiAgICB9LAogICAgYWRkU3lzdGVtSGludCgpewogICAgICB0aGlzLmNvZGVyLnNldE9wdGlvbignaGludE9wdGlvbnMnLCB7CiAgICAgICAgY29tcGxldGVTaW5nbGU6IGZhbHNlLAogICAgICAgIHRhYmxlczogc3FsX2tleXdvcmQKICAgICAgfSk7CiAgICB9LAogICAgYWRkRXZlbnQoKXsKICAgICAgaWYodGhpcy5hdXRvSGludCl7CiAgICAgICAgdGhpcy5jb2Rlci5vbignY3Vyc29yQWN0aXZpdHknLCAoKT0+ewogICAgICAgICAgdGhpcy5jb2Rlci5zaG93SGludCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuY29kZXIub24oJ2NoYW5nZScsIChjb2RlcikgPT4gewogICAgICAgIHRoaXMuY29kZSA9IGNvZGVyLmdldFZhbHVlKCkKICAgICAgICBpZih0aGlzLmNvZGUpewogICAgICAgICAgdGhpcy5oYXNDb2RlPXRydWUKICAgICAgICB9ZWxzZXsKICAgICAgICAgIHRoaXMuaGFzQ29kZT1mYWxzZQogICAgICAgIH0KICAgICAgICBpZiAodGhpcy4kZW1pdCkgewogICAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLmNvZGUpCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5jb2Rlci5vbignZm9jdXMnLCAoKSA9PiB7CiAgICAgICAgdGhpcy5oYXNDb2RlPXRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuY29kZXIub24oJ2JsdXInLCAoKSA9PiB7CiAgICAgICAgaWYodGhpcy5jb2RlKXsKICAgICAgICAgIHRoaXMuaGFzQ29kZT10cnVlCiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLmhhc0NvZGU9ZmFsc2UKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGxvYWRSZXNvdXJjZShzcmMsdHlwZSl7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSxyZWplY3QpPT57CiAgICAgICAgbG9hZChzcmMsdHlwZSwobXNnKT0+ewogICAgICAgICAgaWYoIW1zZyl7CiAgICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICByZWplY3QobXNnKQogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgbnVsbFRpcENsaWNrKCl7CiAgICAgIHRoaXMuY29kZXIuZm9jdXMoKQogICAgfSwKICAgIGZ1bGxUb2dnbGUoKXsKICAgICAgdGhpcy5mdWxsQ29kZXIgPSAhdGhpcy5mdWxsQ29kZXIKICAgICAgdGhpcy5jb2Rlci5zZXRPcHRpb24oImZ1bGxTY3JlZW4iLCB0aGlzLmZ1bGxDb2Rlcik7CiAgICB9CgogIH0KCgp9Cg=="},{"version":3,"sources":["JSqlCodeEditorDyn.vue"],"names":[],"mappings":";;;;;;;;;AASA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA","file":"JSqlCodeEditorDyn.vue","sourceRoot":"src/components/jeecg/dynamic","sourcesContent":["<template>\r\n  <div class=\"jeecg-editor-ty\" :class=\"fullCoder?'jeecg-editor-max':'jeecg-editor-min'\">\r\n    <a-icon v-if=\"fullScreen\" class=\"full-screen-icon\" :type=\"iconType\" @click=\"()=>fullCoder=!fullCoder\"/>\r\n    <textarea :id=\"dynamicId\" />\r\n    <span @click=\"nullTipClick\" class=\"null-tip\" :class=\"{'null-tip-hidden': hasCode}\" :style=\"nullTipStyle\">{{ placeholderShow }}</span>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import load from './load'\r\n  import '@/assets/less/codemirror_idea.css'\r\n  import './cm_sql_hint.js'\r\n  import { sql_keyword } from './Resource'\r\n\r\n\r\n  export default {\r\n    name: 'JSqlCodeEditorDyn',\r\n    props:{\r\n      id: {\r\n        type: String,\r\n        default: function() {\r\n          return 'vue-editor-' + new Date() + ((Math.random() * 1000).toFixed(0) + '')\r\n        }\r\n      },\r\n      value: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      // 显示行号\r\n      lineNumbers: {\r\n        type: Boolean,\r\n        default: true\r\n      },\r\n      placeholder: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      zIndex: {\r\n        type: [Number, String],\r\n        default: 999\r\n      },\r\n      autoHeight: {\r\n        type: [String, Boolean],\r\n        default: true\r\n      },\r\n      // 不自适应高度的情况下生效的固定高度\r\n      height: {\r\n        type: [String, Number],\r\n        default: '240px'\r\n      },\r\n      autoHeight: {\r\n        type: [String, Boolean],\r\n        default: true\r\n      },\r\n      // 是否显示全屏按钮\r\n      fullScreen: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      autoHint:{\r\n        type: Boolean,\r\n        default: true\r\n      }\r\n\r\n    },\r\n    data(){\r\n      return {\r\n        dynamicId: this.id,\r\n        coder: '',\r\n        hasCode: false,\r\n        code: '',\r\n        // code 编辑器 是否全屏\r\n        fullCoder: false,\r\n        iconType: 'fullscreen',\r\n      }\r\n    },\r\n    computed:{\r\n      placeholderShow() {\r\n        if (this.placeholder == null) {\r\n          return `请在此输入javascript代码`\r\n        } else {\r\n          return this.placeholder\r\n        }\r\n      },\r\n      nullTipStyle(){\r\n        if (this.lineNumbers) {\r\n          return { left: '36px' }\r\n        } else {\r\n          return { left: '12px' }\r\n        }\r\n      },\r\n      isAutoHeight() {\r\n        let {autoHeight} = this\r\n        if (typeof autoHeight === 'string' && autoHeight.toLowerCase().trim() === '!ie') {\r\n          autoHeight = !(isIE() || isIE11())\r\n        } else {\r\n          autoHeight = true\r\n        }\r\n        return autoHeight\r\n      },\r\n      fullScreenParentProps() {\r\n        let props = {\r\n          class: {\r\n            'full-screen-parent': true,\r\n            'full-screen': this.fullCoder,\r\n            'auto-height': this.isAutoHeight\r\n          },\r\n          style: {}\r\n        }\r\n        if (this.fullCoder) {\r\n          props.style['z-index'] = this.zIndex\r\n        }\r\n        if (!this.isAutoHeight) {\r\n          props.style['height'] = (typeof this.height === 'number' ? this.height + 'px' : this.height)\r\n        }\r\n        return props\r\n      }\r\n    },\r\n    watch: {\r\n      fullCoder:{\r\n        handler(value) {\r\n          if(value){\r\n            this.iconType=\"fullscreen-exit\"\r\n          }else{\r\n            this.iconType=\"fullscreen\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.init()\r\n    },\r\n    methods:{\r\n      init(){\r\n        this.main();\r\n      },\r\n      main(){\r\n        let obj = document.getElementById(this.dynamicId);\r\n        const that = this;\r\n        let editor = CodeMirror.fromTextArea(obj,{\r\n          theme:'idea',\r\n          lineNumbers: this.lineNumbers,\r\n          lineWrapping: true,\r\n          mode: \"sql\",\r\n          indentUnit: 1,\r\n          indentWithTabs: true,\r\n          styleActiveLine: true,\r\n          /* styleSelectedText: false, */\r\n          extraKeys: {\r\n            \"F11\": function(cm) {\r\n              that.fullCoder = !that.fullCoder\r\n              cm.setOption(\"fullScreen\", !cm.getOption(\"fullScreen\"));\r\n            },\r\n            \"Esc\": function(cm) {\r\n              that.fullCoder = false\r\n              if (cm.getOption(\"fullScreen\")) cm.setOption(\"fullScreen\", false);\r\n            },\r\n            \"Alt-/\":  function(cm) {\r\n              cm.showHint();\r\n            },\r\n            \"Tab\": (cm) => {\r\n              if (cm.somethingSelected()) {\r\n                cm.indentSelection('add');\r\n              } else {\r\n                //cm.indentLine(cm.getCursor().line, \"add\");\r\n                //走两格 第三格输入\r\n                cm.replaceSelection(Array(3).join(\" \"), \"end\", \"+input\");\r\n              }\r\n            },\r\n            \"Shift-Tab\": (cm) => {\r\n              if (cm.somethingSelected()) {\r\n                cm.indentSelection('subtract');\r\n              } else {\r\n                // cm.indentLine(cm.getCursor().line, \"subtract\");\r\n                const cursor = cm.getCursor();\r\n                // 光标回退 indexUnit 字符\r\n                cm.setCursor({line: cursor.line, ch: cursor.ch - 4});\r\n              }\r\n              return ;\r\n            }\r\n          }\r\n        })\r\n        this.coder = editor\r\n        this.addEvent();\r\n        this.setCoderValue();\r\n        this.addSystemHint();\r\n      },\r\n      setCoderValue(){\r\n        if(this.value||this.code){\r\n          this.hasCode=true\r\n          this.setCodeContent(this.value || this.code)\r\n        }else{\r\n          this.coder.setValue('')\r\n          this.hasCode=false\r\n        }\r\n      },\r\n      getCodeContent(){\r\n        return this.code\r\n      },\r\n      setCodeContent(val){\r\n        setTimeout(()=>{\r\n          if(!val){\r\n            this.coder.setValue('')\r\n          }else{\r\n            this.coder.setValue(val)\r\n          }\r\n        },300)\r\n      },\r\n      addSystemHint(){\r\n        this.coder.setOption('hintOptions', {\r\n          completeSingle: false,\r\n          tables: sql_keyword\r\n        });\r\n      },\r\n      addEvent(){\r\n        if(this.autoHint){\r\n          this.coder.on('cursorActivity', ()=>{\r\n            this.coder.showHint();\r\n          });\r\n        }\r\n        this.coder.on('change', (coder) => {\r\n          this.code = coder.getValue()\r\n          if(this.code){\r\n            this.hasCode=true\r\n          }else{\r\n            this.hasCode=false\r\n          }\r\n          if (this.$emit) {\r\n            this.$emit('input', this.code)\r\n          }\r\n        });\r\n        this.coder.on('focus', () => {\r\n          this.hasCode=true\r\n        });\r\n        this.coder.on('blur', () => {\r\n          if(this.code){\r\n            this.hasCode=true\r\n          }else{\r\n            this.hasCode=false\r\n          }\r\n        });\r\n      },\r\n      loadResource(src,type){\r\n        return new Promise((resolve,reject)=>{\r\n          load(src,type,(msg)=>{\r\n            if(!msg){\r\n              resolve();\r\n            }else{\r\n              reject(msg)\r\n            }\r\n          })\r\n        })\r\n      },\r\n      nullTipClick(){\r\n        this.coder.focus()\r\n      },\r\n      fullToggle(){\r\n        this.fullCoder = !this.fullCoder\r\n        this.coder.setOption(\"fullScreen\", this.fullCoder);\r\n      }\r\n\r\n    }\r\n\r\n\r\n  }\r\n</script>\r\n<style lang=\"less\" >\r\n  .jeecg-editor-ty{\r\n    position: relative;\r\n\r\n    .full-screen-icon {\r\n      opacity: 0;\r\n      color: black;\r\n      width: 20px;\r\n      height: 20px;\r\n      line-height: 24px;\r\n      background-color: white;\r\n      position: absolute;\r\n      top: 4px;\r\n      right: 2px;\r\n      z-index: 9;\r\n      cursor: pointer;\r\n      transition: opacity 0.3s;\r\n    }\r\n    &:hover {\r\n      .full-screen-icon {\r\n        opacity: 1;\r\n\r\n        &:hover {\r\n          background-color: rgba(255, 255, 255, 0.88);\r\n        }\r\n      }\r\n    }\r\n\r\n    .null-tip{\r\n      position: absolute;\r\n      top: 4px;\r\n      left: 36px;\r\n      z-index: 10;\r\n      font-size:16px;\r\n      color: #acaaaac9;\r\n      line-height: initial;\r\n    }\r\n    .null-tip-hidden{\r\n      display: none;\r\n    }\r\n  }\r\n  .jeecg-editor-max{\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 999;\r\n    height: 100%;\r\n    width: 100% !important;\r\n\r\n    .CodeMirror{\r\n      position: inherit !important;\r\n      width: 100%;\r\n      height: 100%;\r\n    }\r\n    .full-screen-icon{\r\n      z-index:9999;\r\n    }\r\n  }\r\n</style>"]}]}