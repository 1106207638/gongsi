{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\system\\modules\\DeptRoleInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\system\\modules\\DeptRoleInfo.vue","mtime":1615948821487},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7SmVlY2dMaXN0TWl4aW59IGZyb20gJ0AvbWl4aW5zL0plZWNnTGlzdE1peGluJwppbXBvcnQge2dldEFjdGlvbn0gZnJvbSAnQC9hcGkvbWFuYWdlJwppbXBvcnQgU3lzRGVwYXJ0Um9sZU1vZGFsIGZyb20gJy4vU3lzRGVwYXJ0Um9sZU1vZGFsJwppbXBvcnQgRGVwdFJvbGVBdXRoTW9kYWwgZnJvbSAnLi9EZXB0Um9sZUF1dGhNb2RhbCcKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGVwdFJvbGVJbmZvJywKICBjb21wb25lbnRzOiB7IERlcHRSb2xlQXV0aE1vZGFsLCBTeXNEZXBhcnRSb2xlTW9kYWwgfSwKICBtaXhpbnM6IFtKZWVjZ0xpc3RNaXhpbl0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRlc2NyaXB0aW9uOiAn6YOo6Zeo6KeS6Imy5L+h5oGvJywKICAgICAgY3VycmVudERlcHRJZDogJycsCiAgICAgIC8vIOihqOWktAogICAgICBjb2x1bW5zOiBbewogICAgICAgIHRpdGxlOiAn6YOo6Zeo6KeS6Imy5ZCN56ewJywKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgZGF0YUluZGV4OiAncm9sZU5hbWUnCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogJ+mDqOmXqOinkuiJsue8lueggScsCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLAogICAgICAgIGRhdGFJbmRleDogJ3JvbGVDb2RlJwogICAgICB9LAogICAgICB7CiAgICAgICAgdGl0bGU6ICfpg6jpl6gnLAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICBkYXRhSW5kZXg6ICdkZXBhcnRJZF9kaWN0VGV4dCcKICAgICAgfSwKICAgICAgewogICAgICAgIHRpdGxlOiAn5aSH5rOoJywKICAgICAgICBhbGlnbjogImNlbnRlciIsCiAgICAgICAgZGF0YUluZGV4OiAnZGVzY3JpcHRpb24nCiAgICAgIH0sCiAgICAgIHsKICAgICAgICB0aXRsZTogJ+aTjeS9nCcsCiAgICAgICAgZGF0YUluZGV4OiAnYWN0aW9uJywKICAgICAgICBzY29wZWRTbG90czoge2N1c3RvbVJlbmRlcjogJ2FjdGlvbid9LAogICAgICAgIGFsaWduOiAiY2VudGVyIiwKICAgICAgICB3aWR0aDogMTcwCiAgICAgIH1dLAogICAgICB1cmw6IHsKICAgICAgICBsaXN0OiAiL3N5cy9zeXNEZXBhcnRSb2xlL2xpc3QiLAogICAgICAgIGRlbGV0ZTogIi9zeXMvc3lzRGVwYXJ0Um9sZS9kZWxldGUiLAogICAgICAgIGRlbGV0ZUJhdGNoOiAiL3N5cy9zeXNEZXBhcnRSb2xlL2RlbGV0ZUJhdGNoIiwKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNlYXJjaFJlc2V0KCkgewogICAgICB0aGlzLnF1ZXJ5UGFyYW0gPSB7fQogICAgICB0aGlzLmxvYWREYXRhKDEpOwogICAgfSwKICAgIGxvYWREYXRhKGFyZykgewogICAgICBpZiAoIXRoaXMudXJsLmxpc3QpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7forr7nva51cmwubGlzdOWxnuaApyEiKQogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIC8v5Yqg6L295pWw5o2uIOiLpeS8oOWFpeWPguaVsDHliJnliqDovb3nrKzkuIDpobXnmoTlhoXlrrkKICAgICAgaWYgKGFyZyA9PT0gMSkgewogICAgICAgIHRoaXMuaXBhZ2luYXRpb24uY3VycmVudCA9IDE7CiAgICAgIH0KICAgICAgbGV0IHBhcmFtcyA9IHRoaXMuZ2V0UXVlcnlQYXJhbXMoKTsvL+afpeivouadoeS7tgogICAgICBwYXJhbXMuZGVwdElkID0gdGhpcy5jdXJyZW50RGVwdElkOwogICAgICBnZXRBY3Rpb24odGhpcy51cmwubGlzdCwgcGFyYW1zKS50aGVuKChyZXMpID0+IHsKICAgICAgICBpZiAocmVzLnN1Y2Nlc3MgJiYgcmVzLnJlc3VsdCkgewogICAgICAgICAgdGhpcy5kYXRhU291cmNlID0gcmVzLnJlc3VsdC5yZWNvcmRzOwogICAgICAgICAgdGhpcy5pcGFnaW5hdGlvbi50b3RhbCA9IHJlcy5yZXN1bHQudG90YWw7CiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIG9wZW4ocmVjb3JkKSB7CiAgICAgIHRoaXMuY3VycmVudERlcHRJZCA9IHJlY29yZC5pZDsKICAgICAgdGhpcy5sb2FkRGF0YSgxKTsKICAgIH0sCiAgICBjbGVhckxpc3QoKSB7CiAgICAgIHRoaXMuY3VycmVudERlcHRJZCA9ICcnOwogICAgICB0aGlzLmRhdGFTb3VyY2UgPSBbXTsKICAgIH0sCiAgICBoYXNTZWxlY3REZXB0KCkgewogICAgICBpZiAodGhpcy5jdXJyZW50RGVwdElkID09ICcnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36YCJ5oup5LiA5Liq6YOo6ZeoISIpCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSwKICAgIGhhbmRsZUVkaXQ6IGZ1bmN0aW9uIChyZWNvcmQpIHsKICAgICAgdGhpcy4kcmVmcy5tb2RhbEZvcm0udGl0bGUgPSAi57yW6L6RIjsKICAgICAgdGhpcy4kcmVmcy5tb2RhbEZvcm0uZGVwYXJ0RGlzYWJsZWQgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLm1vZGFsRm9ybS5kaXNhYmxlU3VibWl0ID0gZmFsc2U7CiAgICAgIHRoaXMuJHJlZnMubW9kYWxGb3JtLmVkaXQocmVjb3JkLHJlY29yZC5kZXBhcnRJZCk7CiAgICB9LAogICAgaGFuZGxlQWRkOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnREZXB0SWQgPT0gJycpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLor7fpgInmi6nkuIDkuKrpg6jpl6ghIikKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyZWZzLm1vZGFsRm9ybS5kZXBhcnREaXNhYmxlZCA9IHRydWU7CiAgICAgICAgdGhpcy4kcmVmcy5tb2RhbEZvcm0uYWRkKHRoaXMuY3VycmVudERlcHRJZCk7CiAgICAgICAgdGhpcy4kcmVmcy5tb2RhbEZvcm0udGl0bGUgPSAi5paw5aKeIjsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVBlcnNzaW9uOiBmdW5jdGlvbihyZWNvcmQpewogICAgICB0aGlzLiRyZWZzLm1vZGFsRGVwdFJvbGUuc2hvdyhyZWNvcmQuaWQscmVjb3JkLmRlcGFydElkKTsKICAgIH0sCiAgfQp9Cg=="},{"version":3,"sources":["DeptRoleInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DeptRoleInfo.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <!-- 搜索区域 -->\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"10\">\r\n          <a-col :md=\"10\" :sm=\"12\">\r\n            <a-form-item label=\"部门角色名称\" style=\"margin-left:8px\">\r\n              <a-input placeholder=\"请输入部门角色\" v-model=\"queryParam.roleName\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n            <a-col :md=\"6\" :sm=\"24\">\r\n              <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\" style=\"margin-left: 18px\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </a-col>\r\n          </span>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\" :md=\"24\" :sm=\"24\">\r\n      <a-button @click=\"handleAdd\" type=\"primary\" icon=\"plus\">新建部门角色</a-button>\r\n      <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n        <a-menu slot=\"overlay\">\r\n          <a-menu-item key=\"1\" @click=\"batchDel\"><a-icon type=\"delete\"/>删除</a-menu-item>\r\n        </a-menu>\r\n        <a-button style=\"margin-left: 8px\"> 批量操作 <a-icon type=\"down\" /></a-button>\r\n      </a-dropdown>\r\n    </div>\r\n    <!-- table区域-begin -->\r\n    <div>\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a style=\"font-weight: 600\">\r\n          {{selectedRowKeys.length }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n      <a-table\r\n        ref=\"table\"\r\n        size=\"middle\"\r\n        bordered\r\n        rowKey=\"id\"\r\n        :columns=\"columns\"\r\n        :dataSource=\"dataSource\"\r\n        :pagination=\"ipagination\"\r\n        :loading=\"loading\"\r\n        :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n        @change=\"handleTableChange\">\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a-dropdown>\r\n            <a class=\"ant-dropdown-link\">\r\n              更多 <a-icon type=\"down\"/>\r\n            </a>\r\n            <a-menu slot=\"overlay\">\r\n              <a-menu-item>\r\n                <a @click=\"handlePerssion(record)\">授权</a>\r\n              </a-menu-item>\r\n              <a-menu-item>\r\n                <a-popconfirm title=\"确定删除吗?\" @confirm=\"() => handleDelete(record.id)\">\r\n                  <a>删除</a>\r\n                </a-popconfirm>\r\n              </a-menu-item>\r\n             </a-menu>\r\n          </a-dropdown>\r\n        </span>\r\n      </a-table>\r\n    </div>\r\n    <!-- table区域-end -->\r\n    <!-- 表单区域 -->\r\n    <sys-depart-role-modal ref=\"modalForm\" @ok=\"modalFormOk\"/>\r\n    <dept-role-auth-modal ref=\"modalDeptRole\" />\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\n  import {getAction} from '@/api/manage'\r\n  import SysDepartRoleModal from './SysDepartRoleModal'\r\n  import DeptRoleAuthModal from './DeptRoleAuthModal'\r\n\r\n  export default {\r\n    name: 'DeptRoleInfo',\r\n    components: { DeptRoleAuthModal, SysDepartRoleModal },\r\n    mixins: [JeecgListMixin],\r\n    data() {\r\n      return {\r\n        description: '部门角色信息',\r\n        currentDeptId: '',\r\n        // 表头\r\n        columns: [{\r\n          title: '部门角色名称',\r\n          align: \"center\",\r\n          dataIndex: 'roleName'\r\n        },\r\n        {\r\n          title: '部门角色编码',\r\n          align: \"center\",\r\n          dataIndex: 'roleCode'\r\n        },\r\n        {\r\n          title: '部门',\r\n          align: \"center\",\r\n          dataIndex: 'departId_dictText'\r\n        },\r\n        {\r\n          title: '备注',\r\n          align: \"center\",\r\n          dataIndex: 'description'\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'action',\r\n          scopedSlots: {customRender: 'action'},\r\n          align: \"center\",\r\n          width: 170\r\n        }],\r\n        url: {\r\n          list: \"/sys/sysDepartRole/list\",\r\n          delete: \"/sys/sysDepartRole/delete\",\r\n          deleteBatch: \"/sys/sysDepartRole/deleteBatch\",\r\n        }\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n      searchReset() {\r\n        this.queryParam = {}\r\n        this.loadData(1);\r\n      },\r\n      loadData(arg) {\r\n        if (!this.url.list) {\r\n          this.$message.error(\"请设置url.list属性!\")\r\n          return\r\n        }\r\n        //加载数据 若传入参数1则加载第一页的内容\r\n        if (arg === 1) {\r\n          this.ipagination.current = 1;\r\n        }\r\n        let params = this.getQueryParams();//查询条件\r\n        params.deptId = this.currentDeptId;\r\n        getAction(this.url.list, params).then((res) => {\r\n          if (res.success && res.result) {\r\n            this.dataSource = res.result.records;\r\n            this.ipagination.total = res.result.total;\r\n          }\r\n        })\r\n      },\r\n      open(record) {\r\n        this.currentDeptId = record.id;\r\n        this.loadData(1);\r\n      },\r\n      clearList() {\r\n        this.currentDeptId = '';\r\n        this.dataSource = [];\r\n      },\r\n      hasSelectDept() {\r\n        if (this.currentDeptId == '') {\r\n          this.$message.error(\"请选择一个部门!\")\r\n          return false;\r\n        }\r\n        return true;\r\n      },\r\n      handleEdit: function (record) {\r\n        this.$refs.modalForm.title = \"编辑\";\r\n        this.$refs.modalForm.departDisabled = true;\r\n        this.$refs.modalForm.disableSubmit = false;\r\n        this.$refs.modalForm.edit(record,record.departId);\r\n      },\r\n      handleAdd: function () {\r\n        if (this.currentDeptId == '') {\r\n          this.$message.error(\"请选择一个部门!\")\r\n        } else {\r\n          this.$refs.modalForm.departDisabled = true;\r\n          this.$refs.modalForm.add(this.currentDeptId);\r\n          this.$refs.modalForm.title = \"新增\";\r\n        }\r\n      },\r\n      handlePerssion: function(record){\r\n        this.$refs.modalDeptRole.show(record.id,record.departId);\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}