{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\online\\modules\\dataBase.vue?vue&type=style&index=0&id=22a70eb5&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue\\src\\views\\online\\modules\\dataBase.vue","mtime":1615948820505},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1615952641773},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1615952643260},{"path":"D:\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1615952643158},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmZvcm0taXRlbSB7DQogIG1hcmdpbi1sZWZ0OiAxNXB4DQp9DQovZGVlcC8gLmZvcm0taXRlbSB7DQogIG1hcmdpbi1sZWZ0OiAwOw0KfQ0KDQo="},{"version":3,"sources":["dataBase.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmIA;AACA;AACA;AACA;AACA;AACA","file":"dataBase.vue","sourceRoot":"src/views/online/modules","sourcesContent":["<template>\r\n  <j-modal\r\n      :title=\"title\"\r\n      :width=\"width\"\r\n      :visible=\"visible\"\r\n      :fullscreen=\"false\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      switchFullscreen\r\n      @ok=\"handleOk\"\r\n      @cancel=\"handleCancel\"\r\n      cancelText=\"关闭\">\r\n    <a-spin :spinning=\"confirmLoading\">\r\n\r\n      <a-radio-group v-model=\"value\">\r\n        <a-radio :style=\"radioStyle\" value=\"normal\">\r\n          普通同步(保留表数据)\r\n        </a-radio>\r\n        <a-radio :style=\"radioStyle\" value=\"force\">\r\n          强制同步(删除表,重新生成)\r\n        </a-radio>\r\n      </a-radio-group>\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {getAction, httpAction} from '@/api/manage'\r\nimport pick from 'lodash.pick'\r\nimport {validateDuplicateValue} from '@/utils/util'\r\nimport JDictSelectTag from \"@/components/dict/JDictSelectTag\"\r\n\r\n\r\nexport default {\r\n  name: \"dataBase\",\r\n  components: {\r\n    JDictSelectTag,\r\n  },\r\n  prop: {\r\n    taskId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      radioStyle: {\r\n        display: 'block',\r\n        height: '30px',\r\n        lineHeight: '30px',\r\n      },\r\n      value:'normal',\r\n      record:null,\r\n      title: \"操作\",\r\n      width: 500,\r\n      visible: false,\r\n      model: {},\r\n      labelCol: {\r\n        xs: {span: 24},\r\n        sm: {span: 5},\r\n      },\r\n      wrapperCol: {\r\n        xs: {span: 24},\r\n        sm: {span: 16},\r\n      },\r\n      form: this.$form.createForm(this),\r\n      confirmLoading: false,\r\n      validatorRules: {},\r\n      url: {\r\n        // 同步数据库\r\n        dataBase: \"online/cgform/api/doDbSynch/\",\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    edit(record) {\r\n      console.log(record)\r\n      this.record = record.id\r\n      this.taskId =\"\"\r\n      this.form.resetFields();\r\n      this.model = Object.assign({}, record);\r\n      this.visible = true;\r\n      this.$nextTick(() => {\r\n        this.form.setFieldsValue(pick(this.model))\r\n      })\r\n    },\r\n    close() {\r\n      this.$emit('close');\r\n      this.visible = false;\r\n    },\r\n    handleOk() {\r\n      const that = this;\r\n      // 触发表单验证\r\n      that.confirmLoading = true;\r\n      let httpurl = '';\r\n      let method = '';\r\n      if (!this.model.id) {\r\n        httpurl += this.url.dataBase+this.record+'/'+this.value\r\n        method = 'post';\r\n      } else {\r\n        httpurl += this.url.dataBase+this.record+'/'+this.value\r\n        method = 'post';\r\n      }\r\n      let formData = {}\r\n      httpAction(httpurl, formData, method).then((res) => {\r\n        if (res.success) {\r\n          that.$message.success(res.message);\r\n          that.$emit('ok');\r\n        } else {\r\n          that.$message.warning(res.message);\r\n        }\r\n      }).finally(() => {\r\n        that.confirmLoading = false;\r\n        that.close();\r\n      })\r\n\r\n\r\n    },\r\n    handleCancel() {\r\n      this.close()\r\n    },\r\n    popupCallback(row) {\r\n      this.form.setFieldsValue(pick(row, 'name'))\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.form-item {\r\n  margin-left: 15px\r\n}\r\n/deep/ .form-item {\r\n  margin-left: 0;\r\n}\r\n\r\n</style>"]}]}