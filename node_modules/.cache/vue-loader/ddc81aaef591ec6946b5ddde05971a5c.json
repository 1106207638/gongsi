{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\system\\modules\\SysCheckRuleModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\system\\modules\\SysCheckRuleModal.vue","mtime":1615948821511},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBwaWNrIGZyb20gJ2xvZGFzaC5waWNrJwppbXBvcnQgeyBodHRwQWN0aW9uIH0gZnJvbSAnQC9hcGkvbWFuYWdlJwppbXBvcnQgeyB2YWxpZGF0ZUR1cGxpY2F0ZVZhbHVlLCBhbHdheXNSZXNvbHZlLCBmYWlsZWRTeW1ib2wgfSBmcm9tICdAL3V0aWxzL3V0aWwnCmltcG9ydCB7IEZvcm1UeXBlcyB9IGZyb20gJ0AvdXRpbHMvSkVkaXRhYmxlVGFibGVVdGlsJwppbXBvcnQgSkVkaXRhYmxlVGFibGUgZnJvbSAnQGNvbXAvamVlY2cvSkVkaXRhYmxlVGFibGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1N5c0NoZWNrUnVsZU1vZGFsJywKICBjb21wb25lbnRzOiB7CiAgICBKRWRpdGFibGVUYWJsZSwKICAgICdteS1hY3Rpb24tYnV0dG9uJzogewogICAgICBwcm9wczogeyByb3dFdmVudDogT2JqZWN0LCBhbGxvd0VtcHR5OiBCb29sZWFuIH0sCiAgICAgIG1ldGhvZHM6IHsKICAgICAgICBjb25maXJtSXNTaG93KCkgewogICAgICAgICAgY29uc3QgeyBpbmRleCwgYWxsVmFsdWVzOiB7IGlucHV0VmFsdWVzIH0gfSA9IHRoaXMucm93RXZlbnQKICAgICAgICAgIGxldCB2YWx1ZSA9IGlucHV0VmFsdWVzW2luZGV4XQogICAgICAgICAgcmV0dXJuIHZhbHVlLmRpZ2l0cyB8fCB2YWx1ZS5wYXR0ZXJuCiAgICAgICAgfSwKICAgICAgICBoYW5kbGVMaW5lQWRkKCkgewogICAgICAgICAgY29uc3QgeyB0YXJnZXQgfSA9IHRoaXMucm93RXZlbnQKICAgICAgICAgIHRhcmdldC5hZGQoKQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlTGluZURlbGV0ZSgpIHsKICAgICAgICAgIGNvbnN0IHsgcm93SWQsIHRhcmdldCB9ID0gdGhpcy5yb3dFdmVudAogICAgICAgICAgdGFyZ2V0LnJlbW92ZVJvd3Mocm93SWQpCiAgICAgICAgfSwKICAgICAgICByZW5kZXJEZWxldGVCdXR0b24oKSB7CiAgICAgICAgICBpZiAodGhpcy5hbGxvd0VtcHR5IHx8IHRoaXMucm93RXZlbnQuaW5kZXggPiAwKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpcm1Jc1Nob3coKSkgewogICAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICA8YS1wb3Bjb25maXJtIHRpdGxlPSLnoa7lrpropoHliKDpmaTlkJfvvJ8iIG9uQ29uZmlybT17dGhpcy5oYW5kbGVMaW5lRGVsZXRlfT4KICAgICAgICAgICAgICAgICAgPGEtYnV0dG9uIGljb249Im1pbnVzIi8+CiAgICAgICAgICAgICAgICA8L2EtcG9wY29uZmlybT4KICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgICAgIDxhLWJ1dHRvbiBpY29uPSJtaW51cyIgb25DbGljaz17dGhpcy5oYW5kbGVMaW5lRGVsZXRlfS8+CiAgICAgICAgICAgICAgKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gJycKICAgICAgICB9LAogICAgICB9LAogICAgICByZW5kZXIoKSB7CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgIDxhLWJ1dHRvbiBvbkNsaWNrPXt0aGlzLmhhbmRsZUxpbmVBZGR9IGljb249InBsdXMiLz4KICAgICAgICAgICAgJm5ic3A7CiAgICAgICAgICAgIHt0aGlzLnJlbmRlckRlbGV0ZUJ1dHRvbigpfQogICAgICAgICAgPC9kaXY+CiAgICAgICAgKQogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGl0bGU6ICfmk43kvZwnLAogICAgICB2aXNpYmxlOiBmYWxzZSwKICAgICAgbW9kZWw6IHt9LAogICAgICBsYWJlbENvbDogewogICAgICAgIHhzOiB7IHNwYW46IDI0IH0sCiAgICAgICAgc206IHsgc3BhbjogNSB9LAogICAgICB9LAogICAgICB3cmFwcGVyQ29sOiB7CiAgICAgICAgeHM6IHsgc3BhbjogMjQgfSwKICAgICAgICBzbTogeyBzcGFuOiAxNiB9LAogICAgICB9LAogICAgICBjb25maXJtTG9hZGluZzogZmFsc2UsCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwKICAgICAgdmFsaWRhdG9yUnVsZXM6IHsKICAgICAgICBydWxlTmFtZTogeyBydWxlczogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXop4TliJnlkI3np7AhJyB9LF0gfSwKICAgICAgICBydWxlQ29kZTogewogICAgICAgICAgcnVsZXM6IFsKICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinhOWImUNvZGUhJyB9LAogICAgICAgICAgICB7IHZhbGlkYXRvcjogKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gdmFsaWRhdGVEdXBsaWNhdGVWYWx1ZSgnc3lzX2NoZWNrX3J1bGUnLCAncnVsZV9jb2RlJywgdmFsdWUsIHRoaXMubW9kZWwuaWQsIGNhbGxiYWNrKSB9CiAgICAgICAgICBdCiAgICAgICAgfSwKICAgICAgfSwKICAgICAgdGFiczogewogICAgICAgIGFjdGl2ZUtleTogJ2Rlc2lnbicsCiAgICAgICAgZ2xvYmFsOiB7CiAgICAgICAgICBrZXk6ICdnbG9iYWwnLAogICAgICAgICAgY29sdW1uczogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGl0bGU6ICfkvJjlhYjnuqcnLAogICAgICAgICAgICAgIGtleTogJ3ByaW9yaXR5JywKICAgICAgICAgICAgICB3aWR0aDogJzE1JScsCiAgICAgICAgICAgICAgdHlwZTogRm9ybVR5cGVzLnNlbGVjdCwKICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICcxJywKICAgICAgICAgICAgICBvcHRpb25zOiBbCiAgICAgICAgICAgICAgICB7IHRpdGxlOiAn5LyY5YWI6L+Q6KGMJywgdmFsdWU6ICcxJyB9LAogICAgICAgICAgICAgICAgeyB0aXRsZTogJ+acgOWQjui/kOihjCcsIHZhbHVlOiAnMCcgfSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIHZhbGlkYXRlUnVsZXM6IFtdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0aXRsZTogJ+inhOWIme+8iOato+WImeihqOi+vuW8j++8iScsCiAgICAgICAgICAgICAga2V5OiAncGF0dGVybicsCiAgICAgICAgICAgICAgd2lkdGg6ICc1MCUnLAogICAgICAgICAgICAgIHR5cGU6IEZvcm1UeXBlcy5pbnB1dCwKICAgICAgICAgICAgICB2YWxpZGF0ZVJ1bGVzOiBbCiAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6KeE5YiZ5LiN6IO95Li656m6JyB9LAogICAgICAgICAgICAgICAgeyBoYW5kbGVyOiB0aGlzLnZhbGlkYXRlUGF0dGVybkhhbmRsZXIgfSwKICAgICAgICAgICAgICBdCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0aXRsZTogJ+aPkOekuuaWh+acrCcsCiAgICAgICAgICAgICAga2V5OiAnbWVzc2FnZScsCiAgICAgICAgICAgICAgd2lkdGg6ICcyMCUnLAogICAgICAgICAgICAgIHR5cGU6IEZvcm1UeXBlcy5pbnB1dCwKICAgICAgICAgICAgICB2YWxpZGF0ZVJ1bGVzOiBbCiAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnJHt0aXRsZX3kuI3og73kuLrnqbonIH0sCiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGl0bGU6ICfmk43kvZwnLAogICAgICAgICAgICAgIGtleTogJ2FjdGlvbicsCiAgICAgICAgICAgICAgd2lkdGg6ICcxNSUnLAogICAgICAgICAgICAgIHNsb3ROYW1lOiAnYWN0aW9uJywKICAgICAgICAgICAgICB0eXBlOiBGb3JtVHlwZXMuc2xvdAogICAgICAgICAgICB9CiAgICAgICAgICBdLAogICAgICAgICAgZGF0YVNvdXJjZTogW10sCiAgICAgICAgfSwKICAgICAgICBkZXNpZ246IHsKICAgICAgICAgIGtleTogJ2Rlc2lnbicsCiAgICAgICAgICBjb2x1bW5zOiBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICB0aXRsZTogJ+S9jeaVsCcsCiAgICAgICAgICAgICAga2V5OiAnZGlnaXRzJywKICAgICAgICAgICAgICB3aWR0aDogJzE1JScsCiAgICAgICAgICAgICAgdHlwZTogRm9ybVR5cGVzLmlucHV0TnVtYmVyLAogICAgICAgICAgICAgIHZhbGlkYXRlUnVsZXM6IFsKICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICcke3RpdGxlfeS4jeiDveS4uuepuicgfSwKICAgICAgICAgICAgICAgIHsgcGF0dGVybjogL15bMS05XVxkKiQvLCBtZXNzYWdlOiAn6K+36L6T5YWl6Zu25Lul5LiK55qE5q2j5pW05pWwJyB9LAogICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRpdGxlOiAn6KeE5YiZ77yI5q2j5YiZ6KGo6L6+5byP77yJJywKICAgICAgICAgICAgICBrZXk6ICdwYXR0ZXJuJywKICAgICAgICAgICAgICB3aWR0aDogJzUwJScsCiAgICAgICAgICAgICAgdHlwZTogRm9ybVR5cGVzLmlucHV0LAogICAgICAgICAgICAgIHZhbGlkYXRlUnVsZXM6IFsKICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfop4TliJnkuI3og73kuLrnqbonIH0sCiAgICAgICAgICAgICAgICB7IGhhbmRsZXI6IHRoaXMudmFsaWRhdGVQYXR0ZXJuSGFuZGxlciB9CiAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgdGl0bGU6ICfmj5DnpLrmlofmnKwnLAogICAgICAgICAgICAgIGtleTogJ21lc3NhZ2UnLAogICAgICAgICAgICAgIHdpZHRoOiAnMjAlJywKICAgICAgICAgICAgICB0eXBlOiBGb3JtVHlwZXMuaW5wdXQsCiAgICAgICAgICAgICAgdmFsaWRhdGVSdWxlczogWwogICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJyR7dGl0bGV95LiN6IO95Li656m6JyB9LAogICAgICAgICAgICAgIF0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgICAgICBrZXk6ICdhY3Rpb24nLAogICAgICAgICAgICAgIHdpZHRoOiAnMTUlJywKICAgICAgICAgICAgICBzbG90TmFtZTogJ2FjdGlvbicsCiAgICAgICAgICAgICAgdHlwZTogRm9ybVR5cGVzLnNsb3QKICAgICAgICAgICAgfSwKICAgICAgICAgIF0sCiAgICAgICAgICBkYXRhU291cmNlOiBbXSwKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHVybDogewogICAgICAgIGFkZDogJy9zeXMvY2hlY2tSdWxlL2FkZCcsCiAgICAgICAgZWRpdDogJy9zeXMvY2hlY2tSdWxlL2VkaXQnLAogICAgICB9LAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICB9LAogIG1ldGhvZHM6IHsKCiAgICB2YWxpZGF0ZVBhdHRlcm5IYW5kbGVyKHR5cGUsIHZhbHVlLCByb3csIGNvbHVtbiwgY2FsbGJhY2ssIHRhcmdldCkgewogICAgICBpZiAodHlwZSA9PT0gJ2JsdXInIHx8IHR5cGUgPT09ICdnZXRWYWx1ZXMnKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIG5ldyBSZWdFeHAodmFsdWUpCiAgICAgICAgICBjYWxsYmFjayh0cnVlKQogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNhbGxiYWNrKGZhbHNlLCAn6K+36L6T5YWl5q2j56Gu55qE5q2j5YiZ6KGo6L6+5byPJykKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2sodHJ1ZSkgLy8g5LiN5aGr5YaZ5oiW6ICF5aGr5YaZIG51bGwg5Luj6KGo5LiN6L+b6KGM5Lu75L2V5pON5L2cCiAgICAgIH0KICAgIH0sCgogICAgYWRkKCkgewogICAgICB0aGlzLmVkaXQoe30pCiAgICB9LAogICAgZWRpdChyZWNvcmQpIHsKICAgICAgdGhpcy5mb3JtLnJlc2V0RmllbGRzKCkKICAgICAgdGhpcy50YWJzLmFjdGl2ZUtleSA9IHRoaXMudGFicy5kZXNpZ24ua2V5CiAgICAgIHRoaXMudGFicy5nbG9iYWwuZGF0YVNvdXJjZSA9IFtdCiAgICAgIHRoaXMudGFicy5kZXNpZ24uZGF0YVNvdXJjZSA9IFt7IGRpZ2l0czogJycsIHBhdHRlcm46ICcnLCBtZXNzYWdlOiAnJyB9XQogICAgICB0aGlzLm1vZGVsID0gT2JqZWN0LmFzc2lnbih7fSwgcmVjb3JkKQogICAgICB0aGlzLnZpc2libGUgPSB0cnVlCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUocGljayh0aGlzLm1vZGVsLCAncnVsZU5hbWUnLCAncnVsZUNvZGUnLCAncnVsZURlc2NyaXB0aW9uJykpCiAgICAgICAgLy8g5a2Q6KGo5pWw5o2uCiAgICAgICAgbGV0IHJ1bGVKc29uID0gdGhpcy5tb2RlbC5ydWxlSnNvbgogICAgICAgIGlmIChydWxlSnNvbikgewogICAgICAgICAgbGV0IHJ1bGVMaXN0ID0gSlNPTi5wYXJzZShydWxlSnNvbikKICAgICAgICAgIC8vIOetm+mAieWHuuWFqOWxgOinhOWImeWSjOWxgOmDqOinhOWImQogICAgICAgICAgbGV0IGdsb2JhbCA9IFtdLCBkZXNpZ24gPSBbXSwgcHJpb3JpdHkgPSAnMScKICAgICAgICAgIHJ1bGVMaXN0LmZvckVhY2gocnVsZSA9PiB7CiAgICAgICAgICAgIGlmIChydWxlLmRpZ2l0cyA9PT0gJyonKSB7CiAgICAgICAgICAgICAgZ2xvYmFsLnB1c2goT2JqZWN0LmFzc2lnbihydWxlLCB7IHByaW9yaXR5IH0pKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHByaW9yaXR5ID0gJzAnCiAgICAgICAgICAgICAgZGVzaWduLnB1c2gocnVsZSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIHRoaXMudGFicy5nbG9iYWwuZGF0YVNvdXJjZSA9IGdsb2JhbAogICAgICAgICAgdGhpcy50YWJzLmRlc2lnbi5kYXRhU291cmNlID0gZGVzaWduCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGNsb3NlKCkgewogICAgICB0aGlzLiRlbWl0KCdjbG9zZScpCiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlCiAgICB9LAogICAgaGFuZGxlT2soKSB7CiAgICAgIFByb21pc2UuYWxsKFsKICAgICAgICAvLyDkuLvooajljZXmoKHpqowKICAgICAgICBhbHdheXNSZXNvbHZlKG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgIHRoaXMuZm9ybS52YWxpZGF0ZUZpZWxkcygoZXJyb3IsIHZhbHVlcykgPT4gZXJyb3IgPyByZWplY3QoZXJyb3IpIDogcmVzb2x2ZSh2YWx1ZXMpKQogICAgICAgIH0pKSwKICAgICAgICAvLyDlsYDpg6jop4TliJnlrZDooajmoKHpqowKICAgICAgICBhbHdheXNSZXNvbHZlKHRoaXMuJHJlZnMuZGVzaWduVGFibGUuZ2V0VmFsdWVzUHJvbWlzZSksCiAgICAgICAgLy8g5YWo5bGA6KeE5YiZ5a2Q6KGo5qCh6aqMCiAgICAgICAgYWx3YXlzUmVzb2x2ZSh0aGlzLiRyZWZzLmdsb2JhbFRhYmxlLmdldFZhbHVlc1Byb21pc2UpLAogICAgICBdKS50aGVuKHJlc3VsdHMgPT4gewogICAgICAgIGxldCBbbWFpblJlc3VsdCwgZGVzaWduUmVzdWx0LCBnbG9iYWxSZXN1bHRdID0gcmVzdWx0cwoKICAgICAgICBpZiAobWFpblJlc3VsdC50eXBlID09PSBmYWlsZWRTeW1ib2wpIHsKICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgn5Li76KGo5qCh6aqM5pyq6YCa6L+HJykKICAgICAgICB9IGVsc2UgaWYgKGRlc2lnblJlc3VsdC50eXBlID09PSBmYWlsZWRTeW1ib2wpIHsKICAgICAgICAgIHRoaXMudGFicy5hY3RpdmVLZXkgPSB0aGlzLnRhYnMuZGVzaWduLmtleQogICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCflsYDpg6jop4TliJnlrZDooajmoKHpqozmnKrpgJrov4cnKQogICAgICAgIH0gZWxzZSBpZiAoZ2xvYmFsUmVzdWx0LnR5cGUgPT09IGZhaWxlZFN5bWJvbCkgewogICAgICAgICAgdGhpcy50YWJzLmFjdGl2ZUtleSA9IHRoaXMudGFicy5nbG9iYWwua2V5CiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoJ+WFqOWxgOinhOWImeWtkOihqOagoemqjOacqumAmui/hycpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOaJgOacieagoemqjOW3sumAmui/h++8jOi/meS4gOatpeaYr+aVtOWQiOaVsOaNrgogICAgICAgICAgbGV0IG1haW5WYWx1ZXMgPSBtYWluUmVzdWx0LmRhdGEsIGdsb2JhbFZhbHVlcyA9IGdsb2JhbFJlc3VsdC5kYXRhLCBkZXNpZ25WYWx1ZXMgPSBkZXNpZ25SZXN1bHQuZGF0YQoKICAgICAgICAgIC8vIOaVtOWQiOS4pOS4quWtkOihqOeahOaVsOaNrgogICAgICAgICAgbGV0IGZpcnN0R2xvYmFsID0gW10sIGFmdGVyR2xvYmFsID0gW10KICAgICAgICAgIGdsb2JhbFZhbHVlcy5mb3JFYWNoKHYgPT4gewogICAgICAgICAgICB2LmRpZ2l0cyA9ICcqJwogICAgICAgICAgICBpZiAodi5wcmlvcml0eSA9PT0gJzEnKSB7CiAgICAgICAgICAgICAgZmlyc3RHbG9iYWwucHVzaCh2KQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGFmdGVyR2xvYmFsLnB1c2godikKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIGxldCBjb25jYXRWYWx1ZXMgPSBmaXJzdEdsb2JhbC5jb25jYXQoZGVzaWduVmFsdWVzKS5jb25jYXQoYWZ0ZXJHbG9iYWwpCiAgICAgICAgICBsZXQgc3ViVmFsdWVzID0gY29uY2F0VmFsdWVzLm1hcChpID0+IHBpY2soaSwgJ2RpZ2l0cycsICdwYXR0ZXJuJywgJ21lc3NhZ2UnKSkKCiAgICAgICAgICAvLyDnlJ/miJAgZm9ybURhdGHvvIznlKjkuo7kvKDlhaXlkI7lj7AKICAgICAgICAgIGxldCBydWxlSnNvbiA9IEpTT04uc3RyaW5naWZ5KHN1YlZhbHVlcykKICAgICAgICAgIGxldCBmb3JtRGF0YSA9IE9iamVjdC5hc3NpZ24odGhpcy5tb2RlbCwgbWFpblZhbHVlcywgeyBydWxlSnNvbiB9KQoKICAgICAgICAgIC8vIOWIpOaWreivt+axguaWueW8j+WSjOivt+axguWcsOWdgO+8jOW5tuWPkemAgeivt+axggogICAgICAgICAgbGV0IG1ldGhvZCA9ICdwb3N0JywgaHR0cFVybCA9IHRoaXMudXJsLmFkZAogICAgICAgICAgaWYgKHRoaXMubW9kZWwuaWQpIHsKICAgICAgICAgICAgbWV0aG9kID0gJ3B1dCcKICAgICAgICAgICAgaHR0cFVybCA9IHRoaXMudXJsLmVkaXQKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuY29uZmlybUxvYWRpbmcgPSB0cnVlCiAgICAgICAgICByZXR1cm4gaHR0cEFjdGlvbihodHRwVXJsLCBmb3JtRGF0YSwgbWV0aG9kKQogICAgICAgIH0KICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpCiAgICAgICAgICB0aGlzLiRlbWl0KCdvaycpCiAgICAgICAgICB0aGlzLmNsb3NlKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKHJlcy5tZXNzYWdlKQogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcihlKQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBoYW5kbGVDYW5jZWwoKSB7CiAgICAgIHRoaXMuY2xvc2UoKQogICAgfSwKCiAgfQp9Cg=="},{"version":3,"sources":["SysCheckRuleModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"SysCheckRuleModal.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\r\n  <a-modal\r\n    :title=\"title\"\r\n    :width=\"1000\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\">\r\n\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form :form=\"form\">\r\n\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"规则名称\">\r\n          <a-input placeholder=\"请输入规则名称\" v-decorator=\"['ruleName', validatorRules.ruleName]\"/>\r\n        </a-form-item>\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"规则Code\">\r\n          <a-input placeholder=\"请输入规则Code\" v-decorator=\"['ruleCode', validatorRules.ruleCode]\"/>\r\n        </a-form-item>\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"规则描述\">\r\n          <a-textarea placeholder=\"请输入规则描述\" v-decorator=\"['ruleDescription', {}]\"/>\r\n        </a-form-item>\r\n\r\n      </a-form>\r\n      <!-- 规则设计 -->\r\n      <a-tabs v-model=\"tabs.activeKey\">\r\n        <a-tab-pane tab=\"局部规则\" :key=\"tabs.design.key\" forceRender>\r\n          <a-alert type=\"info\" showIcon message=\"局部规则按照你输入的位数有序的校验。\"/>\r\n          <j-editable-table\r\n            ref=\"designTable\"\r\n            dragSort\r\n            rowNumber\r\n            :maxHeight=\"240\"\r\n            :columns=\"tabs.design.columns\"\r\n            :dataSource=\"tabs.design.dataSource\"\r\n            style=\"margin-top: 8px;\"\r\n          >\r\n\r\n            <template #action=\"props\">\r\n              <my-action-button :rowEvent=\"props\"/>\r\n            </template>\r\n\r\n          </j-editable-table>\r\n        </a-tab-pane>\r\n        <a-tab-pane tab=\"全局规则\" :key=\"tabs.global.key\" forceRender>\r\n          <j-editable-table\r\n            ref=\"globalTable\"\r\n            dragSort\r\n            rowNumber\r\n            actionButton\r\n            :maxHeight=\"240\"\r\n            :columns=\"tabs.global.columns\"\r\n            :dataSource=\"tabs.global.dataSource\"\r\n          >\r\n\r\n            <template #actionButtonAfter>\r\n              <a-alert type=\"info\" showIcon message=\"全局规则可校验用户输入的所有字符；全局规则的优先级比局部规则的要高。\" style=\"margin-bottom: 8px;\"/>\r\n            </template>\r\n\r\n            <template #action=\"props\">\r\n              <my-action-button :rowEvent=\"props\" allowEmpty/>\r\n            </template>\r\n\r\n          </j-editable-table>\r\n        </a-tab-pane>\r\n      </a-tabs>\r\n    </a-spin>\r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import pick from 'lodash.pick'\r\n  import { httpAction } from '@/api/manage'\r\n  import { validateDuplicateValue, alwaysResolve, failedSymbol } from '@/utils/util'\r\n  import { FormTypes } from '@/utils/JEditableTableUtil'\r\n  import JEditableTable from '@comp/jeecg/JEditableTable'\r\n\r\n  export default {\r\n    name: 'SysCheckRuleModal',\r\n    components: {\r\n      JEditableTable,\r\n      'my-action-button': {\r\n        props: { rowEvent: Object, allowEmpty: Boolean },\r\n        methods: {\r\n          confirmIsShow() {\r\n            const { index, allValues: { inputValues } } = this.rowEvent\r\n            let value = inputValues[index]\r\n            return value.digits || value.pattern\r\n          },\r\n          handleLineAdd() {\r\n            const { target } = this.rowEvent\r\n            target.add()\r\n          },\r\n          handleLineDelete() {\r\n            const { rowId, target } = this.rowEvent\r\n            target.removeRows(rowId)\r\n          },\r\n          renderDeleteButton() {\r\n            if (this.allowEmpty || this.rowEvent.index > 0) {\r\n              if (this.confirmIsShow()) {\r\n                return (\r\n                  <a-popconfirm title=\"确定要删除吗？\" onConfirm={this.handleLineDelete}>\r\n                    <a-button icon=\"minus\"/>\r\n                  </a-popconfirm>\r\n                )\r\n              } else {\r\n                return (\r\n                  <a-button icon=\"minus\" onClick={this.handleLineDelete}/>\r\n                )\r\n              }\r\n            }\r\n            return ''\r\n          },\r\n        },\r\n        render() {\r\n          return (\r\n            <div>\r\n              <a-button onClick={this.handleLineAdd} icon=\"plus\"/>\r\n              &nbsp;\r\n              {this.renderDeleteButton()}\r\n            </div>\r\n          )\r\n        }\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        title: '操作',\r\n        visible: false,\r\n        model: {},\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        validatorRules: {\r\n          ruleName: { rules: [{ required: true, message: '请输入规则名称!' },] },\r\n          ruleCode: {\r\n            rules: [\r\n              { required: true, message: '请输入规则Code!' },\r\n              { validator: (rule, value, callback) => validateDuplicateValue('sys_check_rule', 'rule_code', value, this.model.id, callback) }\r\n            ]\r\n          },\r\n        },\r\n        tabs: {\r\n          activeKey: 'design',\r\n          global: {\r\n            key: 'global',\r\n            columns: [\r\n              {\r\n                title: '优先级',\r\n                key: 'priority',\r\n                width: '15%',\r\n                type: FormTypes.select,\r\n                defaultValue: '1',\r\n                options: [\r\n                  { title: '优先运行', value: '1' },\r\n                  { title: '最后运行', value: '0' },\r\n                ],\r\n                validateRules: []\r\n              },\r\n              {\r\n                title: '规则（正则表达式）',\r\n                key: 'pattern',\r\n                width: '50%',\r\n                type: FormTypes.input,\r\n                validateRules: [\r\n                  { required: true, message: '规则不能为空' },\r\n                  { handler: this.validatePatternHandler },\r\n                ]\r\n              },\r\n              {\r\n                title: '提示文本',\r\n                key: 'message',\r\n                width: '20%',\r\n                type: FormTypes.input,\r\n                validateRules: [\r\n                  { required: true, message: '${title}不能为空' },\r\n                ]\r\n              },\r\n              {\r\n                title: '操作',\r\n                key: 'action',\r\n                width: '15%',\r\n                slotName: 'action',\r\n                type: FormTypes.slot\r\n              }\r\n            ],\r\n            dataSource: [],\r\n          },\r\n          design: {\r\n            key: 'design',\r\n            columns: [\r\n              {\r\n                title: '位数',\r\n                key: 'digits',\r\n                width: '15%',\r\n                type: FormTypes.inputNumber,\r\n                validateRules: [\r\n                  { required: true, message: '${title}不能为空' },\r\n                  { pattern: /^[1-9]\\d*$/, message: '请输入零以上的正整数' },\r\n                ]\r\n              },\r\n              {\r\n                title: '规则（正则表达式）',\r\n                key: 'pattern',\r\n                width: '50%',\r\n                type: FormTypes.input,\r\n                validateRules: [\r\n                  { required: true, message: '规则不能为空' },\r\n                  { handler: this.validatePatternHandler }\r\n                ]\r\n              },\r\n              {\r\n                title: '提示文本',\r\n                key: 'message',\r\n                width: '20%',\r\n                type: FormTypes.input,\r\n                validateRules: [\r\n                  { required: true, message: '${title}不能为空' },\r\n                ]\r\n              },\r\n              {\r\n                title: '操作',\r\n                key: 'action',\r\n                width: '15%',\r\n                slotName: 'action',\r\n                type: FormTypes.slot\r\n              },\r\n            ],\r\n            dataSource: [],\r\n          }\r\n        },\r\n        url: {\r\n          add: '/sys/checkRule/add',\r\n          edit: '/sys/checkRule/edit',\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n    },\r\n    methods: {\r\n\r\n      validatePatternHandler(type, value, row, column, callback, target) {\r\n        if (type === 'blur' || type === 'getValues') {\r\n          try {\r\n            new RegExp(value)\r\n            callback(true)\r\n          } catch (e) {\r\n            callback(false, '请输入正确的正则表达式')\r\n          }\r\n        } else {\r\n          callback(true) // 不填写或者填写 null 代表不进行任何操作\r\n        }\r\n      },\r\n\r\n      add() {\r\n        this.edit({})\r\n      },\r\n      edit(record) {\r\n        this.form.resetFields()\r\n        this.tabs.activeKey = this.tabs.design.key\r\n        this.tabs.global.dataSource = []\r\n        this.tabs.design.dataSource = [{ digits: '', pattern: '', message: '' }]\r\n        this.model = Object.assign({}, record)\r\n        this.visible = true\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(pick(this.model, 'ruleName', 'ruleCode', 'ruleDescription'))\r\n          // 子表数据\r\n          let ruleJson = this.model.ruleJson\r\n          if (ruleJson) {\r\n            let ruleList = JSON.parse(ruleJson)\r\n            // 筛选出全局规则和局部规则\r\n            let global = [], design = [], priority = '1'\r\n            ruleList.forEach(rule => {\r\n              if (rule.digits === '*') {\r\n                global.push(Object.assign(rule, { priority }))\r\n              } else {\r\n                priority = '0'\r\n                design.push(rule)\r\n              }\r\n            })\r\n            this.tabs.global.dataSource = global\r\n            this.tabs.design.dataSource = design\r\n          }\r\n        })\r\n      },\r\n      close() {\r\n        this.$emit('close')\r\n        this.visible = false\r\n      },\r\n      handleOk() {\r\n        Promise.all([\r\n          // 主表单校验\r\n          alwaysResolve(new Promise((resolve, reject) => {\r\n            this.form.validateFields((error, values) => error ? reject(error) : resolve(values))\r\n          })),\r\n          // 局部规则子表校验\r\n          alwaysResolve(this.$refs.designTable.getValuesPromise),\r\n          // 全局规则子表校验\r\n          alwaysResolve(this.$refs.globalTable.getValuesPromise),\r\n        ]).then(results => {\r\n          let [mainResult, designResult, globalResult] = results\r\n\r\n          if (mainResult.type === failedSymbol) {\r\n            return Promise.reject('主表校验未通过')\r\n          } else if (designResult.type === failedSymbol) {\r\n            this.tabs.activeKey = this.tabs.design.key\r\n            return Promise.reject('局部规则子表校验未通过')\r\n          } else if (globalResult.type === failedSymbol) {\r\n            this.tabs.activeKey = this.tabs.global.key\r\n            return Promise.reject('全局规则子表校验未通过')\r\n          } else {\r\n            // 所有校验已通过，这一步是整合数据\r\n            let mainValues = mainResult.data, globalValues = globalResult.data, designValues = designResult.data\r\n\r\n            // 整合两个子表的数据\r\n            let firstGlobal = [], afterGlobal = []\r\n            globalValues.forEach(v => {\r\n              v.digits = '*'\r\n              if (v.priority === '1') {\r\n                firstGlobal.push(v)\r\n              } else {\r\n                afterGlobal.push(v)\r\n              }\r\n            })\r\n            let concatValues = firstGlobal.concat(designValues).concat(afterGlobal)\r\n            let subValues = concatValues.map(i => pick(i, 'digits', 'pattern', 'message'))\r\n\r\n            // 生成 formData，用于传入后台\r\n            let ruleJson = JSON.stringify(subValues)\r\n            let formData = Object.assign(this.model, mainValues, { ruleJson })\r\n\r\n            // 判断请求方式和请求地址，并发送请求\r\n            let method = 'post', httpUrl = this.url.add\r\n            if (this.model.id) {\r\n              method = 'put'\r\n              httpUrl = this.url.edit\r\n            }\r\n            this.confirmLoading = true\r\n            return httpAction(httpUrl, formData, method)\r\n          }\r\n        }).then((res) => {\r\n          if (res.success) {\r\n            this.$message.success(res.message)\r\n            this.$emit('ok')\r\n            this.close()\r\n          } else {\r\n            this.$message.warning(res.message)\r\n          }\r\n        }).catch(e => {\r\n          console.error(e)\r\n        }).finally(() => {\r\n          this.confirmLoading = false\r\n        })\r\n      },\r\n      handleCancel() {\r\n        this.close()\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped></style>"]}]}