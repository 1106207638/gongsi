{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\dynamic\\JEditorDyn.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\dynamic\\JEditorDyn.vue","mtime":1615948814834},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KCi8qKgogKiBkb2NzOgogKiBodHRwczovL3BhbmppYWNoZW4uZ2l0aHViLmlvL3Z1ZS1lbGVtZW50LWFkbWluLXNpdGUvZmVhdHVyZS9jb21wb25lbnQvcmljaC1lZGl0b3IuaHRtbCN0aW55bWNlCiAqLwppbXBvcnQgbG9hZCBmcm9tICcuL2xvYWQnCi8vY29uc3QgdG9vbGJhciA9IFsnc2VhcmNocmVwbGFjZSBib2xkIGl0YWxpYyB1bmRlcmxpbmUgc3RyaWtldGhyb3VnaCBhbGlnbmxlZnQgYWxpZ25jZW50ZXIgYWxpZ25yaWdodCBvdXRkZW50IGluZGVudCAgYmxvY2txdW90ZSB1bmRvIHJlZG8gcmVtb3ZlZm9ybWF0IHN1YnNjcmlwdCBzdXBlcnNjcmlwdCBjb2RlIGNvZGVzYW1wbGUnLCAnaHIgYnVsbGlzdCBudW1saXN0IGxpbmsgaW1hZ2UgY2hhcm1hcCBwcmV2aWV3IGFuY2hvciBwYWdlYnJlYWsgaW5zZXJ0ZGF0ZXRpbWUgbWVkaWEgdGFibGUgZW1vdGljb25zIGZvcmVjb2xvciBiYWNrY29sb3IgZnVsbHNjcmVlbiddCi8vY29uc3QgcGx1Z2lucyA9IFsnYWR2bGlzdCBhbmNob3IgYXV0b2xpbmsgYXV0b3NhdmUgY29kZSBjb2Rlc2FtcGxlIGNvbG9ycGlja2VyIGNvbG9ycGlja2VyIGNvbnRleHRtZW51IGRpcmVjdGlvbmFsaXR5IGVtb3RpY29ucyBmdWxsc2NyZWVuIGhyIGltYWdlIGltYWdldG9vbHMgaW5zZXJ0ZGF0ZXRpbWUgbGluayBsaXN0cyBtZWRpYSBub25icmVha2luZyBub25lZGl0YWJsZSBwYWdlYnJlYWsgcGFzdGUgcHJldmlldyBwcmludCBzYXZlIHNlYXJjaHJlcGxhY2Ugc3BlbGxjaGVja2VyIHRhYmZvY3VzIHRhYmxlIHRlbXBsYXRlIHRleHRjb2xvciB0ZXh0cGF0dGVybiB2aXN1YWxibG9ja3MgdmlzdWFsY2hhcnMgd29yZGNvdW50J10KLy8gd2h5IHVzZSB0aGlzIGNkbiwgZGV0YWlsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vUGFuSmlhQ2hlbi90aW55bWNlLWFsbC1pbi1vbmUKY29uc3QgdGlueW1jZUNETiA9ICdodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL3RpbnltY2UtYWxsLWluLW9uZUA0LjkuMy90aW55bWNlLm1pbi5qcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSkVkaXRvckR5bicsCiAgcHJvcHM6IHsKICAgIGlkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogZnVuY3Rpb24oKSB7CiAgICAgICAgcmV0dXJuICd2dWUtdGlueW1jZS0nICsgK25ldyBEYXRlKCkgKyAoKE1hdGgucmFuZG9tKCkgKiAxMDAwKS50b0ZpeGVkKDApICsgJycpCiAgICAgIH0KICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgdG9vbGJhcjogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJ3VuZG8gcmVkbyB8ICBmb3JtYXRzZWxlY3QgfCBib2xkIGl0YWxpYyB8IGFsaWdubGVmdCBhbGlnbmNlbnRlciBhbGlnbnJpZ2h0IGFsaWduanVzdGlmeSB8IGJ1bGxpc3QgbnVtbGlzdCBvdXRkZW50IGluZGVudCB8IGxpc3RzIGxpbmsgdW5saW5rIGltYWdlIG1lZGlhIHRhYmxlIHwgcmVtb3ZlZm9ybWF0IHwgZnVsbHNjcmVlbicsCiAgICB9LAogICAgbWVudWJhcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdmaWxlIGVkaXQgaW5zZXJ0IHZpZXcgZm9ybWF0IHRhYmxlJwogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IDM2MAogICAgfSwKICAgIHdpZHRoOiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJ2F1dG8nCiAgICB9LAogICAgcGx1Z2luczogewogICAgICB0eXBlOiBbU3RyaW5nLCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICdsaXN0cyBpbWFnZSBsaW5rIG1lZGlhIHRhYmxlIHRleHRjb2xvciB3b3JkY291bnQgY29udGV4dG1lbnUgZnVsbHNjcmVlbicKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoYXNDaGFuZ2U6IGZhbHNlLAogICAgICBoYXNJbml0OiBmYWxzZSwKICAgICAgdGlueW1jZUlkOiB0aGlzLmlkLAogICAgICBmdWxsc2NyZWVuOiBmYWxzZSwKICAgICAgbGFuZ3VhZ2VUeXBlTGlzdDogewogICAgICAgICdlbic6ICdlbicsCiAgICAgICAgJ3poJzogJ3poX0NOJywKICAgICAgICAnZXMnOiAnZXNfTVgnLAogICAgICAgICdqYSc6ICdqYScKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbnRhaW5lcldpZHRoKCkgewogICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGgKICAgICAgaWYgKC9eW1xkXSsoXC5bXGRdKyk/JC8udGVzdCh3aWR0aCkpIHsgLy8gbWF0Y2hlcyBgMTAwYCwgYCcxMDAnYAogICAgICAgIHJldHVybiBgJHt3aWR0aH1weGAKICAgICAgfQogICAgICByZXR1cm4gd2lkdGgKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZSh2YWwpIHsKICAgICAgaWYgKCF0aGlzLmhhc0NoYW5nZSAmJiB0aGlzLmhhc0luaXQpIHsKICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PgogICAgICAgICAgd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKS5zZXRDb250ZW50KHZhbCB8fCAnJykpCiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgYWN0aXZhdGVkKCkgewogICAgaWYgKHdpbmRvdy50aW55bWNlKSB7CiAgICAgIHRoaXMuaW5pdFRpbnltY2UoKQogICAgfQogIH0sCiAgZGVhY3RpdmF0ZWQoKSB7CiAgICB0aGlzLmRlc3Ryb3lUaW55bWNlKCkKICB9LAogIGRlc3Ryb3llZCgpIHsKICAgIHRoaXMuZGVzdHJveVRpbnltY2UoKQogIH0sCiAgbWV0aG9kczogewogICAgYWRhKCkgewogICAgICBjb25zb2xlLmxvZygnY2hhbmdlJykKICAgIH0sCiAgICBpbml0KCkgewogICAgICAvLyBkeW5hbWljIGxvYWQgdGlueW1jZSBmcm9tIGNkbgogICAgICBsb2FkKHRpbnltY2VDRE4sIChlcnIpID0+IHsKICAgICAgICBpZiAoZXJyKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKGVyci5tZXNzYWdlKQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIHRoaXMuaW5pdFRpbnltY2UoKQogICAgICB9KQogICAgfSwKICAgIGluaXRUaW55bWNlKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgd2luZG93LnRpbnltY2UuaW5pdCh7CiAgICAgICAgc2VsZWN0b3I6IGAjJHt0aGlzLnRpbnltY2VJZH1gLAogICAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlVHlwZUxpc3RbJ3poJ10sCiAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCwKICAgICAgICBib2R5X2NsYXNzOiAncGFuZWwtYm9keSAnLAogICAgICAgIG9iamVjdF9yZXNpemluZzogZmFsc2UsCiAgICAgICAgdG9vbGJhcjogdGhpcy50b29sYmFyLAogICAgICAgIG1lbnViYXI6IGZhbHNlLAogICAgICAgIHBsdWdpbnM6IHRoaXMucGx1Z2lucywKICAgICAgICBlbmRfY29udGFpbmVyX29uX2VtcHR5X2Jsb2NrOiB0cnVlLAogICAgICAgIHBvd2VycGFzdGVfd29yZF9pbXBvcnQ6ICdjbGVhbicsCiAgICAgICAgY29kZV9kaWFsb2dfaGVpZ2h0OiA0NTAsCiAgICAgICAgY29kZV9kaWFsb2dfd2lkdGg6IDEwMDAsCiAgICAgICAgYWR2bGlzdF9idWxsZXRfc3R5bGVzOiAnc3F1YXJlJywKICAgICAgICBhZHZsaXN0X251bWJlcl9zdHlsZXM6ICdkZWZhdWx0JywKICAgICAgICBpbWFnZXRvb2xzX2NvcnNfaG9zdHM6IFsnd3d3LnRpbnltY2UuY29tJywgJ2NvZGVwZW4uaW8nXSwKICAgICAgICBkZWZhdWx0X2xpbmtfdGFyZ2V0OiAnX2JsYW5rJywKICAgICAgICBsaW5rX3RpdGxlOiBmYWxzZSwKICAgICAgICBub25icmVha2luZ19mb3JjZV90YWI6IHRydWUsIC8vIGluc2VydGluZyBub25icmVha2luZyBzcGFjZSAmbmJzcDsgbmVlZCBOb25icmVha2luZyBTcGFjZSBQbHVnaW4KICAgICAgICBpbml0X2luc3RhbmNlX2NhbGxiYWNrOiBlZGl0b3IgPT4gewogICAgICAgICAgaWYgKF90aGlzLnZhbHVlKSB7CiAgICAgICAgICAgIGVkaXRvci5zZXRDb250ZW50KF90aGlzLnZhbHVlKQogICAgICAgICAgfQogICAgICAgICAgX3RoaXMuaGFzSW5pdCA9IHRydWUKICAgICAgICAgIGVkaXRvci5vbignTm9kZUNoYW5nZSBDaGFuZ2UgS2V5VXAgU2V0Q29udGVudCcsICgpID0+IHsKICAgICAgICAgICAgdGhpcy5oYXNDaGFuZ2UgPSB0cnVlCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZWRpdG9yLmdldENvbnRlbnQoKSkKICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBzZXR1cChlZGl0b3IpIHsKICAgICAgICAgIGVkaXRvci5vbignRnVsbHNjcmVlblN0YXRlQ2hhbmdlZCcsIChlKSA9PiB7CiAgICAgICAgICAgIF90aGlzLmZ1bGxzY3JlZW4gPSBlLnN0YXRlCiAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgLy8gaXQgd2lsbCB0cnkgdG8ga2VlcCB0aGVzZSBVUkxzIGludGFjdAogICAgICAgIC8vIGh0dHBzOi8vd3d3LnRpbnkuY2xvdWQvZG9jcy0zeC9yZWZlcmVuY2UvY29uZmlndXJhdGlvbi9Db25maWd1cmF0aW9uM3hAY29udmVydF91cmxzLwogICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzUxOTYyMDUvZGlzYWJsZS10aW55bWNlLWFic29sdXRlLXRvLXJlbGF0aXZlLXVybC1jb252ZXJzaW9ucwogICAgICAgIGNvbnZlcnRfdXJsczogZmFsc2UKICAgICAgICAvLyDmlbTlkIjkuIPniZvkuIrkvKAKICAgICAgICAvLyBpbWFnZXNfZGF0YWltZ19maWx0ZXIoaW1nKSB7CiAgICAgICAgLy8gICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAvLyAgICAgY29uc3QgJGltYWdlID0gJChpbWcpOwogICAgICAgIC8vICAgICAkaW1hZ2UucmVtb3ZlQXR0cignd2lkdGgnKTsKICAgICAgICAvLyAgICAgJGltYWdlLnJlbW92ZUF0dHIoJ2hlaWdodCcpOwogICAgICAgIC8vICAgICBpZiAoJGltYWdlWzBdLmhlaWdodCAmJiAkaW1hZ2VbMF0ud2lkdGgpIHsKICAgICAgICAvLyAgICAgICAkaW1hZ2UuYXR0cignZGF0YS13c2NudHlwZScsICdpbWFnZScpOwogICAgICAgIC8vICAgICAgICRpbWFnZS5hdHRyKCdkYXRhLXdzY25oJywgJGltYWdlWzBdLmhlaWdodCk7CiAgICAgICAgLy8gICAgICAgJGltYWdlLmF0dHIoJ2RhdGEtd3NjbncnLCAkaW1hZ2VbMF0ud2lkdGgpOwogICAgICAgIC8vICAgICAgICRpbWFnZS5hZGRDbGFzcygnd3NjbnBoJyk7CiAgICAgICAgLy8gICAgIH0KICAgICAgICAvLyAgIH0sIDApOwogICAgICAgIC8vICAgcmV0dXJuIGltZwogICAgICAgIC8vIH0sCiAgICAgICAgLy8gaW1hZ2VzX3VwbG9hZF9oYW5kbGVyKGJsb2JJbmZvLCBzdWNjZXNzLCBmYWlsdXJlLCBwcm9ncmVzcykgewogICAgICAgIC8vICAgcHJvZ3Jlc3MoMCk7CiAgICAgICAgLy8gICBjb25zdCB0b2tlbiA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzLnRva2VuOwogICAgICAgIC8vICAgZ2V0VG9rZW4odG9rZW4pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIC8vICAgICBjb25zdCB1cmwgPSByZXNwb25zZS5kYXRhLnFpbml1X3VybDsKICAgICAgICAvLyAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgICAgICAvLyAgICAgZm9ybURhdGEuYXBwZW5kKCd0b2tlbicsIHJlc3BvbnNlLmRhdGEucWluaXVfdG9rZW4pOwogICAgICAgIC8vICAgICBmb3JtRGF0YS5hcHBlbmQoJ2tleScsIHJlc3BvbnNlLmRhdGEucWluaXVfa2V5KTsKICAgICAgICAvLyAgICAgZm9ybURhdGEuYXBwZW5kKCdmaWxlJywgYmxvYkluZm8uYmxvYigpLCB1cmwpOwogICAgICAgIC8vICAgICB1cGxvYWQoZm9ybURhdGEpLnRoZW4oKCkgPT4gewogICAgICAgIC8vICAgICAgIHN1Y2Nlc3ModXJsKTsKICAgICAgICAvLyAgICAgICBwcm9ncmVzcygxMDApOwogICAgICAgIC8vICAgICB9KQogICAgICAgIC8vICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAvLyAgICAgZmFpbHVyZSgnZXJyJykKICAgICAgICAvLyAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICAvLyAgIH0pOwogICAgICAgIC8vIH0sCiAgICAgIH0pCiAgICB9LAogICAgZGVzdHJveVRpbnltY2UoKSB7CiAgICAgIGNvbnN0IHRpbnltY2UgPSB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpCiAgICAgIGlmICh0aGlzLmZ1bGxzY3JlZW4pIHsKICAgICAgICB0aW55bWNlLmV4ZWNDb21tYW5kKCdtY2VGdWxsU2NyZWVuJykKICAgICAgfQoKICAgICAgaWYgKHRpbnltY2UpIHsKICAgICAgICB0aW55bWNlLmRlc3Ryb3koKQogICAgICB9CiAgICB9LAogICAgc2V0Q29udGVudCh2YWx1ZSkgewogICAgICB3aW5kb3cudGlueW1jZS5nZXQodGhpcy50aW55bWNlSWQpLnNldENvbnRlbnQodmFsdWUpCiAgICB9LAogICAgZ2V0Q29udGVudCgpIHsKICAgICAgd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKS5nZXRDb250ZW50KCkKICAgIH0sCiAgICBpbWFnZVN1Y2Nlc3NDQksoYXJyKSB7CiAgICAgIGFyci5mb3JFYWNoKHYgPT4gd2luZG93LnRpbnltY2UuZ2V0KHRoaXMudGlueW1jZUlkKS5pbnNlcnRDb250ZW50KGA8aW1nIGNsYXNzPSJ3c2NucGgiIHNyYz0iJHt2LnVybH0iID5gKSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["JEditorDyn.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JEditorDyn.vue","sourceRoot":"src/components/jeecg/dynamic","sourcesContent":["<template>\r\n  <div class=\"tinymce-containerty\" :style=\"{width:containerWidth}\">\r\n    <textarea :id=\"tinymceId\" class=\"tinymce-textarea\" @change=\"ada\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  /**\r\n   * docs:\r\n   * https://panjiachen.github.io/vue-element-admin-site/feature/component/rich-editor.html#tinymce\r\n   */\r\n  import load from './load'\r\n  //const toolbar = ['searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample', 'hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen']\r\n  //const plugins = ['advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount']\r\n  // why use this cdn, detail see https://github.com/PanJiaChen/tinymce-all-in-one\r\n  const tinymceCDN = 'https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js'\r\n\r\n  export default {\r\n    name: 'JEditorDyn',\r\n    props: {\r\n      id: {\r\n        type: String,\r\n        default: function() {\r\n          return 'vue-tinymce-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\r\n        }\r\n      },\r\n      value: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      toolbar: {\r\n        type: [String, Array],\r\n        required: false,\r\n        default: 'undo redo |  formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | lists link unlink image media table | removeformat | fullscreen',\r\n      },\r\n      menubar: {\r\n        type: String,\r\n        default: 'file edit insert view format table'\r\n      },\r\n      height: {\r\n        type: [Number, String],\r\n        required: false,\r\n        default: 360\r\n      },\r\n      width: {\r\n        type: [Number, String],\r\n        required: false,\r\n        default: 'auto'\r\n      },\r\n      plugins: {\r\n        type: [String, Array],\r\n        default: 'lists image link media table textcolor wordcount contextmenu fullscreen'\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        hasChange: false,\r\n        hasInit: false,\r\n        tinymceId: this.id,\r\n        fullscreen: false,\r\n        languageTypeList: {\r\n          'en': 'en',\r\n          'zh': 'zh_CN',\r\n          'es': 'es_MX',\r\n          'ja': 'ja'\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      containerWidth() {\r\n        const width = this.width\r\n        if (/^[\\d]+(\\.[\\d]+)?$/.test(width)) { // matches `100`, `'100'`\r\n          return `${width}px`\r\n        }\r\n        return width\r\n      }\r\n    },\r\n    watch: {\r\n      value(val) {\r\n        if (!this.hasChange && this.hasInit) {\r\n          this.$nextTick(() =>\r\n            window.tinymce.get(this.tinymceId).setContent(val || ''))\r\n        }\r\n      }\r\n    },\r\n    mounted() {\r\n      this.init()\r\n    },\r\n    activated() {\r\n      if (window.tinymce) {\r\n        this.initTinymce()\r\n      }\r\n    },\r\n    deactivated() {\r\n      this.destroyTinymce()\r\n    },\r\n    destroyed() {\r\n      this.destroyTinymce()\r\n    },\r\n    methods: {\r\n      ada() {\r\n        console.log('change')\r\n      },\r\n      init() {\r\n        // dynamic load tinymce from cdn\r\n        load(tinymceCDN, (err) => {\r\n          if (err) {\r\n            this.$message.error(err.message)\r\n            return\r\n          }\r\n          this.initTinymce()\r\n        })\r\n      },\r\n      initTinymce() {\r\n        const _this = this\r\n        window.tinymce.init({\r\n          selector: `#${this.tinymceId}`,\r\n          language: this.languageTypeList['zh'],\r\n          height: this.height,\r\n          body_class: 'panel-body ',\r\n          object_resizing: false,\r\n          toolbar: this.toolbar,\r\n          menubar: false,\r\n          plugins: this.plugins,\r\n          end_container_on_empty_block: true,\r\n          powerpaste_word_import: 'clean',\r\n          code_dialog_height: 450,\r\n          code_dialog_width: 1000,\r\n          advlist_bullet_styles: 'square',\r\n          advlist_number_styles: 'default',\r\n          imagetools_cors_hosts: ['www.tinymce.com', 'codepen.io'],\r\n          default_link_target: '_blank',\r\n          link_title: false,\r\n          nonbreaking_force_tab: true, // inserting nonbreaking space &nbsp; need Nonbreaking Space Plugin\r\n          init_instance_callback: editor => {\r\n            if (_this.value) {\r\n              editor.setContent(_this.value)\r\n            }\r\n            _this.hasInit = true\r\n            editor.on('NodeChange Change KeyUp SetContent', () => {\r\n              this.hasChange = true\r\n              this.$emit('input', editor.getContent())\r\n            })\r\n          },\r\n          setup(editor) {\r\n            editor.on('FullscreenStateChanged', (e) => {\r\n              _this.fullscreen = e.state\r\n            })\r\n          },\r\n          // it will try to keep these URLs intact\r\n          // https://www.tiny.cloud/docs-3x/reference/configuration/Configuration3x@convert_urls/\r\n          // https://stackoverflow.com/questions/5196205/disable-tinymce-absolute-to-relative-url-conversions\r\n          convert_urls: false\r\n          // 整合七牛上传\r\n          // images_dataimg_filter(img) {\r\n          //   setTimeout(() => {\r\n          //     const $image = $(img);\r\n          //     $image.removeAttr('width');\r\n          //     $image.removeAttr('height');\r\n          //     if ($image[0].height && $image[0].width) {\r\n          //       $image.attr('data-wscntype', 'image');\r\n          //       $image.attr('data-wscnh', $image[0].height);\r\n          //       $image.attr('data-wscnw', $image[0].width);\r\n          //       $image.addClass('wscnph');\r\n          //     }\r\n          //   }, 0);\r\n          //   return img\r\n          // },\r\n          // images_upload_handler(blobInfo, success, failure, progress) {\r\n          //   progress(0);\r\n          //   const token = _this.$store.getters.token;\r\n          //   getToken(token).then(response => {\r\n          //     const url = response.data.qiniu_url;\r\n          //     const formData = new FormData();\r\n          //     formData.append('token', response.data.qiniu_token);\r\n          //     formData.append('key', response.data.qiniu_key);\r\n          //     formData.append('file', blobInfo.blob(), url);\r\n          //     upload(formData).then(() => {\r\n          //       success(url);\r\n          //       progress(100);\r\n          //     })\r\n          //   }).catch(err => {\r\n          //     failure('err')\r\n          //     console.log(err);\r\n          //   });\r\n          // },\r\n        })\r\n      },\r\n      destroyTinymce() {\r\n        const tinymce = window.tinymce.get(this.tinymceId)\r\n        if (this.fullscreen) {\r\n          tinymce.execCommand('mceFullScreen')\r\n        }\r\n\r\n        if (tinymce) {\r\n          tinymce.destroy()\r\n        }\r\n      },\r\n      setContent(value) {\r\n        window.tinymce.get(this.tinymceId).setContent(value)\r\n      },\r\n      getContent() {\r\n        window.tinymce.get(this.tinymceId).getContent()\r\n      },\r\n      imageSuccessCBK(arr) {\r\n        arr.forEach(v => window.tinymce.get(this.tinymceId).insertContent(`<img class=\"wscnph\" src=\"${v.url}\" >`))\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .tinymce-containerty {\r\n    position: relative;\r\n    line-height: normal;\r\n  }\r\n\r\n  .tinymce-containerty {\r\n    ::v-deep {\r\n      .mce-fullscreen {\r\n        z-index: 10000;\r\n      }\r\n    }\r\n  }\r\n\r\n  .tinymce-textarea {\r\n    visibility: hidden;\r\n    z-index: -1;\r\n  }\r\n\r\n  .editor-custom-btn-container {\r\n    position: absolute;\r\n    right: 4px;\r\n    top: 4px;\r\n    /*z-index: 2005;*/\r\n  }\r\n\r\n  .fullscreen .editor-custom-btn-container {\r\n    z-index: 10000;\r\n    position: fixed;\r\n  }\r\n\r\n  .editor-upload-btn {\r\n    display: inline-block;\r\n  }\r\n</style>\r\n"]}]}