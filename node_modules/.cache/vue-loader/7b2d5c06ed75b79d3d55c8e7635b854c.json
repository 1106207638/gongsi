{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecgbiz\\JSelectDepart.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecgbiz\\JSelectDepart.vue","mtime":1615948816088},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBKU2VsZWN0RGVwYXJ0TW9kYWwgZnJvbSAnLi9tb2RhbC9KU2VsZWN0RGVwYXJ0TW9kYWwnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSlNlbGVjdERlcGFydCcsCiAgY29tcG9uZW50czp7CiAgICBKU2VsZWN0RGVwYXJ0TW9kYWwKICB9LAogIHByb3BzOnsKICAgIG1vZGFsV2lkdGg6ewogICAgICB0eXBlOk51bWJlciwKICAgICAgZGVmYXVsdDo1MDAsCiAgICAgIHJlcXVpcmVkOmZhbHNlCiAgICB9LAogICAgbXVsdGk6ewogICAgICB0eXBlOkJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6ZmFsc2UsCiAgICAgIHJlcXVpcmVkOmZhbHNlCiAgICB9LAogICAgcm9vdE9wZW5lZDp7CiAgICAgIHR5cGU6Qm9vbGVhbiwKICAgICAgZGVmYXVsdDp0cnVlLAogICAgICByZXF1aXJlZDpmYWxzZQogICAgfSwKICAgIHZhbHVlOnsKICAgICAgdHlwZTpTdHJpbmcsCiAgICAgIHJlcXVpcmVkOmZhbHNlCiAgICB9LAogICAgZGlzYWJsZWQ6ewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g6Ieq5a6a5LmJ6L+U5Zue5a2X5q6177yM6buY6K6k6L+U5ZueIGlkCiAgICBjdXN0b21SZXR1cm5GaWVsZDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdpZCcKICAgIH0KICB9LAogIGRhdGEoKXsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6ZmFsc2UsCiAgICAgIGNvbmZpcm1Mb2FkaW5nOmZhbHNlLAogICAgICBkZXBhcnROYW1lczoiIiwKICAgICAgZGVwYXJ0SWRzOicnCiAgICB9CiAgfSwKICBtb3VudGVkKCl7CiAgICB0aGlzLmRlcGFydElkcyA9IHRoaXMudmFsdWUKICB9LAogIHdhdGNoOnsKICAgIHZhbHVlKHZhbCl7CiAgICAgIC8vdXBkYXRlLWJlZ2luLWF1dGhvcjp3YW5nc2h1YWkgZGF0ZToyMDIwMTEyNCBmb3I657uE5Lu2IEpTZWxlY3REZXBhcnQudnVl5LiN5piv6buY6K6kaWTml7bmlrDlhoXlrrnnvJbovpHpl67popggZ2l0ZWUgSTI0N1gyCiAgICAgIC8vIGlmICh0aGlzLmN1c3RvbVJldHVybkZpZWxkID09PSAnaWQnKSB7CiAgICAgICAgdGhpcy5kZXBhcnRJZHMgPSB2YWwKICAgICAgLy8gfQogICAgICAvL3VwZGF0ZS1lbmQtYXV0aG9yOndhbmdzaHVhaSBkYXRlOjIwMjAxMTI0IGZvcjrnu4Tku7YgSlNlbGVjdERlcGFydC52dWXkuI3mmK/pu5jorqRpZOaXtuaWsOWGheWuuee8lui+kemXrumimCBnaXRlZSBJMjQ3WDIKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgaW5pdENvbXAoZGVwYXJ0TmFtZXMpewogICAgICB0aGlzLmRlcGFydE5hbWVzID0gZGVwYXJ0TmFtZXMKICAgICAgLy91cGRhdGUtYmVnaW4tYXV0aG9yOmx2ZGFuZGFuIGRhdGU6MjAyMDA1MTMgZm9yOlRFU1RBLTQzOCDpg6jpl6jpgInmi6nnu4Tku7boh6rlrprkuYnov5Tlm57lgLzvvIzmlbDmja7ml6Dms5Xlm57loasKICAgICAgLy9UT0RPIOW9k+i/lOWbnuWtl+auteS4uumDqOmXqOWQjeensOaXtuS8muaciemXrumimCzlm6DkuLrpg6jpl6jlkI3np7DkuI3llK/kuIAKICAgICAgLy/ov5Tlm57lrZfmrrXkuI3kuLppZOaXtu+8jOagueaNrui/lOWbnuWtl+auteiOt+WPlmlkCiAgICAgIGlmKHRoaXMuY3VzdG9tUmV0dXJuRmllbGQgIT09ICdpZCcgJiYgdGhpcy52YWx1ZSl7CiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSB0aGlzLiRyZWZzLmlubmVyRGVwYXJ0U2VsZWN0TW9kYWwuZGF0YUxpc3Q7CiAgICAgICAgY29uc29sZS5sb2coJ3RoaXMudmFsdWUnLHRoaXMudmFsdWUpCiAgICAgICAgdGhpcy5kZXBhcnRJZHMgPSB0aGlzLnZhbHVlLnNwbGl0KCcsJykubWFwKGl0ZW0gPT4gewogICAgICAgICAgY29uc3QgZGF0YSA9IGRhdGFMaXN0LmZpbHRlcihkPT5kW3RoaXMuY3VzdG9tUmV0dXJuRmllbGRdID09PSBpdGVtKQogICAgICAgICAgcmV0dXJuIGRhdGEubGVuZ3RoID4gMCA/IGRhdGFbMF0uaWQgOiAnJwogICAgICAgIH0pLmpvaW4oJywnKQogICAgICB9CiAgICAgIC8vdXBkYXRlLWVuZC1hdXRob3I6bHZkYW5kYW4gZGF0ZToyMDIwMDUxMyBmb3I6VEVTVEEtNDM4IOmDqOmXqOmAieaLqee7hOS7tuiHquWumuS5iei/lOWbnuWAvO+8jOaVsOaNruaXoOazleWbnuWhqwogICAgfSwKICAgIG9wZW5Nb2RhbCgpewogICAgICB0aGlzLiRyZWZzLmlubmVyRGVwYXJ0U2VsZWN0TW9kYWwuc2hvdygpCiAgICB9LAogICAgaGFuZGxlT0socm93cywgaWRzdHIpIHsKICAgICAgbGV0IHZhbHVlID0gJycKICAgICAgaWYgKCFyb3dzICYmIHJvd3MubGVuZ3RoIDw9IDApIHsKICAgICAgICB0aGlzLmRlcGFydE5hbWVzID0gJycKICAgICAgICB0aGlzLmRlcGFydElkcyA9ICcnCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsdWUgPSByb3dzLm1hcChyb3cgPT4gcm93W3RoaXMuY3VzdG9tUmV0dXJuRmllbGRdKS5qb2luKCcsJykKICAgICAgICB0aGlzLmRlcGFydE5hbWVzID0gcm93cy5tYXAocm93ID0+IHJvd1snZGVwYXJ0TmFtZSddKS5qb2luKCcsJykKICAgICAgICB0aGlzLmRlcGFydElkcyA9IGlkc3RyCiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlIiwgdmFsdWUpCiAgICB9LAogICAgZ2V0RGVwYXJ0TmFtZXMoKXsKICAgICAgcmV0dXJuIHRoaXMuZGVwYXJ0TmFtZXMKICAgIH0sCiAgICBoYW5kbGVFbXB0eSgpewogICAgICB0aGlzLmhhbmRsZU9LKCcnKQogICAgfQogIH0sCiAgbW9kZWw6IHsKICAgIHByb3A6ICd2YWx1ZScsCiAgICBldmVudDogJ2NoYW5nZScKICB9Cn0K"},{"version":3,"sources":["JSelectDepart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JSelectDepart.vue","sourceRoot":"src/components/jeecgbiz","sourcesContent":["<template>\r\n  <div class=\"components-input-demo-presuffix\">\r\n    <!---->\r\n    <a-input @click=\"openModal\" placeholder=\"请点击选择部门\" v-model=\"departNames\" readOnly :disabled=\"disabled\">\r\n      <a-icon slot=\"prefix\" type=\"cluster\" title=\"部门选择控件\"/>\r\n      <a-icon v-if=\"departIds\" slot=\"suffix\" type=\"close-circle\" @click=\"handleEmpty\" title=\"清空\"/>\r\n    </a-input>\r\n\r\n    <j-select-depart-modal\r\n      ref=\"innerDepartSelectModal\"\r\n      :modal-width=\"modalWidth\"\r\n      :multi=\"multi\"\r\n      :rootOpened=\"rootOpened\"\r\n      :depart-id=\"departIds\"\r\n      @ok=\"handleOK\"\r\n      @initComp=\"initComp\"/>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import JSelectDepartModal from './modal/JSelectDepartModal'\r\n  export default {\r\n    name: 'JSelectDepart',\r\n    components:{\r\n      JSelectDepartModal\r\n    },\r\n    props:{\r\n      modalWidth:{\r\n        type:Number,\r\n        default:500,\r\n        required:false\r\n      },\r\n      multi:{\r\n        type:Boolean,\r\n        default:false,\r\n        required:false\r\n      },\r\n      rootOpened:{\r\n        type:Boolean,\r\n        default:true,\r\n        required:false\r\n      },\r\n      value:{\r\n        type:String,\r\n        required:false\r\n      },\r\n      disabled:{\r\n        type: Boolean,\r\n        required: false,\r\n        default: false\r\n      },\r\n      // 自定义返回字段，默认返回 id\r\n      customReturnField: {\r\n        type: String,\r\n        default: 'id'\r\n      }\r\n    },\r\n    data(){\r\n      return {\r\n        visible:false,\r\n        confirmLoading:false,\r\n        departNames:\"\",\r\n        departIds:''\r\n      }\r\n    },\r\n    mounted(){\r\n      this.departIds = this.value\r\n    },\r\n    watch:{\r\n      value(val){\r\n        //update-begin-author:wangshuai date:20201124 for:组件 JSelectDepart.vue不是默认id时新内容编辑问题 gitee I247X2\r\n        // if (this.customReturnField === 'id') {\r\n          this.departIds = val\r\n        // }\r\n        //update-end-author:wangshuai date:20201124 for:组件 JSelectDepart.vue不是默认id时新内容编辑问题 gitee I247X2\r\n      }\r\n    },\r\n    methods:{\r\n      initComp(departNames){\r\n        this.departNames = departNames\r\n        //update-begin-author:lvdandan date:20200513 for:TESTA-438 部门选择组件自定义返回值，数据无法回填\r\n        //TODO 当返回字段为部门名称时会有问题,因为部门名称不唯一\r\n        //返回字段不为id时，根据返回字段获取id\r\n        if(this.customReturnField !== 'id' && this.value){\r\n          const dataList = this.$refs.innerDepartSelectModal.dataList;\r\n          console.log('this.value',this.value)\r\n          this.departIds = this.value.split(',').map(item => {\r\n            const data = dataList.filter(d=>d[this.customReturnField] === item)\r\n            return data.length > 0 ? data[0].id : ''\r\n          }).join(',')\r\n        }\r\n        //update-end-author:lvdandan date:20200513 for:TESTA-438 部门选择组件自定义返回值，数据无法回填\r\n      },\r\n      openModal(){\r\n        this.$refs.innerDepartSelectModal.show()\r\n      },\r\n      handleOK(rows, idstr) {\r\n        let value = ''\r\n        if (!rows && rows.length <= 0) {\r\n          this.departNames = ''\r\n          this.departIds = ''\r\n        } else {\r\n          value = rows.map(row => row[this.customReturnField]).join(',')\r\n          this.departNames = rows.map(row => row['departName']).join(',')\r\n          this.departIds = idstr\r\n        }\r\n        this.$emit(\"change\", value)\r\n      },\r\n      getDepartNames(){\r\n        return this.departNames\r\n      },\r\n      handleEmpty(){\r\n        this.handleOK('')\r\n      }\r\n    },\r\n    model: {\r\n      prop: 'value',\r\n      event: 'change'\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  .components-input-demo-presuffix .anticon-close-circle {\r\n    cursor: pointer;\r\n    color: #ccc;\r\n    transition: color 0.3s;\r\n    font-size: 12px;\r\n  }\r\n  .components-input-demo-presuffix .anticon-close-circle:hover {\r\n    color: #f5222d;\r\n  }\r\n  .components-input-demo-presuffix .anticon-close-circle:active {\r\n    color: #666;\r\n  }\r\n</style>"]}]}