{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\JMarkdownEditor\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JMarkdownEditor\\index.vue","mtime":1615948814072},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgJ2NvZGVtaXJyb3IvbGliL2NvZGVtaXJyb3IuY3NzJw0KaW1wb3J0ICdAdG9hc3QtdWkvZWRpdG9yL2Rpc3QvdG9hc3R1aS1lZGl0b3IuY3NzJzsNCmltcG9ydCAnQHRvYXN0LXVpL2VkaXRvci9kaXN0L2kxOG4vemgtY24nOw0KDQppbXBvcnQgRWRpdG9yIGZyb20gJ0B0b2FzdC11aS9lZGl0b3InOw0KaW1wb3J0IGRlZmF1bHRPcHRpb25zIGZyb20gJy4vZGVmYXVsdC1vcHRpb25zJw0KaW1wb3J0IEpVcGxvYWQgZnJvbSAnQC9jb21wb25lbnRzL2plZWNnL0pVcGxvYWQnDQppbXBvcnQgeyBnZXRGaWxlQWNjZXNzSHR0cFVybCB9IGZyb20gJ0AvYXBpL21hbmFnZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnSk1hcmtkb3duRWRpdG9yJywNCiAgY29tcG9uZW50czogew0KICAgIEpVcGxvYWQsDQogIH0sDQogIHByb3BzOiB7DQogICAgdmFsdWU6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIGRlZmF1bHQ6ICcnDQogICAgfSwNCiAgICBpZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgcmVxdWlyZWQ6IGZhbHNlLA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuICdtYXJrZG93bi1lZGl0b3ItJyArICtuZXcgRGF0ZSgpICsgKChNYXRoLnJhbmRvbSgpICogMTAwMCkudG9GaXhlZCgwKSArICcnKQ0KICAgICAgfQ0KICAgIH0sDQogICAgb3B0aW9uczogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdCgpIHsNCiAgICAgICAgcmV0dXJuIGRlZmF1bHRPcHRpb25zDQogICAgICB9DQogICAgfSwNCiAgICBtb2RlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnbWFya2Rvd24nDQogICAgfSwNCiAgICBoZWlnaHQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwNCiAgICAgIGRlZmF1bHQ6ICczMDBweCcNCiAgICB9LA0KICAgIGxhbmd1YWdlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogZmFsc2UsDQogICAgICBkZWZhdWx0OiAnemgtQ04nDQogICAgfQ0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBlZGl0b3I6IG51bGwsDQogICAgICBpc1Nob3c6ZmFsc2UsDQogICAgICBhY3RpdmVJbmRleDoiMSIsDQogICAgICBkaWFsb2dWaXNpYmxlOmZhbHNlLA0KICAgICAgaW5kZXg6IjEiLA0KICAgICAgZmlsZUxpc3Q6W10sDQogICAgICByZW1hcms6IiIsDQogICAgICBpbWFnZU5hbWU6IiIsDQogICAgICBpbWFnZVVybDoiIiwNCiAgICAgIG5ldHdvcmtQaWM6IiINCiAgICB9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgZWRpdG9yT3B0aW9ucygpIHsNCiAgICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0T3B0aW9ucywgdGhpcy5vcHRpb25zKQ0KICAgICAgb3B0aW9ucy5pbml0aWFsRWRpdFR5cGUgPSB0aGlzLm1vZGUNCiAgICAgIG9wdGlvbnMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQNCiAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPSB0aGlzLmxhbmd1YWdlDQogICAgICByZXR1cm4gb3B0aW9ucw0KICAgIH0NCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICB2YWx1ZShuZXdWYWx1ZSwgcHJlVmFsdWUpIHsNCiAgICAgIGlmIChuZXdWYWx1ZSAhPT0gcHJlVmFsdWUgJiYgbmV3VmFsdWUgIT09IHRoaXMuZWRpdG9yLmdldE1hcmtkb3duKCkpIHsNCiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0TWFya2Rvd24obmV3VmFsdWUpDQogICAgICB9DQogICAgfSwNCiAgICBsYW5ndWFnZSh2YWwpIHsNCiAgICAgIHRoaXMuZGVzdHJveUVkaXRvcigpDQogICAgICB0aGlzLmluaXRFZGl0b3IoKQ0KICAgIH0sDQogICAgaGVpZ2h0KG5ld1ZhbHVlKSB7DQogICAgICB0aGlzLmVkaXRvci5oZWlnaHQobmV3VmFsdWUpDQogICAgfSwNCiAgICBtb2RlKG5ld1ZhbHVlKSB7DQogICAgICB0aGlzLmVkaXRvci5jaGFuZ2VNb2RlKG5ld1ZhbHVlKQ0KICAgIH0NCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmluaXRFZGl0b3IoKQ0KICB9LA0KICBkZXN0cm95ZWQoKSB7DQogICAgdGhpcy5kZXN0cm95RWRpdG9yKCkNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGluaXRFZGl0b3IoKSB7DQogICAgICB0aGlzLmVkaXRvciA9IG5ldyBFZGl0b3Ioew0KICAgICAgICBlbDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCksDQogICAgICAgIC4uLnRoaXMuZWRpdG9yT3B0aW9ucw0KICAgICAgfSkNCiAgICAgIGlmICh0aGlzLnZhbHVlKSB7DQogICAgICAgIHRoaXMuZWRpdG9yLnNldE1hcmtkb3duKHRoaXMudmFsdWUpDQogICAgICB9DQogICAgICB0aGlzLmVkaXRvci5vbignY2hhbmdlJywgKCkgPT4gew0KICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UnLCB0aGlzLmVkaXRvci5nZXRNYXJrZG93bigpKQ0KICAgICAgfSkNCiAgICAgIC8vLS1iZWdpbiDmt7vliqDoh6rlrprkuYnkuIrkvKDmjInpkq4NCiAgICAgIC8qDQogICAgICAgKiDmt7vliqDoh6rlrprkuYnmjInpkq4NCiAgICAgICAqLw0KICAgICAgLy/ojrflj5bnvJbovpHlmajkuIrnmoTlip/og73mnaENCiAgICAgIGxldCB0b29sYmFyID0gdGhpcy5lZGl0b3IuZ2V0VUkoKS5nZXRUb29sYmFyKCk7DQogICAgICBsZXQgZmlsZURvbSA9IHRoaXMuJHJlZnMuZmlsZXM7DQogICAgICAvL+a3u+WKoOWbvueJh+eCueWHu+S6i+S7tg0KICAgICAgdGhpcy5lZGl0b3IuZXZlbnRNYW5hZ2VyLmFkZEV2ZW50VHlwZSgnaXNTaG93Q2xpY2tFdmVudCcpOw0KICAgICAgdGhpcy5lZGl0b3IuZXZlbnRNYW5hZ2VyLmxpc3RlbignaXNTaG93Q2xpY2tFdmVudCcsICgpID0+IHsNCiAgICAgICAgdGhpcy5pc1Nob3cgPSB0cnVlDQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIH0pOw0KICAgICAgLy9hZGRJbWFnZUJsb2JIb29r5Zu+54mH5LiK5Lyg44CB5Ymq5YiH44CB5ouW5ou96YO95Lya6LWw5q2k5pa55rOVDQogICAgICAvLyDliKDpmaTpu5jorqTnm5HlkKzkuovku7YNCiAgICAgIHRoaXMuZWRpdG9yLmV2ZW50TWFuYWdlci5yZW1vdmVFdmVudEhhbmRsZXIoJ2FkZEltYWdlQmxvYkhvb2snKQ0KICAgICAgLy8g5re75Yqg6Ieq5a6a5LmJ55uR5ZCs5LqL5Lu2DQogICAgICB0aGlzLmVkaXRvci5ldmVudE1hbmFnZXIubGlzdGVuKCdhZGRJbWFnZUJsb2JIb29rJywgKGJsb2IsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgIHRoaXMudXBsb2FkKGJsb2IsIHVybCA9PiB7DQogICAgICAgICAgY2FsbGJhY2sodXJsKQ0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICAgIC8vIOa3u+WKoOiHquWumuS5ieaMiemSriDnrKzkuozkuKrlj4LmlbDku6PooajkvY3nva7vvIzkuI3kvKDpu5jorqTmlL7lnKjmnIDlkI4NCiAgICAgIHRvb2xiYXIuaW5zZXJ0SXRlbSgxNSx7DQogICAgICAgIHR5cGU6ICdidXR0b24nLA0KICAgICAgICBvcHRpb25zOnsNCiAgICAgICAgICBuYW1lOiAnY3VzdG9taXplJywNCiAgICAgICAgICBjbGFzc05hbWU6ICd0dWktaW1hZ2UgdHVpLXRvb2xiYXItaWNvbnMnLA0KICAgICAgICAgIGV2ZW50OiAnaXNTaG93Q2xpY2tFdmVudCcsDQogICAgICAgICAgdG9vbHRpcDogJ+S4iuS8oOWbvueJhycsDQogICAgICAgIH0NCiAgICAgICAgLy8NCiAgICAgIH0pOw0KICAgICAgLy8tLWVuZCDmt7vliqDoh6rlrprkuYnkuIrkvKDmjInpkq4NCiAgICB9LA0KICAgIGRlc3Ryb3lFZGl0b3IoKSB7DQogICAgICBpZiAoIXRoaXMuZWRpdG9yKSByZXR1cm4NCiAgICAgIHRoaXMuZWRpdG9yLm9mZignY2hhbmdlJykNCiAgICAgIHRoaXMuZWRpdG9yLnJlbW92ZSgpDQogICAgfSwNCiAgICBzZXRNYXJrZG93bih2YWx1ZSkgew0KICAgICAgdGhpcy5lZGl0b3Iuc2V0TWFya2Rvd24odmFsdWUpDQogICAgfSwNCiAgICBnZXRNYXJrZG93bigpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRNYXJrZG93bigpDQogICAgfSwNCiAgICBzZXRIdG1sKHZhbHVlKSB7DQogICAgICB0aGlzLmVkaXRvci5zZXRIdG1sKHZhbHVlKQ0KICAgIH0sDQogICAgZ2V0SHRtbCgpIHsNCiAgICAgIHJldHVybiB0aGlzLmVkaXRvci5nZXRIdG1sKCkNCiAgICB9LA0KICAgIGhhbmRsZU9rKCl7DQogICAgICBpZih0aGlzLmluZGV4PT0nMScpew0KICAgICAgICB0aGlzLmltYWdlVXJsID0gZ2V0RmlsZUFjY2Vzc0h0dHBVcmwodGhpcy5maWxlTGlzdCkNCiAgICAgICAgaWYodGhpcy5yZW1hcmspew0KICAgICAgICAgIHRoaXMuYWRkSW1nVG9NZCh0aGlzLmltYWdlVXJsLHRoaXMucmVtYXJrKQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICB0aGlzLmFkZEltZ1RvTWQodGhpcy5pbWFnZVVybCwiIikNCiAgICAgICAgfQ0KICAgICAgfWVsc2V7DQogICAgICAgIGlmKHRoaXMucmVtYXJrKXsNCiAgICAgICAgICB0aGlzLmFkZEltZ1RvTWQodGhpcy5uZXR3b3JrUGljLHRoaXMucmVtYXJrKQ0KICAgICAgICB9ZWxzZXsNCiAgICAgICAgICB0aGlzLmFkZEltZ1RvTWQodGhpcy5uZXR3b3JrUGljLCIiKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLmluZGV4PSIxIg0KICAgICAgdGhpcy5maWxlTGlzdD1bXQ0KICAgICAgdGhpcy5pbWFnZU5hbWU9IiI7DQogICAgICB0aGlzLmltYWdlVXJsPSIiOw0KICAgICAgdGhpcy5yZW1hcms9IiINCiAgICAgIHRoaXMubmV0d29ya1BpYz0iIg0KICAgICAgdGhpcy5kaWFsb2dWaXNpYmxlPWZhbHNlDQogICAgICB0aGlzLmlzU2hvdz1mYWxzZTsNCiAgICB9LA0KICAgIGhhbmRsZUNsb3NlKGRvbmUpIHsNCiAgICAgIGRvbmUoKTsNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZSh2YWwpew0KICAgICAgdGhpcy5maWxlTGlzdD1bXQ0KICAgICAgdGhpcy5yZW1hcms9IiINCiAgICAgIHRoaXMuaW1hZ2VOYW1lPSIiDQogICAgICB0aGlzLmltYWdlVXJsPSIiDQogICAgICB0aGlzLm5ldHdvcmtQaWM9IiINCiAgICAgIHRoaXMuaW5kZXg9dmFsDQogICAgfSwNCiAgICAvL+a3u+WKoOWbvueJh+WIsG1hcmtkb3duDQogICAgYWRkSW1nVG9NZChkYXRhLG5hbWUpIHsNCiAgICAgIGxldCBlZGl0b3IgPSB0aGlzLmVkaXRvci5nZXRDb2RlTWlycm9yKCk7DQogICAgICBsZXQgZWRpdG9ySHRtbCA9IHRoaXMuZWRpdG9yLmdldEN1cnJlbnRNb2RlRWRpdG9yKCk7DQogICAgICBsZXQgaXNNYXJrZG93bk1vZGUgPSB0aGlzLmVkaXRvci5pc01hcmtkb3duTW9kZSgpOw0KICAgICAgaWYgKGlzTWFya2Rvd25Nb2RlKSB7DQogICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGAhWyR7bmFtZX1dKCR7ZGF0YX0pYCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBsZXQgcmFuZ2UgPSBlZGl0b3JIdG1sLmdldFJhbmdlKCk7DQogICAgICAgIGxldCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsNCiAgICAgICAgaW1nLnNyYyA9IGAke2RhdGF9YDsNCiAgICAgICAgaW1nLmFsdCA9IG5hbWU7DQogICAgICAgIHJhbmdlLmluc2VydE5vZGUoaW1nKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KICBtb2RlbDogew0KICAgIHByb3A6ICd2YWx1ZScsDQogICAgZXZlbnQ6ICdjaGFuZ2UnDQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/jeecg/JMarkdownEditor","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"j-markdown-editor\" :id=\"id\"/>\r\n    <div v-if=\"isShow\">\r\n      <j-modal\r\n        title=\"图片上传\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\"\r\n        :before-close=\"handleClose\"\r\n        @ok=\"handleOk\">\r\n        <a-tabs default-active-key=\"1\" @change=\"handleChange\">\r\n          <a-tab-pane tab=\"本地图片上传\" key=\"1\" :forceRender=\"true\">\r\n            <j-upload v-model=\"fileList\" :number=\"1\"></j-upload>\r\n            <div style=\"margin-top: 20px\">\r\n              <a-input v-model=\"remark\" placeholder=\"请填写备注\"></a-input>\r\n            </div>\r\n          </a-tab-pane>\r\n          <a-tab-pane tab=\"网络图片地址\" key=\"2\" :forceRender=\"true\">\r\n            <a-input v-model=\"networkPic\" placeholder=\"请填写网络图片地址\"></a-input>\r\n            <a-input style=\"margin-top: 20px\" v-model=\"remark\" placeholder=\"请填写备注\"></a-input>\r\n          </a-tab-pane>\r\n        </a-tabs>\r\n      </j-modal>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'codemirror/lib/codemirror.css'\r\nimport '@toast-ui/editor/dist/toastui-editor.css';\r\nimport '@toast-ui/editor/dist/i18n/zh-cn';\r\n\r\nimport Editor from '@toast-ui/editor';\r\nimport defaultOptions from './default-options'\r\nimport JUpload from '@/components/jeecg/JUpload'\r\nimport { getFileAccessHttpUrl } from '@/api/manage'\r\n\r\nexport default {\r\n  name: 'JMarkdownEditor',\r\n  components: {\r\n    JUpload,\r\n  },\r\n  props: {\r\n    value: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    id: {\r\n      type: String,\r\n      required: false,\r\n      default() {\r\n        return 'markdown-editor-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\r\n      }\r\n    },\r\n    options: {\r\n      type: Object,\r\n      default() {\r\n        return defaultOptions\r\n      }\r\n    },\r\n    mode: {\r\n      type: String,\r\n      default: 'markdown'\r\n    },\r\n    height: {\r\n      type: String,\r\n      required: false,\r\n      default: '300px'\r\n    },\r\n    language: {\r\n      type: String,\r\n      required: false,\r\n      default: 'zh-CN'\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      editor: null,\r\n      isShow:false,\r\n      activeIndex:\"1\",\r\n      dialogVisible:false,\r\n      index:\"1\",\r\n      fileList:[],\r\n      remark:\"\",\r\n      imageName:\"\",\r\n      imageUrl:\"\",\r\n      networkPic:\"\"\r\n    }\r\n  },\r\n  computed: {\r\n    editorOptions() {\r\n      const options = Object.assign({}, defaultOptions, this.options)\r\n      options.initialEditType = this.mode\r\n      options.height = this.height\r\n      options.language = this.language\r\n      return options\r\n    }\r\n  },\r\n  watch: {\r\n    value(newValue, preValue) {\r\n      if (newValue !== preValue && newValue !== this.editor.getMarkdown()) {\r\n        this.editor.setMarkdown(newValue)\r\n      }\r\n    },\r\n    language(val) {\r\n      this.destroyEditor()\r\n      this.initEditor()\r\n    },\r\n    height(newValue) {\r\n      this.editor.height(newValue)\r\n    },\r\n    mode(newValue) {\r\n      this.editor.changeMode(newValue)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initEditor()\r\n  },\r\n  destroyed() {\r\n    this.destroyEditor()\r\n  },\r\n  methods: {\r\n    initEditor() {\r\n      this.editor = new Editor({\r\n        el: document.getElementById(this.id),\r\n        ...this.editorOptions\r\n      })\r\n      if (this.value) {\r\n        this.editor.setMarkdown(this.value)\r\n      }\r\n      this.editor.on('change', () => {\r\n        this.$emit('change', this.editor.getMarkdown())\r\n      })\r\n      //--begin 添加自定义上传按钮\r\n      /*\r\n       * 添加自定义按钮\r\n       */\r\n      //获取编辑器上的功能条\r\n      let toolbar = this.editor.getUI().getToolbar();\r\n      let fileDom = this.$refs.files;\r\n      //添加图片点击事件\r\n      this.editor.eventManager.addEventType('isShowClickEvent');\r\n      this.editor.eventManager.listen('isShowClickEvent', () => {\r\n        this.isShow = true\r\n        this.dialogVisible = true\r\n      });\r\n      //addImageBlobHook图片上传、剪切、拖拽都会走此方法\r\n      // 删除默认监听事件\r\n      this.editor.eventManager.removeEventHandler('addImageBlobHook')\r\n      // 添加自定义监听事件\r\n      this.editor.eventManager.listen('addImageBlobHook', (blob, callback) => {\r\n        this.upload(blob, url => {\r\n          callback(url)\r\n        })\r\n      })\r\n      // 添加自定义按钮 第二个参数代表位置，不传默认放在最后\r\n      toolbar.insertItem(15,{\r\n        type: 'button',\r\n        options:{\r\n          name: 'customize',\r\n          className: 'tui-image tui-toolbar-icons',\r\n          event: 'isShowClickEvent',\r\n          tooltip: '上传图片',\r\n        }\r\n        //\r\n      });\r\n      //--end 添加自定义上传按钮\r\n    },\r\n    destroyEditor() {\r\n      if (!this.editor) return\r\n      this.editor.off('change')\r\n      this.editor.remove()\r\n    },\r\n    setMarkdown(value) {\r\n      this.editor.setMarkdown(value)\r\n    },\r\n    getMarkdown() {\r\n      return this.editor.getMarkdown()\r\n    },\r\n    setHtml(value) {\r\n      this.editor.setHtml(value)\r\n    },\r\n    getHtml() {\r\n      return this.editor.getHtml()\r\n    },\r\n    handleOk(){\r\n      if(this.index=='1'){\r\n        this.imageUrl = getFileAccessHttpUrl(this.fileList)\r\n        if(this.remark){\r\n          this.addImgToMd(this.imageUrl,this.remark)\r\n        }else{\r\n          this.addImgToMd(this.imageUrl,\"\")\r\n        }\r\n      }else{\r\n        if(this.remark){\r\n          this.addImgToMd(this.networkPic,this.remark)\r\n        }else{\r\n          this.addImgToMd(this.networkPic,\"\")\r\n        }\r\n      }\r\n      this.index=\"1\"\r\n      this.fileList=[]\r\n      this.imageName=\"\";\r\n      this.imageUrl=\"\";\r\n      this.remark=\"\"\r\n      this.networkPic=\"\"\r\n      this.dialogVisible=false\r\n      this.isShow=false;\r\n    },\r\n    handleClose(done) {\r\n      done();\r\n    },\r\n    handleChange(val){\r\n      this.fileList=[]\r\n      this.remark=\"\"\r\n      this.imageName=\"\"\r\n      this.imageUrl=\"\"\r\n      this.networkPic=\"\"\r\n      this.index=val\r\n    },\r\n    //添加图片到markdown\r\n    addImgToMd(data,name) {\r\n      let editor = this.editor.getCodeMirror();\r\n      let editorHtml = this.editor.getCurrentModeEditor();\r\n      let isMarkdownMode = this.editor.isMarkdownMode();\r\n      if (isMarkdownMode) {\r\n        editor.replaceSelection(`![${name}](${data})`);\r\n      } else {\r\n        let range = editorHtml.getRange();\r\n        let img = document.createElement('img');\r\n        img.src = `${data}`;\r\n        img.alt = name;\r\n        range.insertNode(img);\r\n      }\r\n    },\r\n  },\r\n  model: {\r\n    prop: 'value',\r\n    event: 'change'\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n\r\n  .j-markdown-editor {\r\n    /deep/ .tui-editor-defaultUI {\r\n      .te-mode-switch,\r\n      .tui-scrollsync\r\n      {\r\n        line-height: 1.5;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>"]}]}