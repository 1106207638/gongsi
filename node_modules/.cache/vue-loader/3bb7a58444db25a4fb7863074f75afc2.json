{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\jeecg\\JVxeDemo\\demo\\JSBCDemo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\jeecg\\JVxeDemo\\demo\\JSBCDemo.vue","mtime":1615948818510},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEFjdGlvbiwgcG9zdEFjdGlvbiwgcHV0QWN0aW9uIH0gZnJvbSAnQGFwaS9tYW5hZ2UnCmltcG9ydCB7IEpWWEVUeXBlcyB9IGZyb20gJ0AvY29tcG9uZW50cy9qZWVjZy9KVnhlVGFibGUnCgovLyDljbPml7bkv53lrZjnpLrkvosKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdKU0JDRGVtbycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIOW3peWFt+agj+eahOaMiemSrumFjee9rgogICAgICB0b29sYmFyQ29uZmlnOiB7CiAgICAgICAgLy8gYWRkIOaWsOWinuaMiemSru+8m3JlbW92ZSDliKDpmaTmjInpkq7vvJtjbGVhclNlbGVjdGlvbiDmuIXnqbrpgInmi6nmjInpkq4KICAgICAgICBidG46IFsnYWRkJywgJ3NhdmUnLCAncmVtb3ZlJywgJ2NsZWFyU2VsZWN0aW9uJ10KICAgICAgfSwKICAgICAgLy8g5piv5ZCm5q2j5Zyo5Yqg6L29CiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICAvLyDliIbpobXlmajlj4LmlbAKICAgICAgcGFnaW5hdGlvbjogewogICAgICAgIC8vIOW9k+WJjemhteeggQogICAgICAgIGN1cnJlbnQ6IDEsCiAgICAgICAgLy8g5q+P6aG155qE5p2h5pWwCiAgICAgICAgcGFnZVNpemU6IDIwMCwKICAgICAgICAvLyDlj6/liIfmjaLnmoTmnaHmlbAKICAgICAgICBwYWdlU2l6ZU9wdGlvbnM6IFsnMTAnLCAnMjAnLCAnMzAnLCAnMTAwJywgJzIwMCddLAogICAgICAgIC8vIOaVsOaNruaAu+aVsO+8iOebruWJjeW5tuS4jeefpemBk+ecn+WunueahOaAu+aVsO+8jOaJgOS7peWFiOWhq+WGmTDvvIzlnKjlkI7lj7Dmn6Xlh7rmnaXlkI7lho3otYvlgLzvvIkKICAgICAgICB0b3RhbDogMCwKICAgICAgfSwKICAgICAgLy8g6YCJ5oup55qE6KGMCiAgICAgIHNlbGVjdGVkUm93czogW10sCiAgICAgIC8vIOaVsOaNrua6kO+8jOaOp+WItuihqOagvOeahOaVsOaNrgogICAgICBkYXRhU291cmNlOiBbXSwKICAgICAgLy8g5YiX6YWN572u77yM5o6n5Yi26KGo5qC85pi+56S655qE5YiXCiAgICAgIGNvbHVtbnM6IFsKICAgICAgICB7a2V5OiAnbnVtJywgdGl0bGU6ICfluo/lj7cnLCB3aWR0aDogJzgwcHgnfSwKICAgICAgICB7CiAgICAgICAgICAvLyDlrZfmrrVrZXnvvIzot5/lkI7lj7DmlbDmja7nmoTlrZfmrrXlkI3ljLnphY0KICAgICAgICAgIGtleTogJ3NoaXBfbmFtZScsCiAgICAgICAgICAvLyDliJfnmoTmoIfpopgKICAgICAgICAgIHRpdGxlOiAn6Ii55ZCNJywKICAgICAgICAgIC8vIOWIl+eahOWuveW6pgogICAgICAgICAgd2lkdGg6ICcxODBweCcsCiAgICAgICAgICAvLyDlpoLmnpzliqDkuIrkuobor6XlsZ7mgKfvvIzlsLHku6PooajlvZPliY3ljZXlhYPmoLzmmK/lj6/nvJbovpHnmoTvvIx0eXBl5bCx5piv6KGo5Y2V55qE57G75Z6L77yMaW5wdXTlsLHmmK/nroDljZXnmoTovpPlhaXmoYYKICAgICAgICAgIHR5cGU6IEpWWEVUeXBlcy5pbnB1dAogICAgICAgIH0sCiAgICAgICAge2tleTogJ2NhbGwnLCB0aXRsZTogJ+WRvOWPqycsIHdpZHRoOiAnODBweCcsIHR5cGU6IEpWWEVUeXBlcy5pbnB1dH0sCiAgICAgICAge2tleTogJ2xlbicsIHRpdGxlOiAn6ZW/Jywgd2lkdGg6ICc4MHB4JywgdHlwZTogSlZYRVR5cGVzLmlucHV0fSwKICAgICAgICB7a2V5OiAndG9uJywgdGl0bGU6ICflkKgnLCB3aWR0aDogJzEyMHB4JywgZGVmYXVsdFZhbHVlOiAyMzMsIHR5cGU6IEpWWEVUeXBlcy5pbnB1dH0sCiAgICAgICAge2tleTogJ3BheWVyJywgdGl0bGU6ICfku5jmrL7mlrknLCB3aWR0aDogJzEyMHB4JywgZGVmYXVsdFZhbHVlOiAn5byg5LiJJywgdHlwZTogSlZYRVR5cGVzLmlucHV0fSwKICAgICAgICB7a2V5OiAnY291bnQnLCB0aXRsZTogJ+aVsCcsIHdpZHRoOiAnNDBweCd9LAogICAgICAgIHsKICAgICAgICAgIGtleTogJ2NvbXBhbnknLAogICAgICAgICAgdGl0bGU6ICflhazlj7gnLAogICAgICAgICAgLy8g5pyA5bCP5a695bqm77yM5LiO5a695bqm5LiN5ZCM55qE5piv77yM6L+Z5Liq5LiN5piv5Zu65a6a55qE5a695bqm77yM5aaC5p6c6KGo5qC85pyJ5aSa5L2Z55qE56m66Ze077yM5Lya5bmz5Z2H5YiG6YWN57uZ6K6+572u5LqGIG1pbldpZHRoIOeahOWIlwogICAgICAgICAgLy8g5aaC5p6c6KaB5YGa5Y2g5ruh6KGo5qC855qE5YiX5Y+v5Lul6L+Z5LmI5YaZCiAgICAgICAgICBtaW5XaWR0aDogJzE4MHB4JywKICAgICAgICAgIHR5cGU6IEpWWEVUeXBlcy5pbnB1dAogICAgICAgIH0sCiAgICAgICAge2tleTogJ3RyZW5kJywgdGl0bGU6ICfliqjlkJEnLCB3aWR0aDogJzEyMHB4JywgdHlwZTogSlZYRVR5cGVzLmlucHV0fSwKICAgICAgXSwKICAgICAgLy8g5p+l6K+idXJs5Zyw5Z2ACiAgICAgIHVybDogewogICAgICAgIGdldERhdGE6ICcvbW9jay92eGUvZ2V0RGF0YScsCiAgICAgICAgLy8g5qih5ouf5L+d5a2Y5Y2V6KGM5pWw5o2u77yI5Y2z5pe25L+d5a2Y77yJCiAgICAgICAgc2F2ZVJvdzogJy9tb2NrL3Z4ZS9pbW1lZGlhdGVTYXZlUm93JywKICAgICAgICAvLyDmqKHmi5/kv53lrZjmlbTkuKrooajmoLznmoTmlbDmja4KICAgICAgICBzYXZlQWxsOiAnL21vY2svdnhlL2ltbWVkaWF0ZVNhdmVBbGwnLAogICAgICB9LAogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZERhdGEoKQogIH0sCiAgbWV0aG9kczogewoKICAgIC8vIOWKoOi9veaVsOaNrgogICAgbG9hZERhdGEoKSB7CiAgICAgIC8vIOWwgeijheafpeivouadoeS7tgogICAgICBsZXQgZm9ybURhdGEgPSB7CiAgICAgICAgcGFnZU5vOiB0aGlzLnBhZ2luYXRpb24uY3VycmVudCwKICAgICAgICBwYWdlU2l6ZTogdGhpcy5wYWdpbmF0aW9uLnBhZ2VTaXplCiAgICAgIH0KICAgICAgLy8g6LCD55So5p+l6K+i5pWw5o2u5o6l5Y+jCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgZ2V0QWN0aW9uKHRoaXMudXJsLmdldERhdGEsIGZvcm1EYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7CiAgICAgICAgICAvLyDlkI7lj7Dmn6Xor6Llm57mnaXnmoQgdG90YWzvvIzmlbDmja7mgLvmlbDph48KICAgICAgICAgIHRoaXMucGFnaW5hdGlvbi50b3RhbCA9IHJlcy5yZXN1bHQudG90YWwKICAgICAgICAgIC8vIOWwhuafpeivoueahOaVsOaNrui1i+WAvOe7mSBkYXRhU291cmNlCiAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSByZXMucmVzdWx0LnJlY29yZHMKICAgICAgICAgIC8vIOmHjee9rumAieaLqQogICAgICAgICAgdGhpcy5zZWxlY3RlZFJvd3MgPSBbXQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRlcnJvcih7dGl0bGU6ICfkuLvooajmn6Xor6LlpLHotKUnLCBjb250ZW50OiByZXMubWVzc2FnZX0pCiAgICAgICAgfQogICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICAvLyDov5nph4zmmK/ml6DorrrmiJDlip/miJblpLHotKXpg73kvJrmiafooYznmoTmlrnms5XvvIzlnKjov5nph4zlhbPpl61sb2FkaW5nCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCgogICAgLy8g44CQ5pW05L2T5L+d5a2Y44CR54K55Ye75L+d5a2Y5oyJ6ZKu5pe26Kem5Y+R55qE5LqL5Lu2CiAgICBoYW5kbGVUYWJsZVNhdmUoeyR0YWJsZSwgdGFyZ2V0fSkgewogICAgICAvLyDmoKHpqozmlbTkuKrooajmoLwKICAgICAgJHRhYmxlLnZhbGlkYXRlKCkudGhlbigoZXJyTWFwKSA9PiB7CiAgICAgICAgLy8g5qCh6aqM6YCa6L+HCiAgICAgICAgaWYgKCFlcnJNYXApIHsKICAgICAgICAgIC8vIOiOt+WPluaJgOacieaVsOaNrgogICAgICAgICAgbGV0IHRhYmxlRGF0YSA9IHRhcmdldC5nZXRUYWJsZURhdGEoKQogICAgICAgICAgY29uc29sZS5sb2coJ+W9k+WJjeS/neWtmOeahOaVsOaNruaYr++8micsIHRhYmxlRGF0YSkKICAgICAgICAgIC8vIOiOt+WPluaWsOWinueahOaVsOaNrgogICAgICAgICAgbGV0IG5ld0RhdGEgPSB0YXJnZXQuZ2V0TmV3RGF0YSgpCiAgICAgICAgICBjb25zb2xlLmxvZygnLS0g5paw5aKe55qE5pWw5o2u77yaJywgbmV3RGF0YSkKICAgICAgICAgIC8vIOiOt+WPluWIoOmZpOeahOaVsOaNrgogICAgICAgICAgbGV0IGRlbGV0ZURhdGEgPSB0YXJnZXQuZ2V0RGVsZXRlRGF0YSgpCiAgICAgICAgICBjb25zb2xlLmxvZygnLS0g5Yig6Zmk55qE5pWw5o2u77yaJywgZGVsZXRlRGF0YSkKCiAgICAgICAgICAvLyDjgJDmqKHmi5/kv53lrZjjgJEKICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgIHBvc3RBY3Rpb24odGhpcy51cmwuc2F2ZUFsbCwgdGFibGVEYXRhKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuc3VjY2VzcykgewogICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcyhg5L+d5a2Y5oiQ5Yqf77yBYCkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm4oYOS/neWtmOWksei0pe+8mmAgKyByZXMubWVzc2FnZSkKICAgICAgICAgICAgfQogICAgICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCgogICAgLy8g6Kem5Y+R5Y2V5YWD5qC85Yig6Zmk5LqL5Lu2CiAgICBoYW5kbGVUYWJsZVJlbW92ZShldmVudCkgewoKICAgICAgLy8g5oqKIGV2ZW50LmRlbGV0ZVJvd3Mg5Lyg57uZ5ZCO5Y+w6L+b6KGM5Yig6Zmk77yI5rOo5oSP77ya6L+Z6YeM5LiN5Lya5Lyg6YCS5YmN56uv6YC76L6R5paw5aKe55qE5pWw5o2u77yM5Zug5Li65LiN6ZyA6KaB6K+35rGC5ZCO5Y+w5Yig6Zmk77yJCiAgICAgIGNvbnNvbGUubG9nKCflvoXliKDpmaTnmoTmlbDmja46ICcsIGV2ZW50LmRlbGV0ZVJvd3MpCiAgICAgIC8vIOS5n+WPr+S7peWPquS8oElE77yM5Zug5Li65Y+v5Lul5qC55o2uSUTliKDpmaQKICAgICAgbGV0IGRlbGV0ZUlkcyA9IGV2ZW50LmRlbGV0ZVJvd3MubWFwKHJvdyA9PiByb3cuaWQpCiAgICAgIGNvbnNvbGUubG9nKCflvoXliKDpmaTnmoTmlbDmja5pZHM6ICcsIGRlbGV0ZUlkcykKCiAgICAgIC8vIOaooeaLn+ivt+axguWQjuWPsOWIoOmZpAogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Yig6Zmk5oiQ5YqfJykKICAgICAgICAvLyDlgYforr7lkI7lj7Dov5Tlm57liKDpmaTmiJDlip/vvIzlv4XpobvopoHosIPnlKggY29uZmlybVJlbW92ZSgpIOaWueazle+8jOaJjeS8muecn+ato+WcqOihqOagvOmHjOenu+mZpO+8iOS8muWQjOaXtuWIoOmZpOmAieS4reeahOmAu+i+keaWsOWinueahOaVsOaNru+8iQogICAgICAgIGV2ZW50LmNvbmZpcm1SZW1vdmUoKQogICAgICB9LCAxMDAwKQogICAgfSwKCiAgICAvLyDljZXlhYPmoLznvJbovpHlrozmiJDkuYvlkI7op6blj5HnmoTkuovku7YKICAgIGhhbmRsZUVkaXRDbG9zZWQoZXZlbnQpIHsKICAgICAgbGV0IHskdGFibGUsIHJvdywgY29sdW1ufSA9IGV2ZW50CgogICAgICBsZXQgZmllbGQgPSBjb2x1bW4ucHJvcGVydHkKICAgICAgbGV0IGNlbGxWYWx1ZSA9IHJvd1tmaWVsZF0KICAgICAgLy8g5Yik5pat5Y2V5YWD5qC85YC85piv5ZCm6KKr5L+u5pS5CiAgICAgIGlmICgkdGFibGUuaXNVcGRhdGVCeVJvdyhyb3csIGZpZWxkKSkgewogICAgICAgIC8vIOagoemqjOW9k+WJjeihjAogICAgICAgICR0YWJsZS52YWxpZGF0ZShyb3cpLnRoZW4oKGVyck1hcCkgPT4gewogICAgICAgICAgLy8g5qCh6aqM6YCa6L+HCiAgICAgICAgICBpZiAoIWVyck1hcCkgewogICAgICAgICAgICAvLyDjgJDmqKHmi5/kv53lrZjjgJEKICAgICAgICAgICAgbGV0IGhpZGVMb2FkaW5nID0gdGhpcy4kbWVzc2FnZS5sb2FkaW5nKGDmraPlnKjkv53lrZgiJHtjb2x1bW4udGl0bGV9ImAsIDApCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfljbPml7bkv53lrZjmlbDmja7vvJonLCByb3cpCiAgICAgICAgICAgIHB1dEFjdGlvbih0aGlzLnVybC5zYXZlUm93LCByb3cpLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcyhgIiR7Y29sdW1uLnRpdGxlfSLkv53lrZjmiJDlip/vvIFgKQogICAgICAgICAgICAgICAgLy8g5bGA6YOo5pu05paw5Y2V5YWD5qC85Li65bey5L+d5a2Y54q25oCBCiAgICAgICAgICAgICAgICAkdGFibGUucmVsb2FkUm93KHJvdywgbnVsbCwgZmllbGQpCiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybihgIiR7Y29sdW1uLnRpdGxlfSLkv53lrZjlpLHotKXvvJpgICsgcmVzLm1lc3NhZ2UpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5maW5hbGx5KCgpID0+IHsKICAgICAgICAgICAgICBoaWRlTG9hZGluZygpCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgfSkKICAgICAgfQogICAgfSwKCiAgICAvLyDlvZPliIbpobXlj4LmlbDlj5jljJbml7bop6blj5HnmoTkuovku7YKICAgIGhhbmRsZVBhZ2VDaGFuZ2UoZXZlbnQpIHsKICAgICAgLy8g6YeN5paw6LWL5YC8CiAgICAgIHRoaXMucGFnaW5hdGlvbi5jdXJyZW50ID0gZXZlbnQuY3VycmVudAogICAgICB0aGlzLnBhZ2luYXRpb24ucGFnZVNpemUgPSBldmVudC5wYWdlU2l6ZQogICAgICAvLyDmn6Xor6LmlbDmja4KICAgICAgdGhpcy5sb2FkRGF0YSgpCiAgICB9LAoKICAgIC8vIOW9k+mAieaLqeeahOihjOWPmOWMluaXtuinpuWPkeeahOS6i+S7tgogICAgaGFuZGxlU2VsZWN0Um93Q2hhbmdlKGV2ZW50KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzID0gZXZlbnQuc2VsZWN0ZWRSb3dzCiAgICB9LAoKICB9LAp9Cg=="},{"version":3,"sources":["JSBCDemo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA","file":"JSBCDemo.vue","sourceRoot":"src/views/jeecg/JVxeDemo/demo","sourcesContent":["<template>\r\n  <a-card title=\"即时保存示例\" :bordered=\"false\">\r\n    <!--\r\n      【即时保存大体思路】：\r\n      1. JVxeTable 上必须加 keep-source 属性\r\n      2. 监听 edit-closed事件，这个事件是在编辑完成后触发\r\n      3. 在这个事件里面判断数据是否更改，如果更改了就调用接口进行保存操作\r\n    -->\r\n    <j-vxe-table\r\n      toolbar\r\n      :toolbarConfig=\"toolbarConfig\"\r\n\r\n      row-number\r\n      row-selection\r\n      keep-source\r\n      async-remove\r\n\r\n      :height=\"340\"\r\n      :loading=\"loading\"\r\n      :columns=\"columns\"\r\n      :dataSource=\"dataSource\"\r\n      :pagination=\"pagination\"\r\n\r\n      @save=\"handleTableSave\"\r\n      @remove=\"handleTableRemove\"\r\n      @edit-closed=\"handleEditClosed\"\r\n      @pageChange=\"handlePageChange\"\r\n      @selectRowChange=\"handleSelectRowChange\"\r\n    />\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\n  import { getAction, postAction, putAction } from '@api/manage'\r\n  import { JVXETypes } from '@/components/jeecg/JVxeTable'\r\n\r\n  // 即时保存示例\r\n  export default {\r\n    name: 'JSBCDemo',\r\n    data() {\r\n      return {\r\n        // 工具栏的按钮配置\r\n        toolbarConfig: {\r\n          // add 新增按钮；remove 删除按钮；clearSelection 清空选择按钮\r\n          btn: ['add', 'save', 'remove', 'clearSelection']\r\n        },\r\n        // 是否正在加载\r\n        loading: false,\r\n        // 分页器参数\r\n        pagination: {\r\n          // 当前页码\r\n          current: 1,\r\n          // 每页的条数\r\n          pageSize: 200,\r\n          // 可切换的条数\r\n          pageSizeOptions: ['10', '20', '30', '100', '200'],\r\n          // 数据总数（目前并不知道真实的总数，所以先填写0，在后台查出来后再赋值）\r\n          total: 0,\r\n        },\r\n        // 选择的行\r\n        selectedRows: [],\r\n        // 数据源，控制表格的数据\r\n        dataSource: [],\r\n        // 列配置，控制表格显示的列\r\n        columns: [\r\n          {key: 'num', title: '序号', width: '80px'},\r\n          {\r\n            // 字段key，跟后台数据的字段名匹配\r\n            key: 'ship_name',\r\n            // 列的标题\r\n            title: '船名',\r\n            // 列的宽度\r\n            width: '180px',\r\n            // 如果加上了该属性，就代表当前单元格是可编辑的，type就是表单的类型，input就是简单的输入框\r\n            type: JVXETypes.input\r\n          },\r\n          {key: 'call', title: '呼叫', width: '80px', type: JVXETypes.input},\r\n          {key: 'len', title: '长', width: '80px', type: JVXETypes.input},\r\n          {key: 'ton', title: '吨', width: '120px', defaultValue: 233, type: JVXETypes.input},\r\n          {key: 'payer', title: '付款方', width: '120px', defaultValue: '张三', type: JVXETypes.input},\r\n          {key: 'count', title: '数', width: '40px'},\r\n          {\r\n            key: 'company',\r\n            title: '公司',\r\n            // 最小宽度，与宽度不同的是，这个不是固定的宽度，如果表格有多余的空间，会平均分配给设置了 minWidth 的列\r\n            // 如果要做占满表格的列可以这么写\r\n            minWidth: '180px',\r\n            type: JVXETypes.input\r\n          },\r\n          {key: 'trend', title: '动向', width: '120px', type: JVXETypes.input},\r\n        ],\r\n        // 查询url地址\r\n        url: {\r\n          getData: '/mock/vxe/getData',\r\n          // 模拟保存单行数据（即时保存）\r\n          saveRow: '/mock/vxe/immediateSaveRow',\r\n          // 模拟保存整个表格的数据\r\n          saveAll: '/mock/vxe/immediateSaveAll',\r\n        },\r\n      }\r\n    },\r\n    created() {\r\n      this.loadData()\r\n    },\r\n    methods: {\r\n\r\n      // 加载数据\r\n      loadData() {\r\n        // 封装查询条件\r\n        let formData = {\r\n          pageNo: this.pagination.current,\r\n          pageSize: this.pagination.pageSize\r\n        }\r\n        // 调用查询数据接口\r\n        this.loading = true\r\n        getAction(this.url.getData, formData).then(res => {\r\n          if (res.success) {\r\n            // 后台查询回来的 total，数据总数量\r\n            this.pagination.total = res.result.total\r\n            // 将查询的数据赋值给 dataSource\r\n            this.dataSource = res.result.records\r\n            // 重置选择\r\n            this.selectedRows = []\r\n          } else {\r\n            this.$error({title: '主表查询失败', content: res.message})\r\n          }\r\n        }).finally(() => {\r\n          // 这里是无论成功或失败都会执行的方法，在这里关闭loading\r\n          this.loading = false\r\n        })\r\n      },\r\n\r\n      // 【整体保存】点击保存按钮时触发的事件\r\n      handleTableSave({$table, target}) {\r\n        // 校验整个表格\r\n        $table.validate().then((errMap) => {\r\n          // 校验通过\r\n          if (!errMap) {\r\n            // 获取所有数据\r\n            let tableData = target.getTableData()\r\n            console.log('当前保存的数据是：', tableData)\r\n            // 获取新增的数据\r\n            let newData = target.getNewData()\r\n            console.log('-- 新增的数据：', newData)\r\n            // 获取删除的数据\r\n            let deleteData = target.getDeleteData()\r\n            console.log('-- 删除的数据：', deleteData)\r\n\r\n            // 【模拟保存】\r\n            this.loading = true\r\n            postAction(this.url.saveAll, tableData).then(res => {\r\n              if (res.success) {\r\n                this.$message.success(`保存成功！`)\r\n              } else {\r\n                this.$message.warn(`保存失败：` + res.message)\r\n              }\r\n            }).finally(() => {\r\n              this.loading = false\r\n            })\r\n          }\r\n        })\r\n      },\r\n\r\n      // 触发单元格删除事件\r\n      handleTableRemove(event) {\r\n\r\n        // 把 event.deleteRows 传给后台进行删除（注意：这里不会传递前端逻辑新增的数据，因为不需要请求后台删除）\r\n        console.log('待删除的数据: ', event.deleteRows)\r\n        // 也可以只传ID，因为可以根据ID删除\r\n        let deleteIds = event.deleteRows.map(row => row.id)\r\n        console.log('待删除的数据ids: ', deleteIds)\r\n\r\n        // 模拟请求后台删除\r\n        this.loading = true\r\n        window.setTimeout(() => {\r\n          this.loading = false\r\n          this.$message.success('删除成功')\r\n          // 假设后台返回删除成功，必须要调用 confirmRemove() 方法，才会真正在表格里移除（会同时删除选中的逻辑新增的数据）\r\n          event.confirmRemove()\r\n        }, 1000)\r\n      },\r\n\r\n      // 单元格编辑完成之后触发的事件\r\n      handleEditClosed(event) {\r\n        let {$table, row, column} = event\r\n\r\n        let field = column.property\r\n        let cellValue = row[field]\r\n        // 判断单元格值是否被修改\r\n        if ($table.isUpdateByRow(row, field)) {\r\n          // 校验当前行\r\n          $table.validate(row).then((errMap) => {\r\n            // 校验通过\r\n            if (!errMap) {\r\n              // 【模拟保存】\r\n              let hideLoading = this.$message.loading(`正在保存\"${column.title}\"`, 0)\r\n              console.log('即时保存数据：', row)\r\n              putAction(this.url.saveRow, row).then(res => {\r\n                if (res.success) {\r\n                  this.$message.success(`\"${column.title}\"保存成功！`)\r\n                  // 局部更新单元格为已保存状态\r\n                  $table.reloadRow(row, null, field)\r\n                } else {\r\n                  this.$message.warn(`\"${column.title}\"保存失败：` + res.message)\r\n                }\r\n              }).finally(() => {\r\n                hideLoading()\r\n              })\r\n            }\r\n          })\r\n        }\r\n      },\r\n\r\n      // 当分页参数变化时触发的事件\r\n      handlePageChange(event) {\r\n        // 重新赋值\r\n        this.pagination.current = event.current\r\n        this.pagination.pageSize = event.pageSize\r\n        // 查询数据\r\n        this.loadData()\r\n      },\r\n\r\n      // 当选择的行变化时触发的事件\r\n      handleSelectRowChange(event) {\r\n        this.selectedRows = event.selectedRows\r\n      },\r\n\r\n    },\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}