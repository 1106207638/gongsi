{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\online\\modules\\catalog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\online\\modules\\catalog.vue","mtime":1615948820501},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7Z2V0QWN0aW9uLCBodHRwQWN0aW9ufSBmcm9tICdAL2FwaS9tYW5hZ2UnDQppbXBvcnQgcGljayBmcm9tICdsb2Rhc2gucGljaycNCmltcG9ydCB7dmFsaWRhdGVEdXBsaWNhdGVWYWx1ZX0gZnJvbSAnQC91dGlscy91dGlsJw0KaW1wb3J0IEpEaWN0U2VsZWN0VGFnIGZyb20gIkAvY29tcG9uZW50cy9kaWN0L0pEaWN0U2VsZWN0VGFnIg0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImNhdGFsb2ciLA0KICBjb21wb25lbnRzOiB7DQogICAgSkRpY3RTZWxlY3RUYWcsDQogIH0sDQogIHByb3A6IHsNCiAgICB0YXNrSWQ6IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgIH0sDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRyZWVEYXRhOltdLA0KICAgICAgcGY6bnVsbCwNCiAgICAgIHZhbHVlOidub3JtYWwnLA0KICAgICAgcmVjb3JkOm51bGwsDQogICAgICB0aXRsZTogIuaTjeS9nCIsDQogICAgICB3aWR0aDogNTAwLA0KICAgICAgdmlzaWJsZTogZmFsc2UsDQogICAgICBtb2RlbDoge30sDQogICAgICBsYWJlbENvbDogew0KICAgICAgICB4czoge3NwYW46IDI0fSwNCiAgICAgICAgc206IHtzcGFuOiA1fSwNCiAgICAgIH0sDQogICAgICB3cmFwcGVyQ29sOiB7DQogICAgICAgIHhzOiB7c3BhbjogMjR9LA0KICAgICAgICBzbToge3NwYW46IDE2fSwNCiAgICAgIH0sDQogICAgICBmb3JtOiB0aGlzLiRmb3JtLmNyZWF0ZUZvcm0odGhpcyksDQogICAgICBjb25maXJtTG9hZGluZzogZmFsc2UsDQogICAgICB2YWxpZGF0b3JSdWxlczoge30sDQogICAgICB1cmw6IHsNCiAgICAgICAgLy8g6I635Y+W55uY56ymDQogICAgICAgIGdldHBmOiAib25saW5lL2NnZm9ybS9oZWFkL3Jvb3RGaWxlIiwNCiAgICAgICAgZ2V0dXA6J29ubGluZS9jZ2Zvcm0vaGVhZC9maWxlVHJlZScNCiAgICAgIH0sDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgb25Mb2FkRGF0YSh0cmVlTm9kZSkgew0KICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gew0KICAgICAgICBpZiAodHJlZU5vZGUuZGF0YVJlZi5jaGlsZHJlbikgew0KICAgICAgICAgIHJlc29sdmUoKTsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgdmFyIG9iaiA9IHsNCiAgICAgICAgICBwYXJlbnRQYXRoOnRyZWVOb2RlLmRhdGFSZWYua2V5DQogICAgICAgIH0NCiAgICAgICAgZ2V0QWN0aW9uKHRoaXMudXJsLmdldHVwLCBvYmopLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgICAgdHJlZU5vZGUuZGF0YVJlZi5jaGlsZHJlbiA9IHJlcy5yZXN1bHQNCiAgICAgICAgICAgIHRoaXMudHJlZURhdGEgPSBbLi4udGhpcy50cmVlRGF0YV07DQogICAgICAgICAgICByZXNvbHZlKCk7DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZyhyZXMubWVzc2FnZSk7DQogICAgICAgICAgfQ0KICAgICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgfSkNCiAgICAgIH0pOw0KICAgIH0sDQogICAgb25TZWxlY3Qoa2V5cywgZXZlbnQpIHsNCiAgICAgIGNvbnNvbGUubG9nKCdUcmlnZ2VyIFNlbGVjdCcsIGtleXMsIGV2ZW50KTsNCiAgICAgIHRoaXMucGYgPSBrZXlzDQogICAgfSwNCiAgICBvbkV4cGFuZCgpIHsNCiAgICB9LA0KICAgIGVkaXQocmVjb3JkKSB7DQogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOw0KICAgICAgdmFyIHVybCA9IHRoaXMudXJsLmdldHBmDQogICAgICBnZXRBY3Rpb24odXJsLCB7fSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKHJlcykNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy50cmVlRGF0YSA9IHJlcy5yZXN1bHQNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcocmVzLm1lc3NhZ2UpOw0KICAgICAgICB9DQogICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgIH0pDQogICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7DQogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsNCiAgICB9LA0KICAgIGhhbmRsZU9rKCkgew0KICAgICAgY29uc3QgdGhhdCA9IHRoaXM7DQogICAgICBpZih0aGF0LnBmKSB7DQogICAgICAgIHRoYXQuJGVtaXQoJ29rJyx0aGF0LnBmKTsNCiAgICAgICAgdGhhdC52aXNpYmxlID0gZmFsc2U7DQogICAgICB9ZWxzZSB7DQogICAgICAgIHRoYXQuJG1lc3NhZ2Uud2FybmluZygn6K+36YCJ5oup55uu5b2V77yBJyk7DQogICAgICB9DQogICAgICAvLyDop6blj5HooajljZXpqozor4ENCg0KDQogICAgfSwNCiAgICBoYW5kbGVDYW5jZWwoKSB7DQogICAgICB0aGlzLmNsb3NlKCkNCiAgICB9LA0KICAgIHBvcHVwQ2FsbGJhY2socm93KSB7DQogICAgICB0aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUocGljayhyb3csICduYW1lJykpDQogICAgfSwNCg0KICB9DQp9DQo="},{"version":3,"sources":["catalog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAsBA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"catalog.vue","sourceRoot":"src/views/online/modules","sourcesContent":["<template>\r\n  <j-modal\r\n      :title=\"title\"\r\n      :width=\"width\"\r\n      :visible=\"visible\"\r\n      :fullscreen=\"false\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      switchFullscreen\r\n      @ok=\"handleOk\"\r\n      @cancel=\"handleCancel\"\r\n      cancelText=\"关闭\">\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-directory-tree multiple default-expand-all :tree-data=\"treeData\"\r\n                        :load-data=\"onLoadData\" @select=\"onSelect\" @expand=\"onExpand\">\r\n\r\n      </a-directory-tree>\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {getAction, httpAction} from '@/api/manage'\r\nimport pick from 'lodash.pick'\r\nimport {validateDuplicateValue} from '@/utils/util'\r\nimport JDictSelectTag from \"@/components/dict/JDictSelectTag\"\r\n\r\n\r\nexport default {\r\n  name: \"catalog\",\r\n  components: {\r\n    JDictSelectTag,\r\n  },\r\n  prop: {\r\n    taskId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      treeData:[],\r\n      pf:null,\r\n      value:'normal',\r\n      record:null,\r\n      title: \"操作\",\r\n      width: 500,\r\n      visible: false,\r\n      model: {},\r\n      labelCol: {\r\n        xs: {span: 24},\r\n        sm: {span: 5},\r\n      },\r\n      wrapperCol: {\r\n        xs: {span: 24},\r\n        sm: {span: 16},\r\n      },\r\n      form: this.$form.createForm(this),\r\n      confirmLoading: false,\r\n      validatorRules: {},\r\n      url: {\r\n        // 获取盘符\r\n        getpf: \"online/cgform/head/rootFile\",\r\n        getup:'online/cgform/head/fileTree'\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    onLoadData(treeNode) {\r\n      return new Promise(resolve => {\r\n        if (treeNode.dataRef.children) {\r\n          resolve();\r\n          return;\r\n        }\r\n        var obj = {\r\n          parentPath:treeNode.dataRef.key\r\n        }\r\n        getAction(this.url.getup, obj).then((res) => {\r\n          if (res.success) {\r\n            treeNode.dataRef.children = res.result\r\n            this.treeData = [...this.treeData];\r\n            resolve();\r\n          } else {\r\n            this.$message.warning(res.message);\r\n          }\r\n        }).finally(() => {\r\n        })\r\n      });\r\n    },\r\n    onSelect(keys, event) {\r\n      console.log('Trigger Select', keys, event);\r\n      this.pf = keys\r\n    },\r\n    onExpand() {\r\n    },\r\n    edit(record) {\r\n      this.visible = true;\r\n      var url = this.url.getpf\r\n      getAction(url, {}).then((res) => {\r\n        console.log(res)\r\n        if (res.success) {\r\n          this.treeData = res.result\r\n        } else {\r\n          this.$message.warning(res.message);\r\n        }\r\n      }).finally(() => {\r\n      })\r\n    },\r\n    close() {\r\n      this.$emit('close');\r\n      this.visible = false;\r\n    },\r\n    handleOk() {\r\n      const that = this;\r\n      if(that.pf) {\r\n        that.$emit('ok',that.pf);\r\n        that.visible = false;\r\n      }else {\r\n        that.$message.warning('请选择目录！');\r\n      }\r\n      // 触发表单验证\r\n\r\n\r\n    },\r\n    handleCancel() {\r\n      this.close()\r\n    },\r\n    popupCallback(row) {\r\n      this.form.setFieldsValue(pick(row, 'name'))\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.form-item {\r\n  margin-left: 15px\r\n}\r\n/deep/ .form-item {\r\n  margin-left: 0;\r\n}\r\n\r\n</style>"]}]}