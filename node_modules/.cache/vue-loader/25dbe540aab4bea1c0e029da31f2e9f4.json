{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\zbtest\\module\\seatModuleListModule.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\zbtest\\module\\seatModuleListModule.vue","mtime":1616040238757},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBodHRwQWN0aW9uIH0gZnJvbSAiQC9hcGkvbWFuYWdlIjsNCmltcG9ydCB7IGRhdGFHZXQgfSBmcm9tICJAL2FwaS9hcGkiOw0KaW1wb3J0IHBpY2sgZnJvbSAibG9kYXNoLnBpY2siOw0KaW1wb3J0IHsgdmFsaWRhdGVEdXBsaWNhdGVWYWx1ZSB9IGZyb20gIkAvdXRpbHMvdXRpbCI7DQppbXBvcnQgSlRyZWVTZWxlY3QgZnJvbSAiQC9jb21wb25lbnRzL2plZWNnL0pUcmVlU2VsZWN0IjsNCmltcG9ydCBKU2hhcmVGaWxlIGZyb20gIkAvY29tcG9uZW50cy9qZWVjZ2Jpei9KZWVjZ3NoYXJlRmlsZTEiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJTb3V0aERhdGFDbGFzc2lmeU1vZGFsIiwNCiAgY29tcG9uZW50czogew0KICAgIEpUcmVlU2VsZWN0LA0KICAgIEpTaGFyZUZpbGUsDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwNCiAgICAgIHRpdGxlOiAi5pON5L2cIiwNCiAgICAgIHdpZHRoOiA4MDAsDQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIG1vZGVsOiB7fSwNCiAgICAgIGxhYmVsQ29sOiB7DQogICAgICAgIHhzOiB7IHNwYW46IDI0IH0sDQogICAgICAgIHNtOiB7IHNwYW46IDUgfSwNCiAgICAgIH0sDQogICAgICB3cmFwcGVyQ29sOiB7DQogICAgICAgIHhzOiB7IHNwYW46IDI0IH0sDQogICAgICAgIHNtOiB7IHNwYW46IDE2IH0sDQogICAgICB9LA0KICAgICAgaWQ6ICIiLA0KICAgICAgY29uZmlybUxvYWRpbmc6IGZhbHNlLA0KICAgICAgdmFsaWRhdG9yUnVsZXM6IHt9LA0KICAgICAgdXJsOiB7DQogICAgICAgIGFkZDogInNvdXRoRGF0YUNsYXNzaWZ5L2FkZCIsDQogICAgICAgIGVkaXQ6ICJzb3V0aERhdGFDbGFzc2lmeS9lZGl0IiwNCiAgICAgICAgdGVtcGxhdGVVcmw6ICIvcmVwb3J0Rm9ybU1vZGVsL3F1ZXJ5QWxsTW9kZWwxIiwNCiAgICAgICAgdG9nZ2xlTW9kdWxlVXJsOiAiL3JlcG9ydEZvcm1Nb2RlbC9wdXRTZWF0TW9kZWwiLA0KICAgICAgfSwNCiAgICAgIGV4cGFuZGVkUm93S2V5czogW10sDQogICAgICBwaWRGaWVsZDogInBkYXRhSWQiLA0KICAgICAgZGF0YUxpc3Q6IFtdLA0KICAgICAgLy8g5qCH562+6YCJ5oup55qE5pWw57uEDQogICAgICBzZWxlY3RGbGFnSWQ6IFtdLA0KICAgICAgYWRkRk9STTogZmFsc2UsDQogICAgICBpc2FkZGNoaWxkOiBmYWxzZSwNCiAgICB9Ow0KICB9LA0KICBjcmVhdGVkKCkge30sDQogIG1ldGhvZHM6IHsNCiAgICBzaGFyZUNoYW5nZShkYXRhKSB7DQogICAgICB0aGlzLnNlbGVjdEZsYWdJZCA9IGRhdGE7DQogICAgfSwNCiAgICAvLyDojrflj5bmoIfnrb4NCiAgICBnZXREYXRhKCkgew0KICAgICAgZGF0YUdldCh7DQogICAgICAgIHBhZ2VObzogMSwNCiAgICAgICAgcGFnZVNpemU6IDEwMCwNCiAgICAgIH0pLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmRhdGFMaXN0ID0gcmVzLnJlc3VsdC5yZWNvcmRzOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZSgpIHt9LA0KICAgIGFkZCgpIHsNCiAgICAgIHRoaXMuZWRpdDEoe30pOw0KICAgICAgdGhpcy5pc2FkZGNoaWxkID0gZmFsc2U7DQogICAgfSwNCiAgICBhZGQxKHJlY29yZCkgew0KICAgICAgdGhpcy5lZGl0MShyZWNvcmQpOw0KICAgICAgdGhpcy5pc2FkZGNoaWxkID0gdHJ1ZTsNCiAgICB9LA0KICAgIGVkaXQocmVjb3JkKSB7DQogICAgICBjb25zb2xlLmxvZyhyZWNvcmQpOw0KICAgICAgdmFyIGFyciA9IFtdOw0KICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWNvcmQuZGF0YS5sZW5ndGg7IGkrKykgew0KICAgICAgICBhcnIucHVzaChyZWNvcmQuZGF0YVtpXS5oZWFkTmFtZSk7DQogICAgICB9DQogICAgICB2YXIgZGF0YVR5cGVOYW1lID0gYXJyLmpvaW4oIiwiKTsNCiAgICAgIHJlY29yZC5kYXRhVHlwZU5hbWUgPSBkYXRhVHlwZU5hbWU7DQogICAgICBpZiAocmVjb3JkLmlkKSB7DQogICAgICAgIHRoaXMuYWRkRk9STSA9IHRydWU7DQogICAgICAgIHRoaXMuaWQgPSByZWNvcmQuaWQ7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmFkZEZPUk0gPSBmYWxzZTsNCiAgICAgICAgdGhpcy5pZCA9ICIiOw0KICAgICAgfQ0KICAgICAgdGhpcy5mb3JtLnJlc2V0RmllbGRzKCk7DQogICAgICB0aGlzLm1vZGVsID0gT2JqZWN0LmFzc2lnbih7fSwgcmVjb3JkKTsNCiAgICAgIHRoaXMudmlzaWJsZSA9IHRydWU7DQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSgNCiAgICAgICAgICBwaWNrKHRoaXMubW9kZWwsICJwZGF0YUlkIiwgImRhdGFUeXBlTmFtZSIsICJkZXNjcmlwdGlvbiIsICJtZW1vIikNCiAgICAgICAgKTsNCiAgICAgIH0pOw0KICAgIH0sDQogICAgY2xvc2UoKSB7DQogICAgICB0aGlzLiRlbWl0KCJjbG9zZSIpOw0KICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7DQogICAgfSwNCiAgICBoYW5kbGVPaygpIHsNCiAgICAgIGNvbnN0IHRoYXQgPSB0aGlzOw0KICAgICAgLy8g6Kem5Y+R6KGo5Y2V6aqM6K+BDQogICAgICB0aGF0LmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsNCiAgICAgIGxldCBodHRwdXJsID0gdGhpcy51cmwudG9nZ2xlTW9kdWxlVXJsOw0KICAgICAgbGV0IG1ldGhvZCA9ICJwdXQiOw0KICAgICAgbGV0IGZvcm1EYXRhID0gew0KICAgICAgICBpZHM6IHRoaXMuc2VsZWN0RmxhZ0lkLA0KICAgICAgICBpZDogdGhpcy5pZCwNCiAgICAgIH07DQogICAgICBodHRwQWN0aW9uKGh0dHB1cmwsIGZvcm1EYXRhLCBtZXRob2QpDQogICAgICAgIC50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHsNCiAgICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSk7DQogICAgICAgICAgICB0aGlzLiRlbWl0KCJvayIpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGF0LiRtZXNzYWdlLndhcm5pbmcocmVzLm1lc3NhZ2UpOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgLmZpbmFsbHkoKCkgPT4gew0KICAgICAgICAgIHRoYXQuY29uZmlybUxvYWRpbmcgPSBmYWxzZTsNCiAgICAgICAgICB0aGF0LmNsb3NlKCk7DQogICAgICAgIH0pOw0KICAgIH0sDQogICAgaGFuZGxlQ2FuY2VsKCkgew0KICAgICAgdGhpcy5jbG9zZSgpOw0KICAgIH0sDQogICAgcG9wdXBDYWxsYmFjayhyb3cpIHsNCiAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZSgNCiAgICAgICAgcGljayhyb3csICJwZGF0YUlkIiwgImRhdGFUeXBlTmFtZSIsICJkZXNjcmlwdGlvbiIsICJtZW1vIikNCiAgICAgICk7DQogICAgfSwNCiAgICBzdWJtaXRTdWNjZXNzKGZvcm1EYXRhLCBmbGFnKSB7DQogICAgICBpZiAoIWZvcm1EYXRhLmlkKSB7DQogICAgICAgIGxldCB0cmVlRGF0YSA9IHRoaXMuJHJlZnMudHJlZVNlbGVjdC5nZXRDdXJyVHJlZURhdGEoKTsNCiAgICAgICAgdGhpcy5leHBhbmRlZFJvd0tleXMgPSBbXTsNCiAgICAgICAgdGhpcy5nZXRFeHBhbmRLZXlzQnlQaWQoZm9ybURhdGFbdGhpcy5waWRGaWVsZF0sIHRyZWVEYXRhLCB0cmVlRGF0YSk7DQogICAgICAgIHRoaXMuJGVtaXQoIm9rIiwgZm9ybURhdGEsIHRoaXMuZXhwYW5kZWRSb3dLZXlzLnJldmVyc2UoKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRlbWl0KCJvayIsIGZvcm1EYXRhLCBmbGFnKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGdldEV4cGFuZEtleXNCeVBpZChwaWQsIGFyciwgYWxsKSB7DQogICAgICBpZiAocGlkICYmIGFyciAmJiBhcnIubGVuZ3RoID4gMCkgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIGlmIChhcnJbaV0ua2V5ID09IHBpZCkgew0KICAgICAgICAgICAgdGhpcy5leHBhbmRlZFJvd0tleXMucHVzaChhcnJbaV0ua2V5KTsNCiAgICAgICAgICAgIHRoaXMuZ2V0RXhwYW5kS2V5c0J5UGlkKGFycltpXVsicGFyZW50SWQiXSwgYWxsLCBhbGwpOw0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmdldEV4cGFuZEtleXNCeVBpZChwaWQsIGFycltpXS5jaGlsZHJlbiwgYWxsKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["seatModuleListModule.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"seatModuleListModule.vue","sourceRoot":"src/views/zbtest/module","sourcesContent":["<template>\r\n  <j-modal\r\n    :title=\"title\"\r\n    :width=\"width\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    switchFullscreen\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    :destroyOnClose=\"true\"\r\n    cancelText=\"关闭\"\r\n  >\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form :form=\"form\">\r\n        <a-form-item\r\n          label=\"选择模板\"\r\n          style=\"width: 100%\"\r\n          :labelCol=\"labelCol\"\r\n          v-if=\"addFORM\"\r\n          :wrapperCol=\"wrapperCol\"\r\n        >\r\n          <j-share-file\r\n            ref=\"relation2\"\r\n            :listUrl=\"url.templateUrl\"\r\n            v-decorator=\"['dataTypeName']\"\r\n            placeholder=\"标签\"\r\n            @change=\"shareChange\"\r\n            :multiple=\"true\"\r\n          ></j-share-file>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\nimport { httpAction } from \"@/api/manage\";\r\nimport { dataGet } from \"@/api/api\";\r\nimport pick from \"lodash.pick\";\r\nimport { validateDuplicateValue } from \"@/utils/util\";\r\nimport JTreeSelect from \"@/components/jeecg/JTreeSelect\";\r\nimport JShareFile from \"@/components/jeecgbiz/JeecgshareFile1\";\r\n\r\nexport default {\r\n  name: \"SouthDataClassifyModal\",\r\n  components: {\r\n    JTreeSelect,\r\n    JShareFile,\r\n  },\r\n  data() {\r\n    return {\r\n      form: this.$form.createForm(this),\r\n      title: \"操作\",\r\n      width: 800,\r\n      visible: false,\r\n      model: {},\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 5 },\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 16 },\r\n      },\r\n      id: \"\",\r\n      confirmLoading: false,\r\n      validatorRules: {},\r\n      url: {\r\n        add: \"southDataClassify/add\",\r\n        edit: \"southDataClassify/edit\",\r\n        templateUrl: \"/reportFormModel/queryAllModel1\",\r\n        toggleModuleUrl: \"/reportFormModel/putSeatModel\",\r\n      },\r\n      expandedRowKeys: [],\r\n      pidField: \"pdataId\",\r\n      dataList: [],\r\n      // 标签选择的数组\r\n      selectFlagId: [],\r\n      addFORM: false,\r\n      isaddchild: false,\r\n    };\r\n  },\r\n  created() {},\r\n  methods: {\r\n    shareChange(data) {\r\n      this.selectFlagId = data;\r\n    },\r\n    // 获取标签\r\n    getData() {\r\n      dataGet({\r\n        pageNo: 1,\r\n        pageSize: 100,\r\n      }).then((res) => {\r\n        if (res.success) {\r\n          this.dataList = res.result.records;\r\n        }\r\n      });\r\n    },\r\n    handleChange() {},\r\n    add() {\r\n      this.edit1({});\r\n      this.isaddchild = false;\r\n    },\r\n    add1(record) {\r\n      this.edit1(record);\r\n      this.isaddchild = true;\r\n    },\r\n    edit(record) {\r\n      console.log(record);\r\n      var arr = [];\r\n      for (var i = 0; i < record.data.length; i++) {\r\n        arr.push(record.data[i].headName);\r\n      }\r\n      var dataTypeName = arr.join(\",\");\r\n      record.dataTypeName = dataTypeName;\r\n      if (record.id) {\r\n        this.addFORM = true;\r\n        this.id = record.id;\r\n      } else {\r\n        this.addFORM = false;\r\n        this.id = \"\";\r\n      }\r\n      this.form.resetFields();\r\n      this.model = Object.assign({}, record);\r\n      this.visible = true;\r\n      this.$nextTick(() => {\r\n        this.form.setFieldsValue(\r\n          pick(this.model, \"pdataId\", \"dataTypeName\", \"description\", \"memo\")\r\n        );\r\n      });\r\n    },\r\n    close() {\r\n      this.$emit(\"close\");\r\n      this.visible = false;\r\n    },\r\n    handleOk() {\r\n      const that = this;\r\n      // 触发表单验证\r\n      that.confirmLoading = true;\r\n      let httpurl = this.url.toggleModuleUrl;\r\n      let method = \"put\";\r\n      let formData = {\r\n        ids: this.selectFlagId,\r\n        id: this.id,\r\n      };\r\n      httpAction(httpurl, formData, method)\r\n        .then((res) => {\r\n          if (res.success) {\r\n            that.$message.success(res.message);\r\n            this.$emit(\"ok\");\r\n          } else {\r\n            that.$message.warning(res.message);\r\n          }\r\n        })\r\n        .finally(() => {\r\n          that.confirmLoading = false;\r\n          that.close();\r\n        });\r\n    },\r\n    handleCancel() {\r\n      this.close();\r\n    },\r\n    popupCallback(row) {\r\n      this.form.setFieldsValue(\r\n        pick(row, \"pdataId\", \"dataTypeName\", \"description\", \"memo\")\r\n      );\r\n    },\r\n    submitSuccess(formData, flag) {\r\n      if (!formData.id) {\r\n        let treeData = this.$refs.treeSelect.getCurrTreeData();\r\n        this.expandedRowKeys = [];\r\n        this.getExpandKeysByPid(formData[this.pidField], treeData, treeData);\r\n        this.$emit(\"ok\", formData, this.expandedRowKeys.reverse());\r\n      } else {\r\n        this.$emit(\"ok\", formData, flag);\r\n      }\r\n    },\r\n    getExpandKeysByPid(pid, arr, all) {\r\n      if (pid && arr && arr.length > 0) {\r\n        for (let i = 0; i < arr.length; i++) {\r\n          if (arr[i].key == pid) {\r\n            this.expandedRowKeys.push(arr[i].key);\r\n            this.getExpandKeysByPid(arr[i][\"parentId\"], all, all);\r\n          } else {\r\n            this.getExpandKeysByPid(pid, arr[i].children, all);\r\n          }\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>"]}]}