{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\dynamic\\JMdEditorDyn.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\dynamic\\JMdEditorDyn.vue","mtime":1615948814835},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KCmltcG9ydCBsb2FkIGZyb20gJy4vbG9hZCcKaW1wb3J0IHsgbWRfanMsIG1kX3poX2NuX2pzIH0gZnJvbSAnLi9SZXNvdXJjZScKaW1wb3J0IGRlZmF1bHRPcHRpb25zIGZyb20gJ0AvY29tcG9uZW50cy9qZWVjZy9KTWFya2Rvd25FZGl0b3IvZGVmYXVsdC1vcHRpb25zLmpzJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdKTWRFZGl0b3JEeW4nLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgaWQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuICdtYXJrZG93bi1lZGl0b3ItJyArICtuZXcgRGF0ZSgpICsgKChNYXRoLnJhbmRvbSgpICogMTAwMCkudG9GaXhlZCgwKSArICcnKQogICAgICB9CiAgICB9LAogICAgb3B0aW9uczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIGRlZmF1bHRPcHRpb25zCiAgICAgIH0KICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ21hcmtkb3duJwogICAgfSwKICAgIGhlaWdodDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgZGVmYXVsdDogJzMwMHB4JwogICAgfSwKICAgIGxhbmd1YWdlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IGZhbHNlLAogICAgICBkZWZhdWx0OiAnemgtQ04nCiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdG9yOiBudWxsLAogICAgICBkeW5hbWljSWQ6IHRoaXMuaWQKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBlZGl0b3JPcHRpb25zKCkgewogICAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgZGVmYXVsdE9wdGlvbnMsIHRoaXMub3B0aW9ucykKICAgICAgb3B0aW9ucy5pbml0aWFsRWRpdFR5cGUgPSB0aGlzLm1vZGUKICAgICAgb3B0aW9ucy5oZWlnaHQgPSB0aGlzLmhlaWdodAogICAgICBvcHRpb25zLmxhbmd1YWdlID0gdGhpcy5sYW5ndWFnZQogICAgICByZXR1cm4gb3B0aW9ucwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlKG5ld1ZhbHVlLCBwcmVWYWx1ZSkgewogICAgICBpZiAobmV3VmFsdWUgIT09IHByZVZhbHVlICYmIG5ld1ZhbHVlICE9PSB0aGlzLmVkaXRvci5nZXRNYXJrZG93bigpKSB7CiAgICAgICAgdGhpcy5lZGl0b3Iuc2V0TWFya2Rvd24obmV3VmFsdWUpCiAgICAgIH0KICAgIH0sCiAgICBsYW5ndWFnZSh2YWwpIHsKICAgICAgdGhpcy5kZXN0cm95RWRpdG9yKCkKICAgICAgdGhpcy5pbml0RWRpdG9yKCkKICAgIH0sCiAgICBoZWlnaHQobmV3VmFsdWUpIHsKICAgICAgdGhpcy5lZGl0b3IuaGVpZ2h0KG5ld1ZhbHVlKQogICAgfSwKICAgIG1vZGUobmV3VmFsdWUpIHsKICAgICAgdGhpcy5lZGl0b3IuY2hhbmdlTW9kZShuZXdWYWx1ZSkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXQoKQogIH0sCiAgZGVzdHJveWVkKCkgewogICAgdGhpcy5kZXN0cm95RWRpdG9yKCkKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXQoKXsKCiAgICAgIHRoaXMuaW5pdEVkaXRvcigpCiAgICAgLyogbG9hZChtZF9qcywnJywoKT0+ewogICAgICAgIGxvYWQobWRfemhfY25fanMsJycsKCk9PnsKCiAgICAgICAgfSkKICAgICAgfSkqLwogICAgfSwKICAgIGluaXRFZGl0b3IoKSB7CiAgICAgIGNvbnN0IEVkaXRvciA9IHRvYXN0dWkuRWRpdG9yCiAgICAgIHRoaXMuZWRpdG9yID0gbmV3IEVkaXRvcih7CiAgICAgICAgZWw6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZHluYW1pY0lkKSwKICAgICAgICAuLi50aGlzLmVkaXRvck9wdGlvbnMKICAgICAgfSkKICAgICAgaWYgKHRoaXMudmFsdWUpIHsKICAgICAgICB0aGlzLmVkaXRvci5zZXRNYXJrZG93bih0aGlzLnZhbHVlKQogICAgICB9CiAgICAgIHRoaXMuZWRpdG9yLm9uKCdjaGFuZ2UnLCAoKSA9PiB7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgdGhpcy5lZGl0b3IuZ2V0TWFya2Rvd24oKSkKICAgICAgfSkKICAgIH0sCiAgICBkZXN0cm95RWRpdG9yKCkgewogICAgICBpZiAoIXRoaXMuZWRpdG9yKSByZXR1cm4KICAgICAgdGhpcy5lZGl0b3Iub2ZmKCdjaGFuZ2UnKQogICAgICB0aGlzLmVkaXRvci5yZW1vdmUoKQogICAgfSwKICAgIHNldE1hcmtkb3duKHZhbHVlKSB7CiAgICAgIHRoaXMuZWRpdG9yLnNldE1hcmtkb3duKHZhbHVlKQogICAgfSwKICAgIGdldE1hcmtkb3duKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0TWFya2Rvd24oKQogICAgfSwKICAgIHNldEh0bWwodmFsdWUpIHsKICAgICAgdGhpcy5lZGl0b3Iuc2V0SHRtbCh2YWx1ZSkKICAgIH0sCiAgICBnZXRIdG1sKCkgewogICAgICByZXR1cm4gdGhpcy5lZGl0b3IuZ2V0SHRtbCgpCiAgICB9CiAgfSwKICBtb2RlbDogewogICAgcHJvcDogJ3ZhbHVlJywKICAgIGV2ZW50OiAnY2hhbmdlJwogIH0KfQo="},{"version":3,"sources":["JMdEditorDyn.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JMdEditorDyn.vue","sourceRoot":"src/components/jeecg/dynamic","sourcesContent":["<template>\r\n  <div class=\"j-markdown-editor\" :id=\"dynamicId\"/>\r\n</template>\r\n\r\n<script>\r\n  import load from './load'\r\n  import { md_js, md_zh_cn_js } from './Resource'\r\n  import defaultOptions from '@/components/jeecg/JMarkdownEditor/default-options.js'\r\n\r\n  export default {\r\n    name: 'JMdEditorDyn',\r\n    props: {\r\n      value: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      id: {\r\n        type: String,\r\n        required: false,\r\n        default() {\r\n          return 'markdown-editor-' + +new Date() + ((Math.random() * 1000).toFixed(0) + '')\r\n        }\r\n      },\r\n      options: {\r\n        type: Object,\r\n        default() {\r\n          return defaultOptions\r\n        }\r\n      },\r\n      mode: {\r\n        type: String,\r\n        default: 'markdown'\r\n      },\r\n      height: {\r\n        type: String,\r\n        required: false,\r\n        default: '300px'\r\n      },\r\n      language: {\r\n        type: String,\r\n        required: false,\r\n        default: 'zh-CN'\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        editor: null,\r\n        dynamicId: this.id\r\n      }\r\n    },\r\n    computed: {\r\n      editorOptions() {\r\n        const options = Object.assign({}, defaultOptions, this.options)\r\n        options.initialEditType = this.mode\r\n        options.height = this.height\r\n        options.language = this.language\r\n        return options\r\n      }\r\n    },\r\n    watch: {\r\n      value(newValue, preValue) {\r\n        if (newValue !== preValue && newValue !== this.editor.getMarkdown()) {\r\n          this.editor.setMarkdown(newValue)\r\n        }\r\n      },\r\n      language(val) {\r\n        this.destroyEditor()\r\n        this.initEditor()\r\n      },\r\n      height(newValue) {\r\n        this.editor.height(newValue)\r\n      },\r\n      mode(newValue) {\r\n        this.editor.changeMode(newValue)\r\n      }\r\n    },\r\n    mounted() {\r\n      this.init()\r\n    },\r\n    destroyed() {\r\n      this.destroyEditor()\r\n    },\r\n    methods: {\r\n      init(){\r\n\r\n        this.initEditor()\r\n       /* load(md_js,'',()=>{\r\n          load(md_zh_cn_js,'',()=>{\r\n\r\n          })\r\n        })*/\r\n      },\r\n      initEditor() {\r\n        const Editor = toastui.Editor\r\n        this.editor = new Editor({\r\n          el: document.getElementById(this.dynamicId),\r\n          ...this.editorOptions\r\n        })\r\n        if (this.value) {\r\n          this.editor.setMarkdown(this.value)\r\n        }\r\n        this.editor.on('change', () => {\r\n          this.$emit('change', this.editor.getMarkdown())\r\n        })\r\n      },\r\n      destroyEditor() {\r\n        if (!this.editor) return\r\n        this.editor.off('change')\r\n        this.editor.remove()\r\n      },\r\n      setMarkdown(value) {\r\n        this.editor.setMarkdown(value)\r\n      },\r\n      getMarkdown() {\r\n        return this.editor.getMarkdown()\r\n      },\r\n      setHtml(value) {\r\n        this.editor.setHtml(value)\r\n      },\r\n      getHtml() {\r\n        return this.editor.getHtml()\r\n      }\r\n    },\r\n    model: {\r\n      prop: 'value',\r\n      event: 'change'\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang=\"less\">\r\n\r\n  .j-markdown-editor {\r\n    /deep/ .tui-editor-defaultUI {\r\n      .te-mode-switch,\r\n      .tui-scrollsync\r\n      {\r\n        line-height: 1.5;\r\n      }\r\n    }\r\n  }\r\n\r\n</style>"]}]}