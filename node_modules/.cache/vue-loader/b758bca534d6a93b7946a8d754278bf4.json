{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\components\\jeecg\\JCodeEditor2.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\components\\jeecg\\JCodeEditor2.vue","mtime":1615948815723},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSkNvZGVFZGl0b3InLAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcnCiAgICB9LAogICAgcGxhY2Vob2xkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgLy8g5piv5ZCm5pi+56S65YWo5bGP5oyJ6ZKuCiAgICBmdWxsU2NyZWVuOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5YWo5bGP5Lul5ZCO55qEei1pbmRleAogICAgekluZGV4OiB7CiAgICAgIHR5cGU6IFtOdW1iZXIsIFN0cmluZ10sCiAgICAgIGRlZmF1bHQ6IDk5OQogICAgfSwKICAgIC8vIOaYr+WQpuiHqumAguW6lOmrmOW6pu+8jOWPr+S7peS8oFN0cmluZ+aIlkJvb2xlYW4KICAgIC8vIOS8oCBTdHJpbmcg57G75Z6L5Y+q6IO95YaZIiFpZSIg77yMCiAgICAvLyDloavlhpnov5nkuKrlrZfnrKbkuLLvvIzku6Pooajlhbbku5bmtY/op4jlmajoh6rpgILlupTpq5jluqYKICAgIC8vIOWUr+eLrElF5LiL5LiN6Ieq6YCC5bqU6auY5bqm77yM5Zug5Li6SUXkuIvkuI3mlK/mjIFtaW7jgIFtYXgtaGVpZ2h05qC35byPCiAgICAvLyDlpoLmnpzloavlhpnnmoTkuI3mmK8iIWllIuWwseinhuS4unRydWUKICAgIGF1dG9IZWlnaHQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgQm9vbGVhbl0sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICAvLyDkuI3oh6rpgILlupTpq5jluqbnmoTmg4XlhrXkuIvnlJ/mlYjnmoTlm7rlrprpq5jluqYKICAgIGhlaWdodDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAnMjQwcHgnCiAgICB9LAogICAgbGFuZ3VhZ2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIG1pbkhlaWdodDp7CiAgICAgIHR5cGU6TnVtYmVyLAogICAgICBkZWZhdWx0OiAxMDAsCiAgICAgIHJlcXVpcmVkOmZhbHNlCiAgICB9LAogICAgbWF4SGVpZ2h0OnsKICAgICAgdHlwZTpOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDMyMCwKICAgICAgcmVxdWlyZWQ6ZmFsc2UKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgdGV4dGFyZWFWYWx1ZTogJycsCiAgICAgIC8vIOWGhemDqOecn+WunueahOWGheWuuQogICAgICBjb2RlOiAnJywKICAgICAgaWNvblR5cGU6ICdmdWxsc2NyZWVuJywKICAgICAgaGFzQ29kZTpmYWxzZSwKICAgICAgLy8g6buY6K6k55qE6K+t5rOV57G75Z6LCiAgICAgIG1vZGU6ICdqYXZhc2NyaXB0JywKICAgICAgLy8g57yW6L6R5Zmo5a6e5L6LCiAgICAgIGNvZGVyOiBudWxsLAogICAgICAvLyDpu5jorqTphY3nva4KICAgICAgb3B0aW9uczogewogICAgICAgIC8vIOe8qei/m+agvOW8jwogICAgICAgIHRhYlNpemU6IDIsCiAgICAgICAgLy8g5Li76aKY77yM5a+55bqU5Li76aKY5bqTIEpTIOmcgOimgeaPkOWJjeW8leWFpQogICAgICAgIHRoZW1lOiAncGFuZGEtc3ludGF4JywKICAgICAgICBsaW5lOiB0cnVlLAogICAgICAgIC8vIGV4dHJhS2V5czogeydDdHJsJzogJ2F1dG9jb21wbGV0ZSd9LC8v6Ieq5a6a5LmJ5b+r5o236ZSuCiAgICAgICAgaGludE9wdGlvbnM6IHsKICAgICAgICAgIHRhYmxlczogewogICAgICAgICAgICB1c2VyczogWyduYW1lJywgJ3Njb3JlJywgJ2JpcnRoRGF0ZSddLAogICAgICAgICAgICBjb3VudHJpZXM6IFsnbmFtZScsICdwb3B1bGF0aW9uJywgJ3NpemUnXQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgIH0sCgogICAgICAvLyBjb2RlIOe8lui+keWZqCDmmK/lkKblhajlsY8KICAgICAgZnVsbENvZGVyOiBmYWxzZQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGZ1bGxDb2Rlcjp7CiAgICAgIGhhbmRsZXIodmFsdWUpIHsKICAgICAgICBpZih2YWx1ZSl7CiAgICAgICAgICB0aGlzLmljb25UeXBlPSJmdWxsc2NyZWVuLWV4aXQiCiAgICAgICAgfWVsc2V7CiAgICAgICAgICB0aGlzLmljb25UeXBlPSJmdWxsc2NyZWVuIgogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHBsYWNlaG9sZGVyU2hvdygpIHsKICAgICAgaWYgKHRoaXMucGxhY2Vob2xkZXIgPT0gbnVsbCkgewogICAgICAgIHJldHVybiBg6K+35Zyo5q2k6L6T5YWl5Luj56CBYAogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLnBsYWNlaG9sZGVyCiAgICAgIH0KICAgIH0sCiAgICBpc0F1dG9IZWlnaHQoKSB7CiAgICAgIGxldCB7YXV0b0hlaWdodH0gPSB0aGlzCiAgICAgIGlmICh0eXBlb2YgYXV0b0hlaWdodCA9PT0gJ3N0cmluZycgJiYgYXV0b0hlaWdodC50b0xvd2VyQ2FzZSgpLnRyaW0oKSA9PT0gJyFpZScpIHsKICAgICAgICBhdXRvSGVpZ2h0ID0gIShpc0lFKCkgfHwgaXNJRTExKCkpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXV0b0hlaWdodCA9IHRydWUKICAgICAgfQogICAgICByZXR1cm4gYXV0b0hlaWdodAogICAgfSwKICAgIGZ1bGxTY3JlZW5QYXJlbnRQcm9wcygpIHsKICAgICAgbGV0IHByb3BzID0gewogICAgICAgIGNsYXNzOiB7CiAgICAgICAgICAnZnVsbC1zY3JlZW4tcGFyZW50JzogdHJ1ZSwKICAgICAgICAgICdmdWxsLXNjcmVlbic6IHRoaXMuZnVsbENvZGVyLAogICAgICAgICAgJ2F1dG8taGVpZ2h0JzogdGhpcy5pc0F1dG9IZWlnaHQKICAgICAgICB9LAogICAgICAgIHN0eWxlOiB7fQogICAgICB9CiAgICAgIGlmICh0aGlzLmZ1bGxDb2RlcikgewogICAgICAgIHByb3BzLnN0eWxlWyd6LWluZGV4J10gPSB0aGlzLnpJbmRleAogICAgICB9CiAgICAgIGlmICghdGhpcy5pc0F1dG9IZWlnaHQpIHsKICAgICAgICBwcm9wcy5zdHlsZVsnaGVpZ2h0J10gPSAodHlwZW9mIHRoaXMuaGVpZ2h0ID09PSAnbnVtYmVyJyA/IHRoaXMuaGVpZ2h0ICsgJ3B4JyA6IHRoaXMuaGVpZ2h0KQogICAgICB9CiAgICAgIHJldHVybiBwcm9wcwogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICAvLyDliJ3lp4vljJYKICAgIHRoaXMuX2luaXRpYWxpemUoKQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yid5aeL5YyWCiAgICBfaW5pdGlhbGl6ZSAoKSB7CiAgICAgIHRoaXMuc2V0Q29kZUNvbnRlbnQodGhpcy52YWx1ZSkKICAgIH0sCiAgICBoYW5kbGVDaGFuZ2UoZSl7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgZS50YXJnZXQudmFsdWUpCiAgICB9LAogICAgZ2V0Q29kZUNvbnRlbnQoKXsKICAgICAgcmV0dXJuIHRoaXMudmFsdWUKICAgIH0sCiAgICBzZXRDb2RlQ29udGVudCh2YWwpewogICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgaWYoIXZhbCl7CiAgICAgICAgICB0aGlzLnRleHRhcmVhVmFsdWUgPSAnJwogICAgICAgIH1lbHNlewogICAgICAgICAgdGhpcy50ZXh0YXJlYVZhbHVlID0gdmFsCiAgICAgICAgfQogICAgICB9LDMwMCkKICAgIH0sCiAgICBudWxsVGlwQ2xpY2soKXsKICAgICAgdGhpcy5jb2Rlci5mb2N1cygpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["JCodeEditor2.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"JCodeEditor2.vue","sourceRoot":"src/components/jeecg","sourcesContent":["<template>\r\n  <div v-bind=\"fullScreenParentProps\">\r\n    <a-icon v-if=\"fullScreen\" class=\"full-screen-icon\" :type=\"iconType\" @click=\"()=>fullCoder=!fullCoder\"/>\r\n\r\n    <div class=\"code-editor-cust full-screen-child\">\r\n      <a-textarea auto-size v-model=\"textareaValue\" :placeholder=\"placeholderShow\" @change=\"handleChange\" :style=\"{'max-height': maxHeight+'px','min-height': minHeight+'px'}\"></a-textarea>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\n  export default {\r\n    name: 'JCodeEditor',\r\n    props: {\r\n      value: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      placeholder: {\r\n        type: String,\r\n        default: null\r\n      },\r\n      // 是否显示全屏按钮\r\n      fullScreen: {\r\n        type: Boolean,\r\n        default: false\r\n      },\r\n      // 全屏以后的z-index\r\n      zIndex: {\r\n        type: [Number, String],\r\n        default: 999\r\n      },\r\n      // 是否自适应高度，可以传String或Boolean\r\n      // 传 String 类型只能写\"!ie\" ，\r\n      // 填写这个字符串，代表其他浏览器自适应高度\r\n      // 唯独IE下不自适应高度，因为IE下不支持min、max-height样式\r\n      // 如果填写的不是\"!ie\"就视为true\r\n      autoHeight: {\r\n        type: [String, Boolean],\r\n        default: true\r\n      },\r\n      // 不自适应高度的情况下生效的固定高度\r\n      height: {\r\n        type: [String, Number],\r\n        default: '240px'\r\n      },\r\n      language: {\r\n        type: String,\r\n        default: ''\r\n      },\r\n      minHeight:{\r\n        type:Number,\r\n        default: 100,\r\n        required:false\r\n      },\r\n      maxHeight:{\r\n        type:Number,\r\n        default: 320,\r\n        required:false\r\n      }\r\n    },\r\n    data () {\r\n      return {\r\n        textareaValue: '',\r\n        // 内部真实的内容\r\n        code: '',\r\n        iconType: 'fullscreen',\r\n        hasCode:false,\r\n        // 默认的语法类型\r\n        mode: 'javascript',\r\n        // 编辑器实例\r\n        coder: null,\r\n        // 默认配置\r\n        options: {\r\n          // 缩进格式\r\n          tabSize: 2,\r\n          // 主题，对应主题库 JS 需要提前引入\r\n          theme: 'panda-syntax',\r\n          line: true,\r\n          // extraKeys: {'Ctrl': 'autocomplete'},//自定义快捷键\r\n          hintOptions: {\r\n            tables: {\r\n              users: ['name', 'score', 'birthDate'],\r\n              countries: ['name', 'population', 'size']\r\n            }\r\n          },\r\n        },\r\n\r\n        // code 编辑器 是否全屏\r\n        fullCoder: false\r\n      }\r\n    },\r\n    watch: {\r\n      fullCoder:{\r\n        handler(value) {\r\n          if(value){\r\n            this.iconType=\"fullscreen-exit\"\r\n          }else{\r\n            this.iconType=\"fullscreen\"\r\n          }\r\n        }\r\n      }\r\n    },\r\n    computed: {\r\n      placeholderShow() {\r\n        if (this.placeholder == null) {\r\n          return `请在此输入代码`\r\n        } else {\r\n          return this.placeholder\r\n        }\r\n      },\r\n      isAutoHeight() {\r\n        let {autoHeight} = this\r\n        if (typeof autoHeight === 'string' && autoHeight.toLowerCase().trim() === '!ie') {\r\n          autoHeight = !(isIE() || isIE11())\r\n        } else {\r\n          autoHeight = true\r\n        }\r\n        return autoHeight\r\n      },\r\n      fullScreenParentProps() {\r\n        let props = {\r\n          class: {\r\n            'full-screen-parent': true,\r\n            'full-screen': this.fullCoder,\r\n            'auto-height': this.isAutoHeight\r\n          },\r\n          style: {}\r\n        }\r\n        if (this.fullCoder) {\r\n          props.style['z-index'] = this.zIndex\r\n        }\r\n        if (!this.isAutoHeight) {\r\n          props.style['height'] = (typeof this.height === 'number' ? this.height + 'px' : this.height)\r\n        }\r\n        return props\r\n      }\r\n    },\r\n    mounted () {\r\n      // 初始化\r\n      this._initialize()\r\n    },\r\n    methods: {\r\n      // 初始化\r\n      _initialize () {\r\n        this.setCodeContent(this.value)\r\n      },\r\n      handleChange(e){\r\n        this.$emit('input', e.target.value)\r\n      },\r\n      getCodeContent(){\r\n        return this.value\r\n      },\r\n      setCodeContent(val){\r\n        setTimeout(()=>{\r\n          if(!val){\r\n            this.textareaValue = ''\r\n          }else{\r\n            this.textareaValue = val\r\n          }\r\n        },300)\r\n      },\r\n      nullTipClick(){\r\n        this.coder.focus()\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  .code-editor-cust{\r\n    flex-grow:1;\r\n    display:flex;\r\n    position:relative;\r\n    height:100%;\r\n    .CodeMirror{\r\n      flex-grow:1;\r\n      z-index:1;\r\n      .CodeMirror-code{\r\n        line-height:19px;\r\n      }\r\n\r\n    }\r\n    .code-mode-select{\r\n      position:absolute;\r\n      z-index:2;\r\n      right:10px;\r\n      top:10px;\r\n      max-width:130px;\r\n    }\r\n    .CodeMirror{\r\n      height: auto;\r\n      min-height:100%;\r\n    }\r\n    .null-tip{\r\n      position: absolute;\r\n      top: 4px;\r\n      left: 36px;\r\n      z-index: 10;\r\n      color: #ffffffc9;\r\n      line-height: initial;\r\n    }\r\n    .null-tip-hidden{\r\n      display: none;\r\n    }\r\n  }\r\n\r\n  /* 全屏样式 */\r\n  .full-screen-parent {\r\n    position: relative;\r\n\r\n    .full-screen-icon {\r\n      opacity: 0;\r\n      color: black;\r\n      width: 20px;\r\n      height: 20px;\r\n      line-height: 24px;\r\n      background-color: white;\r\n      position: absolute;\r\n      top: 2px;\r\n      right: 2px;\r\n      z-index: 9;\r\n      cursor: pointer;\r\n      transition: opacity 0.3s;\r\n    }\r\n\r\n    &:hover {\r\n      .full-screen-icon {\r\n        opacity: 1;\r\n\r\n        &:hover {\r\n          background-color: rgba(255, 255, 255, 0.88);\r\n        }\r\n      }\r\n    }\r\n\r\n    &.full-screen {\r\n      position: fixed;\r\n      top: 10px;\r\n      left: 10px;\r\n      width: calc(100% - 20px);\r\n      height: calc(100% - 20px);\r\n      padding: 10px;\r\n      background-color: #f5f5f5;\r\n\r\n      .full-screen-icon {\r\n        top: 12px;\r\n        right: 12px;\r\n      }\r\n\r\n      .full-screen-child {\r\n        height: 100%;\r\n        max-height: 100%;\r\n        min-height: 100%;\r\n      }\r\n    }\r\n\r\n    .full-screen-child {\r\n      height: 100%;\r\n    }\r\n\r\n    &.auto-height {\r\n      .full-screen-child {\r\n        min-height: 120px;\r\n        max-height: 320px;\r\n        height: unset;\r\n        overflow: hidden;\r\n      }\r\n\r\n      &.full-screen .full-screen-child {\r\n        height: 100%;\r\n        max-height: 100%;\r\n        min-height: 100%;\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  .CodeMirror-cursor{\r\n    height:18.4px !important;\r\n  }\r\n</style>"]}]}