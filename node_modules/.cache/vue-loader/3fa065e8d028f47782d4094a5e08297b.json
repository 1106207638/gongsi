{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\online\\selfcgreport.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\online\\selfcgreport.vue","mtime":1615948820521},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgew0KICBpbml0RGljdE9wdGlvbnMsDQogIGZpbHRlckRpY3RUZXh0LA0KICBmaWx0ZXJEaWN0VGV4dEJ5Q2FjaGUNCn0gZnJvbSAnQC9jb21wb25lbnRzL2RpY3QvSkRpY3RTZWxlY3RVdGlsJw0KaW1wb3J0IHtKZWVjZ0xpc3RNaXhpbn0gZnJvbSAnQC9taXhpbnMvSmVlY2dMaXN0TWl4aW4nDQppbXBvcnQge21peGluRGV2aWNlfSBmcm9tICdAL3V0aWxzL21peGluJw0KDQppbXBvcnQgVnVlIGZyb20gJ3Z1ZScNCmltcG9ydCB7ZmlsdGVyT2JqfSBmcm9tICdAL3V0aWxzL3V0aWwnOw0KLy8g5byV5YWl57yW6L6RbW9kdWxlDQppbXBvcnQgc2VsZmNncmVwb3J0TW9kdWxlIGZyb20gJy4vbW9kdWxlcy9zZWxmY2dyZXBvcnRNb2R1bGUnDQppbXBvcnQge2dldEFjdGlvbn0gZnJvbSAiQGFwaS9tYW5hZ2UiOw0KLy/pq5jnuqfmn6Xor6Jtb2RhbOmcgOimgeWPguaVsA0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAic2VsZmNncmVwb3J0IiwNCiAgbWl4aW5zOiBbSmVlY2dMaXN0TWl4aW4sIG1peGluRGV2aWNlXSwNCiAgY29tcG9uZW50czogew0KICAgIHNlbGZjZ3JlcG9ydE1vZHVsZQ0KICB9LA0KICBjb21wdXRlZDogew0KDQogIH0sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIC8vIOihqOWNleeahOexu+Weiw0KICAgICAgZGVzY3JpcHRpb246ICLlnKjnur/miqXooajphY3nva7nrqHnkIbpobXpnaIiLA0KICAgICAgdmlzaWJsZTogITEsDQogICAgICByZXBvcnRVcmxUZXh0OiAiIiwNCiAgICAgIGNvbHVtbnM6IFt7DQogICAgICAgIHRpdGxlOiAi5oql6KGo5ZCN56ewIiwNCiAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICBkYXRhSW5kZXg6ICJuYW1lIg0KICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi57yW56CBIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgZGF0YUluZGV4OiAiY29kZSINCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5p+l6K+iU1FMIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgZGF0YUluZGV4OiAiY2dyU3FsIiwNCiAgICAgICAgICBzY29wZWRTbG90czogew0KICAgICAgICAgICAgY3VzdG9tUmVuZGVyOiAiY2dyU3FsIg0KICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIHRpdGxlOiAi5pWw5o2u5rqQIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgZGF0YUluZGV4OiAiZGJTb3VyY2UiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuWIm+W7uuaXtumXtCIsDQogICAgICAgICAgYWxpZ246ICJjZW50ZXIiLA0KICAgICAgICAgIGRhdGFJbmRleDogImNyZWF0ZVRpbWUiDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICB0aXRsZTogIuaTjeS9nCIsDQogICAgICAgICAgZGF0YUluZGV4OiAiYWN0aW9uIiwNCiAgICAgICAgICBhbGlnbjogImNlbnRlciIsDQogICAgICAgICAgc2NvcGVkU2xvdHM6IHsNCiAgICAgICAgICAgIGN1c3RvbVJlbmRlcjogImFjdGlvbiINCiAgICAgICAgICB9DQogICAgICAgIH1dLA0KICAgICAgdXJsOiB7DQogICAgICAgIGxpc3Q6ICIvb25saW5lL2NncmVwb3J0L2hlYWQvbGlzdCIsDQogICAgICAgIGRlbGV0ZTogIi9vbmxpbmUvY2dyZXBvcnQvaGVhZC9kZWxldGUiLA0KICAgICAgICBkZWxldGVCYXRjaDogIi9vbmxpbmUvY2dyZXBvcnQvaGVhZC9kZWxldGVCYXRjaCIsDQogICAgICAgIGdldFBhcmFtc0luZm86ICIvb25saW5lL2NncmVwb3J0L2FwaS9nZXRQYXJhbXNJbmZvLyIsDQogICAgICAgIHNxbFR5cGU6Jy9zeXMvZGF0YVNvdXJjZS9vcHRpb25zJywNCiAgICAgIH0sDQogICAgICAvLyDmlbDmja7lupPnmoTnsbvlnosNCiAgICAgIHNxbFR5cGU6W10NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBwb3BSZXBvcnRVUkw6IGZ1bmN0aW9uKGUpIHsNCiAgICAgIHRoaXMudmlzaWJsZSA9ICEwLA0KICAgICAgICAgIHRoaXMuaW5pdFJlcG9ydFVybFRleHQoZSkNCiAgICB9LA0KICAgIC8vIOiOt+WPluaVsOaNruW6k+eahOexu+Weiw0KICAgIGdldHNxbFR5cGUoKSB7DQogICAgICB2YXIgb2JqID0ge30NCiAgICAgIGdldEFjdGlvbih0aGlzLnVybC5zcWxUeXBlLCBvYmopLnRoZW4oKHJlcykgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuc3FsVHlwZSA9IHJlcy5yZXN1bHQNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcocmVzLm1lc3NhZ2UpOw0KICAgICAgICB9DQogICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVDYW5jZWw6IGZ1bmN0aW9uKCkgew0KICAgICAgdGhpcy52aXNpYmxlID0gITEsDQogICAgICAgICAgdGhpcy5yZXBvcnRVcmxUZXh0ID0gIiINCiAgICB9LA0KICAgIG9uQ29weVVybDogZnVuY3Rpb24oKSB7DQogICAgICB2YXIgZSA9IHRoaXMsDQogICAgICAgICAgdCA9IG5ldyBjLmEoIi5jb3B5LXRoaXMtdGV4dCIpOw0KICAgICAgdC5vbigic3VjY2VzcyIsIChmdW5jdGlvbigpIHsNCiAgICAgICAgdC5kZXN0cm95KCksDQogICAgICAgICAgICBlLiRtZXNzYWdlLnN1Y2Nlc3MoIuWkjeWItuaIkOWKnyIpLA0KICAgICAgICAgICAgZS5oYW5kbGVDYW5jZWwoKQ0KICAgICAgfSkpLA0KICAgICAgICAgIHQub24oImVycm9yIiwgKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgZS4kbWVzc2FnZS5lcnJvcigi6K+l5rWP6KeI5Zmo5LiN5pSv5oyB6Ieq5Yqo5aSN5Yi2IiksDQogICAgICAgICAgICAgICAgdC5kZXN0cm95KCkNCiAgICAgICAgICB9KSkNCiAgICB9DQogIH0sDQogIGNyZWF0ZWQoKSB7DQogICAgdGhpcy5nZXRzcWxUeXBlKCkNCiAgfSwNCn0NCg=="},{"version":3,"sources":["selfcgreport.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"selfcgreport.vue","sourceRoot":"src/views/online","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 查询区域 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\" @keyup.enter.native=\"searchQuery\">\r\n        <a-row :gutter=\"24\">\r\n          <a-col :xl=\"6\" :lg=\"6\" :md=\"8\" :sm=\"24\">\r\n            <a-form-item label=\"报表编码\">\r\n              <a-input placeholder=\"请输入报表编码\" v-model=\"queryParam.code\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :xl=\"6\" :lg=\"6\" :md=\"8\" :sm=\"24\">\r\n            <a-form-item label=\"报表名字\">\r\n              <a-input placeholder=\"请输入报表名字\" v-model=\"queryParam.name\"></a-input>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :xl=\"6\" :lg=\"7\" :md=\"8\" :sm=\"24\">\r\n            <span style=\"float: left;overflow: hidden;\" class=\"table-page-search-submitButtons\">\r\n              <a-button type=\"primary\" @click=\"searchQuery\" icon=\"search\">查询</a-button>\r\n              <a-button type=\"primary\" @click=\"searchReset\" icon=\"reload\" style=\"margin-left: 8px\">重置</a-button>\r\n            </span>\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n    <!-- 操作按钮区域 -->\r\n    <div class=\"table-operator\">\r\n      <a-button @click=\"handleAdd\" type=\"primary\" icon=\"plus\">录入</a-button>\r\n      <a-dropdown v-if=\"selectedRowKeys.length > 0\">\r\n        <a-menu slot=\"overlay\">\r\n          <a-menu-item key=\"1\" @click=\"batchDel\">\r\n            <a-icon type=\"delete\"/>\r\n            删除\r\n          </a-menu-item>\r\n        </a-menu>\r\n        <a-button style=\"margin-left: 8px\"> 批量操作\r\n          <a-icon type=\"down\"/>\r\n        </a-button>\r\n      </a-dropdown>\r\n    </div>\r\n    <!-- table区域-begin -->\r\n    <div>\r\n      <div class=\"ant-alert ant-alert-info\" style=\"margin-bottom: 16px;\">\r\n        <i class=\"anticon anticon-info-circle ant-alert-icon\"></i> 已选择 <a style=\"font-weight: 600\">{{\r\n          selectedRowKeys.length\r\n        }}</a>项\r\n        <a style=\"margin-left: 24px\" @click=\"onClearSelected\">清空</a>\r\n      </div>\r\n\r\n      <a-table\r\n          ref=\"table\"\r\n          size=\"middle\"\r\n          bordered\r\n          rowKey=\"id\"\r\n          :columns=\"columns\"\r\n          :dataSource=\"dataSource\"\r\n          :pagination=\"ipagination\"\r\n          :loading=\"loading\"\r\n          :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\"\r\n          class=\"j-table-force-nowrap\"\r\n          @change=\"handleTableChange\">\r\n\r\n        <template slot=\"htmlSlot\" slot-scope=\"text\">\r\n          <div v-html=\"text\"></div>\r\n        </template>\r\n        <template slot=\"imgSlot\" slot-scope=\"text\">\r\n          <span v-if=\"!text\" style=\"font-size: 12px;font-style: italic;\">无图片</span>\r\n          <img v-else :src=\"getImgView(text)\" height=\"25px\" alt=\"\"\r\n               style=\"max-width:80px;font-size: 12px;font-style: italic;\"/>\r\n        </template>\r\n        <template slot=\"fileSlot\" slot-scope=\"text\">\r\n          <span v-if=\"!text\" style=\"font-size: 12px;font-style: italic;\">无文件</span>\r\n          <a-button\r\n              v-else\r\n              :ghost=\"true\"\r\n              type=\"primary\"\r\n              icon=\"download\"\r\n              size=\"small\"\r\n              @click=\"uploadFile(text)\">\r\n            下载\r\n          </a-button>\r\n        </template>\r\n        <span slot=\"action\" slot-scope=\"text, record\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n          <a-divider type=\"vertical\"/>\r\n          <a-dropdown>\r\n            <a class=\"ant-dropdown-link\">更多 <a-icon type=\"down\"/></a>\r\n            <a-menu slot=\"overlay\">\r\n<!--              <a-menu-item>配置地址</a-menu-item>-->\r\n<!--              <a-menu-item>功能测试</a-menu-item>-->\r\n              <a-menu-item>\r\n                <a-popconfirm title=\"确定删除吗?\" @confirm=\"() => handleDelete(record.id)\">\r\n                  <a>删除</a>\r\n                </a-popconfirm>\r\n              </a-menu-item>\r\n            </a-menu>\r\n          </a-dropdown>\r\n        </span>\r\n        <span slot=\"dbsync\" slot-scope=\"text, record\">\r\n          <div v-if=\"text=='Y'\" style=\"color: limegreen;\">已同步</div>\r\n          <div v-else style=\"color: red\">未同步</div>\r\n        </span>\r\n\r\n      </a-table>\r\n    </div>\r\n    <selfcgreportModule ref=\"modalForm\" @ok=\"modalFormOk\"  />\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  initDictOptions,\r\n  filterDictText,\r\n  filterDictTextByCache\r\n} from '@/components/dict/JDictSelectUtil'\r\nimport {JeecgListMixin} from '@/mixins/JeecgListMixin'\r\nimport {mixinDevice} from '@/utils/mixin'\r\n\r\nimport Vue from 'vue'\r\nimport {filterObj} from '@/utils/util';\r\n// 引入编辑module\r\nimport selfcgreportModule from './modules/selfcgreportModule'\r\nimport {getAction} from \"@api/manage\";\r\n//高级查询modal需要参数\r\nexport default {\r\n  name: \"selfcgreport\",\r\n  mixins: [JeecgListMixin, mixinDevice],\r\n  components: {\r\n    selfcgreportModule\r\n  },\r\n  computed: {\r\n\r\n  },\r\n  data() {\r\n    return {\r\n      // 表单的类型\r\n      description: \"在线报表配置管理页面\",\r\n      visible: !1,\r\n      reportUrlText: \"\",\r\n      columns: [{\r\n        title: \"报表名称\",\r\n        align: \"center\",\r\n        dataIndex: \"name\"\r\n      },\r\n        {\r\n          title: \"编码\",\r\n          align: \"center\",\r\n          dataIndex: \"code\"\r\n        },\r\n        {\r\n          title: \"查询SQL\",\r\n          align: \"center\",\r\n          dataIndex: \"cgrSql\",\r\n          scopedSlots: {\r\n            customRender: \"cgrSql\"\r\n          }\r\n        },\r\n        {\r\n          title: \"数据源\",\r\n          align: \"center\",\r\n          dataIndex: \"dbSource\"\r\n        },\r\n        {\r\n          title: \"创建时间\",\r\n          align: \"center\",\r\n          dataIndex: \"createTime\"\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          dataIndex: \"action\",\r\n          align: \"center\",\r\n          scopedSlots: {\r\n            customRender: \"action\"\r\n          }\r\n        }],\r\n      url: {\r\n        list: \"/online/cgreport/head/list\",\r\n        delete: \"/online/cgreport/head/delete\",\r\n        deleteBatch: \"/online/cgreport/head/deleteBatch\",\r\n        getParamsInfo: \"/online/cgreport/api/getParamsInfo/\",\r\n        sqlType:'/sys/dataSource/options',\r\n      },\r\n      // 数据库的类型\r\n      sqlType:[]\r\n    }\r\n  },\r\n  methods: {\r\n    popReportURL: function(e) {\r\n      this.visible = !0,\r\n          this.initReportUrlText(e)\r\n    },\r\n    // 获取数据库的类型\r\n    getsqlType() {\r\n      var obj = {}\r\n      getAction(this.url.sqlType, obj).then((res) => {\r\n        console.log(res)\r\n        if (res.success) {\r\n          this.sqlType = res.result\r\n        } else {\r\n          this.$message.warning(res.message);\r\n        }\r\n      }).finally(() => {\r\n      })\r\n    },\r\n    handleCancel: function() {\r\n      this.visible = !1,\r\n          this.reportUrlText = \"\"\r\n    },\r\n    onCopyUrl: function() {\r\n      var e = this,\r\n          t = new c.a(\".copy-this-text\");\r\n      t.on(\"success\", (function() {\r\n        t.destroy(),\r\n            e.$message.success(\"复制成功\"),\r\n            e.handleCancel()\r\n      })),\r\n          t.on(\"error\", (function() {\r\n            e.$message.error(\"该浏览器不支持自动复制\"),\r\n                t.destroy()\r\n          }))\r\n    }\r\n  },\r\n  created() {\r\n    this.getsqlType()\r\n  },\r\n}\r\n</script>\r\n<style scoped>\r\n@import '~@assets/less/common.less';\r\n</style>"]}]}