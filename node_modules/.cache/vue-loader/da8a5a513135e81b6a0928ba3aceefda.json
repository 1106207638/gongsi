{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\online\\modules\\dataBase.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\src\\views\\online\\modules\\dataBase.vue","mtime":1615948820505},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1615952610415},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQoNCmltcG9ydCB7Z2V0QWN0aW9uLCBodHRwQWN0aW9ufSBmcm9tICdAL2FwaS9tYW5hZ2UnDQppbXBvcnQgcGljayBmcm9tICdsb2Rhc2gucGljaycNCmltcG9ydCB7dmFsaWRhdGVEdXBsaWNhdGVWYWx1ZX0gZnJvbSAnQC91dGlscy91dGlsJw0KaW1wb3J0IEpEaWN0U2VsZWN0VGFnIGZyb20gIkAvY29tcG9uZW50cy9kaWN0L0pEaWN0U2VsZWN0VGFnIg0KDQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogImRhdGFCYXNlIiwNCiAgY29tcG9uZW50czogew0KICAgIEpEaWN0U2VsZWN0VGFnLA0KICB9LA0KICBwcm9wOiB7DQogICAgdGFza0lkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICByZXF1aXJlZDogdHJ1ZSwNCiAgICB9LA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICByYWRpb1N0eWxlOiB7DQogICAgICAgIGRpc3BsYXk6ICdibG9jaycsDQogICAgICAgIGhlaWdodDogJzMwcHgnLA0KICAgICAgICBsaW5lSGVpZ2h0OiAnMzBweCcsDQogICAgICB9LA0KICAgICAgdmFsdWU6J25vcm1hbCcsDQogICAgICByZWNvcmQ6bnVsbCwNCiAgICAgIHRpdGxlOiAi5pON5L2cIiwNCiAgICAgIHdpZHRoOiA1MDAsDQogICAgICB2aXNpYmxlOiBmYWxzZSwNCiAgICAgIG1vZGVsOiB7fSwNCiAgICAgIGxhYmVsQ29sOiB7DQogICAgICAgIHhzOiB7c3BhbjogMjR9LA0KICAgICAgICBzbToge3NwYW46IDV9LA0KICAgICAgfSwNCiAgICAgIHdyYXBwZXJDb2w6IHsNCiAgICAgICAgeHM6IHtzcGFuOiAyNH0sDQogICAgICAgIHNtOiB7c3BhbjogMTZ9LA0KICAgICAgfSwNCiAgICAgIGZvcm06IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzKSwNCiAgICAgIGNvbmZpcm1Mb2FkaW5nOiBmYWxzZSwNCiAgICAgIHZhbGlkYXRvclJ1bGVzOiB7fSwNCiAgICAgIHVybDogew0KICAgICAgICAvLyDlkIzmraXmlbDmja7lupMNCiAgICAgICAgZGF0YUJhc2U6ICJvbmxpbmUvY2dmb3JtL2FwaS9kb0RiU3luY2gvIiwNCiAgICAgIH0sDQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZWRpdChyZWNvcmQpIHsNCiAgICAgIGNvbnNvbGUubG9nKHJlY29yZCkNCiAgICAgIHRoaXMucmVjb3JkID0gcmVjb3JkLmlkDQogICAgICB0aGlzLnRhc2tJZCA9IiINCiAgICAgIHRoaXMuZm9ybS5yZXNldEZpZWxkcygpOw0KICAgICAgdGhpcy5tb2RlbCA9IE9iamVjdC5hc3NpZ24oe30sIHJlY29yZCk7DQogICAgICB0aGlzLnZpc2libGUgPSB0cnVlOw0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLmZvcm0uc2V0RmllbGRzVmFsdWUocGljayh0aGlzLm1vZGVsKSkNCiAgICAgIH0pDQogICAgfSwNCiAgICBjbG9zZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7DQogICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsNCiAgICB9LA0KICAgIGhhbmRsZU9rKCkgew0KICAgICAgY29uc3QgdGhhdCA9IHRoaXM7DQogICAgICAvLyDop6blj5HooajljZXpqozor4ENCiAgICAgIHRoYXQuY29uZmlybUxvYWRpbmcgPSB0cnVlOw0KICAgICAgbGV0IGh0dHB1cmwgPSAnJzsNCiAgICAgIGxldCBtZXRob2QgPSAnJzsNCiAgICAgIGlmICghdGhpcy5tb2RlbC5pZCkgew0KICAgICAgICBodHRwdXJsICs9IHRoaXMudXJsLmRhdGFCYXNlK3RoaXMucmVjb3JkKycvJyt0aGlzLnZhbHVlDQogICAgICAgIG1ldGhvZCA9ICdwb3N0JzsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGh0dHB1cmwgKz0gdGhpcy51cmwuZGF0YUJhc2UrdGhpcy5yZWNvcmQrJy8nK3RoaXMudmFsdWUNCiAgICAgICAgbWV0aG9kID0gJ3Bvc3QnOw0KICAgICAgfQ0KICAgICAgbGV0IGZvcm1EYXRhID0ge30NCiAgICAgIGh0dHBBY3Rpb24oaHR0cHVybCwgZm9ybURhdGEsIG1ldGhvZCkudGhlbigocmVzKSA9PiB7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoYXQuJG1lc3NhZ2Uuc3VjY2VzcyhyZXMubWVzc2FnZSk7DQogICAgICAgICAgdGhhdC4kZW1pdCgnb2snKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGF0LiRtZXNzYWdlLndhcm5pbmcocmVzLm1lc3NhZ2UpOw0KICAgICAgICB9DQogICAgICB9KS5maW5hbGx5KCgpID0+IHsNCiAgICAgICAgdGhhdC5jb25maXJtTG9hZGluZyA9IGZhbHNlOw0KICAgICAgICB0aGF0LmNsb3NlKCk7DQogICAgICB9KQ0KDQoNCiAgICB9LA0KICAgIGhhbmRsZUNhbmNlbCgpIHsNCiAgICAgIHRoaXMuY2xvc2UoKQ0KICAgIH0sDQogICAgcG9wdXBDYWxsYmFjayhyb3cpIHsNCiAgICAgIHRoaXMuZm9ybS5zZXRGaWVsZHNWYWx1ZShwaWNrKHJvdywgJ25hbWUnKSkNCiAgICB9LA0KDQogIH0NCn0NCg=="},{"version":3,"sources":["dataBase.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"dataBase.vue","sourceRoot":"src/views/online/modules","sourcesContent":["<template>\r\n  <j-modal\r\n      :title=\"title\"\r\n      :width=\"width\"\r\n      :visible=\"visible\"\r\n      :fullscreen=\"false\"\r\n      :confirmLoading=\"confirmLoading\"\r\n      switchFullscreen\r\n      @ok=\"handleOk\"\r\n      @cancel=\"handleCancel\"\r\n      cancelText=\"关闭\">\r\n    <a-spin :spinning=\"confirmLoading\">\r\n\r\n      <a-radio-group v-model=\"value\">\r\n        <a-radio :style=\"radioStyle\" value=\"normal\">\r\n          普通同步(保留表数据)\r\n        </a-radio>\r\n        <a-radio :style=\"radioStyle\" value=\"force\">\r\n          强制同步(删除表,重新生成)\r\n        </a-radio>\r\n      </a-radio-group>\r\n    </a-spin>\r\n  </j-modal>\r\n</template>\r\n\r\n<script>\r\n\r\nimport {getAction, httpAction} from '@/api/manage'\r\nimport pick from 'lodash.pick'\r\nimport {validateDuplicateValue} from '@/utils/util'\r\nimport JDictSelectTag from \"@/components/dict/JDictSelectTag\"\r\n\r\n\r\nexport default {\r\n  name: \"dataBase\",\r\n  components: {\r\n    JDictSelectTag,\r\n  },\r\n  prop: {\r\n    taskId: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      radioStyle: {\r\n        display: 'block',\r\n        height: '30px',\r\n        lineHeight: '30px',\r\n      },\r\n      value:'normal',\r\n      record:null,\r\n      title: \"操作\",\r\n      width: 500,\r\n      visible: false,\r\n      model: {},\r\n      labelCol: {\r\n        xs: {span: 24},\r\n        sm: {span: 5},\r\n      },\r\n      wrapperCol: {\r\n        xs: {span: 24},\r\n        sm: {span: 16},\r\n      },\r\n      form: this.$form.createForm(this),\r\n      confirmLoading: false,\r\n      validatorRules: {},\r\n      url: {\r\n        // 同步数据库\r\n        dataBase: \"online/cgform/api/doDbSynch/\",\r\n      },\r\n    }\r\n  },\r\n  created() {\r\n  },\r\n  methods: {\r\n    edit(record) {\r\n      console.log(record)\r\n      this.record = record.id\r\n      this.taskId =\"\"\r\n      this.form.resetFields();\r\n      this.model = Object.assign({}, record);\r\n      this.visible = true;\r\n      this.$nextTick(() => {\r\n        this.form.setFieldsValue(pick(this.model))\r\n      })\r\n    },\r\n    close() {\r\n      this.$emit('close');\r\n      this.visible = false;\r\n    },\r\n    handleOk() {\r\n      const that = this;\r\n      // 触发表单验证\r\n      that.confirmLoading = true;\r\n      let httpurl = '';\r\n      let method = '';\r\n      if (!this.model.id) {\r\n        httpurl += this.url.dataBase+this.record+'/'+this.value\r\n        method = 'post';\r\n      } else {\r\n        httpurl += this.url.dataBase+this.record+'/'+this.value\r\n        method = 'post';\r\n      }\r\n      let formData = {}\r\n      httpAction(httpurl, formData, method).then((res) => {\r\n        if (res.success) {\r\n          that.$message.success(res.message);\r\n          that.$emit('ok');\r\n        } else {\r\n          that.$message.warning(res.message);\r\n        }\r\n      }).finally(() => {\r\n        that.confirmLoading = false;\r\n        that.close();\r\n      })\r\n\r\n\r\n    },\r\n    handleCancel() {\r\n      this.close()\r\n    },\r\n    popupCallback(row) {\r\n      this.form.setFieldsValue(pick(row, 'name'))\r\n    },\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.form-item {\r\n  margin-left: 15px\r\n}\r\n/deep/ .form-item {\r\n  margin-left: 0;\r\n}\r\n\r\n</style>"]}]}