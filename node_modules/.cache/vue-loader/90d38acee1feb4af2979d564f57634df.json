{"remainingRequest":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\src\\views\\zbtest\\newzbjc.vue?vue&type=style&index=0&id=6e0e0d46&scoped=true&lang=css&","dependencies":[{"path":"D:\\vue\\src\\views\\zbtest\\newzbjc.vue","mtime":1616238007722},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\css-loader\\dist\\cjs.js","mtime":1615952641773},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1615952643260},{"path":"D:\\vue\\node_modules\\postcss-loader\\src\\index.js","mtime":1615952643158},{"path":"D:\\vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615952641464},{"path":"D:\\vue\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1615952643260}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmZyb20taXRlbSB7DQogIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KfQ0K"},{"version":3,"sources":["newzbjc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuTA;AACA;AACA","file":"newzbjc.vue","sourceRoot":"src/views/zbtest","sourcesContent":["<template>\r\n  <a-card :bordered=\"false\">\r\n    <!-- 查询 -->\r\n    <div class=\"table-page-search-wrapper\">\r\n      <a-form layout=\"inline\">\r\n        <a-row :gutter=\"48\">\r\n          <a-col :xl=\"5\" :lg=\"6\" :md=\"8\" :sm=\"24\">\r\n            <a-form-item label=\"检查方式\">\r\n              <j-dict-select-tag\r\n                type=\"list\"\r\n                v-model=\"queryParam.checkWay\"\r\n                placeholder=\"请选择报告类型\"\r\n                dictCode=\"check_way\"\r\n              />\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :xl=\"5\" :lg=\"6\" :md=\"8\" :sm=\"24\">\r\n            <a-form-item label=\"检查状态\">\r\n              <a-select\r\n                style=\"width: 100%\"\r\n                placeholder=\"请选择任务状态\"\r\n                v-model=\"queryParam.checkStatus\"\r\n              >\r\n                <a-select-option value=\"Check\"> 已检查 </a-select-option>\r\n                <a-select-option value=\"NotCheck\"> 未检查 </a-select-option>\r\n              </a-select>\r\n            </a-form-item>\r\n          </a-col>\r\n          <a-col :xl=\"5\" :lg=\"6\" :md=\"8\" :sm=\"24\">\r\n            <a-form-item label=\"执行时间\">\r\n              <j-date\r\n                v-model=\"queryParam.checkTime\"\r\n                style=\"width: 100%\"\r\n                placeholder=\"请输入更新日期\"\r\n                dateFormat=\"YYYY-MM-DD\"\r\n              />\r\n            </a-form-item>\r\n          </a-col>\r\n\r\n          <a-col :xl=\"4\" :lg=\"6\" :md=\"(!advanced && 8) || 24\" :sm=\"24\">\r\n            <a-button\r\n              type=\"primary\"\r\n              style=\"height: 40px; width: 120px\"\r\n              @click=\"searchQuery\"\r\n              >搜索</a-button\r\n            >\r\n          </a-col>\r\n        </a-row>\r\n      </a-form>\r\n    </div>\r\n\r\n    <a-divider />\r\n\r\n    <a-button\r\n      type=\"primary\"\r\n      @click=\"add\"\r\n      style=\"height: 40px; width: 120px; margin-bottom: 20px\"\r\n    >\r\n      添加\r\n    </a-button>\r\n\r\n    <!-- 表格Strat -->\r\n    <a-table\r\n      ref=\"table\"\r\n      size=\"middle\"\r\n      :scroll=\"{ x: true }\"\r\n      bordered\r\n      rowKey=\"id\"\r\n      :columns=\"columns\"\r\n      :dataSource=\"dataSource\"\r\n      :pagination=\"ipagination\"\r\n      :loading=\"loading\"\r\n      :rowSelection=\"{\r\n        selectedRowKeys: selectedRowKeys,\r\n        onChange: onSelectChange,\r\n      }\"\r\n      class=\"j-table-force-nowrap\"\r\n      @change=\"handleTableChange\"\r\n    >\r\n      <template slot=\"htmlSlot\" slot-scope=\"text\">\r\n        <div v-html=\"text\"></div>\r\n      </template>\r\n\r\n      <span slot=\"action\" slot-scope=\"text, record\" style=\"text-align: center\">\r\n        <!-- 未检查 -->\r\n        <div v-if=\"record.checkStatus == 'NotCheck'\">\r\n          <a @click=\"implement(record)\" v-if=\"record.checkStatus == 'NotCheck'\"\r\n            >执行</a\r\n          >\r\n\r\n          <a-divider type=\"vertical\" v-if=\"record.checkStatus == 'NotCheck'\" />\r\n\r\n          <a-popconfirm\r\n            title=\"确定删除吗?\"\r\n            @confirm=\"() => handleDelete(record.id)\"\r\n          >\r\n            <a>删除</a>\r\n          </a-popconfirm>\r\n        </div>\r\n\r\n        <!-- 检查 -->\r\n        <div v-if=\"record.checkStatus != 'NotCheck'\">\r\n          <a @click=\"handleEdit(record)\">编辑</a>\r\n\r\n          <a-divider type=\"vertical\" v-if=\"record.checkStatus == 'Check'\" />\r\n\r\n          <a @click=\"look(record.id)\" v-if=\"record.checkStatus == 'Check'\"\r\n            >查看</a\r\n          >\r\n\r\n          <a-divider type=\"vertical\" />\r\n\r\n          <a-popconfirm\r\n            title=\"确定删除吗?\"\r\n            @confirm=\"() => handleDelete(record.id)\"\r\n          >\r\n            <a>删除</a>\r\n          </a-popconfirm>\r\n        </div>\r\n      </span>\r\n    </a-table>\r\n    <!-- 表格end -->\r\n    <a-button style=\"height: 40px; width: 120px\" @click=\"batchDel\"\r\n      >删除</a-button\r\n    >\r\n\r\n    <editionModal ref=\"detailForm\" @ok=\"searchQuery\" />\r\n    <addModule ref=\"modalForm\" @ok=\"searchQuery\" />\r\n  </a-card>\r\n</template>\r\n\r\n<script>\r\nimport \"@/assets/less/TableExpand.less\";\r\nimport ATextarea from \"ant-design-vue/es/input/TextArea\";\r\nimport AInput from \"ant-design-vue/es/input/Input\";\r\nimport { JeecgListMixin } from \"@/mixins/JeecgListMixin\";\r\nimport { mixinDevice } from \"@/utils/mixin\";\r\nimport moment from \"moment\";\r\nimport axios from \"axios\";\r\nimport JDictSelectTag from \"@/components/dict/JDictSelectTag.vue\";\r\nimport { getRoleList } from \"@/api/manage\";\r\nimport addModule from \"./module/zbjcaddModal\";\r\nimport editionModal from \"./module/zbjceditionModal\";\r\nexport default {\r\n  name: \"cblb\",\r\n  mixins: [JeecgListMixin, mixinDevice],\r\n  components: {\r\n    AInput,\r\n    ATextarea,\r\n    JDictSelectTag,\r\n    addModule,\r\n    editionModal,\r\n  },\r\n  data() {\r\n    return {\r\n      visibleCreateModal: false,\r\n      visible: false,\r\n      labelCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 5 },\r\n      },\r\n      wrapperCol: {\r\n        xs: { span: 24 },\r\n        sm: { span: 12 },\r\n      },\r\n      form: null,\r\n      mdl: {},\r\n\r\n      // 高级搜索 展开/关闭\r\n      advanced: true,\r\n      // 查询参数\r\n      queryParam: {},\r\n      // 表头\r\n      columns: [\r\n        {\r\n          title: \"任务编号\",\r\n          dataIndex: \"checkTaskNo\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"执行时间\",\r\n          dataIndex: \"checkTime\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"受检单位\",\r\n          dataIndex: \"checkDept\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"检查方式\",\r\n          dataIndex: \"checkWay_dictText\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"检查状态\",\r\n          dataIndex: \"checkStatus_dictText\",\r\n          align: \"center\",\r\n        },\r\n        {\r\n          title: \"操作\",\r\n          dataIndex: \"action\",\r\n          width: \"140px\",\r\n          scopedSlots: { customRender: \"action\" },\r\n        },\r\n      ],\r\n      url: {\r\n        list: \"/southCheckTask/list\",\r\n        delete: \"/southCheckTask/delete\",\r\n        deleteBatch: \"/southCheckTask/deleteBatch\",\r\n      },\r\n      selectedRowKeys: [],\r\n      selectedRows: [],\r\n    };\r\n  },\r\n  created() {\r\n    getRoleList({ t: new Date() });\r\n  },\r\n  methods: {\r\n    // 执行\r\n    implement(records) {\r\n      this.$refs.modalForm.edit(records);\r\n      // 根据检查方式 显示时间内容\r\n      let time1 = \"\";\r\n      let time2 = \"\";\r\n      if (records.checkWay === \"Message\") {\r\n        time1 = \"发文时间\";\r\n        time2 = \"回执时间\";\r\n      } else if (records.checkWay === \"View\") {\r\n        time1 = \"呼出时间\";\r\n        time2 = \"到位时间\";\r\n      } else {\r\n        time1 = \"下发时间\";\r\n        time2 = \"回执时间\";\r\n      }\r\n      this.$refs.modalForm.time1 = time1;\r\n      this.$refs.modalForm.time2 = time2;\r\n\r\n      this.$refs.modalForm.title = \"执行\";\r\n      this.$refs.modalForm.taskId = records.id; //当前任务项id\r\n      this.$refs.modalForm.checkWay = records.checkWay; //检查方式\r\n      this.$refs.modalForm.disableSubmit = false;\r\n    },\r\n\r\n    // 查看\r\n    look(id) {\r\n      this.$router.push(`/zbtest/zbjcLook/` + id);\r\n    },\r\n    //添加\r\n    add(records) {\r\n      console.log(records);\r\n      this.$router.push(`/zbtest/zbjcAdd`);\r\n    },\r\n    // 编辑\r\n    handleEdit(record) {\r\n      this.$refs.detailForm.edit(record);\r\n      this.$refs.detailForm.title = \"编辑内容\";\r\n      this.$refs.detailForm.disableSubmit = false;\r\n    },\r\n\r\n    handleOk() {},\r\n\r\n    //添加逻辑\r\n    handleModalVisible(isVisible) {\r\n      this.visibleCreateModal = isVisible;\r\n    },\r\n    handleCreateModalOk() {\r\n      this.createForm.validateFields((err, fieldsValue) => {\r\n        if (err) {\r\n          return;\r\n        }\r\n        const description = this.createForm.getFieldValue(\"description\");\r\n        axios\r\n          .post(\"/saveRule\", {\r\n            desc: description,\r\n          })\r\n          .then((res) => {\r\n            this.createForm.resetFields();\r\n            this.visibleCreateModal = false;\r\n            this.loadRuleData();\r\n          });\r\n      });\r\n    },\r\n    handleCreateModalCancel() {\r\n      this.visibleCreateModal = false;\r\n    },\r\n\r\n    onChange(row) {\r\n      this.selectedRowKeys = row.selectedRowKeys;\r\n      this.selectedRows = row.selectedRows;\r\n      console.log(this.$refs.table);\r\n    },\r\n    toggleAdvanced() {\r\n      this.advanced = !this.advanced;\r\n    },\r\n\r\n    resetSearchForm() {\r\n      this.queryParam = {\r\n        date: moment(new Date()),\r\n      };\r\n    },\r\n  },\r\n  watch: {\r\n    $route: function (newVal, oldVal) {\r\n      this.searchQuery();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.from-item {\r\n  margin-left: 10px;\r\n}\r\n</style>"]}]}